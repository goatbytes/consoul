{
  "created_at": "2025-11-14T19:08:48.609354",
  "updated_at": "2025-11-15T07:28:05.188505Z",
  "id": "SOUL-101",
  "uuid": "4e1099ae-d38c-40e6-82d4-96d4eca1ee52",
  "title": "Implement read_url tool using Jina AI Reader",
  "description": "**As a** Consoul user\n**I want** to read and convert web pages to LLM-ready markdown\n**So that** I can get full content from URLs found via web_search and analyze documentation, articles, and web pages\n\n**Context:**\nResearch completed in docs/research/read_url_tool_research.md shows Jina AI Reader is the best solution for URL-to-markdown conversion. It provides:\n- Zero configuration (no API key needed for 20 RPM)\n- LLM-optimized markdown output\n- Fast response times (~2s)\n- JavaScript rendering support\n- Free tier: 20 RPM no-auth, 500 RPM with free API key\n\nThis tool perfectly complements web_search (SOUL-99, SOUL-100):\n1. web_search finds URLs\n2. read_url fetches full content from those URLs\n\n**Technical Notes:**\n- Primary: Jina AI Reader (https://r.jina.ai/{url})\n- Fallback: trafilatura (already pip installed)\n- Pattern: Follow web_search implementation (src/consoul/ai/tools/implementations/web_search.py)\n- Config: src/consoul/config/models.py - Add ReadUrlToolConfig\n- Implementation: src/consoul/ai/tools/implementations/read_url.py\n- Security: URL validation to prevent SSRF (block localhost, private IPs)\n- Risk Level: SAFE (read-only operation)\n- Reference: docs/research/read_url_tool_research.md\n\nDependencies:\n- requests library (already installed)\n- trafilatura (pip install trafilatura - already installed)\n\n**Acceptance Criteria:**\n\n**Given** I have a publicly accessible URL\n**When** I call read_url(\"https://goatbytes.io/about\")\n**Then** I receive clean markdown content of the page\n\n**Given** Jina AI Reader is rate limited or unavailable\n**When** I call read_url with enable_fallback=true\n**Then** trafilatura is used automatically with logging\n\n**Given** I provide a localhost or private network URL\n**When** I call read_url(\"http://localhost:8000\")\n**Then** I receive ToolExecutionError with message \"Cannot fetch localhost URLs\"\n\n**Given** I have a Jina API key configured\n**When** I call read_url multiple times\n**Then** requests use the API key for higher rate limits (500 RPM)\n\n**Testing Considerations:**\n- Mock Jina API responses in unit tests\n- Test fallback to trafilatura\n- Test URL validation (localhost, private IPs, invalid schemes)\n- Test timeout handling\n- Test with various URL types (HTML, GitHub, docs pages)\n- Manual testing with actual URLs\n\n**Implementation Hints:**\n1. Create ReadUrlToolConfig in config/models.py:\n   - jina_api_key: str | None (optional)\n   - timeout: int (default 10s)\n   - enable_fallback: bool (default true)\n   - max_length: int (default 50000 chars)\n\n2. Implement read_url.py following web_search.py pattern:\n   - _validate_url(url) - Security checks\n   - _read_with_jina(url) - Primary method\n   - _read_with_trafilatura(url) - Fallback method\n   - read_url(url, use_fallback) - Main @tool function\n\n3. URL validation:\n   - Must be http/https\n   - Block localhost, 127.0.0.1, 0.0.0.0\n   - Block 192.168.x.x, 10.x.x.x, 172.16.x.x\n\n4. Register in TUI (src/consoul/tui/app.py):\n   - Import read_url and set_read_url_config\n   - Configure from profile settings\n   - Register with RiskLevel.SAFE, tags: [\"web\", \"readonly\", \"content\"]\n\n5. Documentation (docs/tools.md):\n   - Add read_url section with examples\n   - Show Jina vs trafilatura comparison\n   - Document use cases with web_search\n   - Add configuration examples\n\nFiles to create/modify:\n- src/consoul/config/models.py (add ReadUrlToolConfig)\n- src/consoul/ai/tools/implementations/read_url.py (new file)\n- src/consoul/ai/tools/implementations/__init__.py (exports)\n- src/consoul/ai/tools/__init__.py (exports)\n- src/consoul/tui/app.py (registration)\n- docs/tools.md (documentation)",
  "status": "done",
  "type": "feature",
  "priority": "high",
  "labels": [
    "enhancement",
    "tools",
    "web",
    "ai"
  ],
  "assignee": "jared@goatbytes.io",
  "reporter": "jared@goatbytes.io",
  "blocked_by": [],
  "blocks": [],
  "comments": [],
  "attachments": [],
  "attachment_count": 0,
  "comment_count": 0,
  "story_points": 5,
  "order": 0,
  "custom_fields": {},
  "_archive_metadata": {
    "archived_at": "2025-11-14T23:28:30.755514",
    "archived_from_status": "done",
    "archived_by": "gira-cli"
  }
}