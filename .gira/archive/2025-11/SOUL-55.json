{
  "created_at": "2025-01-10T00:00:00",
  "updated_at": "2025-11-11T04:27:46.249041Z",
  "id": "SOUL-55",
  "uuid": "10c56765-ad42-47ce-9fc5-734e5073ae8a",
  "title": "Create ContextualTopBar widget as command center",
  "description": "# Create ContextualTopBar Widget as Command Center\n\n## User Story\n**As a** Consoul user\n**I want** a visual top bar showing status and quick actions\n**So that** I can easily access search, settings, model info, and other common actions without memorizing keyboard shortcuts\n\n## Description\n\nCreate a ContextualTopBar widget that serves as the command center for the Consoul TUI. This replaces the default Textual Header with a custom, context-aware top bar that provides three key zones: branding/status, quick actions, and system information.\n\nReference implementation exists in Gira TUI (`gira/tui/widgets/contextual_top_bar.py`) which demonstrates the pattern of three-zone layout with responsive design.\n\n## Context\n\nCurrently, Consoul uses the default Textual Header widget which only shows the app title. A custom top bar would provide:\n\n1. **Better UX** - Visual access to common actions (search, settings, help, theme)\n2. **Status Visibility** - Show current model, profile, conversation count, streaming status\n3. **Quick Access** - Dedicated UI for features planned in SOUL-44, SOUL-45, SOUL-47, SOUL-48, SOUL-49\n4. **Professional Appearance** - More polished than basic header\n5. **Context Awareness** - Display relevant information based on current state\n\nThe top bar should integrate with existing widgets and serve as the foundation for:\n- Search bar (SOUL-45)\n- Model/profile selection (SOUL-44)\n- Settings button (SOUL-47)\n- Help button (SOUL-48)\n- Theme selector (SOUL-49)\n\n**Key Reference:**\n- `gira/tui/widgets/contextual_top_bar.py` - Three-zone responsive pattern\n- `src/consoul/tui/app.py:251` - Current Header usage\n- Textual docs: https://textual.textualize.io/widgets/header/\n\n## Technical Notes\n\n**File to Create:** `src/consoul/tui/widgets/contextual_top_bar.py`\n\n**Three-Zone Layout:**\n1. **Left Zone (Brand/Status)**: App name/logo, current conversation indicator\n2. **Center Zone (Actions)**: Search bar, quick action buttons  \n3. **Right Zone (System Info)**: Model name, profile, token count, status indicators\n\n**Key Features:**\n- Dock to top (replaces Header)\n- Fixed height (3 lines)\n- Responsive design (adapt to terminal width)\n- Custom messages for user interactions\n- Reactive properties for status updates\n- Integration points for search, settings, etc.\n\n**Integration Points:**\n- Replace `Header()` in `app.py:251`\n- Listen for ContextualTopBar messages in ConsoulApp\n- Update reactive properties from app state\n- Wire search bar to conversation search\n- Add dropdown triggers for model/profile selection\n\n**Note:** This ticket provides the foundation widget. Actual search functionality (SOUL-45), model selection (SOUL-44), settings UI (SOUL-47), help modal (SOUL-48), and theme switching (SOUL-49) will integrate with this top bar in their respective implementations.\n\n**Don't implement:**\n- Full search functionality (SOUL-45 scope)\n- Model selection modal (SOUL-44 scope)\n- Settings screen (SOUL-47 scope)\n- Help modal content (SOUL-48 scope)\n- Theme switching logic (SOUL-49 scope)\n\n**Do implement:**\n- Top bar structure and layout\n- Placeholder/trigger areas for above features\n- Message passing for user interactions\n- Reactive state display (model, profile, status)\n- Responsive design foundation\n\n## Acceptance Criteria\n\n**Given** the TUI is launched\n**When** the app renders\n**Then** the ContextualTopBar displays at the top with three zones\n\n**Given** I'm viewing the main chat screen\n**When** I look at the top bar  \n**Then** I see current model name, profile, and conversation count\n\n**Given** the AI is streaming a response\n**When** streaming is active\n**Then** the top bar shows a streaming indicator/status\n\n**Given** I'm on a narrow terminal (< 100 columns)\n**When** the top bar renders\n**Then** it adapts by hiding non-essential elements\n\n**Given** the top bar has quick action buttons\n**When** I click settings/help/theme buttons\n**Then** appropriate message events are posted\n\n## Testing Considerations\n\n- Test three-zone layout renders correctly\n- Test reactive property updates (model change, streaming toggle)\n- Verify responsive behavior at different terminal widths\n- Test message posting for user interactions\n- Verify CSS styling matches design\n- Test integration with existing app state\n- Mock different states (streaming, idle, error)\n\n## Files to Create/Modify\n\n**New Files:**\n- src/consoul/tui/widgets/contextual_top_bar.py\n\n**Modified Files:**\n- src/consoul/tui/widgets/__init__.py (export ContextualTopBar)\n- src/consoul/tui/app.py (replace Header with ContextualTopBar)\n- src/consoul/tui/css/main.tcss (add ContextualTopBar styles)\n\n## Dependencies\n\n**Prerequisites:**\n- None (foundation widget)\n\n**Blocks:**\n- SOUL-44 (needs top bar for model dropdown)\n- SOUL-45 (needs top bar for search input)\n- SOUL-47 (needs top bar for settings button)\n- SOUL-48 (needs top bar for help button)\n- SOUL-49 (needs top bar for theme selector)",
  "status": "done",
  "type": "feature",
  "priority": "high",
  "labels": [
    "tui",
    "widgets",
    "ux-improvement"
  ],
  "assignee": "jared@goatbytes.io",
  "reporter": "jared@goatbytes.io",
  "epic_id": "EPIC-003",
  "blocked_by": [],
  "blocks": [
    "SOUL-44",
    "SOUL-45",
    "SOUL-47",
    "SOUL-48",
    "SOUL-49"
  ],
  "comments": [],
  "attachments": [],
  "attachment_count": 0,
  "comment_count": 0,
  "story_points": 8,
  "order": 0,
  "custom_fields": {},
  "_archive_metadata": {
    "archived_at": "2025-11-14T23:28:33.918722",
    "archived_from_status": "done",
    "archived_by": "gira-cli"
  }
}