{
  "created_at": "2025-11-23T19:51:01.246742",
  "updated_at": "2025-11-29T23:32:42.087638Z",
  "id": "SOUL-157",
  "uuid": "09f53ca1-1513-4009-828d-5a7ff76c6554",
  "title": "Add tool status indicator to TUI top bar",
  "description": "**As a** Consoul TUI user\n**I want** to see which tools are enabled in the top bar\n**So that** I know the AI's current capabilities at a glance\n\n**Context:**\nUsers have no visibility into which tools are currently registered. A simple indicator in the top bar shows enabled tool count and provides awareness of the current security posture.\n\nSimilar to status indicators in other TUI apps (tmux status bar, vim mode indicator).\n\n**Technical Notes:**\n- src/consoul/tui/widgets/top_bar.py - Add tool count to ContextualTopBar widget\n- Query tool_registry.list_tools(enabled_only=True) to get count\n- Display format: \"Tools: 10/13\" (enabled/total)\n- Update reactively when tools change (if runtime toggling implemented)\n- Consider color coding:\n  - Green: Only SAFE tools\n  - Yellow: CAUTION included\n  - Red: DANGEROUS included\n  - Gray: No tools\n- Reference Textual reactive patterns for live updates\n\n**Acceptance Criteria:**\n\n**Given** TUI is running with 10 tools enabled\n**When** I look at the top bar\n**Then** I see \"Tools: 10/13\" indicator\n\n**Given** TUI is running with all tools enabled\n**When** I look at the top bar\n**Then** I see \"Tools: 13/13\"\n\n**Given** TUI is running in chat-only mode (no tools)\n**When** I look at the top bar\n**Then** I see \"Tools: 0\" or \"No Tools\"\n\n**Given** enabled tools include DANGEROUS risk level\n**When** I look at the top bar\n**Then** the indicator is colored red (warning)\n\n**Testing Considerations:**\n- Test with different tool counts\n- Test with no tools (0)\n- Test with all tools (13)\n- Verify color coding matches risk levels\n- Test reactive updates (if applicable)\n\n**Implementation Hints:**\n1. Add to ContextualTopBar widget:\n   ```python\n   @property\n   def tool_status(self) -> str:\n       if not self.app.tool_registry:\n           return \"No Tools\"\n       enabled = self.app.tool_registry.list_tools(enabled_only=True)\n       total = 13  # Or query all registered tools\n       return f\"Tools: {len(enabled)}/{total}\"\n   ```\n2. Determine color based on highest risk level present\n3. Add click handler to show detailed tool list (Phase 2.2)\n4. Use Textual Static widget for display\n5. Keep it compact (< 15 chars)\n\n**Dependencies:**\n- SOUL-154 (Use allowed_tools for registration)",
  "status": "done",
  "type": "feature",
  "priority": "medium",
  "labels": [
    "tui",
    "tools",
    "ux-improvement"
  ],
  "assignee": "jared@goatbytes.io",
  "reporter": "jared@goatbytes.io",
  "blocked_by": [],
  "blocks": [],
  "comments": [
    {
      "created_at": "2025-11-23T22:11:27.784392",
      "updated_at": "2025-11-23T22:11:27.784393",
      "id": "20251123221127-8ab48d08",
      "ticket_id": "SOUL-157",
      "author": "jared@goatbytes.io",
      "content": "\u2705 Tool status icon button implemented (commit 201e124).\n\nIcon shows in top bar status zone alongside action buttons:\n- \ud83d\udd12 = No tools (0 enabled)\n- \ud83d\udee0\ufe0f = Safe tools only\n- \ud83d\udfe1 = Caution-level tools\n- \ud83d\udd34 = Dangerous tools\n\nClick handler posts ToolsRequested message, ready for SOUL-158 implementation.\n\nNext: Implement tool manager screen (SOUL-158) to show details when icon is clicked.",
      "edited": false,
      "edit_count": 0,
      "is_ai_generated": false,
      "attachments": [],
      "attachment_count": 0
    },
    {
      "created_at": "2025-11-29T15:32:40.233033",
      "updated_at": "2025-11-29T15:32:40.233034",
      "id": "20251129153240-b55ca989",
      "ticket_id": "SOUL-157",
      "author": "jared@goatbytes.io",
      "content": "Code review completed. Tool status indicator successfully implemented in TUI top bar:\n\n\u2705 Implementation (2ee0939 + 201e124 + f881271):\n- Added compact icon button to top bar status zone\n- Risk-based icon selection:\n  * \ud83d\udd12 = No tools (0 enabled)\n  * \ud83d\udee0\ufe0f = Safe tools only\n  * \ud83d\udfe1 = Caution-level tools\n  * \ud83d\udd34 = Dangerous tools\n- Reactive properties: tools_enabled, tools_total, highest_risk\n- Click handler posts ToolsRequested message\n\n\u2705 Layout Optimization:\n- Initially text-based (caused overflow)\n- Refactored to icon button (compact, no overflow)\n- Moved to brand zone to prevent button conflicts\n- Matches existing action button pattern\n\n\u2705 Integration:\n- Properly integrated with tool registry\n- Updates based on enabled tools\n- Ready for SOUL-158 (Tool Manager screen)\n- Follows Textual reactive patterns\n\n\u2705 UX:\n- At-a-glance tool status visibility\n- Color-coded risk indication\n- Minimal width (single emoji)\n- Clickable for details (future enhancement)\n\nAll acceptance criteria met. Clean implementation. Ready for production.",
      "edited": false,
      "edit_count": 0,
      "is_ai_generated": false,
      "attachments": [],
      "attachment_count": 0
    }
  ],
  "attachments": [],
  "attachment_count": 0,
  "comment_count": 2,
  "story_points": 2,
  "order": 4,
  "custom_fields": {},
  "epic": "EPIC-008",
  "_archive_metadata": {
    "archived_at": "2025-12-03T15:09:13.100444",
    "archived_from_status": "done",
    "archived_by": "gira-cli"
  }
}