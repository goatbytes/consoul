{
  "created_at": "2025-11-13T14:30:42.634613",
  "updated_at": "2025-11-13T22:40:54.985867Z",
  "id": "SOUL-94",
  "uuid": "651d4cad-a0b1-4694-8d02-d3ba3c2ac462",
  "title": "Add code search dependencies (grep-ast, tree-sitter, diskcache)",
  "description": "**As a** Consoul developer\n**I want** grep-ast and tree-sitter dependencies properly installed\n**So that** AST-based code search tools (SOUL-97, SOUL-98) can be implemented\n\n**Context:**\nAST-based code search requires parsing source code into abstract syntax trees. The grep-ast library (used by Aider with 3.4M installs) provides this capability via tree-sitter parsers. These dependencies are foundational for the entire code search epic.\n\n**Decision: Make these CORE dependencies** (not optional extras)\nRationale:\n- Code search is a core Consoul feature (not optional)\n- Adding complexity of optional deps creates confusion\n- Both libraries are mature, stable, MIT-licensed\n- Size impact is minimal (~2MB total)\n- Aider makes them core deps successfully\n\n**Technical Notes:**\n- Add to pyproject.toml [tool.poetry.dependencies] (NOT extras)\n- grep-ast: Provides AST parsing and tag extraction\n- tree-sitter: Provides language-specific parsers\n- Both required for src/consoul/ai/tools/implementations/code_search.py\n- Version guidance: Follow Aider's tested versions\n- Reference: Aider pyproject.toml, grep-ast GitHub\n\n**Acceptance Criteria:**\n\n**Given** I add grep-ast and tree-sitter to pyproject.toml\n**When** I run poetry install\n**Then** both libraries install without version conflicts\n\n**Given** dependencies are installed\n**When** I run: python -c 'from grep_ast import TreeContext; from tree_sitter import Parser'\n**Then** imports succeed without errors\n\n**Given** I run pytest after adding deps\n**When** CI/CD pipeline executes\n**Then** all tests pass and no new failures introduced\n\n**Given** tree-sitter is installed\n**When** I test basic parsing: Parser().set_language(Language('python'))\n**Then** Python parser loads successfully\n\n**Testing Considerations:**\n- Test in clean venv: rm -rf .venv && poetry install\n- Test on CI: Ensure GitHub Actions picks up new deps\n- Test import\n\ns in basic smoke test\n- Verify no conflicts with existing deps (langchain, pydantic, etc.)\n\n**Implementation Hints:**\n\n\nAdd after existing langchain dependencies for organization.\n\nUpdate docs:\n- README.md: Mention code search in features\n- docs/installation.md: Note new dependencies (automatic with poetry)\n\n**Story Points:** 2\n**Labels:** task, dependencies, code-search\n**Blocks:** SOUL-95, SOUL-97, SOUL-98 (all depend on these libs)",
  "status": "backlog",
  "type": "task",
  "priority": "high",
  "labels": [],
  "reporter": "jared@goatbytes.io",
  "epic_id": "EPIC-006",
  "blocked_by": [],
  "blocks": [],
  "comments": [],
  "attachments": [],
  "attachment_count": 0,
  "comment_count": 0,
  "order": 0,
  "custom_fields": {}
}