{
  "created_at": "2025-11-23T18:19:24.200737",
  "updated_at": "2025-11-24T03:08:40.514096Z",
  "id": "SOUL-151",
  "uuid": "42262589-bdc8-4f26-abcf-a0969e183a77",
  "title": "Add tool categories and filtering to ToolRegistry",
  "description": "**As a** Consoul SDK user\n**I want** to filter tools by category (file-ops, search, web, etc.)\n**So that** I can easily enable groups of related tools without listing each one\n\n**Context:**\nCurrently, tools are registered with `RiskLevel` (SAFE, CAUTION, DANGEROUS) but not by functional category. When users want to enable \"all file operations\" or \"all search tools\", they must list each tool individually.\n\nAdding categories would enable:\n```python\n# Enable all file operations\nConsoul(tools=\"file-ops\")\n\n# Enable all search tools\nConsoul(tools=\"search\")\n\n# Enable multiple categories\nConsoul(tools=[\"search\", \"web\"])\n\n# Still support risk level filtering\nConsoul(tools=\"safe\")  # All safe tools regardless of category\n```\n\n**Proposed Categories:**\nBased on available tools:\n- **search**: grep_search, code_search, find_references\n- **file-read**: (implicit read tools)\n- **file-edit**: create_file, edit_file_lines, edit_file_search_replace, append_to_file, delete_file\n- **web**: read_url, web_search\n- **execute**: bash_execute\n- **analyze**: analyze_images (if exists)\n- **reference**: wikipedia (if exists)\n\n**Technical Notes:**\n- src/consoul/ai/tools/base.py - Add `ToolCategory` enum\n- src/consoul/ai/tools/base.py - Add `category` field to `ToolMetadata`\n- src/consoul/sdk.py:239-305 - Update tool registration to include categories\n- src/consoul/ai/tools/registry.py - Add `get_tools_by_category()` method\n- Categories should be optional (backward compatible)\n- Tools can have multiple categories (use list or set)\n\n**Acceptance Criteria:**\n\n**Given** I want all search tools\n**When** I initialize `Consoul(tools=\"search\")`\n**Then** grep_search, code_search, and find_references are registered\n\n**Given** I want file editing tools\n**When** I initialize `Consoul(tools=\"file-edit\")`\n**Then** all file operation tools are registered\n\n**Given** I want multiple categories\n**When** I initialize `Consoul(tools=[\"search\", \"web\"])`\n**Then** all search and web tools are registered\n\n**Given** I combine categories with specific tools\n**When** I initialize `Consoul(tools=[\"search\", \"bash\"])`\n**Then** all search tools plus bash_execute are registered\n\n**Given** I request an invalid category\n**When** I initialize `Consoul(tools=\"invalid-category\")`\n**Then** I get a clear error listing valid categories\n\n**Testing Considerations:**\n- Test each category filter\n- Test multiple categories\n- Test category + specific tools\n- Test category + risk level filter\n- Test invalid category names\n- Test backward compatibility (no categories)\n- Verify all tools have appropriate categories\n- Unit tests for `get_tools_by_category()`\n\n**Implementation Hints:**\n1. Define `ToolCategory` enum in `base.py`:\n   ```python\n   class ToolCategory(str, Enum):\n       SEARCH = \"search\"\n       FILE_EDIT = \"file-edit\"\n       WEB = \"web\"\n       EXECUTE = \"execute\"\n       # etc.\n   ```\n2. Add `categories: list[ToolCategory] | None` to `ToolMetadata`\n3. Update tool registrations to include categories\n4. Add `ToolRegistry.get_tools_by_category(category: str) -> list[BaseTool]`\n5. Update SDK `_setup_tools()` to handle category strings\n6. Consider allowing custom categories for discovered tools\n7. Document category system in tool docstrings\n\n**Example Tool Registration:**\n```python\nself.registry.register(\n    grep_search,\n    risk_level=RiskLevel.SAFE,\n    tags=[\"search\"],\n    categories=[ToolCategory.SEARCH],\n)\n```\n\n**Dependencies:**\n- Should be implemented after SOUL-149 (flexible tool specification)\n- Can be implemented before or after SOUL-150 (discover_tools)",
  "status": "done",
  "type": "feature",
  "priority": "medium",
  "labels": [
    "tools",
    "enhancement",
    "sdk"
  ],
  "reporter": "jared@goatbytes.io",
  "blocked_by": [],
  "blocks": [],
  "comments": [],
  "attachments": [],
  "attachment_count": 0,
  "comment_count": 0,
  "story_points": 3,
  "order": 0,
  "custom_fields": {}
}