{
  "created_at": "2025-11-08T16:23:27.227871",
  "updated_at": "2025-11-11T04:27:46.251949Z",
  "id": "SOUL-18",
  "uuid": "7580a0fc-a04f-48c7-864f-910c6b876d50",
  "title": "Add profile system with default profiles",
  "description": "# Add Profile System with Default Profiles\n\n## User Story\n**As a** user\n**I want** pre-configured profiles for common use cases\n**So that** I can quickly switch between different AI behaviors without manual configuration\n\n## Description\nImplement a profile system that allows users to switch between different configurations using the `--profile` flag. Include 4 built-in profiles optimized for common scenarios, with the ability for users to define custom profiles in their config files.\n\n## Technical Notes\n\n### Built-in Profiles\n\n**File: `consoul/config/profiles.py`**\n\n1. **default**\n   - Provider: Anthropic Claude 3.5 Sonnet\n   - Temperature: 1.0\n   - Max tokens: 4096\n   - Balanced for general use\n\n2. **code-review**\n   - Provider: Anthropic Claude 3.5 Sonnet\n   - Temperature: 0.3 (lower for consistency)\n   - Max tokens: 8192 (longer responses)\n   - Focused, analytical, detailed feedback\n\n3. **creative**\n   - Provider: Anthropic Claude 3.5 Sonnet\n   - Temperature: 1.5 (higher for creativity)\n   - Max tokens: 4096\n   - Exploratory, brainstorming, ideas\n\n4. **fast**\n   - Provider: Anthropic Claude 3.5 Haiku\n   - Temperature: 1.0\n   - Max tokens: 2048\n   - Quick responses, lower cost\n\n### Profile Loading Logic\n\n```python\ndef get_builtin_profiles() -> Dict[str, ProfileConfig]:\n    \"\"\"Return dictionary of built-in profiles.\"\"\"\n\ndef load_profile(name: str, config: ConsoulConfig) -> ProfileConfig:\n    \"\"\"Load a profile by name from config or builtins.\"\"\"\n    # 1. Check user-defined profiles in config\n    # 2. Fall back to built-in profiles\n    # 3. Raise error if profile doesn't exist\n\ndef merge_profile_with_overrides(\n    profile: ProfileConfig,\n    cli_overrides: dict\n) -> ProfileConfig:\n    \"\"\"Merge CLI overrides into profile.\"\"\"\n    # CLI args like --model, --temperature override profile\n```\n\n### CLI Integration\n\n- `--profile <name>` flag to select profile\n- `--list-profiles` to show available profiles\n- CLI overrides apply on top of profile settings\n- Example: `consoul --profile code-review --temperature 0.5`\n\n### Profile Definition in YAML\n\n```yaml\n# Custom profile in config.yaml\nprofiles:\n  my-custom:\n    model:\n      provider: openai\n      model: gpt-4-turbo\n      temperature: 0.7\n    conversation:\n      save_history: true\n    context:\n      max_context_tokens: 8192\n\n  # Override built-in profile\n  default:\n    model:\n      provider: openai\n      model: gpt-4o\n```\n\n## Acceptance Criteria\n\n**Given** no profile specified\n**When** running Consoul\n**Then** use the \"default\" profile automatically\n\n**Given** `--profile code-review` flag\n**When** running Consoul\n**Then** load code-review profile with temperature 0.3\n\n**Given** `--profile creative` flag\n**When** running Consoul\n**Then** load creative profile with temperature 1.5\n\n**Given** `--profile fast` flag\n**When** running Consoul\n**Then** load fast profile using Claude Haiku model\n\n**Given** custom profile defined in config.yaml\n**When** using `--profile my-custom`\n**Then** load the custom profile from config\n\n**Given** `--profile code-review --temperature 0.5`\n**When** running Consoul\n**Then** use code-review profile but override temperature to 0.5\n\n**Given** `--list-profiles` flag\n**When** running Consoul\n**Then** display all available profiles (built-in + custom)\n\n**Given** non-existent profile name\n**When** using `--profile nonexistent`\n**Then** show error listing available profiles\n\n## Testing Considerations\n\n- Test each built-in profile loads correctly\n- Test custom profile loading from config\n- Test profile override in config.yaml\n- Test CLI override on top of profile\n- Test profile listing functionality\n- Test error handling for missing profiles\n- Test profile merging logic\n\n## Implementation Hints\n\n1. Define built-in profiles as Python dictionaries\n2. Convert to ProfileConfig using Pydantic\n3. Allow config.yaml to override built-in profiles\n4. CLI overrides are applied last in precedence chain\n5. Profile listing should show description for each\n6. Consider caching loaded profiles for performance\n7. Add helpful error messages with \"Did you mean?\" suggestions\n\n## Files to Create/Modify\n\n- `consoul/config/profiles.py` - Profile definitions\n- `consoul/cli.py` - Add `--profile` and `--list-profiles` flags\n- `consoul/config/loader.py` - Integrate profile loading\n- `tests/config/test_profiles.py` - Profile tests\n- `docs/profiles.md` - Profile documentation (if requested)\n\n## Profile Descriptions\n\nInclude these descriptions in the profile objects:\n\n- **default**: \"Balanced profile for general-purpose use with Claude 3.5 Sonnet\"\n- **code-review**: \"Focused, analytical profile optimized for code review and technical feedback\"\n- **creative**: \"High-creativity profile for brainstorming and exploratory conversations\"\n- **fast**: \"Quick responses with Claude 3.5 Haiku for cost-effective interactions\"\n\n## References\n\n- [AWS CLI Profiles](https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-profiles.html)\n- [Anthropic Model Comparison](https://docs.anthropic.com/en/docs/about-claude/models)\n- [Configuration Best Practices](https://clig.dev/#configuration)",
  "status": "done",
  "type": "feature",
  "priority": "medium",
  "labels": [
    "config",
    "enhancement",
    "profiles"
  ],
  "assignee": "jared@goatbytes.io",
  "reporter": "jared@goatbytes.io",
  "epic_id": "EPIC-002",
  "blocked_by": [],
  "blocks": [],
  "comments": [],
  "attachments": [],
  "attachment_count": 0,
  "comment_count": 0,
  "story_points": 5,
  "order": 0,
  "custom_fields": {}
}