{
  "created_at": "2025-11-08T16:27:56.974893",
  "updated_at": "2025-11-09T02:14:30.081063Z",
  "id": "SOUL-20",
  "uuid": "158b4a92-c2d4-4e60-912c-6d333cc8be42",
  "title": "Setup LangChain provider initialization",
  "description": "## User Story\nAs a Consoul user, I want the CLI to initialize AI providers dynamically so that I can use different LLM services without changing code.\n\n## Description\nImplement the provider factory pattern using LangChain's `init_chat_model()` function to dynamically initialize chat models based on user configuration. This provides a unified interface for all AI providers while handling provider-specific initialization, validation, and error handling.\n\n## Technical Notes\n- **File**: `src/consoul/ai/providers.py`\n- **LangChain Docs**: https://python.langchain.com/docs/integrations/chat/\n- **Key Function**: `langchain_core.language_models.chat_models.init_chat_model()`\n- Uses provider detection from model string (e.g., \"gpt-4\" → OpenAI, \"claude-3\" → Anthropic)\n- Validates API keys from environment variables or config\n- Handles missing dependencies gracefully with helpful error messages\n\n## Acceptance Criteria\n- **Given** a model string and optional parameters\n- **When** `init_chat_model()` is called\n- **Then** the correct provider is initialized with validated credentials\n\n- **Given** missing API key or dependencies\n- **When** initialization is attempted\n- **Then** a clear error message guides the user to fix the issue\n\n- **Given** an invalid model name\n- **When** initialization is attempted\n- **Then** a helpful error suggests valid model names\n\n## Testing Considerations\n- Mock environment variables for API keys\n- Test provider detection logic with various model strings\n- Verify error handling for missing dependencies (langchain-openai, langchain-anthropic, etc.)\n- Test fallback behavior when credentials are missing\n\n## Implementation Hints\n```python\nfrom langchain_core.language_models.chat_models import init_chat_model\n\ndef get_chat_model(model: str, **kwargs):\n    \"\"\"Initialize chat model with provider detection.\"\"\"\n    try:\n        return init_chat_model(model, **kwargs)\n    except ImportError as e:\n        # Suggest: pip install langchain-{provider}\n        raise\n    except ValueError as e:\n        # Invalid API key or model name\n        raise\n```\n\n## Dependencies\nNone (foundational ticket)\n\n## Story Points\n5 - Moderate complexity with error handling and validation",
  "status": "done",
  "type": "feature",
  "priority": "high",
  "labels": [
    "ai",
    "providers",
    "langchain"
  ],
  "reporter": "jared@goatbytes.io",
  "epic_id": "EPIC-002",
  "blocked_by": [],
  "blocks": [],
  "comments": [],
  "attachments": [],
  "attachment_count": 0,
  "comment_count": 0,
  "story_points": 5,
  "order": 0,
  "custom_fields": {}
}