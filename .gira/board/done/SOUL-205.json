{
  "created_at": "2025-12-02T11:05:52.141301",
  "updated_at": "2025-12-02T22:51:40.171725Z",
  "id": "SOUL-205",
  "uuid": "11e18575-2fa8-4604-8abb-ce53d79a9d0f",
  "title": "Add --stdin flag to consoul ask/chat commands for pipeline integration",
  "description": "**As a** Consoul user\n**I want** to pipe command output to consoul via --stdin flag\n**So that** I can integrate AI analysis into Unix pipelines seamlessly\n\n**Context:**\nThe documentation (docs/user-guide/getting-started.md) extensively references using --stdin to pipe command output to Consoul, but this flag doesn't exist. Examples include:\n\n- Line 74: command | consoul chat --stdin \"Analyze this output\"\n- Line 212: git diff --staged | consoul chat --stdin \"Review these changes\"\n- Line 222: pytest 2>&1 | consoul chat --stdin \"Why are these tests failing?\"\n- Line 225: python app.py 2>&1 | consoul chat --stdin \"What's causing this error?\"\n\nThis is a critical UX gap for Unix pipeline integration patterns.\n\n**Similar Tool Implementations:**\n- aider: Reads from stdin when no files specified\n- llm: cat file.txt | llm \"summarize this\"\n- sgpt: --stdin flag for piping input\n- glow: cat README.md | glow - (dash pattern)\n\n**Proposed Implementation:**\n\nAdd --stdin flag to both consoul ask and consoul chat.\n\n**Acceptance Criteria:**\n- echo \"test\" | consoul ask --stdin \"What is this?\" includes stdin in context\n- git diff | consoul ask --stdin \"Review this\" receives both diff and question\n- consoul ask --stdin \"Analyze\" < file.txt reads from shell redirection\n- Empty stdin with --stdin shows clear error message\n- Combining --stdin with --attach works correctly\n- Interactive chat includes stdin in first message only\n\n**Story Points:** 2",
  "status": "done",
  "type": "feature",
  "priority": "medium",
  "labels": [],
  "assignee": "jared@goatbytes.io",
  "reporter": "jared@goatbytes.io",
  "blocked_by": [],
  "blocks": [],
  "comments": [
    {
      "created_at": "2025-12-02T11:16:05.748786",
      "updated_at": "2025-12-02T11:16:05.748787",
      "id": "20251202111605-3d7c081e",
      "ticket_id": "SOUL-205",
      "author": "jared@goatbytes.io",
      "content": "Successfully implemented --stdin flag for Unix pipeline integration!\n\n## Implementation Summary\n\n### Files Created:\n- `src/consoul/cli/stdin_reader.py` - Utility module with read_stdin() and format_stdin_message()\n- `tests/cli/test_stdin.py` - Comprehensive test suite (12 test cases)\n\n### Files Modified:\n- `src/consoul/__main__.py` - Added --stdin flag to both ask and chat commands\n- `docs/user-guide/cli-chat.md` - Added comprehensive stdin documentation section\n\n### Features Implemented:\nâœ… `--stdin` flag for `consoul ask` command\nâœ… `--stdin` flag for `consoul chat` command (loads for first message only)\nâœ… XML-style formatting (`<stdin>...</stdin>`) for context clarity\nâœ… Size limit enforcement (1MB default)\nâœ… UTF-8 validation with helpful error messages\nâœ… TTY detection (no read from interactive terminal)\nâœ… Graceful error handling (empty stdin, binary content, size limits)\nâœ… Works with shell redirection (`< file.txt`)\nâœ… Works with pipes (`command |`)\nâœ… Combines correctly with other flags (--tools, --model, --attach, etc.)\n\n### Testing Results:\nAll manual tests passing:\n- âœ… `echo \"test\" | consoul ask --stdin \"What is this?\"` - Works\n- âœ… `git status | consoul ask --stdin \"Summarize changes\"` - Works  \n- âœ… `consoul ask --stdin \"Question\"` (no stdin) - Clear error message\n- âœ… `consoul ask --stdin \"Analyze\" < README.md` - Shell redirection works\n- âœ… `ls -la | consoul ask --stdin \"What files?\"` - Complex output works\n\n## Usage Examples Added to Docs:\n- Basic pipeline integration\n- Git workflow integration  \n- Log analysis\n- Error debugging\n- Data transformation\n- Performance analysis\n- Security review\n\nAll acceptance criteria met! ðŸŽ‰",
      "edited": false,
      "edit_count": 0,
      "is_ai_generated": false,
      "attachments": [],
      "attachment_count": 0
    }
  ],
  "attachments": [],
  "attachment_count": 0,
  "comment_count": 1,
  "order": 0,
  "custom_fields": {}
}