{
  "created_at": "2025-12-13T20:18:48.126245Z",
  "updated_at": "2025-12-13T12:30:26.161940",
  "id": "SOUL-276",
  "uuid": "7436a396-aecb-456c-a404-d1a60d5da82e",
  "title": "Expose model registry methods in SDK for LLM metadata access",
  "description": "**As a** Consoul SDK user building a web backend or headless application\n**I want** easy access to LLM model metadata (pricing, capabilities, context windows)\n**So that** I can make informed model selection decisions and display accurate cost estimates\n\n**Context:**\nThe new centralized model registry (consoul.registry) provides comprehensive metadata for 1,114+ models via Helicone API integration, plus 21 flagship models with detailed static definitions. However, SDK users currently have limited access to this rich metadata through the SDK interface.\n\nCurrent SDK exposure is minimal:\n- ModelService.list_models() - Returns basic ModelInfo from old catalog\n- ModelService.get_current_model_info() - Returns info for active model only\n- No pricing information exposed\n- No capability queries (vision, tools, reasoning)\n- No provider comparison tools\n\n**Technical Notes:**\n- New registry at src/consoul/registry/ with comprehensive metadata\n- ModelService at src/consoul/sdk/services/model.py:205-263\n- Current catalog at src/consoul/sdk/catalog.py (needs deprecation wrapper)\n- SDK public API at src/consoul/sdk/__init__.py\n- Registry provides: get_model(), get_pricing(), list_models(), get_helicone_pricing()\n- ModelEntry has: metadata (context, capabilities, modality), pricing tiers\n- Need thin wrapper to convert registry types to SDK ModelInfo\n\n**Acceptance Criteria:**\n\n**Given** I'm using Consoul SDK in my application\n**When** I want to list all available models for a provider\n**Then** I can call service.list_available_models(provider=\"anthropic\") and get comprehensive model metadata\n\n**Given** I need pricing information for cost estimation\n**When** I query model pricing via service.get_model_pricing(\"gpt-4o\", tier=\"flex\")\n**Then** I receive accurate per-token costs (input/output/cache)\n\n**Given** I'm building a model selector UI\n**When** I query model capabilities via service.get_model_capabilities(\"claude-sonnet-4-5\")\n**Then** I receive boolean flags (supports_vision, supports_tools, supports_reasoning)\n\n**Given** I need to compare models\n**When** I call service.compare_models([\"gpt-4o\", \"claude-sonnet-4-5\"])\n**Then** I get side-by-side comparison of context, pricing, and capabilities\n\n**Testing Considerations:**\n- Mock registry responses for unit tests\n- Test conversion from registry types to SDK ModelInfo\n- Test Helicone API integration (with caching)\n- Verify backward compatibility with existing ModelService.list_models()\n- Test provider filtering and active_only flags\n- Verify pricing tier selection (standard/flex/batch/priority)\n\n**Implementation Hints:**\n- Add methods to ModelService (src/consoul/sdk/services/model.py):\n  - list_available_models(provider, active_only) -> list[ModelInfo]\n  - get_model_pricing(model_id, tier) -> PricingInfo\n  - get_model_capabilities(model_id) -> ModelCapabilities  \n  - compare_models(model_ids) -> ModelComparison\n- Create SDK-friendly data classes in sdk/models.py:\n  - PricingInfo (input_price, output_price, cache_read, etc.)\n  - ModelCapabilities (vision, tools, reasoning, streaming, etc.)\n  - ModelComparison (comparative table structure)\n- Import from registry: from consoul.registry import get_model, get_pricing, list_models\n- Convert registry.ModelEntry -> sdk.ModelInfo with enhanced data\n- Expose via SDK __init__.py for direct import\n- Update existing list_models() to use registry as backend\n- Consider caching strategy for Helicone API calls",
  "status": "done",
  "type": "feature",
  "priority": "medium",
  "labels": [
    "sdk",
    "registry",
    "ux-improvement"
  ],
  "reporter": "jared@goatbytes.io",
  "blocked_by": [],
  "blocks": [],
  "comments": [
    {
      "created_at": "2025-12-13T12:30:26.161793",
      "updated_at": "2025-12-13T12:30:26.161794",
      "id": "20251213123026-f77f21de",
      "ticket_id": "SOUL-276",
      "author": "jared@goatbytes.io",
      "content": "Implementation complete! \n\n✅ Added SDK-friendly data models:\n- PricingInfo dataclass for tier-specific pricing\n- ModelCapabilities dataclass for capability flags\n- Enhanced ModelInfo with optional pricing/capabilities\n\n✅ Added 4 new methods to ModelService:\n- list_available_models(provider, active_only) - List all models from registry\n- get_model_pricing(model_id, tier) - Get tier-specific pricing\n- get_model_capabilities(model_id) - Query capabilities\n- get_model_metadata(model_id) - Complete model info\n\n✅ Exposed new types in SDK __init__.py:\n- PricingInfo, ModelCapabilities now part of public API\n\n✅ Added comprehensive unit tests:\n- 16 tests covering all new functionality\n- All tests passing\n\n✅ Created documentation:\n- model_registry_example.py with 5 comprehensive examples\n- Updated examples/sdk/README.md with registry section\n- Demonstrates listing, pricing, capabilities, and metadata queries\n\nThe SDK now provides access to 1,114+ models from the registry with up-to-date pricing and capability information!",
      "edited": false,
      "edit_count": 0,
      "is_ai_generated": false,
      "attachments": [],
      "attachment_count": 0
    }
  ],
  "attachments": [],
  "attachment_count": 0,
  "comment_count": 1,
  "story_points": 5,
  "order": 0,
  "custom_fields": {}
}