{
  "created_at": "2025-12-02T18:07:44.508859",
  "updated_at": "2025-12-02T18:07:44.508868",
  "id": "SOUL-216",
  "uuid": "f036cb4b-dc3b-486d-be9d-550b8d3c504b",
  "title": "Fix AI provider mock and initialization tests",
  "description": "**As a** Consoul developer\n**I want** AI provider initialization tests to pass with proper mocking\n**So that** we can test provider logic without making real API calls\n\n**Context:**\n35 tests in tests/ai/test_providers.py are failing because real ChatModel instances are being created instead of mocks. Tests are asserting equality with MagicMock objects but getting actual ChatOpenAI/ChatGoogle/etc instances.\n\nRoot cause: get_chat_model() function is not being properly mocked, resulting in actual provider initialization.\n\n**Technical Notes:**\n- tests/ai/test_providers.py - Provider tests\n- src/consoul/ai/providers.py:980-1114 - get_chat_model implementation\n- Mock assertions failing: ChatOpenAI(...) == <MagicMock name='...' id='...'>\n\n**Acceptance Criteria:**\n\n**Given** provider tests are run\n**When** get_chat_model is called\n**Then** it should return mocked instances, not real providers\n\n**Failing Test Categories:**\n- OpenAI provider tests (~15 failures)\n- Google provider tests (~3 failures)\n- HuggingFace provider tests (~12 failures)  \n- LlamaCpp provider tests (~2 failures)\n- Error handling tests (~3 failures)\n\n**Testing Considerations:**\n- Ensure mocks are applied before get_chat_model calls\n- Verify no real API calls are made during tests\n- Test with various provider configurations\n\n**Implementation Hints:**\n- Review mock setup in test fixtures\n- Use @patch decorators at correct scope\n- Mock init_chat_model or ChatProvider classes\n- Verify mock.assert_called_with() arguments match",
  "status": "todo",
  "type": "bug",
  "priority": "high",
  "labels": [
    "testing",
    "bug",
    "ai",
    "providers"
  ],
  "reporter": "jared@goatbytes.io",
  "parent_id": "SOUL-214",
  "blocked_by": [],
  "blocks": [],
  "comments": [],
  "attachments": [],
  "attachment_count": 0,
  "comment_count": 0,
  "story_points": 5,
  "order": 0,
  "custom_fields": {}
}