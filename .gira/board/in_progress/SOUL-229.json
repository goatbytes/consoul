{
  "created_at": "2025-12-03T23:25:11.040223",
  "updated_at": "2025-12-04T07:41:42.684359Z",
  "id": "SOUL-229",
  "uuid": "1614f635-a884-4ccf-9d52-0cc530b7c990",
  "title": "Consoul TUI crash on create ticket button",
  "description": "Consoul TUI crashes when clicking 'Create New Ticket'. Stack trace shows a LanguageDoesNotExist exception from Textual's TextArea due to missing tree‑sitter markdown parser. Steps to reproduce: start TUI, click create ticket, modal opens and crashes. Environment: Consoul v0.2.1, Python 3.12.1, Textual v0.54.0, no tree-sitter-markdown installed. Root cause: Textual tries to load markdown language, fails, raises exception, TUI exits. Suggested fix: install tree-sitter-markdown or remove language setting to fallback to plain text. Impact: prevents ticket creation.\n\n```\n> consoul tui\n╭───────────────────────────────────────────────────────────────────────────────────────── Traceback (most recent call last) ─────────────────────────────────────────────────────────────────────────────────────────╮\n│ /private/tmp/test-consoul-0.2.1/lib/python3.12/site-packages/textual/widget.py:4638 in _compose                                                                                                                     │\n│                                                                                                                                                                                                                     │\n│   4635 │                                                                                                                                                                                                            │\n│   4636 │   async def _compose(self) -> None:                                                                                                                                                                        │\n│   4637 │   │   try:                                                                                                                                                                                                 │\n│ ❱ 4638 │   │   │   widgets = [*self._pending_children, *compose(self)]                                                                                                                                              │\n│   4639 │   │   │   self._pending_children.clear()                                                                                                                                                                   │\n│   4640 │   │   except TypeError as error:                                                                                                                                                                           │\n│   4641 │   │   │   raise TypeError(                                                                                                                                                                                 │\n│                                                                                                                                                                                                                     │\n│ ╭──────────────────────────────────────────────────────────────────────────────────────────────────── locals ─────────────────────────────────────────────────────────────────────────────────────────────────────╮ │\n│ │ error = LanguageDoesNotExist(\"tree-sitter is available, but no built-in or user-registered language called 'markdown'.\\nEnsure the language is installed (e.g. `pip install tree-sitter-ruby`)\\nFalling back to │ │\n│ │         plain text.\")                                                                                                                                                                                           │ │\n│ │  self = ProfileEditorModal()                                                                                                                                                                                    │ │\n│ ╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯ │\n│                                                                                                                                                                                                                     │\n│ /private/tmp/test-consoul-0.2.1/lib/python3.12/site-packages/consoul/tui/widgets/profile_editor_modal.py:226 in compose                                                                                             │\n│                                                                                                                                                                                                                     │\n│   223 │   │   │   │   │   │   \"Custom system prompt (optional, supports markdown):\",           ╭─────────── locals ───────────╮                                                                                     │\n│   224 │   │   │   │   │   │   classes=\"info-label\",                                            │  self = ProfileEditorModal() │                                                                                     │\n│   225 │   │   │   │   │   )                                                                    │ title = 'Create New Profile' │                                                                                     │\n│ ❱ 226 │   │   │   │   │   yield TextArea(                                                      ╰──────────────────────────────╯                                                                                     │\n│   227 │   │   │   │   │   │   id=\"system-prompt\",                                                                                                                                                                   │\n│   228 │   │   │   │   │   │   language=\"markdown\",                                                                                                                                                                  │\n│   229 │   │   │   │   │   )                                                                                                                                                                                         │\n│                                                                                                                                                                                                                     │\n│ /private/tmp/test-consoul-0.2.1/lib/python3.12/site-packages/textual/widgets/_text_area.py:557 in __init__                                                                                                          │\n│                                                                                                                                                                                                                     │\n│    554 │   │                                                                                    ╭─────────────────────── locals ───────────────────────╮                                                            │\n│    555 │   │   self._line_cache: LRUCache[tuple, Strip] = LRUCache(1024)                        │               classes = None                         │                                                            │\n│    556 │   │                                                                                    │               compact = False                        │                                                            │\n│ ❱  557 │   │   self._set_document(text, language)                                               │              disabled = False                        │                                                            │\n│    558 │   │                                                                                    │ highlight_cursor_line = True                         │                                                            │\n│    559 │   │   self.language = language                                                         │                    id = 'system-prompt'              │                                                            │\n│    560 │   │   self.theme = theme                                                               │              language = 'markdown'                   │                                                            │\n│                                                                                                 │     line_number_start = 1                            │                                                            │\n│                                                                                                 │       max_checkpoints = 50                           │                                                            │\n│                                                                                                 │                  name = None                         │                                                            │\n│                                                                                                 │           placeholder = ''                           │                                                            │\n│                                                                                                 │             read_only = False                        │                                                            │\n│                                                                                                 │                  self = TextArea(id='system-prompt') │                                                            │\n│                                                                                                 │           show_cursor = True                         │                                                            │\n│                                                                                                 │     show_line_numbers = False                        │                                                            │\n│                                                                                                 │             soft_wrap = True                         │                                                            │\n│                                                                                                 │          tab_behavior = 'focus'                      │                                                            │\n│                                                                                                 │                  text = ''                           │                                                            │\n│                                                                                                 │                 theme = 'css'                        │                                                            │\n│                                                                                                 │               tooltip = None                         │                                                            │\n│                                                                                                 ╰──────────────────────────────────────────────────────╯                                                            │\n│                                                                                                                                                                                                                     │\n│ /private/tmp/test-consoul-0.2.1/lib/python3.12/site-packages/textual/widgets/_text_area.py:1013 in _set_document                                                                                                    │\n│                                                                                                                                                                                                                     │\n│   1010 │   │   │                                                                                ╭──────────────────────────────────────────────────── locals ────────────────────────────────────────────────────╮  │\n│   1011 │   │   │   # No built-in language, and no user-registered language: use plain text and  │ document_language = None                                                                                       │  │\n│   1012 │   │   │   if document_language is None:                                                │   highlight_query = '(atx_heading (inline) @heading)\\n(setext_heading (paragraph) @heading)\\n\\n[\\n  (atx_'+665 │  │\n│ ❱ 1013 │   │   │   │   raise LanguageDoesNotExist(                                              │          language = 'markdown'                                                                                 │  │\n│   1014 │   │   │   │   │   f\"tree-sitter is available, but no built-in or user-registered langu │              self = TextArea(id='system-prompt')                                                               │  │\n│   1015 │   │   │   │   │   f\"Ensure the language is installed (e.g. `pip install tree-sitter-ru │              text = ''                                                                                         │  │\n│   1016 │   │   │   │   │   f\"Falling back to plain text.\"                                       ╰────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯  │\n╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯\nLanguageDoesNotExist: tree-sitter is available, but no built-in or user-registered language called 'markdown'.\nEnsure the language is installed (e.g. `pip install tree-sitter-ruby`)\nFalling back to plain text.\n\nNOTE: 1 of 2 errors shown. Run with textual run --dev to see all errors.\n```",
  "status": "in_progress",
  "type": "bug",
  "priority": "high",
  "labels": [],
  "reporter": "jared@goatbytes.io",
  "blocked_by": [],
  "blocks": [],
  "comments": [],
  "attachments": [],
  "attachment_count": 0,
  "comment_count": 0,
  "order": 0,
  "custom_fields": {}
}