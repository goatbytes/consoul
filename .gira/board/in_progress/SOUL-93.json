{
  "created_at": "2025-11-13T14:30:40.465305",
  "updated_at": "2025-11-14T07:51:04.852737Z",
  "id": "SOUL-93",
  "uuid": "c1cc13f8-3795-4307-9cf9-b6d89aecf8b7",
  "title": "Add ripgrep-based text search tool",
  "description": "**As a** Consoul SDK user integrating AI tools\n**I want** fast regex-based text search across my codebase  \n**So that** I can quickly find code patterns, strings, and matches without complex AST parsing\n\n**Context:**\nFast text search is essential for code exploration and analysis. While AST-based search (SOUL-97) provides semantic understanding, text search via ripgrep/grep offers immediate results for simple pattern matching. This tool provides the foundation for code search capabilities.\n\nResearch from cursor-agent and other AI coding tools shows that ripgrep-based search is preferred for:\n- Simple string/regex patterns\n- Cross-file searches\n- Quick exploration\n- Finding TODOs, FIXMEs, specific strings\n\n**Technical Notes:**\n- Create src/consoul/ai/tools/implementations/grep_search.py\n- Follow existing bash.py pattern (src/consoul/ai/tools/implementations/bash.py:1-200)\n- Use subprocess to invoke rg or grep\n- Register with ToolRegistry at RiskLevel.SAFE (read-only operation)\n- Pattern: @tool decorator, return JSON-serializable dict\n- Similar to bash_execute but simpler (no stdin, shorter timeout)\n- Reference: cursor-agent cursor_agent_tools/tools/search_tools.py:120-180\n\n**Acceptance Criteria:**\n\n**Given** ripgrep is installed\n**When** I call grep_search(pattern='TODO', file_glob='*.py')\n**Then** all Python files with TODO are returned with line numbers and context\n\n**Given** ripgrep is NOT installed  \n**When** I call grep_search with any pattern\n**Then** the tool falls back to grep command automatically\n\n**Given** I search with context_lines=2\n**When** matches are found\n**Then** 2 lines before and after each match are included in results\n\n**Given** I search a repo with binary files\n**When** grep_search encounters binary files\n**Then** they are skipped gracefully without errors\n\n**Given** I search with case_sensitive=False\n**When** pattern='TODO'\n**Then** matches TODO, todo, Todo, etc.\n\n**Testing Considerations:**\n- Unit tests: Mock subprocess.run for both rg and grep paths\n- Test fallback: Mock rg not found, verify grep is used\n- Test glob patterns: *.py, **/*.ts, src/**/*.go\n- Test binary file handling\n- Integration test: Real files in tests/fixtures/\n- Performance test: <1s for 1000-file repo\n\n**Implementation Hints:**\n- Detect rg: shutil.which('rg') or subprocess.run(['rg', '--version'])\n- Build rg command: ['rg', pattern, '--json', '--glob', file_glob]\n- Build grep command: ['grep', '-r', '-n', pattern, '--include=*.py']\n- Parse rg JSON output OR grep line-based output\n- Return format: {'matches': [{'file': path, 'line': num, 'text': str, 'context': str}]}\n- Add to ToolRegistry in implementations/__init__.py\n- Config: BashToolConfig can be reused (working_dir, timeout)\n\n**Story Points:** 3\n**Labels:** ai, tools, enhancement, quick-win\n**Dependencies:** None (standalone tool)",
  "status": "in_progress",
  "type": "feature",
  "priority": "high",
  "labels": [],
  "assignee": "jared@goatbytes.io",
  "reporter": "jared@goatbytes.io",
  "epic_id": "EPIC-006",
  "blocked_by": [],
  "blocks": [],
  "comments": [],
  "attachments": [],
  "attachment_count": 0,
  "comment_count": 0,
  "order": 0,
  "custom_fields": {}
}