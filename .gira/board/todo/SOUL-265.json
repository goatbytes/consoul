{
  "created_at": "2025-12-11T16:41:55.141820",
  "updated_at": "2025-12-11T16:41:55.141829",
  "id": "SOUL-265",
  "uuid": "7284bbae-f09e-4653-99d8-b77c9dbd7eba",
  "title": "Audit ConversationService integration and remove obsolete code",
  "description": "**As a** Consoul developer\n**I want** to audit SOUL-263's ConversationService integration and remove any obsolete code\n**So that** we eliminate redundant business logic and validate the integration is complete\n\n**Context:**\nSOUL-263 successfully integrated ConversationService into TUI, but may have left some obsolete code paths or duplicate logic. Additionally, the integration added some complexity around tool call display that should be simplified. This ticket audits the integration and removes:\n- Obsolete streaming methods\n- Duplicate message handling logic\n- Unnecessary SDK imports\n- Dead code paths from pre-ConversationService era\n\n**Current State:**\n- app.py is 5,881 lines (increased from 5,541 during integration)\n- ConversationService handles streaming, tool execution, multimodal messages\n- Some old methods may still exist but unused\n- 56 SDK imports (many may be obsolete now)\n\n**Technical Notes:**\n- Review: src/consoul/tui/app.py - look for unused methods\n- Check: Direct model.astream() calls (should all use service now)\n- Check: Duplicate tool execution logic\n- Remove: Old _stream_ai_response() if still present\n- Remove: Any TUIToolApprover complexity that duplicates service functionality\n- Clean up: Unnecessary imports from consoul.ai.* and consoul.sdk.*\n- Document: What logic remains in TUI vs delegated to service\n\n**Acceptance Criteria:**\n\n**Given** ConversationService integration is complete\n**When** I audit app.py for obsolete code\n**Then** I identify and document all removable code sections\n\n**Given** Obsolete code is identified\n**When** I remove it safely\n**Then** All TUI features continue working without regression\n\n**Given** Old imports are unused\n**When** I remove unnecessary SDK imports\n**Then** Import count decreases from 56 to <30\n\n**Given** Code is cleaned up\n**When** I measure line count\n**Then** app.py is reduced by 200-500 lines\n\n**Testing Considerations:**\n- Full manual testing of TUI after cleanup\n- Verify message submission works\n- Verify tool execution works\n- Verify multimodal messages work\n- Verify cost tracking displays\n- Check for no import errors\n\n**Implementation Hints:**\n- Use grep to find unused methods: grep \"def _\" app.py\n- Check git history: what was removed in SOUL-263?\n- Remove debug logging added during integration\n- Simplify TUIToolApprover if possible\n- Look for commented-out code\n- Check for duplicate type imports",
  "status": "todo",
  "type": "task",
  "priority": "medium",
  "labels": [
    "tui",
    "refactor",
    "cleanup",
    "technical-debt"
  ],
  "reporter": "jared@goatbytes.io",
  "epic_id": "EPIC-013",
  "parent_id": "SOUL-249",
  "blocked_by": [],
  "blocks": [],
  "comments": [],
  "attachments": [],
  "attachment_count": 0,
  "comment_count": 0,
  "story_points": 3,
  "order": 0,
  "custom_fields": {}
}