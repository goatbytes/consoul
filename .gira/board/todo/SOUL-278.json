{
  "created_at": "2025-12-15T09:40:05.881606",
  "updated_at": "2025-12-15T09:40:05.881615",
  "id": "SOUL-278",
  "uuid": "75df275b-5001-4e18-ad24-3d1f2519f289",
  "title": "Add integration tests verifying SDK works without UI dependencies",
  "description": "**As a** SDK consumer\n**I want** integration tests proving SDK works without Textual/Rich installed\n**So that** I'm confident using SDK in headless environments\n\n**Context:**\nAfter SOUL-250 (TuiConfig removal) and SOUL-251 (Rich removal from streaming), the SDK should work completely independently of UI libraries. Integration tests are needed to prove this works and prevent regressions.\n\n**Technical Notes:**\n- Create: tests/integration/test_sdk_headless.py\n- Test environment: venv with minimal dependencies (no textual, no rich)\n- Test: from consoul.sdk import Consoul, ConversationService\n- Test: Basic SDK operations work without UI imports\n- Dependencies: SOUL-250 (done), SOUL-251 (pending)\n\n**Acceptance Criteria:**\n\n**Given** Fresh Python environment without Textual or Rich\n**When** I install consoul-sdk package (minimal dependencies)\n**Then** All SDK imports succeed\n\n**Given** SDK imports successful\n**When** I use ConversationService basic features\n**Then** No ImportError for Textual or Rich occurs\n\n**Given** Streaming responses\n**When** Using async_stream_events()\n**Then** Tokens yield without UI dependencies\n\n**Given** Tool execution\n**When** Using custom approval provider\n**Then** Works without UI dependencies\n\n**Testing Scope:**\n- Test SDK imports in clean environment\n- Test ConversationService.from_config()\n- Test async_stream_events() streaming\n- Test tool execution with custom approval\n- Test model switching\n- Test conversation persistence\n- Verify no Textual/Rich in import tree\n- CI/CD test with minimal dependency install\n\n**Implementation Hints:**\n- Create test venv: python -m venv test_env\n- Install minimal: pip install consoul --no-deps; pip install pydantic langchain\n- Run import tests: pytest tests/integration/test_sdk_headless.py\n- Use importlib to verify no UI in sys.modules\n- Mock LangChain responses for deterministic tests\n- Add to CI: test job with minimal dependencies\n- Document minimal dependency set in README",
  "status": "todo",
  "type": "task",
  "priority": "high",
  "labels": [
    "testing",
    "sdk",
    "quality",
    "integration"
  ],
  "reporter": "jared@goatbytes.io",
  "epic_id": "EPIC-012",
  "blocked_by": [],
  "blocks": [],
  "comments": [],
  "attachments": [],
  "attachment_count": 0,
  "comment_count": 0,
  "story_points": 3,
  "order": 65,
  "custom_fields": {}
}