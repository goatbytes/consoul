{
  "created_at": "2025-11-10T20:11:03.238647",
  "updated_at": "2025-11-10T20:11:03.238654",
  "id": "SOUL-68",
  "uuid": "364b0c29-515a-4704-9405-062dc9706710",
  "title": "Create SDK integration guide for tool calling system",
  "description": "**As a** developer integrating Consoul into a host application (like Gira)\n**I want** comprehensive SDK documentation for tool calling integration\n**So that** I can implement custom approval UX, audit logging, and tool configuration without TUI dependencies\n\n**Context:**\nConsoul is designed as an SDK that host applications embed. The tool calling system must be usable in headless environments (CLI, web servers, IDE plugins) without requiring Textual TUI. This ticket creates documentation showing how to:\n- Implement custom ApprovalProvider for host app UX (CLI prompts, web modals, IDE dialogs)\n- Provide custom AuditLogger for compliance requirements\n- Configure tools via ConsoulConfig in different environments\n- Integrate with existing authentication/authorization systems\n- Handle tool execution results in host app context\n\nPer Codex review: \"SDK documentation/tests describing how host applications hook into tool execution without the TUI\" is critical for adoption.\n\n**Technical Notes:**\n- Create docs/sdk/tool-calling-integration.md\n- Add runnable examples in examples/sdk/\n- Document all public protocols and interfaces\n- Show integration patterns for different host app types (CLI, web, desktop)\n- Explain dependency management (core vs optional TUI)\n- Provide migration guide from TUI-based approval to custom approval\n\n**Acceptance Criteria:**\n\n**Given** I'm building a CLI tool using Consoul SDK\n**When** I read the integration guide\n**Then** I can implement command-line approval prompts without TUI dependencies\n\n**Given** I'm integrating Consoul into a web application\n**When** I follow the SDK documentation\n**Then** I can implement HTTP-based approval workflows with custom UX\n\n**Given** I need audit logging for compliance\n**When** I check the audit logger documentation\n**Then** I can implement custom audit backends (database, cloud logging, etc.)\n\n**Given** I want to configure tool policies per-user\n**When** I read the configuration guide\n**Then** I understand how to override tool settings programmatically\n\n**Testing Considerations:**\n- All code examples must be runnable and tested\n- Document testing strategies for custom providers\n- Show how to mock approval/audit for unit tests\n- Provide integration test examples\n\n**Implementation Hints:**\n- SDK integration guide structure:\n  ```markdown\n  # Tool Calling SDK Integration\n  \n  ## Overview\n  - Architecture diagram (core â†’ optional TUI)\n  - When to use headless vs TUI approval\n  \n  ## Quick Start\n  - Minimal CLI approval example\n  - Basic configuration setup\n  \n  ## Custom Approval Provider\n  - ApprovalProvider protocol reference\n  - CLI example (input() prompts)\n  - Web example (REST API approval)\n  - IDE example (notification dialogs)\n  \n  ## Custom Audit Logger\n  - AuditLogger protocol reference\n  - File-based example\n  - Database example (SQLite/PostgreSQL)\n  - Cloud logging example (CloudWatch/Stackdriver)\n  \n  ## Configuration\n  - ConsoulConfig.tools reference\n  - Profile-based tool policies\n  - Environment variable overrides\n  - Programmatic configuration\n  \n  ## Testing\n  - Mocking approval providers\n  - Testing tool execution flows\n  - Integration test patterns\n  ```\n\n- Example: CLI approval provider\n  ```python\n  # examples/sdk/cli_approval_provider.py\n  from consoul.ai.tools.approval import ApprovalProvider, ToolApprovalRequest, ToolApprovalResponse\n  \n  class CliApprovalProvider(ApprovalProvider):\n      async def request_approval(self, request: ToolApprovalRequest) -> ToolApprovalResponse:\n          print(f\"\\nTool Request: {request.tool_name}\")\n          print(f\"Command: {request.arguments.get('command', '')}\")\n          print(f\"Risk Level: {request.risk_level.value}\")\n          \n          while True:\n              response = input(\"Approve? (y/n): \").lower()\n              if response in ('y', 'yes'):\n                  return ToolApprovalResponse(approved=True)\n              elif response in ('n', 'no'):\n                  return ToolApprovalResponse(approved=False, reason=\"User denied\")\n  ```\n\n- Example: Web approval provider\n  ```python\n  # examples/sdk/web_approval_provider.py\n  import aiohttp\n  from consoul.ai.tools.approval import ApprovalProvider, ToolApprovalRequest, ToolApprovalResponse\n  \n  class WebApprovalProvider(ApprovalProvider):\n      def __init__(self, approval_endpoint: str, auth_token: str):\n          self.approval_endpoint = approval_endpoint\n          self.auth_token = auth_token\n      \n      async def request_approval(self, request: ToolApprovalRequest) -> ToolApprovalResponse:\n          async with aiohttp.ClientSession() as session:\n              async with session.post(\n                  self.approval_endpoint,\n                  json={\n                      'tool_name': request.tool_name,\n                      'arguments': request.arguments,\n                      'risk_level': request.risk_level.value,\n                      'context': request.context,\n                  },\n                  headers={'Authorization': f'Bearer {self.auth_token}'},\n              ) as resp:\n                  data = await resp.json()\n                  return ToolApprovalResponse(\n                      approved=data['approved'],\n                      reason=data.get('reason'),\n                      timeout=data.get('timeout'),\n                  )\n  ```\n\n**Files to Create:**\n- docs/sdk/tool-calling-integration.md\n- examples/sdk/cli_approval_provider.py\n- examples/sdk/web_approval_provider.py\n- examples/sdk/custom_audit_logger.py\n- examples/sdk/tool_config_examples.py\n\n**Files to Modify:**\n- docs/README.md (add SDK integration section)\n- README.md (link to SDK documentation)\n\nStory Points: 3",
  "status": "todo",
  "type": "task",
  "priority": "high",
  "labels": [
    "documentation",
    "sdk",
    "tools",
    "enhancement"
  ],
  "reporter": "jared@goatbytes.io",
  "epic_id": "EPIC-004",
  "blocked_by": [],
  "blocks": [],
  "comments": [],
  "attachments": [],
  "attachment_count": 0,
  "comment_count": 0,
  "order": 0,
  "custom_fields": {}
}