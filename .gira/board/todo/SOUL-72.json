{
  "created_at": "2025-11-11T17:26:12.390583",
  "updated_at": "2025-11-11T17:26:12.390597",
  "id": "SOUL-72",
  "uuid": "fd86a0d9-6ef1-47f0-bae0-4f26b92dfc88",
  "title": "Permission policy system with approval presets",
  "description": "As a Consoul user, I want predefined permission policies (paranoid/balanced/trusting/unrestricted), so that I can quickly configure approval behavior matching my security preferences without manual configuration.\n\n## Context\nCurrent ToolConfig requires manual configuration of auto_approve, approval_mode, and allowed_tools (src/consoul/config/models.py:135-142). Users need preset policies that combine these settings with sensible defaults. Existing approval modes are scattered without cohesive policy framework.\n\n## Technical Notes\n- Create PermissionPolicy in consoul/ai/tools/permissions/policy.py\n- Define 4 preset policies: PARANOID, BALANCED, TRUSTING, UNRESTRICTED\n- Map policies to approval_mode, risk_threshold, and whitelist behavior\n- Integrate with existing ApprovalProvider protocol (src/consoul/ai/tools/approval.py:15-30)\n- Allow policy customization and per-tool overrides\n\n## Files to Modify\n- Create: src/consoul/ai/tools/permissions/policy.py\n- Modify: src/consoul/config/models.py:135-142 (add permission_policy field)\n- Modify: src/consoul/ai/tools/registry.py:156-169 (policy-aware approval logic)\n- Update: src/consoul/ai/tools/approval.py (policy integration)\n\n## Acceptance Criteria\n- [ ] PermissionPolicy enum with 4 presets implemented\n- [ ] PARANOID: approval_mode='always', no auto-approve, blocks CAUTION+\n- [ ] BALANCED: approval_mode='risk_based', auto-approve SAFE, prompts CAUTION+\n- [ ] TRUSTING: approval_mode='once_per_session', auto-approve SAFE+CAUTION\n- [ ] UNRESTRICTED: approval_mode='never', auto-approve all (with confirmation)\n- [ ] Config field permission_policy overrides individual settings\n- [ ] Per-tool policy overrides supported\n- [ ] Policy validation prevents dangerous UNRESTRICTED misconfigurations\n- [ ] Documentation includes policy comparison table\n\n## Testing\n- Test each policy preset with various command risk levels\n- Test policy override behavior (policy vs manual config)\n- Test per-tool overrides (e.g., always approve 'git status')\n- Test validation warnings for unsafe configurations\n- Test policy migration from old config format\n\n## Implementation Hints\n- Use Pydantic validators for policy-config consistency checks\n- Implement PolicyResolver to merge policy + overrides + whitelist\n- Add validation warnings when UNRESTRICTED is enabled\n- Support policy selection in TUI settings screen (future SOUL-74)\n- Consider environment-based policies (dev vs production)",
  "status": "todo",
  "type": "feature",
  "priority": "medium",
  "labels": [
    "config",
    "security",
    "ai"
  ],
  "reporter": "jared@goatbytes.io",
  "blocked_by": [],
  "blocks": [],
  "comments": [],
  "attachments": [],
  "attachment_count": 0,
  "comment_count": 0,
  "story_points": 5,
  "order": 0,
  "custom_fields": {}
}