{
  "created_at": "2025-11-12T23:00:20.428197",
  "updated_at": "2025-11-12T23:00:20.428206",
  "id": "SOUL-78",
  "uuid": "1a1584c8-8ee6-43c1-bace-a1ffe3e9337d",
  "title": "Create high-level Consoul SDK wrapper for ease of use",
  "description": "**As a** Python developer integrating Consoul\n**I want** a simple, intuitive API that requires minimal code\n**So that** I can add AI capabilities to my application in under 5 lines\n\n**Context:**\nCurrent SDK requires 173+ lines of boilerplate code with 7+ imports for basic usage. This creates a high barrier to entry and poor developer experience compared to other AI SDKs. The goal is to create a high-level wrapper that makes Consoul the easiest AI SDK to use.\n\n**Research:**\n- Current minimal example: examples/sdk/cli_approval_example.py (173 lines)\n- OpenAI SDK: ~8 lines for basic chat\n- Anthropic SDK: ~7 lines for basic chat\n- LangChain: Complex, enterprise-focused\n- Codex AI feedback: Provided specific recommendations (see below)\n\n**Codex AI Feedback Summary:**\n1. âœ… Auto-detection approach mirrors OpenAI/Anthropic - good direction\n2. âœ… Progressive exposure works if layers compose (one class, richer kwargs)\n3. âš ï¸ Consider `console.ask()` or `console.run()` vs `chat()`\n4. ðŸ’¡ Add `console.settings` for introspection of defaults\n5. ðŸ’¡ Add `console.last_request` and `console.last_cost` for debugging\n6. ðŸ’¡ Support structured responses: `chat(..., format=Dict[str, Any])`\n7. ðŸ’¡ Tool discovery with opt-out: `Consoul(discover_tools=False)`\n8. ðŸ’¡ Borrow from OpenAI (fluent client), Anthropic (default params), LangChain (decorators)\n\n**Technical Notes:**\n- Create new file: src/consoul/sdk.py (~200 lines)\n- Export from src/consoul/__init__.py\n- Three-tier API design:\n  - Tier 1: Minimal (5 lines) - Auto-detect everything\n  - Tier 2: Quick (15 lines) - Customize common options\n  - Tier 3: Full SDK (unchanged) - Advanced control\n- Maintain full backward compatibility with existing SDK\n- Add introspection: `.settings`, `.last_request`, `.last_cost`\n\n**Files to create/modify:**\n- NEW: src/consoul/sdk.py - Main Consoul class and ConsoulResponse\n- MODIFY: src/consoul/__init__.py - Export Consoul, ConsoulResponse\n- NEW: examples/sdk/minimal_chat.py - 5 line example\n- NEW: examples/sdk/quick_start.py - 15 line example\n- NEW: examples/sdk/custom_profile.py - 20 line example\n- NEW: tests/test_sdk.py - SDK wrapper tests\n- MODIFY: README.md - Add quick start section\n- MODIFY: docs/sdk/tool-calling-integration.md - Add simple examples first\n\n**Acceptance Criteria:**\n\n**Given** I install Consoul with `pip install consoul`\n**When** I run this 5-line script:\n```python\nfrom consoul import Consoul\nconsole = Consoul()\nprint(console.chat(\"What is 2+2?\"))\n```\n**Then** I get a response without any configuration needed\n\n**Given** I want to customize the model\n**When** I initialize with `Consoul(model=\"gpt-4o\")`\n**Then** the provider is auto-detected and the model is used\n\n**Given** I want to enable tools\n**When** I initialize with `Consoul(tools=True)`\n**Then** bash_execute is registered with CLI approval\n\n**Given** I want to inspect settings\n**When** I access `console.settings`\n**Then** I can see current model, profile, and configuration\n\n**Given** I want debugging info\n**When** I access `console.last_request` and `console.last_cost`\n**Then** I can see the last API call details and token usage\n\n**Given** I want structured responses\n**When** I call `console.chat(..., format=dict)`\n**Then** I get a dict response instead of string\n\n**Given** I'm an advanced user\n**When** I use the full SDK imports (ToolRegistry, etc.)\n**Then** everything works exactly as before (backward compatible)\n\n**Testing Considerations:**\n- Unit tests for Consoul class initialization\n- Test auto-detection of API keys from environment\n- Test profile loading (built-in and custom)\n- Test tool registration when tools=True\n- Test backward compatibility with existing SDK\n- Mock API calls for faster tests\n- Test introspection properties (settings, last_request, last_cost)\n- Integration tests with actual providers (optional)\n\n**Implementation Hints:**\n1. Create `Consoul` class with smart __init__ that accepts:\n   - model (str) - Auto-detect provider\n   - profile (str) - Load built-in or custom\n   - tools (bool) - Register bash_execute if True\n   - temperature (float) - Override\n   - system_prompt (str) - Override\n   - persist (bool) - Conversation persistence\n\n2. Implement methods:\n   - `chat(message: str) -> str` - Simple string response\n   - `ask(message: str, show_tokens=False) -> ConsoulResponse` - Rich response\n   - `clear()` - Clear conversation history\n\n3. Add properties for introspection:\n   - `settings` - Current configuration\n   - `last_request` - Last API call details\n   - `last_cost` - Token usage and cost\n\n4. Use existing components internally:\n   - load_config() for configuration\n   - get_chat_model() for model initialization\n   - ConversationHistory for state\n   - ToolRegistry + CliApprovalProvider for tools\n\n5. Follow patterns from OpenAI/Anthropic SDKs:\n   - Fluent client creation\n   - Simple method names\n   - Progressive disclosure of complexity\n\n6. Create minimal examples showing:\n   - 5 lines (absolute minimal)\n   - 15 lines (with customization)\n   - 20 lines (with profiles)\n\n**Dependencies:**\nNone (uses existing Consoul components)\n\n**Reference Implementation:**\nSee examples/sdk/SIMPLIFICATION_PROPOSAL.md for detailed design\n\n**Success Metrics:**\n- Reduce getting-started code from 173 lines to 5 lines (97% reduction)\n- Reduce required imports from 7+ to 1 (86% reduction)\n- Maintain 100% backward compatibility\n- Get positive feedback from early SDK users",
  "status": "todo",
  "type": "feature",
  "priority": "high",
  "labels": [
    "sdk",
    "enhancement",
    "ux-improvement",
    "quick-win"
  ],
  "reporter": "jared@goatbytes.io",
  "blocked_by": [],
  "blocks": [],
  "comments": [],
  "attachments": [],
  "attachment_count": 0,
  "comment_count": 0,
  "story_points": 8,
  "order": 0,
  "custom_fields": {}
}