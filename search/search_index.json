{"config":{"lang":["en"],"separator":"[\\s\\-,:!=\\[\\]()\"`/]+|\\.(?!\\d)|&[lg]t;|(?!\\b)(?=[A-Z][a-z])","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Consoul - AI-Powered Terminal Assistant","text":""},{"location":"SECURITY/","title":"Security","text":""},{"location":"SECURITY/#security-policy","title":"Security Policy","text":""},{"location":"SECURITY/#supported-versions","title":"Supported Versions","text":"<p>We release security updates for the following versions:</p> Version Supported 0.1.x"},{"location":"SECURITY/#reporting-a-vulnerability","title":"Reporting a Vulnerability","text":"<p>We take security seriously. If you discover a security vulnerability in Consoul, please report it by emailing security@goatbytes.io.</p> <p>Please do not report security vulnerabilities through public GitHub issues.</p>"},{"location":"SECURITY/#what-to-include","title":"What to Include","text":"<p>When reporting a vulnerability, please include:</p> <ul> <li>A description of the vulnerability</li> <li>Steps to reproduce the issue</li> <li>Potential impact of the vulnerability</li> <li>Any suggested fixes (if you have them)</li> </ul>"},{"location":"SECURITY/#response-timeline","title":"Response Timeline","text":"<ul> <li>Initial Response: Within 48 hours</li> <li>Status Update: Within 7 days</li> <li>Fix Timeline: Varies based on severity and complexity</li> </ul>"},{"location":"SECURITY/#security-best-practices","title":"Security Best Practices","text":"<p>When using Consoul:</p> <ol> <li>API Keys: Never commit API keys to version control</li> <li>Use environment variables for sensitive credentials</li> <li> <p>Add <code>.env</code> files to <code>.gitignore</code></p> </li> <li> <p>Dependencies: Keep dependencies up to date</p> </li> <li>Run <code>poetry update</code> regularly</li> <li> <p>Monitor security advisories with <code>make security</code></p> </li> <li> <p>Code Scanning: Use provided security tools</p> </li> <li>Run <code>make security</code> before commits</li> <li> <p>Review Bandit and Safety reports</p> </li> <li> <p>Input Validation: Be cautious with user input</p> </li> <li>Avoid executing arbitrary code from AI responses</li> <li>Sanitize file paths and commands</li> </ol>"},{"location":"SECURITY/#security-scanning","title":"Security Scanning","text":"<p>This project uses automated security scanning:</p>"},{"location":"SECURITY/#bandit-code-security","title":"Bandit (Code Security)","text":"<p>Bandit scans Python code for common security issues:</p> <pre><code># Run Bandit scan\nmake security\n\n# Generate detailed report\npoetry run bandit -r src/ -c pyproject.toml -f json -o bandit-report.json\n</code></pre>"},{"location":"SECURITY/#safety-dependency-vulnerabilities","title":"Safety (Dependency Vulnerabilities)","text":"<p>Safety checks dependencies for known security vulnerabilities:</p> <pre><code># Check dependencies\npoetry run safety check\n\n# Generate report\npoetry run safety check --save-json safety-report.json\n</code></pre>"},{"location":"SECURITY/#pre-commit-hooks","title":"Pre-commit Hooks","text":"<p>Optional security hooks are available:</p> <pre><code># Run all pre-commit hooks including security\npre-commit run --all-files\n</code></pre>"},{"location":"SECURITY/#automated-scanning","title":"Automated Scanning","text":"<p>Security scans run automatically:</p> <ul> <li>On every pull request: Bandit and Safety scans</li> <li>On main branch pushes: Full security audit</li> <li>Weekly: Scheduled dependency vulnerability scans</li> </ul>"},{"location":"SECURITY/#security-updates","title":"Security Updates","text":"<p>Security patches are released as soon as possible after discovery. Critical vulnerabilities are addressed within:</p> <ul> <li>Critical: 24-48 hours</li> <li>High: 1 week</li> <li>Medium: 2 weeks</li> <li>Low: Next regular release</li> </ul>"},{"location":"SECURITY/#acknowledgments","title":"Acknowledgments","text":"<p>We appreciate the security research community's efforts in responsibly disclosing vulnerabilities. Contributors who report valid security issues will be acknowledged (with permission) in our security advisories.</p>"},{"location":"SECURITY/#file-operations-security","title":"File Operations Security","text":"<p>Consoul includes AI-powered file editing capabilities that require special security considerations. Most file editing tools are classified as Risk Level: CAUTION, with the exception of <code>delete_file</code> which is classified as Risk Level: DANGEROUS due to its destructive nature. All file operations require user approval by default.</p>"},{"location":"SECURITY/#path-validation","title":"Path Validation","text":"<p>File editing tools implement multiple layers of path security:</p> <p>1. Path Traversal Protection - Blocks <code>..</code> in file paths to prevent directory traversal attacks - Validates resolved absolute paths before operations - Follows symlinks to validate real destination</p> <p>Example: </p><pre><code># BLOCKED: Path traversal\nedit_file_lines({\"file_path\": \"../../../etc/passwd\"})\n# Error: \"Path traversal detected: .. not allowed\"\n\n# ALLOWED: Safe relative path\nedit_file_lines({\"file_path\": \"src/utils.py\"})\n</code></pre><p></p> <p>2. Blocked Paths</p> <p>Default blocked paths (cannot be edited): - <code>/etc/shadow</code> - Shadow password file - <code>/etc/passwd</code> - User account information - <code>/proc</code> - Process information - <code>/dev</code> - Device files - <code>/sys</code> - Kernel interface</p> <p>Important: The defaults do NOT include common secret locations like <code>~/.ssh</code>, <code>~/.aws</code>, or <code>~/.gnupg</code>. You must explicitly add these to your configuration for production use.</p> <p>Recommended blocking via configuration: </p><pre><code>tools:\n  file_edit:\n    blocked_paths:\n      # System defaults (already included)\n      - \"/etc/shadow\"\n      - \"/etc/passwd\"\n      - \"/proc\"\n      - \"/dev\"\n      - \"/sys\"\n      # RECOMMENDED ADDITIONS for production\n      - \"~/.ssh\"          # SSH keys\n      - \"~/.aws\"          # AWS credentials\n      - \"~/.gnupg\"        # GPG keys\n      # Optional project-specific blocks\n      - \"/var/www/production\"  # Production code\n      - \"~/.config/secrets\"     # Local secrets\n      - \"${PROJECT_ROOT}/vendor\"  # Third-party dependencies\n</code></pre><p></p> <p>3. Extension Filtering</p> <p>Whitelist allowed file extensions: </p><pre><code>tools:\n  file_edit:\n    allowed_extensions:\n      - \".py\"    # Python source\n      - \".js\"    # JavaScript\n      - \".md\"    # Markdown\n      - \".txt\"   # Text files\n      - \"\"       # Extensionless (Dockerfile, Makefile)\n</code></pre><p></p> <p>Empty list (<code>[]</code>) allows all extensions (use with caution).</p>"},{"location":"SECURITY/#file-editing-tools","title":"File Editing Tools","text":"<p>Available Tools: - <code>edit_file_lines</code> - Line-based editing (CAUTION) - <code>edit_file_search_replace</code> - Search/replace with progressive matching (CAUTION) - <code>create_file</code> - File creation with overwrite protection (CAUTION) - <code>delete_file</code> - File deletion (DANGEROUS - destructive operation) - <code>append_to_file</code> - Content appending (CAUTION)</p> <p>Risk Levels: - Most file editing tools: CAUTION (requires approval by default) - <code>delete_file</code>: DANGEROUS (always requires approval, even in trusting mode)</p> <p>Security Features:</p> <ol> <li>Atomic Writes</li> <li>Temp file created first</li> <li>Atomically renamed to target</li> <li> <p>Prevents corruption on errors</p> </li> <li> <p>Optimistic Locking</p> </li> <li>Optional <code>expected_hash</code> parameter</li> <li>Detects concurrent modifications</li> <li> <p>Prevents accidental overwrites</p> </li> <li> <p>Dry-Run Mode</p> </li> <li>Preview changes before applying</li> <li>Shows unified diff</li> <li> <p>No filesystem modifications</p> </li> <li> <p>Size Limits</p> </li> <li><code>max_payload_bytes</code> (default: 1MB)</li> <li><code>max_edits</code> per operation (default: 50)</li> <li> <p>Prevents runaway AI edits</p> </li> <li> <p>Approval Workflow</p> </li> <li>User confirmation required (CAUTION level)</li> <li>Shows file path and operation details</li> <li> <p>Displays diff preview when available</p> </li> <li> <p>Audit Logging</p> </li> <li>All operations logged</li> <li>Includes file paths and arguments</li> <li>Timestamps and results recorded</li> </ol>"},{"location":"SECURITY/#configuration-best-practices","title":"Configuration Best Practices","text":"<p>Development Environment (More Permissive): </p><pre><code>profiles:\n  dev:\n    tools:\n      permission_policy: trusting  # Auto-approve CAUTION tools\n      file_edit:\n        allowed_extensions: []  # All extensions\n        allow_overwrite: true   # Allow file overwrites\n        max_payload_bytes: 2097152  # 2MB limit\n</code></pre><p></p> <p>Production Environment (Restrictive): </p><pre><code>profiles:\n  prod:\n    tools:\n      permission_policy: paranoid  # Approve every operation\n      file_edit:\n        allowed_extensions:\n          - \".md\"   # Only documentation\n          - \".txt\"\n        blocked_paths:\n          # System paths\n          - \"/etc/shadow\"\n          - \"/etc/passwd\"\n          - \"/proc\"\n          - \"/dev\"\n          - \"/sys\"\n          - \"/var\"\n          - \"/usr\"\n          # Secrets and credentials (CRITICAL)\n          - \"~/.ssh\"\n          - \"~/.aws\"\n          - \"~/.gnupg\"\n          - \"~/.config/gcloud\"\n        allow_overwrite: false  # Prevent overwrites\n        max_payload_bytes: 524288  # 512KB limit\n        max_edits: 25  # Conservative limit\n</code></pre><p></p>"},{"location":"SECURITY/#threat-model","title":"Threat Model","text":"<p>Protected Against: - \u2705 Path traversal attacks (<code>../../../etc/passwd</code>) - \u2705 Unauthorized file access (blocked paths) - \u2705 Malicious file types (extension filtering) - \u2705 Large payload attacks (size limits) - \u2705 Concurrent edit conflicts (optimistic locking) - \u2705 File corruption (atomic writes)</p> <p>User Responsible For: - \u26a0\ufe0f Reviewing approval prompts carefully - \u26a0\ufe0f Validating diff previews before approval - \u26a0\ufe0f Configuring appropriate extension whitelist - \u26a0\ufe0f Setting restrictive blocked paths - \u26a0\ufe0f Using appropriate permission policy - \u26a0\ufe0f Monitoring audit logs</p>"},{"location":"SECURITY/#security-checklist","title":"Security Checklist","text":"<p>Before enabling file editing in production:</p> <ul> <li> CRITICAL: Add <code>~/.ssh</code>, <code>~/.aws</code>, <code>~/.gnupg</code> to <code>blocked_paths</code> (not in defaults!)</li> <li> Review and customize complete <code>blocked_paths</code> list for your environment</li> <li> Configure <code>allowed_extensions</code> whitelist (don't use <code>[]</code> in production)</li> <li> Set <code>allow_overwrite: false</code> unless necessary</li> <li> Use <code>permission_policy: balanced</code> or <code>paranoid</code></li> <li> Enable audit logging (<code>audit_logging: true</code>)</li> <li> Test dry-run mode for critical operations</li> <li> Review audit logs regularly</li> <li> Restrict file permissions (<code>chmod 600</code> for sensitive files)</li> <li> Use version control (git) for rollback capability</li> <li> Test disaster recovery procedures</li> <li> Understand that <code>delete_file</code> is DANGEROUS (not just CAUTION)</li> </ul>"},{"location":"SECURITY/#reporting-file-operations-vulnerabilities","title":"Reporting File Operations Vulnerabilities","text":"<p>If you discover a security vulnerability in file editing tools, please report it immediately to security@goatbytes.io with:</p> <ol> <li>Description of the vulnerability</li> <li>Steps to reproduce</li> <li>Proof of concept (if applicable)</li> <li>Suggested mitigation</li> </ol> <p>Do not report security vulnerabilities through public GitHub issues.</p>"},{"location":"SECURITY/#additional-resources","title":"Additional Resources","text":"<ul> <li>File Editing Documentation - Complete usage guide</li> <li>Tool Calling Guide - Security controls and policies</li> <li>OWASP Top 10</li> <li>Python Security Best Practices</li> <li>Bandit Documentation</li> <li>Safety Documentation</li> </ul>"},{"location":"contributing/","title":"Contributing","text":""},{"location":"contributing/#contributing-to-our-project","title":"Contributing to Our Project","text":"<p>Thank you for your interest in contributing! We're excited to have you join our community. Everyone is welcome to contribute, whether you're fixing bugs, adding features, or improving documentation. Here's how you can get started:</p>"},{"location":"contributing/#start-with-a-fork","title":"Start with a Fork","text":"<p>Feel free to fork this repository if you want to make substantial changes. This lets you tweak the project as much as you like in your own version while still allowing you to contribute back to the main project.</p>"},{"location":"contributing/#making-contributions","title":"Making Contributions","text":"<ol> <li> <p>Agree to Our Contributor License Agreement (CLA): Before your contributions can be accepted,    please sign our CLA. This ensures there are no legal hitches with your submissions.</p> </li> <li> <p>Make Your Changes: Work on your forked version of the repository and make your changes. Try    to keep your updates clear and stick to the project's existing style as much as you can.</p> </li> <li> <p>Submit a Pull Request: Once you're ready, send us a pull request. Describe what you've done    and how it affects the project. We're eager to see your ideas!</p> </li> </ol>"},{"location":"contributing/#what-happens-next","title":"What Happens Next?","text":"<p>We'll review your pull request as soon as we can. We appreciate every contribution, but sometimes changes might not align perfectly with our project's direction. We'll discuss potential adjustments with you, so your hard work can still be part of the project.</p>"},{"location":"contributing/#keep-your-fork-updated","title":"Keep Your Fork Updated","text":"<p>Even if your changes don't make it into the project, keep your fork active! Your unique tweaks could inspire others, and you might find ways to integrate your changes over time.</p>"},{"location":"contributing/#got-questions-or-suggestions","title":"Got Questions or Suggestions?","text":"<p>If you have questions or suggestions, please open an issue in the repository. We're always looking to improve and love hearing from the community.</p> <p>Thank you for helping us make this project better. We can't wait to see what you bring to the table!</p>"},{"location":"development/","title":"Setup","text":""},{"location":"development/#development-environment-setup","title":"Development Environment Setup","text":"<p>This guide will help you set up your development environment for contributing to Consoul.</p>"},{"location":"development/#prerequisites","title":"Prerequisites","text":"<ul> <li>Python 3.10 or higher</li> <li>Poetry for dependency management</li> <li>Git for version control</li> </ul>"},{"location":"development/#environment-setup","title":"Environment Setup","text":""},{"location":"development/#1-install-python","title":"1. Install Python","text":"<p>We recommend using pyenv to manage Python versions:</p> <pre><code># Install pyenv (macOS)\nbrew install pyenv\n\n# Install Python 3.12 (or your preferred version &gt;= 3.10)\npyenv install 3.12.3\npyenv local 3.12.3\n</code></pre> <p>Alternatively, you can use your system Python if it's version 3.10 or higher.</p>"},{"location":"development/#2-install-poetry","title":"2. Install Poetry","text":"<pre><code># macOS/Linux/WSL\ncurl -sSL https://install.python-poetry.org | python3 -\n\n# Or via pip\npip install poetry\n</code></pre>"},{"location":"development/#3-clone-the-repository","title":"3. Clone the Repository","text":"<pre><code>git clone https://github.com/goatbytes/consoul.git\ncd consoul\n</code></pre>"},{"location":"development/#4-install-dependencies","title":"4. Install Dependencies","text":"<pre><code># Install all dependencies including dev, docs, and security tools\nmake install-dev\n\n# Or using Poetry directly\npoetry install --with dev,docs,security\n</code></pre>"},{"location":"development/#development-workflow","title":"Development Workflow","text":""},{"location":"development/#running-tests","title":"Running Tests","text":"<pre><code># Run tests with coverage report\nmake test\n\n# Run tests without coverage (faster)\nmake test-fast\n\n# Or using Poetry directly\npoetry run pytest -v --cov\n</code></pre>"},{"location":"development/#code-quality-checks","title":"Code Quality Checks","text":"<pre><code># Run linting checks\nmake lint\n\n# Auto-fix linting issues\nmake lint-fix\n\n# Format code\nmake format\n\n# Check code formatting without changes\nmake format-check\n\n# Run type checking\nmake type-check\n\n# Run all quality checks (lint + format-check + type-check)\nmake quality\n</code></pre>"},{"location":"development/#pre-commit-hooks","title":"Pre-commit Hooks","text":"<p>We use pre-commit hooks to ensure code quality before commits:</p> <pre><code># Install pre-commit hooks\npoetry run pre-commit install\n\n# Run pre-commit on all files\nmake pre-commit\n\n# Pre-commit will automatically run on git commit\n</code></pre> <p>The pre-commit hooks include: - Trailing whitespace removal - End-of-file fixer - YAML/TOML/JSON validation - Ruff linting and formatting - Mypy type checking</p>"},{"location":"development/#building-the-package","title":"Building the Package","text":"<pre><code># Build distribution packages\nmake build\n\n# This creates wheel and source distributions in dist/\n</code></pre>"},{"location":"development/#building-documentation","title":"Building Documentation","text":"<pre><code># Build documentation (when configured)\nmake docs\n</code></pre> <p>Note: Documentation build is not yet fully configured.</p>"},{"location":"development/#updating-dependencies","title":"Updating Dependencies","text":"<pre><code># Update all dependencies to latest compatible versions\nmake update\n\n# Or using Poetry directly\npoetry update\n</code></pre>"},{"location":"development/#security-scanning","title":"Security Scanning","text":"<pre><code># Run security checks (Bandit + Safety)\nmake security\n\n# Generate detailed security audit reports\nmake security-audit\n\n# This creates:\n# - bandit-report.json (code security issues)\n# - safety-report.json (dependency vulnerabilities)\n</code></pre>"},{"location":"development/#cleaning-build-artifacts","title":"Cleaning Build Artifacts","text":"<pre><code># Remove build artifacts, caches, and temporary files\nmake clean\n</code></pre>"},{"location":"development/#project-structure","title":"Project Structure","text":"<pre><code>consoul/\n\u251c\u2500\u2500 src/consoul/          # Main package source code\n\u2502   \u251c\u2500\u2500 __init__.py       # Package metadata\n\u2502   \u251c\u2500\u2500 __main__.py       # CLI entry point\n\u2502   \u251c\u2500\u2500 ai/               # AI integration modules\n\u2502   \u251c\u2500\u2500 tui/              # Textual TUI components\n\u2502   \u251c\u2500\u2500 config/           # Configuration management\n\u2502   \u2514\u2500\u2500 utils/            # Utility functions\n\u251c\u2500\u2500 tests/                # Test suite\n\u2502   \u251c\u2500\u2500 conftest.py       # Pytest fixtures\n\u2502   \u251c\u2500\u2500 unit/             # Unit tests\n\u2502   \u2514\u2500\u2500 integration/      # Integration tests\n\u251c\u2500\u2500 docs/                 # Documentation\n\u251c\u2500\u2500 .github/              # GitHub Actions workflows\n\u251c\u2500\u2500 pyproject.toml        # Project configuration\n\u251c\u2500\u2500 poetry.lock           # Locked dependencies\n\u251c\u2500\u2500 Makefile              # Development task automation\n\u2514\u2500\u2500 README.md             # Project README\n</code></pre>"},{"location":"development/#troubleshooting","title":"Troubleshooting","text":""},{"location":"development/#poetry-installation-issues","title":"Poetry Installation Issues","text":"<p>If you encounter issues installing Poetry:</p> <ol> <li>Ensure Python 3.10+ is installed and available</li> <li>Try the alternative installation method (pip vs official installer)</li> <li>Check that <code>~/.local/bin</code> or equivalent is in your PATH</li> </ol>"},{"location":"development/#dependency-resolution-errors","title":"Dependency Resolution Errors","text":"<p>If Poetry fails to resolve dependencies:</p> <pre><code># Clear Poetry cache\npoetry cache clear pypi --all\n\n# Try installing again\npoetry install --with dev,docs,security\n</code></pre>"},{"location":"development/#pre-commit-hook-failures","title":"Pre-commit Hook Failures","text":"<p>If pre-commit hooks fail:</p> <ol> <li>Read the error message carefully</li> <li>Run the specific tool manually (e.g., <code>make lint-fix</code>, <code>make format</code>)</li> <li>Stage the auto-fixed changes and commit again</li> </ol>"},{"location":"development/#type-checking-errors","title":"Type Checking Errors","text":"<p>If mypy reports errors:</p> <ol> <li>Ensure all dependencies are installed: <code>make install-dev</code></li> <li>Check that <code>py.typed</code> marker exists in <code>src/consoul/</code></li> <li>Review mypy configuration in <code>pyproject.toml</code></li> </ol>"},{"location":"development/#test-failures","title":"Test Failures","text":"<p>If tests fail:</p> <ol> <li>Ensure all dev dependencies are installed</li> <li>Check that you're using Python 3.10+</li> <li>Run with verbose output: <code>poetry run pytest -vv</code></li> <li>Check for missing test fixtures in <code>conftest.py</code></li> </ol>"},{"location":"development/#getting-help","title":"Getting Help","text":"<ul> <li>Documentation: See the documentation home</li> <li>Issues: Report bugs or request features on GitHub Issues</li> <li>Contributing: Review CONTRIBUTING.md for guidelines</li> </ul>"},{"location":"development/#code-style-guidelines","title":"Code Style Guidelines","text":""},{"location":"development/#python-style","title":"Python Style","text":"<ul> <li>Line Length: 88 characters (Ruff default)</li> <li>Indentation: 4 spaces</li> <li>Imports: Sorted and grouped (isort compatible)</li> <li>Type Hints: Required for all public APIs</li> <li>Docstrings: Google style for all public modules, classes, and functions</li> </ul>"},{"location":"development/#commit-messages","title":"Commit Messages","text":"<p>Follow conventional commits format:</p> <pre><code>type(scope): brief description\n\nLonger description if needed.\n\nGira: SOUL-XXX\n</code></pre> <p>Types: <code>feat</code>, <code>fix</code>, <code>docs</code>, <code>refactor</code>, <code>test</code>, <code>chore</code>, <code>ci</code></p>"},{"location":"development/#branch-naming","title":"Branch Naming","text":"<ul> <li>Feature: <code>feature/SOUL-XXX-description</code></li> <li>Bug fix: <code>fix/SOUL-XXX-description</code></li> <li>Docs: <code>docs/SOUL-XXX-description</code></li> </ul>"},{"location":"development/#ide-setup","title":"IDE Setup","text":""},{"location":"development/#vs-code-recommended","title":"VS Code (Recommended)","text":"<p>The project includes workspace settings in <code>.vscode/settings.json</code> with:</p> <ul> <li>Python path configuration</li> <li>Ruff extension integration</li> <li>Mypy extension integration</li> <li>Test discovery configuration</li> </ul> <p>Install recommended extensions: - Python (ms-python.python) - Ruff (charliermarsh.ruff) - Mypy Type Checker (ms-python.mypy-type-checker)</p>"},{"location":"development/#pycharm","title":"PyCharm","text":"<ol> <li>Open project directory</li> <li>PyCharm should auto-detect Poetry and configure the interpreter</li> <li>Enable Poetry in: Settings \u2192 Project \u2192 Python Interpreter \u2192 Poetry Environment</li> <li>Configure Ruff and mypy in external tools if desired</li> </ol>"},{"location":"development/#next-steps","title":"Next Steps","text":"<p>After setting up your environment:</p> <ol> <li>Run <code>make quality</code> to verify everything works</li> <li>Run <code>make test</code> to ensure all tests pass</li> <li>Review CONTRIBUTING.md for contribution guidelines</li> <li>Check open issues on GitHub for tasks to work on</li> <li>Sign the Contributor License Agreement</li> </ol> <p>Happy coding! \ud83d\ude80</p>"},{"location":"faqs/","title":"FAQs","text":""},{"location":"faqs/#frequently-asked-questions","title":"Frequently Asked Questions","text":""},{"location":"faqs/#general","title":"General","text":""},{"location":"faqs/#what-is-consoul","title":"What is Consoul?","text":"<p>Consoul is an AI-powered terminal assistant that brings modern AI capabilities directly to your terminal. It offers three interfaces: a beautiful TUI (Terminal User Interface), a powerful CLI, and a flexible SDK for integration.</p>"},{"location":"faqs/#which-ai-models-does-consoul-support","title":"Which AI models does Consoul support?","text":"<p>Consoul supports multiple AI providers:</p> <ul> <li>OpenAI: GPT-4o, GPT-4o-mini, GPT-4 Turbo, and more</li> <li>Anthropic: Claude 3.5 Sonnet, Claude 3 Opus, Claude 3 Haiku</li> <li>Google: Gemini 2.0 Flash, Gemini 1.5 Pro, Gemini 1.5 Flash</li> <li>Ollama: Any locally-hosted models (Llama, Mistral, etc.)</li> </ul>"},{"location":"faqs/#do-i-need-api-keys","title":"Do I need API keys?","text":"<p>Yes, you need API keys for the cloud providers you want to use:</p> <ul> <li><code>OPENAI_API_KEY</code> for OpenAI models</li> <li><code>ANTHROPIC_API_KEY</code> for Claude models</li> <li><code>GOOGLE_API_KEY</code> for Gemini models</li> </ul> <p>Ollama models run locally and don't require API keys.</p>"},{"location":"faqs/#installation-setup","title":"Installation &amp; Setup","text":""},{"location":"faqs/#how-do-i-install-consoul","title":"How do I install Consoul?","text":"<pre><code>pip install consoul\n</code></pre> <p>Or with all features:</p> <pre><code>pip install consoul[all]\n</code></pre>"},{"location":"faqs/#where-are-the-configuration-files-stored","title":"Where are the configuration files stored?","text":"<p>Configuration files are stored in:</p> <ul> <li>macOS/Linux: <code>~/.config/consoul/</code></li> <li>Windows: <code>%APPDATA%\\consoul\\</code></li> </ul>"},{"location":"faqs/#how-do-i-configure-my-api-keys","title":"How do I configure my API keys?","text":"<p>Run the interactive configuration:</p> <pre><code>consoul config\n</code></pre> <p>Or set environment variables:</p> <pre><code>export OPENAI_API_KEY=\"your-key-here\"\nexport ANTHROPIC_API_KEY=\"your-key-here\"\nexport GOOGLE_API_KEY=\"your-key-here\"\n</code></pre>"},{"location":"faqs/#using-the-tui","title":"Using the TUI","text":""},{"location":"faqs/#how-do-i-launch-the-tui","title":"How do I launch the TUI?","text":"<pre><code>consoul\n</code></pre> <p>Or for a specific model:</p> <pre><code>consoul --model claude-3-5-sonnet-20241022\n</code></pre>"},{"location":"faqs/#what-are-the-keyboard-shortcuts","title":"What are the keyboard shortcuts?","text":"<p>See the Keyboard Shortcuts page for a complete list. Common ones:</p> <ul> <li><code>Ctrl+N</code>: New conversation</li> <li><code>Ctrl+S</code>: Settings</li> <li><code>Ctrl+M</code>: Model selector</li> <li><code>Ctrl+C</code>: Quit</li> </ul>"},{"location":"faqs/#can-i-customize-the-theme","title":"Can I customize the theme?","text":"<p>Yes! Consoul comes with multiple built-in themes:</p> <ul> <li>Consoul Dark/Light</li> <li>Tokyo Night</li> <li>Nord</li> <li>Gruvbox</li> <li>Flexoki</li> </ul> <p>Switch themes in Settings (<code>Ctrl+S</code>) or via configuration.</p>"},{"location":"faqs/#how-do-i-attach-files-in-the-tui","title":"How do I attach files in the TUI?","text":"<p>Press <code>Ctrl+A</code> to open the attach modal, then:</p> <ol> <li>Select files from your filesystem</li> <li>Choose images to analyze</li> <li>Add code snippets</li> </ol>"},{"location":"faqs/#using-the-cli","title":"Using the CLI","text":""},{"location":"faqs/#how-do-i-ask-a-quick-question","title":"How do I ask a quick question?","text":"<pre><code>consoul ask \"What is the capital of France?\"\n</code></pre>"},{"location":"faqs/#how-do-i-start-a-chat-session","title":"How do I start a chat session?","text":"<pre><code>consoul chat\n</code></pre>"},{"location":"faqs/#can-i-pipe-content-to-consoul","title":"Can I pipe content to Consoul?","text":"<p>Yes! Pipe any content:</p> <pre><code>cat myfile.py | consoul ask \"Explain this code\"\n</code></pre>"},{"location":"faqs/#how-do-i-attach-files-from-the-cli","title":"How do I attach files from the CLI?","text":"<pre><code>consoul ask \"Review this code\" --attach file.py\n</code></pre>"},{"location":"faqs/#using-the-sdk","title":"Using the SDK","text":""},{"location":"faqs/#how-do-i-use-consoul-in-my-python-code","title":"How do I use Consoul in my Python code?","text":"<pre><code>from consoul.chat.manager import ChatManager\nfrom consoul.config.manager import ConfigurationManager\n\nconfig = ConfigurationManager()\nchat = ChatManager(config, model_name=\"gpt-4o\")\n\nasync for chunk in chat.send_message(\"Hello!\"):\n    print(chunk.content, end=\"\")\n</code></pre>"},{"location":"faqs/#can-i-create-custom-tools","title":"Can I create custom tools?","text":"<p>Yes! See the Tools documentation for details on creating custom tools.</p>"},{"location":"faqs/#is-the-sdk-async-or-sync","title":"Is the SDK async or sync?","text":"<p>The SDK is async-first, using <code>asyncio</code> for efficient concurrent operations and streaming responses.</p>"},{"location":"faqs/#troubleshooting","title":"Troubleshooting","text":""},{"location":"faqs/#im-getting-api-key-not-found-errors","title":"I'm getting \"API key not found\" errors","text":"<p>Make sure you've set your API keys:</p> <ol> <li>Run <code>consoul config</code> to set them interactively</li> <li>Or export them as environment variables</li> <li>Check the configuration file at <code>~/.config/consoul/config.yaml</code></li> </ol>"},{"location":"faqs/#the-tui-doesnt-display-properly","title":"The TUI doesn't display properly","text":"<p>Try:</p> <ol> <li>Update your terminal emulator</li> <li>Ensure your terminal supports 256 colors or true color</li> <li>Check if your terminal font supports Unicode characters</li> </ol>"},{"location":"faqs/#models-are-responding-slowly","title":"Models are responding slowly","text":"<ul> <li>Cloud models depend on API response times</li> <li>Try switching to a faster model (e.g., GPT-4o-mini, Claude Haiku)</li> <li>For local models via Ollama, ensure your hardware is sufficient</li> </ul>"},{"location":"faqs/#how-do-i-report-bugs","title":"How do I report bugs?","text":"<p>Please report bugs on our GitHub Issues page.</p>"},{"location":"faqs/#features","title":"Features","text":""},{"location":"faqs/#does-consoul-support-streaming-responses","title":"Does Consoul support streaming responses?","text":"<p>Yes! All interfaces support streaming responses for real-time output.</p>"},{"location":"faqs/#can-i-save-conversation-history","title":"Can I save conversation history?","text":"<p>Yes, conversations are automatically saved. You can:</p> <ul> <li>Resume previous conversations in the TUI</li> <li>Export conversations to markdown or JSON</li> <li>List and search past conversations</li> </ul>"},{"location":"faqs/#does-consoul-support-code-execution","title":"Does Consoul support code execution?","text":"<p>Not directly. However, you can use tools to run code safely in sandboxed environments.</p>"},{"location":"faqs/#can-i-use-consoul-offline","title":"Can I use Consoul offline?","text":"<p>Yes, with Ollama models running locally. Cloud models require an internet connection.</p>"},{"location":"faqs/#privacy-security","title":"Privacy &amp; Security","text":""},{"location":"faqs/#is-my-data-stored-on-your-servers","title":"Is my data stored on your servers?","text":"<p>No. Consoul runs locally on your machine. Conversations are only sent to the AI providers you choose (OpenAI, Anthropic, Google, or local Ollama).</p>"},{"location":"faqs/#are-my-api-keys-secure","title":"Are my API keys secure?","text":"<p>API keys are stored locally in your configuration file. Never commit them to version control. Use environment variables in production.</p>"},{"location":"faqs/#what-data-does-consoul-collect","title":"What data does Consoul collect?","text":"<p>Consoul doesn't collect any usage data or telemetry. All processing happens locally on your machine.</p>"},{"location":"faqs/#advanced","title":"Advanced","text":""},{"location":"faqs/#can-i-use-custom-prompts-or-system-messages","title":"Can I use custom prompts or system messages?","text":"<p>Yes! Configure system prompts in your configuration file or via the Settings modal in the TUI.</p>"},{"location":"faqs/#how-do-i-switch-between-different-model-providers","title":"How do I switch between different model providers?","text":"<p>Use the model selector (<code>Ctrl+M</code> in TUI) or specify the model via CLI:</p> <pre><code>consoul ask \"Question\" --model claude-3-5-sonnet-20241022\n</code></pre>"},{"location":"faqs/#can-i-run-multiple-conversations-in-parallel","title":"Can I run multiple conversations in parallel?","text":"<p>Yes, using the SDK you can manage multiple <code>ChatManager</code> instances concurrently.</p>"},{"location":"faqs/#how-do-i-contribute-to-consoul","title":"How do I contribute to Consoul?","text":"<p>See our Contributing Guide for details on:</p> <ul> <li>Setting up the development environment</li> <li>Code style guidelines</li> <li>Submitting pull requests</li> </ul>"},{"location":"faqs/#support","title":"Support","text":""},{"location":"faqs/#where-can-i-get-help","title":"Where can I get help?","text":"<ul> <li>Documentation: https://goatbytes.github.io/consoul/</li> <li>GitHub Issues: https://github.com/goatbytes/consoul/issues</li> <li>Discussions: https://github.com/goatbytes/consoul/discussions</li> </ul>"},{"location":"faqs/#is-consoul-open-source","title":"Is Consoul open source?","text":"<p>Yes! Consoul is open source under the MIT License.</p>"},{"location":"installation/","title":"Installation","text":""},{"location":"installation/#installation","title":"Installation","text":"<p>This guide will help you install Consoul on your system.</p>"},{"location":"installation/#prerequisites","title":"Prerequisites","text":"<ul> <li>Python 3.10 or higher</li> <li>pip (Python package installer)</li> <li>C compiler (for tree-sitter compilation):</li> <li>macOS: Xcode Command Line Tools (<code>xcode-select --install</code>)</li> <li>Linux: build-essential package (<code>sudo apt-get install build-essential</code>)</li> <li>Windows: Visual Studio Build Tools 2019+ OR MinGW</li> </ul>"},{"location":"installation/#installation-methods","title":"Installation Methods","text":""},{"location":"installation/#from-pypi-recommended","title":"From PyPI (Recommended)","text":"<p>Install the latest stable release from PyPI:</p> <pre><code>pip install consoul\n</code></pre> <p>For development dependencies:</p> <pre><code>pip install 'consoul[dev]'\n</code></pre>"},{"location":"installation/#from-source","title":"From Source","text":"<p>Clone the repository and install in development mode:</p> <pre><code># Clone the repository\ngit clone https://github.com/goatbytes/consoul.git\ncd consoul\n\n# Install with Poetry\npoetry install --with dev,docs,security\n\n# Or install with pip in editable mode\npip install -e '.[dev]'\n</code></pre>"},{"location":"installation/#using-pipx-isolated-installation","title":"Using pipx (Isolated Installation)","text":"<p>For an isolated installation that doesn't affect your system Python:</p> <pre><code># Install pipx if you don't have it\npython3 -m pip install --user pipx\npython3 -m pipx ensurepath\n\n# Install Consoul\npipx install consoul\n</code></pre>"},{"location":"installation/#verify-installation","title":"Verify Installation","text":"<p>After installation, verify that Consoul is installed correctly:</p> <pre><code># Check version\nconsoul --version\n\n# Run help to see available commands\nconsoul --help\n</code></pre>"},{"location":"installation/#configuration","title":"Configuration","text":""},{"location":"installation/#api-keys","title":"API Keys","text":"<p>Consoul requires API keys for AI providers. Set them as environment variables:</p> <p>For Anthropic (Claude): </p><pre><code>export ANTHROPIC_API_KEY=\"your-api-key-here\"\n</code></pre><p></p> <p>For OpenAI: </p><pre><code>export OPENAI_API_KEY=\"your-api-key-here\"\n</code></pre><p></p> <p>For Google (Gemini): </p><pre><code>export GOOGLE_API_KEY=\"your-api-key-here\"\n</code></pre><p></p> <p>Add these to your shell configuration file (<code>~/.bashrc</code>, <code>~/.zshrc</code>, etc.) to make them permanent:</p> <pre><code># Add to ~/.zshrc or ~/.bashrc\necho 'export ANTHROPIC_API_KEY=\"your-api-key-here\"' &gt;&gt; ~/.zshrc\nsource ~/.zshrc\n</code></pre>"},{"location":"installation/#configuration-file","title":"Configuration File","text":"<p>Create a configuration file at <code>~/.config/consoul/config.yaml</code>:</p> <pre><code># Create config directory\nmkdir -p ~/.config/consoul\n\n# Create basic config file\ncat &gt; ~/.config/consoul/config.yaml &lt;&lt; EOF\nprovider: anthropic\nmodel: claude-3-5-sonnet-20241022\ntheme: dark\nsave_conversations: true\nEOF\n</code></pre>"},{"location":"installation/#troubleshooting","title":"Troubleshooting","text":""},{"location":"installation/#command-not-found","title":"Command Not Found","text":"<p>If you get a \"command not found\" error after installation:</p> <ol> <li> <p>Ensure <code>pip</code> installs to a directory in your PATH:    </p><pre><code>python3 -m pip install --user consoul\n</code></pre><p></p> </li> <li> <p>Add Python user bin to your PATH:    </p><pre><code># For Linux/macOS\necho 'export PATH=\"$HOME/.local/bin:$PATH\"' &gt;&gt; ~/.zshrc\nsource ~/.zshrc\n</code></pre><p></p> </li> </ol>"},{"location":"installation/#permission-errors","title":"Permission Errors","text":"<p>If you encounter permission errors during installation:</p> <pre><code># Use --user flag to install in your home directory\npip install --user consoul\n</code></pre>"},{"location":"installation/#python-version-issues","title":"Python Version Issues","text":"<p>If your default <code>python</code> is not 3.10+:</p> <pre><code># Install with python3 explicitly\npython3 -m pip install consoul\n\n# Or use pyenv to manage Python versions\npyenv install 3.12.3\npyenv global 3.12.3\n</code></pre>"},{"location":"installation/#missing-dependencies","title":"Missing Dependencies","text":"<p>If you encounter missing dependency errors:</p> <pre><code># Upgrade pip\npip install --upgrade pip\n\n# Install with all dependencies\npip install --upgrade consoul\n</code></pre>"},{"location":"installation/#tree-sitter-compilation-errors","title":"tree-sitter Compilation Errors","text":"<p>If you encounter errors related to tree-sitter compilation:</p> <p>macOS: </p><pre><code># Install Xcode Command Line Tools\nxcode-select --install\n\n# Verify compiler is available\ngcc --version\n</code></pre><p></p> <p>Linux (Ubuntu/Debian): </p><pre><code># Install build tools\nsudo apt-get update\nsudo apt-get install build-essential\n\n# Verify compiler is available\ngcc --version\n</code></pre><p></p> <p>Windows: </p><pre><code># Install Visual Studio Build Tools from:\n# https://visualstudio.microsoft.com/downloads/#build-tools-for-visual-studio-2022\n\n# Or use MinGW\n# https://www.mingw-w64.org/\n</code></pre><p></p> <p>Validation: </p><pre><code># Test tree-sitter compilation after installing compiler\npython -c \"from tree_sitter import Language, Parser; print('\u2713 tree-sitter OK')\"\n</code></pre><p></p> <p>Note: If tree-sitter installation fails, basic text search (grep_search) will still work. Code structure search gracefully degrades without tree-sitter.</p>"},{"location":"installation/#next-steps","title":"Next Steps","text":"<ul> <li>Quick Start Guide \u2013 Get started with your first conversation</li> <li>Configuration Guide \u2013 Customize Consoul for your workflow</li> <li>User Guide \u2013 Learn all Consoul features</li> </ul>"},{"location":"installation/#uninstallation","title":"Uninstallation","text":"<p>To remove Consoul:</p> <pre><code># Standard installation\npip uninstall consoul\n\n# pipx installation\npipx uninstall consoul\n</code></pre> <p>To remove configuration files:</p> <pre><code>rm -rf ~/.config/consoul\n</code></pre>"},{"location":"loading-screen/","title":"Consoul Loading Screen","text":""},{"location":"loading-screen/#consoul-loading-screen","title":"Consoul Loading Screen","text":""},{"location":"loading-screen/#overview","title":"Overview","text":"<p>The Consoul loading screen provides a branded, animated startup experience that displays while the TUI initializes. It features custom animations matching the Consoul logo aesthetic with sound wave patterns.</p>"},{"location":"loading-screen/#features","title":"Features","text":"<ul> <li>Brand-aligned animations: Sound wave pattern matching the Consoul logo</li> <li>Multiple animation styles: Matrix rain, binary wave, code stream, pulse, and sound wave</li> <li>Progress tracking: Optional progress bar with status messages</li> <li>Smooth transitions: Fade-in/fade-out effects</li> <li>Configurable: Control animation style and visibility via TuiConfig</li> </ul>"},{"location":"loading-screen/#architecture","title":"Architecture","text":""},{"location":"loading-screen/#modules","title":"Modules","text":"<ol> <li><code>consoul/tui/animations.py</code></li> <li><code>AnimationStyle</code>: Enum of available animation styles</li> <li><code>BinaryAnimator</code>: Core animation engine generating frame data</li> <li> <p>Supports custom Consoul brand colors (Sky Blue #0085CC gradient)</p> </li> <li> <p><code>consoul/tui/loading.py</code></p> </li> <li><code>BinaryCanvas</code>: Widget that renders animations</li> <li><code>LoadingScreen</code>: Composable widget with message and progress</li> <li><code>ConsoulLoadingScreen</code>: Screen wrapper for use in Textual apps</li> </ol>"},{"location":"loading-screen/#configuration","title":"Configuration","text":"<p>Add to <code>TuiConfig</code> (already implemented in <code>consoul/tui/config.py</code>):</p> <pre><code># Loading Screen\nshow_loading_screen: bool = True\nloading_animation_style: Literal[\"sound_wave\", \"matrix_rain\", \"binary_wave\", \"code_stream\", \"pulse\"] = \"sound_wave\"\nloading_show_progress: bool = True\n</code></pre>"},{"location":"loading-screen/#integration-guide","title":"Integration Guide","text":""},{"location":"loading-screen/#option-1-screen-based-integration-recommended","title":"Option 1: Screen-based Integration (Recommended)","text":"<p>Show loading screen before pushing the main app screen:</p> <pre><code>from consoul.tui.loading import ConsoulLoadingScreen\nfrom consoul.tui.animations import AnimationStyle\n\nclass ConsoulApp(App):\n    def on_mount(self) -&gt; None:\n        \"\"\"Show loading screen during initialization.\"\"\"\n        if self.config.show_loading_screen:\n            loading_screen = ConsoulLoadingScreen(\n                animation_style=AnimationStyle[self.config.loading_animation_style.upper()],\n                show_progress=self.config.loading_show_progress,\n            )\n            self.push_screen(loading_screen)\n            self._perform_initialization(loading_screen)\n\n    @work\n    async def _perform_initialization(self, loading_screen: ConsoulLoadingScreen) -&gt; None:\n        \"\"\"Perform async initialization with progress updates.\"\"\"\n        # Step 1: Initialize AI models\n        loading_screen.update_progress(\"Loading AI models...\", 25)\n        await self._init_ai_models()\n\n        # Step 2: Load conversation history\n        loading_screen.update_progress(\"Loading conversation history...\", 50)\n        await self._load_conversations()\n\n        # Step 3: Initialize tools\n        loading_screen.update_progress(\"Initializing tools...\", 75)\n        await self._init_tools()\n\n        # Step 4: Finalize\n        loading_screen.update_progress(\"Ready!\", 100)\n        await asyncio.sleep(0.5)\n\n        # Fade out and show main UI\n        await loading_screen.fade_out(duration=1.0)\n        self.pop_screen()\n</code></pre>"},{"location":"loading-screen/#option-2-inline-widget","title":"Option 2: Inline Widget","text":"<p>Use <code>LoadingScreen</code> as a widget within existing layouts:</p> <pre><code>from consoul.tui.loading import LoadingScreen\n\nclass MyContainer(Container):\n    def compose(self) -&gt; ComposeResult:\n        yield LoadingScreen(\n            message=\"Initializing...\",\n            style=AnimationStyle.SOUND_WAVE,\n            show_progress=True\n        )\n</code></pre>"},{"location":"loading-screen/#animation-styles","title":"Animation Styles","text":""},{"location":"loading-screen/#sound-wave-recommended-matches-logo","title":"Sound Wave (Recommended - matches logo)","text":"<pre><code>AnimationStyle.SOUND_WAVE\n</code></pre> Vertical bars animated like sound waveforms, echoing the Consoul logo design."},{"location":"loading-screen/#matrix-rain","title":"Matrix Rain","text":"<pre><code>AnimationStyle.MATRIX_RAIN\n</code></pre> Classic falling binary digits in Consoul brand colors."},{"location":"loading-screen/#binary-wave","title":"Binary Wave","text":"<pre><code>AnimationStyle.BINARY_WAVE\n</code></pre> Sine wave pattern using binary characters."},{"location":"loading-screen/#code-stream","title":"Code Stream","text":"<pre><code>AnimationStyle.CODE_STREAM\n</code></pre> Horizontally scrolling Python code with syntax highlighting."},{"location":"loading-screen/#pulse","title":"Pulse","text":"<pre><code>AnimationStyle.PULSE\n</code></pre> Pulsing binary pattern radiating from center."},{"location":"loading-screen/#example-usage","title":"Example Usage","text":"<p>See <code>examples/test_loading_standalone.py</code> for a working demo:</p> <pre><code>cd ~/Development/github/goatbytes/consoul\npython examples/test_loading_standalone.py\n</code></pre>"},{"location":"loading-screen/#todo-integration-points","title":"TODO Integration Points","text":"<p>To fully integrate into <code>ConsoulApp</code>:</p> <ol> <li>Modify <code>ConsoulApp.on_mount()</code> (<code>src/consoul/tui/app.py:561</code>)</li> <li>Check <code>self.config.show_loading_screen</code></li> <li>Push <code>ConsoulLoadingScreen</code> before initialization</li> <li>Move heavy initialization (AI model loading, tool registry, etc.) into async worker</li> <li>Update progress during each initialization step</li> <li> <p>Fade out and pop screen when complete</p> </li> <li> <p>Add CLI flag (<code>src/consoul/tui/cli.py</code>)    </p><pre><code>@click.option(\"--no-loading-screen\", is_flag=True, help=\"Skip loading screen\")\n</code></pre><p></p> </li> <li> <p>Handle config file settings</p> </li> <li>Respect <code>show_loading_screen</code> from user's config file</li> <li>Allow override via CLI flag</li> </ol>"},{"location":"loading-screen/#color-scheme","title":"Color Scheme","text":"<p>The loading screen uses Consoul brand colors defined in <code>consoul/tui/themes.py</code>:</p> <ul> <li>Primary (Sky Blue): <code>#0085CC</code></li> <li>Secondary (Deep Purple): <code>#44385E</code></li> <li>Background: Dark theme default</li> <li>Text: White/Light gray for contrast</li> </ul> <p>Animations automatically use these colors through the blue/purple color schemes.</p>"},{"location":"loading-screen/#performance-considerations","title":"Performance Considerations","text":"<ul> <li>Animations run at 30 FPS</li> <li>Minimal CPU usage (~1-2% on modern systems)</li> <li>No blocking operations during animation</li> <li>Smooth transitions using Textual's animation system</li> </ul>"},{"location":"loading-screen/#future-enhancements","title":"Future Enhancements","text":"<ul> <li> Add actual Consoul logo rendering (PNG/SVG to ASCII art)</li> <li> Custom animation combining logo + waveforms</li> <li> Particle effects for \"Ready!\" state</li> <li> Customizable messages per initialization step</li> <li> Accessibility: Option for static/minimal animation mode</li> </ul>"},{"location":"quickstart/","title":"Quick Start","text":""},{"location":"quickstart/#quick-start","title":"Quick Start","text":"<p>Get up and running with Consoul in just a few minutes!</p>"},{"location":"quickstart/#prerequisites","title":"Prerequisites","text":"<p>Make sure you've installed Consoul and configured your API keys.</p>"},{"location":"quickstart/#your-first-conversation","title":"Your First Conversation","text":""},{"location":"quickstart/#using-the-interactive-tui","title":"Using the Interactive TUI","text":"<p>Launch Consoul's terminal UI:</p> <pre><code>consoul tui\n</code></pre> <p>This opens an interactive interface where you can:</p> <ul> <li>Type messages and get AI responses</li> <li>View conversation history</li> <li>Switch between AI providers</li> <li>Manage settings</li> </ul> <p>Basic Controls:</p> <ul> <li><code>Ctrl+C</code> or <code>/quit</code> \u2013 Exit Consoul</li> <li><code>Ctrl+L</code> \u2013 Clear screen</li> <li><code>\u2191/\u2193</code> \u2013 Navigate history</li> <li><code>Tab</code> \u2013 Auto-complete commands</li> </ul>"},{"location":"quickstart/#using-cli-chat-mode","title":"Using CLI Chat Mode","text":"<p>Launch an interactive chat session:</p> <pre><code>consoul chat\n</code></pre> <p>Once in the session, you can have a conversation:</p> <pre><code>You: How do I list all Python files in a directory?\nAssistant: You can use several methods...\n\nYou: /tokens\n[Shows token usage]\n\nYou: /exit\n</code></pre>"},{"location":"quickstart/#common-use-cases","title":"Common Use Cases","text":""},{"location":"quickstart/#getting-code-help","title":"Getting Code Help","text":"<p>Use CLI chat for coding assistance:</p> <pre><code>$ consoul chat\n\nYou: Write a Python function to merge two sorted lists\nAssistant: [Provides solution with explanation]\n\nYou: Can you show me how to test this?\nAssistant: [Provides testing examples]\n</code></pre>"},{"location":"quickstart/#code-exploration","title":"Code Exploration","text":"<p>Use the TUI mode for exploring code:</p> <pre><code>$ consoul tui\n\n# In TUI, enable tools and ask:\nYou: Find all TODO comments in Python files\n# AI uses grep_search tool with approval\n\nYou: Show me the User class definition\n# AI uses code_search tool\n</code></pre>"},{"location":"quickstart/#debugging-sessions","title":"Debugging Sessions","text":"<p>Use slash commands during debugging:</p> <pre><code>$ consoul chat --model gpt-4o\n\nYou: I'm getting a KeyError in my dictionary access. How do I debug this?\nAssistant: [Provides debugging strategies]\n\nYou: /model claude-3-5-sonnet-20241022\n# Switch to Claude for a second opinion\n\nYou: Same question - what's your approach?\nAssistant: [Provides alternative perspective]\n\nYou: /export debug-session.md\n# Save the conversation for reference\n</code></pre>"},{"location":"quickstart/#quick-command-help","title":"Quick Command Help","text":"<p>Fast answers to shell questions:</p> <pre><code>$ consoul chat\n\nYou: How do I find all files larger than 100MB?\nAssistant: You can use the find command: `find . -type f -size +100M`\n\nYou: /exit\n</code></pre>"},{"location":"quickstart/#working-with-context","title":"Working with Context","text":""},{"location":"quickstart/#tui-mode-features","title":"TUI Mode Features","text":"<p>The TUI mode supports rich context management:</p> <ul> <li>File attachments - Click the \ud83d\udcce button to attach files to your message</li> <li>Image analysis - Attach screenshots and images for visual analysis</li> <li>Multiple conversations - Manage separate conversation tabs</li> </ul> <pre><code>consoul tui\n</code></pre>"},{"location":"quickstart/#cli-chat-mode","title":"CLI Chat Mode","text":"<p>CLI chat mode is focused on conversational interactions. For file analysis and complex workflows, use the TUI mode.</p>"},{"location":"quickstart/#conversation-management","title":"Conversation Management","text":"<p>Conversations are automatically persisted to a local SQLite database when enabled in your configuration.</p>"},{"location":"quickstart/#managing-history","title":"Managing History","text":"<pre><code># List recent conversations\nconsoul history list\n\n# Show a specific conversation\nconsoul history show &lt;session-id&gt;\n\n# Export a conversation\nconsoul history export &lt;session-id&gt; output.md --format markdown\n\n# Search conversation history\nconsoul history search \"python decorators\"\n\n# Clear all history\nconsoul history clear\n</code></pre>"},{"location":"quickstart/#session-controls","title":"Session Controls","text":"<p>Within CLI chat mode, use slash commands:</p> <pre><code>You: /export my-session.md    # Export current conversation\nYou: /clear                    # Clear history, start fresh\nYou: /tokens                   # Check usage\n</code></pre>"},{"location":"quickstart/#configuration","title":"Configuration","text":"<p>Configuration is managed through YAML files. See the Configuration Guide for details.</p>"},{"location":"quickstart/#profile-selection","title":"Profile Selection","text":"<pre><code># Use a specific profile\nconsoul --profile creative chat\n\n# List available profiles\nconsoul --list-profiles\n</code></pre>"},{"location":"quickstart/#quick-overrides","title":"Quick Overrides","text":"<pre><code># Override model\nconsoul chat --model gpt-4o\n\n# Override temperature\nconsoul --temperature 0.2 chat\n\n# Combine options\nconsoul --profile code-assistant --temperature 0.1 chat\n</code></pre>"},{"location":"quickstart/#advanced-usage","title":"Advanced Usage","text":""},{"location":"quickstart/#model-switching-mid-session","title":"Model Switching Mid-Session","text":"<p>Switch models during a conversation using the <code>/model</code> slash command:</p> <pre><code>$ consoul chat\n\nYou: Explain Python decorators\nAssistant: [GPT-4o response]\n\nYou: /model claude-3-5-sonnet-20241022\n\u2713 Switched to model: anthropic/claude-3-5-sonnet-20241022\n\nYou: Now explain the same concept\nAssistant: [Claude response with different perspective]\n</code></pre>"},{"location":"quickstart/#temperature-control","title":"Temperature Control","text":"<p>Adjust response creativity via global options:</p> <pre><code># More deterministic (good for code)\nconsoul --temperature 0.2 chat\n\n# More creative (good for writing)\nconsoul --temperature 0.9 chat\n\n# Change mid-session using profile switch\nYou: /model gpt-4o\n</code></pre>"},{"location":"quickstart/#export-and-share","title":"Export and Share","text":"<p>Export conversations for documentation or sharing:</p> <pre><code>You: /export session-2025-01-15.md\n\u2713 Conversation exported to: session-2025-01-15.md\n\nYou: /export debug-notes.json\n\u2713 Conversation exported to: debug-notes.json\n</code></pre>"},{"location":"quickstart/#interactive-commands","title":"Interactive Commands","text":""},{"location":"quickstart/#tui-mode-commands","title":"TUI Mode Commands","text":"<p>Within the TUI mode (<code>consoul tui</code>), use menu-driven interface:</p> <ul> <li>Ctrl+N - New conversation</li> <li>Ctrl+S - Save conversation</li> <li>Ctrl+O - Open/switch conversations</li> <li>Ctrl+Q or <code>/quit</code> - Exit</li> </ul> <p>See TUI Guide for complete keyboard shortcuts.</p>"},{"location":"quickstart/#cli-chat-mode-slash-commands","title":"CLI Chat Mode Slash Commands","text":"<p>Within CLI chat sessions (<code>consoul chat</code>), use slash commands:</p> <pre><code>/help                   Show available commands\n/clear                  Clear conversation history\n/tokens                 Show token usage\n/stats                  Session statistics\n/exit, /quit            Exit session\n/model &lt;name&gt;           Switch model\n/tools &lt;on|off&gt;         Toggle tools\n/export &lt;filename&gt;      Export conversation\n</code></pre> <p>See CLI Chat Guide for complete documentation.</p>"},{"location":"quickstart/#tips-and-tricks","title":"Tips and Tricks","text":""},{"location":"quickstart/#use-aliases","title":"Use Aliases","text":"<p>Add shell aliases for quick access:</p> <pre><code># Add to ~/.zshrc or ~/.bashrc\nalias ask=\"consoul chat\"\nalias tui=\"consoul tui\"\n</code></pre> <p>Then use them:</p> <pre><code>ask            # Launch CLI chat\ntui            # Launch TUI mode\n</code></pre>"},{"location":"quickstart/#efficient-workflows","title":"Efficient Workflows","text":"<p>Quick questions: </p><pre><code># Launch, ask, exit\n$ consoul chat\nYou: What's the difference between lists and tuples?\nAssistant: [Answer]\nYou: /exit\n</code></pre><p></p> <p>Code exploration (use TUI): </p><pre><code>$ consoul tui\n# Use rich interface with file attachments and tools\n</code></pre><p></p> <p>Compare models: </p><pre><code>$ consoul chat\nYou: Explain decorators\nAssistant: [GPT-4o answer]\n\nYou: /model claude-3-5-sonnet-20241022\nAssistant: [Claude answer]\n\nYou: /export model-comparison.md\n</code></pre><p></p>"},{"location":"quickstart/#session-management","title":"Session Management","text":"<pre><code># Save and review later\n$ consoul chat\nYou: [Long debugging session]\nYou: /export debug-2025-01-15.md\n\n# Search history later\n$ consoul history search \"decorator\"\n</code></pre>"},{"location":"quickstart/#keyboard-shortcuts","title":"Keyboard Shortcuts","text":"<p>TUI Mode:</p> Shortcut Action <code>Ctrl+C</code> Exit <code>Ctrl+L</code> Clear screen <code>Ctrl+D</code> Delete character <code>Ctrl+U</code> Clear line <code>\u2191/\u2193</code> Navigate history <code>Home/End</code> Move to line start/end <code>Tab</code> Auto-complete"},{"location":"quickstart/#next-steps","title":"Next Steps","text":"<ul> <li>User Guide \u2013 Learn all features in depth</li> <li>Configuration \u2013 Customize Consoul</li> <li>Development \u2013 Contribute to Consoul</li> </ul>"},{"location":"quickstart/#getting-help","title":"Getting Help","text":"<ul> <li>Run <code>consoul --help</code> for CLI help</li> <li>Type <code>/help</code> in TUI mode for interactive help</li> <li>Visit the documentation for detailed guides</li> <li>Report issues on GitHub</li> </ul>"},{"location":"sdk-tools/","title":"Tool Configuration","text":""},{"location":"sdk-tools/#sdk-tool-specification-guide","title":"SDK Tool Specification Guide","text":"<p>Complete guide to configuring tools in the Consoul SDK.</p>"},{"location":"sdk-tools/#table-of-contents","title":"Table of Contents","text":"<ul> <li>Quick Start</li> <li>Tool Specification Options</li> <li>Built-in Tools Reference</li> <li>Tool Categories</li> <li>Custom Tools</li> <li>Tool Discovery</li> <li>Security Considerations</li> <li>Common Use Cases</li> <li>Troubleshooting</li> <li>See Also</li> </ul>"},{"location":"sdk-tools/#quick-start","title":"Quick Start","text":"<p>Here are 5 common patterns to get started quickly:</p>"},{"location":"sdk-tools/#1-read-only-safe-tools","title":"1. Read-Only Safe Tools","text":"<p>For research and analysis without file modifications:</p> <pre><code>from consoul import Consoul\n\n# Only search and web tools (all read-only)\nconsole = Consoul(tools=\"safe\")\n\n# Or specify exact safe tools\nconsole = Consoul(tools=[\"grep\", \"code_search\", \"read_url\", \"web_search\"])\n</code></pre>"},{"location":"sdk-tools/#2-all-file-operations","title":"2. All File Operations","text":"<p>Enable all file editing capabilities:</p> <pre><code># All file editing tools (create, edit, delete, append)\nconsole = Consoul(tools=\"file-edit\")\n\n# Or combine with search\nconsole = Consoul(tools=[\"search\", \"file-edit\"])\n</code></pre>"},{"location":"sdk-tools/#3-custom-tool","title":"3. Custom Tool","text":"<p>Add your own tool alongside built-in tools:</p> <pre><code>from langchain_core.tools import tool\n\n@tool\ndef my_tool(query: str) -&gt; str:\n    \"\"\"Custom tool for specific task.\"\"\"\n    return f\"Processed: {query}\"\n\nconsole = Consoul(tools=[my_tool, \"bash\", \"grep\"])\n</code></pre>"},{"location":"sdk-tools/#4-category-based","title":"4. Category-Based","text":"<p>Use tool categories for easy configuration:</p> <pre><code># All search tools (grep, code_search, find_references)\nconsole = Consoul(tools=\"search\")\n\n# Multiple categories\nconsole = Consoul(tools=[\"search\", \"web\", \"execute\"])\n</code></pre>"},{"location":"sdk-tools/#5-auto-discovery","title":"5. Auto-Discovery","text":"<p>Automatically load tools from <code>.consoul/tools/</code>:</p> <pre><code># Discover custom tools + enable built-in\nconsole = Consoul(tools=True, discover_tools=True)\n\n# Or only discovered tools\nconsole = Consoul(tools=False, discover_tools=True)\n</code></pre>"},{"location":"sdk-tools/#tool-specification-options","title":"Tool Specification Options","text":"<p>The <code>tools</code> parameter accepts multiple formats for maximum flexibility.</p>"},{"location":"sdk-tools/#boolean-values","title":"Boolean Values","text":"<pre><code># Enable all built-in tools (default)\nconsole = Consoul(tools=True)\n\n# Disable all tools\nconsole = Consoul(tools=False)\n\n# Also disables tools\nconsole = Consoul(tools=None)\n</code></pre>"},{"location":"sdk-tools/#risk-level-strings","title":"Risk Level Strings","text":"<p>Filter tools by their risk classification:</p> <pre><code># Only SAFE tools (read-only operations)\nconsole = Consoul(tools=\"safe\")\n\n# SAFE + CAUTION tools (includes file operations)\nconsole = Consoul(tools=\"caution\")\n\n# All tools including DANGEROUS (delete operations)\nconsole = Consoul(tools=\"dangerous\")\n</code></pre> <p>Risk Level Hierarchy: - <code>\"safe\"</code> \u2192 Only SAFE tools - <code>\"caution\"</code> \u2192 SAFE + CAUTION tools - <code>\"dangerous\"</code> \u2192 SAFE + CAUTION + DANGEROUS tools</p>"},{"location":"sdk-tools/#category-strings","title":"Category Strings","text":"<p>Use functional categories:</p> <pre><code># Search tools: grep, code_search, find_references\nconsole = Consoul(tools=\"search\")\n\n# File editing: create_file, edit_lines, edit_replace, append_file, delete_file\nconsole = Consoul(tools=\"file-edit\")\n\n# Web tools: read_url, web_search\nconsole = Consoul(tools=\"web\")\n\n# Execute tools: bash\nconsole = Consoul(tools=\"execute\")\n</code></pre>"},{"location":"sdk-tools/#tool-name-lists","title":"Tool Name Lists","text":"<p>Specify exact tools you want:</p> <pre><code># Specific tools by name\nconsole = Consoul(tools=[\"bash\", \"grep\", \"code_search\"])\n\n# Just one tool\nconsole = Consoul(tools=[\"bash\"])\n</code></pre>"},{"location":"sdk-tools/#category-lists","title":"Category Lists","text":"<p>Mix multiple categories:</p> <pre><code># Search and web tools\nconsole = Consoul(tools=[\"search\", \"web\"])\n\n# All except file editing\nconsole = Consoul(tools=[\"search\", \"web\", \"execute\"])\n</code></pre>"},{"location":"sdk-tools/#mixed-lists","title":"Mixed Lists","text":"<p>Combine categories, tool names, and custom tools:</p> <pre><code>from langchain_core.tools import tool\n\n@tool\ndef my_tool(x: str) -&gt; str:\n    \"\"\"Custom tool.\"\"\"\n    return x\n\n# Category + tool name\nconsole = Consoul(tools=[\"search\", \"bash\"])\n\n# Category + custom tool\nconsole = Consoul(tools=[\"search\", my_tool])\n\n# Everything mixed\nconsole = Consoul(tools=[\"search\", \"bash\", my_tool, \"web\"])\n</code></pre>"},{"location":"sdk-tools/#empty-list","title":"Empty List","text":"<pre><code># Same as tools=False\nconsole = Consoul(tools=[])\n</code></pre>"},{"location":"sdk-tools/#built-in-tools-reference","title":"Built-in Tools Reference","text":"<p>All 11 built-in tools available in Consoul:</p> Tool Name Category Risk Level Description <code>bash</code> execute CAUTION Execute bash commands with security controls <code>grep</code> search SAFE Search for text patterns in files using ripgrep/grep <code>code_search</code> search SAFE Search for code symbols (functions, classes) using AST parsing <code>find_references</code> search SAFE Find all references/usages of a code symbol <code>create_file</code> file-edit CAUTION Create new files with overwrite protection <code>edit_lines</code> file-edit CAUTION Line-based editing with exact line ranges <code>edit_replace</code> file-edit CAUTION Search/replace with progressive matching <code>append_file</code> file-edit CAUTION Append content to files <code>delete_file</code> file-edit DANGEROUS Delete files with validation <code>read_url</code> web SAFE Read and convert web pages to markdown <code>web_search</code> web SAFE Search the web using SearxNG/DuckDuckGo/Jina <p>Full documentation for each tool: See docs/tools.md</p>"},{"location":"sdk-tools/#tool-categories","title":"Tool Categories","text":"<p>Categories group related tools for easy specification:</p> Category Tools Included Count Use Case <code>search</code> grep, code_search, find_references 3 Code analysis, finding symbols/patterns <code>file-edit</code> create_file, edit_lines, edit_replace, append_file, delete_file 5 File manipulation, code editing <code>web</code> read_url, web_search 2 Web research, documentation lookup <code>execute</code> bash 1 Command execution, system operations <p>Example Usage:</p> <pre><code># All search tools\nConsoul(tools=\"search\")\n# Enables: grep, code_search, find_references\n\n# Search + web\nConsoul(tools=[\"search\", \"web\"])\n# Enables: grep, code_search, find_references, read_url, web_search\n\n# Everything except file editing\nConsoul(tools=[\"search\", \"web\", \"execute\"])\n# Enables: All tools EXCEPT create_file, edit_lines, edit_replace, append_file, delete_file\n</code></pre>"},{"location":"sdk-tools/#custom-tools","title":"Custom Tools","text":"<p>Create and register your own tools using LangChain's <code>@tool</code> decorator.</p>"},{"location":"sdk-tools/#using-tool-decorator","title":"Using @tool Decorator","text":"<p>The simplest way to create custom tools:</p> <pre><code>from langchain_core.tools import tool\nfrom consoul import Consoul\n\n@tool\ndef calculate_total(items: list[float]) -&gt; float:\n    \"\"\"Calculate the total sum of a list of numbers.\n\n    Args:\n        items: List of numbers to sum\n\n    Returns:\n        The total sum\n    \"\"\"\n    return sum(items)\n\n# Use with Consoul\nconsole = Consoul(tools=[calculate_total, \"bash\"])\n</code></pre>"},{"location":"sdk-tools/#using-basetool-subclass","title":"Using BaseTool Subclass","text":"<p>For more complex tools with state:</p> <pre><code>from langchain_core.tools import BaseTool\nfrom pydantic import BaseModel, Field\n\nclass WeatherInput(BaseModel):\n    \"\"\"Input schema for weather tool.\"\"\"\n    location: str = Field(description=\"City name or zip code\")\n\nclass WeatherTool(BaseTool):\n    \"\"\"Tool to fetch weather data.\"\"\"\n    name = \"get_weather\"\n    description = \"Get current weather for a location\"\n    args_schema = WeatherInput\n\n    def _run(self, location: str) -&gt; str:\n        \"\"\"Fetch weather data.\"\"\"\n        # Implementation here\n        return f\"Weather in {location}: 72\u00b0F, Sunny\"\n\n# IMPORTANT: Must instantiate the tool\nweather_tool = WeatherTool()\n\nconsole = Consoul(tools=[weather_tool, \"bash\"])\n</code></pre> <p>\u26a0\ufe0f Important: When using BaseTool subclasses, you must instantiate them. Tool discovery only finds instances, not class definitions.</p>"},{"location":"sdk-tools/#best-practices","title":"Best Practices","text":"<ol> <li>Clear docstrings: The AI uses docstrings to understand when/how to use the tool</li> <li>Input validation: Use Pydantic schemas for type safety</li> <li>Error handling: Raise descriptive errors</li> <li>Risk level: Custom tools default to CAUTION level</li> </ol> <pre><code>from langchain_core.tools import tool\nfrom pydantic import BaseModel, Field\n\nclass QueryInput(BaseModel):\n    \"\"\"Validated input schema.\"\"\"\n    query: str = Field(min_length=1, description=\"Search query\")\n    limit: int = Field(ge=1, le=100, description=\"Result limit (1-100)\")\n\n@tool(args_schema=QueryInput)\ndef search_database(query: str, limit: int = 10) -&gt; str:\n    \"\"\"Search the database for records.\n\n    This tool searches the database with the given query and returns\n    up to `limit` results.\n\n    Args:\n        query: Search query string (required)\n        limit: Maximum results to return (1-100, default: 10)\n\n    Returns:\n        Search results as formatted string\n\n    Raises:\n        ValueError: If query is empty or limit is invalid\n    \"\"\"\n    if not query.strip():\n        raise ValueError(\"Query cannot be empty\")\n\n    # Implementation\n    results = perform_search(query, limit)\n    return format_results(results)\n</code></pre>"},{"location":"sdk-tools/#tool-discovery","title":"Tool Discovery","text":"<p>Automatically discover and load tools from a <code>.consoul/tools/</code> directory in your project.</p>"},{"location":"sdk-tools/#setup","title":"Setup","text":"<ol> <li>Create the directory structure:</li> </ol> <pre><code>mkdir -p .consoul/tools\n</code></pre> <ol> <li>Add Python files with tools:</li> </ol> <pre><code># .consoul/tools/my_custom_tools.py\nfrom langchain_core.tools import tool\n\n@tool\ndef process_data(data: str) -&gt; str:\n    \"\"\"Process data in a custom way.\"\"\"\n    return data.upper()\n\n@tool\ndef analyze_metrics(metrics: dict) -&gt; str:\n    \"\"\"Analyze performance metrics.\"\"\"\n    # Custom analysis logic\n    return \"Analysis complete\"\n</code></pre> <ol> <li>Enable discovery in SDK:</li> </ol> <pre><code>from consoul import Consoul\n\n# Discover + use built-in tools\nconsole = Consoul(tools=True, discover_tools=True)\n\n# Only discovered tools (no built-in)\nconsole = Consoul(tools=False, discover_tools=True)\n\n# Specific built-in + discovered\nconsole = Consoul(tools=[\"bash\", \"grep\"], discover_tools=True)\n</code></pre>"},{"location":"sdk-tools/#file-structure","title":"File Structure","text":"<pre><code>your-project/\n\u251c\u2500\u2500 .consoul/\n\u2502   \u2514\u2500\u2500 tools/\n\u2502       \u251c\u2500\u2500 data_tools.py       # Data processing tools\n\u2502       \u251c\u2500\u2500 api_tools.py        # API integration tools\n\u2502       \u2514\u2500\u2500 analysis_tools.py   # Analysis tools\n\u2514\u2500\u2500 your_code.py\n</code></pre>"},{"location":"sdk-tools/#what-gets-discovered","title":"What Gets Discovered","text":"<p>\u2705 Discovered: - Functions decorated with <code>@tool</code> - Instantiated <code>BaseTool</code> objects</p> <p>\u274c Not Discovered: - <code>__init__.py</code> files - Files starting with <code>_</code> (private) - <code>BaseTool</code> class definitions (must be instantiated) - Regular functions without <code>@tool</code> decorator</p>"},{"location":"sdk-tools/#discovery-example","title":"Discovery Example","text":"<pre><code># .consoul/tools/math_tools.py\nfrom langchain_core.tools import tool, BaseTool\n\n@tool\ndef add_numbers(a: float, b: float) -&gt; float:\n    \"\"\"Add two numbers.\"\"\"\n    return a + b\n\n@tool\ndef multiply(a: float, b: float) -&gt; float:\n    \"\"\"Multiply two numbers.\"\"\"\n    return a * b\n\n# This class will NOT be discovered (it's a class, not an instance)\nclass DivideTool(BaseTool):\n    name = \"divide\"\n    description = \"Divide two numbers\"\n\n    def _run(self, a: float, b: float) -&gt; float:\n        return a / b\n\n# This WILL be discovered (it's an instance)\ndivide_tool = DivideTool()\n</code></pre>"},{"location":"sdk-tools/#recursive-discovery","title":"Recursive Discovery","text":"<p>By default, discovery is recursive:</p> <pre><code># Discovers tools from all subdirectories\n.consoul/\n\u2514\u2500\u2500 tools/\n    \u251c\u2500\u2500 utils/\n    \u2502   \u2514\u2500\u2500 helpers.py      # \u2705 Discovered\n    \u251c\u2500\u2500 integrations/\n    \u2502   \u251c\u2500\u2500 slack.py        # \u2705 Discovered\n    \u2502   \u2514\u2500\u2500 github.py       # \u2705 Discovered\n    \u2514\u2500\u2500 custom.py           # \u2705 Discovered\n</code></pre>"},{"location":"sdk-tools/#error-handling","title":"Error Handling","text":"<p>Discovery gracefully handles errors:</p> <ul> <li>Syntax errors: Logged as warnings, file skipped</li> <li>Import errors: Logged as warnings, file skipped</li> <li>Runtime errors: Logged as warnings, file skipped</li> <li>Non-tool objects: Silently ignored</li> </ul>"},{"location":"sdk-tools/#security-considerations","title":"Security Considerations","text":""},{"location":"sdk-tools/#risk-levels-explained","title":"Risk Levels Explained","text":"<p>Every tool is classified by its potential impact:</p> Risk Level Impact Examples User Approval SAFE Read-only, no side effects grep, code_search, read_url, web_search Auto-approved* CAUTION Modifies files/state, reversible bash, create_file, edit_file Requires approval* DANGEROUS High-risk, potentially irreversible delete_file Always requires approval <p>* Depends on permission policy (see Configuration)</p>"},{"location":"sdk-tools/#when-to-use-which-risk-level","title":"When to Use Which Risk Level","text":"<p>Assign SAFE to: - Read-only operations - Web API calls that don't modify state - Search and lookup operations - Data analysis without side effects</p> <p>Assign CAUTION to: - File creation/modification - Command execution - API calls that modify state - Operations that can be undone</p> <p>Assign DANGEROUS to: - File/data deletion - Irreversible operations - System modifications - Production deployments</p>"},{"location":"sdk-tools/#custom-tool-security","title":"Custom Tool Security","text":"<p>Custom tools default to CAUTION risk level for safety:</p> <pre><code>@tool\ndef my_tool(arg: str) -&gt; str:\n    \"\"\"My custom tool.\"\"\"\n    return arg\n\n# Registered as RiskLevel.CAUTION by default\nconsole = Consoul(tools=[my_tool])\n</code></pre> <p>For read-only custom tools, document clearly:</p> <pre><code>@tool\ndef lookup_data(key: str) -&gt; str:\n    \"\"\"Look up data by key (read-only operation).\n\n    This tool only reads data and makes no modifications.\n    Safe for unrestricted use.\n    \"\"\"\n    return database.get(key)\n</code></pre>"},{"location":"sdk-tools/#best-practices_1","title":"Best Practices","text":"<p>\u2705 DO: - Start with <code>tools=\"safe\"</code> for read-only tasks - Use specific tool lists instead of <code>tools=True</code> when possible - Enable only the tools you need - Review audit logs regularly - Test tools in safe environments first</p> <p>\u274c DON'T: - Use <code>tools=\"dangerous\"</code> unless necessary - Auto-approve dangerous operations in production - Disable audit logging - Give custom tools lower risk levels than appropriate</p>"},{"location":"sdk-tools/#common-use-cases","title":"Common Use Cases","text":""},{"location":"sdk-tools/#use-case-1-code-research-read-only","title":"Use Case 1: Code Research (Read-Only)","text":"<p>Analyze code without making changes:</p> <pre><code>from consoul import Consoul\n\n# Only safe search tools\nconsole = Consoul(tools=\"safe\")\n\n# Or be specific\nconsole = Consoul(tools=[\"grep\", \"code_search\", \"find_references\"])\n\n# Usage\nresponse = console.ask(\"Find all functions named 'process_data' and show their usage\")\n</code></pre>"},{"location":"sdk-tools/#use-case-2-web-research","title":"Use Case 2: Web Research","text":"<p>Search and read web content:</p> <pre><code># Enable web tools\nconsole = Consoul(tools=\"web\")\n\n# Or combine with search\nconsole = Consoul(tools=[\"search\", \"web\"])\n\nresponse = console.ask(\"Search for Python asyncio tutorials and summarize the top result\")\n</code></pre>"},{"location":"sdk-tools/#use-case-3-development-with-file-editing","title":"Use Case 3: Development with File Editing","text":"<p>Full development capabilities:</p> <pre><code># All search and file editing tools\nconsole = Consoul(tools=[\"search\", \"file-edit\"])\n\n# Or add bash for testing\nconsole = Consoul(tools=[\"search\", \"file-edit\", \"bash\"])\n\nresponse = console.ask(\"Refactor the login function to use async/await\")\n</code></pre>"},{"location":"sdk-tools/#use-case-4-mixed-safe-specific-dangerous","title":"Use Case 4: Mixed Safe + Specific Dangerous","text":"<p>Most tools safe, but allow specific operations:</p> <pre><code># Safe tools + specific powerful tools\nconsole = Consoul(tools=[\"search\", \"web\", \"bash\", \"create_file\"])\n\n# Excludes: edit_lines, edit_replace, append_file, delete_file\n</code></pre>"},{"location":"sdk-tools/#use-case-5-custom-tools-for-domain","title":"Use Case 5: Custom Tools for Domain","text":"<p>Add domain-specific tools:</p> <pre><code>from langchain_core.tools import tool\n\n@tool\ndef query_customer_db(customer_id: str) -&gt; str:\n    \"\"\"Query customer database.\"\"\"\n    return fetch_customer(customer_id)\n\n@tool\ndef send_notification(message: str, recipient: str) -&gt; str:\n    \"\"\"Send notification to user.\"\"\"\n    send_email(recipient, message)\n    return \"Sent\"\n\n# Combine with built-in tools\nconsole = Consoul(tools=[\n    query_customer_db,\n    send_notification,\n    \"bash\",\n    \"grep\"\n])\n</code></pre>"},{"location":"sdk-tools/#use-case-6-auto-discovery-categories","title":"Use Case 6: Auto-Discovery + Categories","text":"<p>Project-specific tools + built-in categories:</p> <pre><code># Discover custom tools from .consoul/tools/\n# Plus enable search and web categories\nconsole = Consoul(\n    tools=[\"search\", \"web\"],\n    discover_tools=True\n)\n\n# Now has: grep, code_search, find_references, read_url, web_search\n# Plus: Any tools found in .consoul/tools/\n</code></pre>"},{"location":"sdk-tools/#troubleshooting","title":"Troubleshooting","text":""},{"location":"sdk-tools/#error-unknown-tool-or-category-xyz","title":"Error: Unknown tool or category 'xyz'","text":"<p>Problem: </p><pre><code>console = Consoul(tools=[\"invalid\"])\n# ValueError: Unknown tool or category 'invalid'\n</code></pre><p></p> <p>Solution: Check available tools and categories:</p> <pre><code># Valid tool names:\n# bash, grep, code_search, find_references, create_file,\n# edit_lines, edit_replace, append_file, delete_file,\n# read_url, web_search\n\n# Valid categories:\n# search, file-edit, web, execute\n\n# Valid risk levels:\n# safe, caution, dangerous\n</code></pre>"},{"location":"sdk-tools/#error-tool-specification-must-be","title":"Error: Tool specification must be...","text":"<p>Problem: </p><pre><code>console = Consoul(tools=123)\n# ValueError: Invalid tools parameter type\n</code></pre><p></p> <p>Solution: Use one of the valid types: - Boolean: <code>True</code> or <code>False</code> - String: tool name, category, or risk level - List: list of strings and/or BaseTool instances</p>"},{"location":"sdk-tools/#discovery-not-working","title":"Discovery Not Working","text":"<p>Problem: Tools in <code>.consoul/tools/</code> are not being discovered.</p> <p>Solutions:</p> <ol> <li> <p>Check <code>discover_tools</code> is enabled: </p><pre><code>console = Consoul(tools=True, discover_tools=True)\n</code></pre><p></p> </li> <li> <p>Verify directory structure: </p><pre><code>ls -la .consoul/tools/\n# Should show your .py files\n</code></pre><p></p> </li> <li> <p>Check file names:</p> </li> <li>Files starting with <code>_</code> are skipped</li> <li> <p><code>__init__.py</code> is skipped</p> </li> <li> <p>Verify tools are instances: </p><pre><code># \u274c Won't be discovered\nclass MyTool(BaseTool):\n    ...\n\n# \u2705 Will be discovered\nmy_tool = MyTool()\n</code></pre><p></p> </li> <li> <p>Check for syntax/import errors: </p><pre><code># Discovery skips files with errors\n# Check logs for warnings\n</code></pre><p></p> </li> </ol>"},{"location":"sdk-tools/#tools-not-available-in-chat","title":"Tools Not Available in Chat","text":"<p>Problem: AI says it cannot use a tool you enabled.</p> <p>Solutions:</p> <ol> <li> <p>Verify tools are enabled: </p><pre><code>console = Consoul(tools=[\"bash\", \"grep\"])\nprint(console.settings)\n# Check 'tools_enabled' is True\n</code></pre><p></p> </li> <li> <p>Check tool specification: </p><pre><code># Make sure you're not using tools=False\nconsole = Consoul(tools=False)  # \u274c No tools\nconsole = Consoul(tools=True)   # \u2705 All tools\n</code></pre><p></p> </li> <li> <p>Restart if needed:    SDK caches tool configuration on initialization.</p> </li> </ol>"},{"location":"sdk-tools/#custom-tool-not-working","title":"Custom Tool Not Working","text":"<p>Problem: Custom tool raises errors when called.</p> <p>Common Issues:</p> <ol> <li> <p>Missing docstring: </p><pre><code>@tool\ndef my_tool(x: str) -&gt; str:\n    \"\"\"This docstring is REQUIRED.\"\"\"\n    return x\n</code></pre><p></p> </li> <li> <p>Invalid input schema: </p><pre><code>from pydantic import BaseModel, Field\n\nclass MyInput(BaseModel):\n    arg: str = Field(description=\"Description REQUIRED\")\n\n@tool(args_schema=MyInput)\ndef my_tool(arg: str) -&gt; str:\n    ...\n</code></pre><p></p> </li> <li> <p>Not instantiated (for BaseTool): </p><pre><code># \u274c Wrong\nconsole = Consoul(tools=[MyTool])\n\n# \u2705 Correct\nconsole = Consoul(tools=[MyTool()])\n</code></pre><p></p> </li> </ol>"},{"location":"sdk-tools/#see-also","title":"See Also","text":"<ul> <li>Complete Tool Documentation - Detailed docs for all 11 built-in tools</li> <li>SDK Examples - Runnable code examples</li> <li>Tool Specification Examples - All specification patterns</li> <li>Configuration Guide - Security policies and settings</li> <li>API Reference - Complete API documentation</li> </ul> <p>Quick Links: - Quick Start - Get started in 60 seconds - Built-in Tools - See all available tools - Custom Tools - Create your own tools - Categories - Group tools by function - Security - Risk levels and best practices</p>"},{"location":"advanced/searxng-setup/","title":"SearxNG Setup","text":""},{"location":"advanced/searxng-setup/#searxng-setup-guide-for-consoul","title":"SearxNG Setup Guide for Consoul","text":"<p>This guide walks you through setting up SearxNG as a self-hosted search backend for Consoul's <code>web_search</code> tool.</p>"},{"location":"advanced/searxng-setup/#why-searxng","title":"Why SearxNG?","text":"<p>SearxNG is a free, privacy-respecting metasearch engine that aggregates results from 135+ search engines without tracking users.</p>"},{"location":"advanced/searxng-setup/#benefits-for-consoul","title":"Benefits for Consoul:","text":"<ul> <li>\u2705 No Rate Limits: Self-hosted, unlimited searches</li> <li>\u2705 Engine Selection: Choose from Google, GitHub, Stack Overflow, arXiv, and 130+ more</li> <li>\u2705 Categories: Filter by general, IT, news, academic, images, etc.</li> <li>\u2705 Privacy: Complete control over data, no external tracking</li> <li>\u2705 Free: No API costs or subscription fees</li> <li>\u2705 Production-Grade: Used by Perplexica (17k stars) and other LLM projects</li> </ul>"},{"location":"advanced/searxng-setup/#quick-start-5-minutes","title":"Quick Start (5 Minutes)","text":""},{"location":"advanced/searxng-setup/#option-1-docker-recommended","title":"Option 1: Docker (Recommended)","text":"<pre><code># Pull and run SearxNG container\ndocker run -d \\\n  --name searxng \\\n  -p 8888:8080 \\\n  -e BASE_URL=http://localhost:8888 \\\n  searxng/searxng:latest\n\n# Verify it's running\ncurl http://localhost:8888/healthz\n</code></pre>"},{"location":"advanced/searxng-setup/#option-2-docker-compose","title":"Option 2: Docker Compose","text":"<p>Create <code>docker-compose.yml</code>:</p> <pre><code>version: '3.8'\n\nservices:\n  searxng:\n    image: searxng/searxng:latest\n    container_name: searxng\n    ports:\n      - \"8888:8080\"\n    environment:\n      - BASE_URL=http://localhost:8888\n    volumes:\n      - ./searxng:/etc/searxng  # Optional: persist config\n    restart: unless-stopped\n</code></pre> <p>Start: </p><pre><code>docker-compose up -d\n</code></pre><p></p>"},{"location":"advanced/searxng-setup/#option-3-perplexica-bundle-searxng-ai-interface","title":"Option 3: Perplexica Bundle (SearxNG + AI Interface)","text":"<p>If you want a reference implementation with SearxNG already configured:</p> <pre><code>git clone https://github.com/ItzCrazyKns/Perplexica.git\ncd Perplexica\ndocker-compose up -d\n</code></pre> <p>This includes SearxNG pre-configured for AI agents at <code>http://localhost:4000</code>.</p>"},{"location":"advanced/searxng-setup/#configure-consoul","title":"Configure Consoul","text":"<p>Once SearxNG is running, update your Consoul profile config:</p> <pre><code># ~/.consoul/profiles/default/config.yaml\ntools:\n  enabled: true\n  web_search:\n    # Common settings\n    max_results: 5\n    timeout: 10\n\n    # SearxNG settings\n    searxng_url: \"http://localhost:8888\"  # Your SearxNG instance\n    searxng_engines:\n      - google          # General web search\n      - duckduckgo      # Privacy-focused search\n      - bing            # Microsoft search\n      - github          # Code repositories\n      - stackoverflow   # Programming Q&amp;A\n      - arxiv           # Academic papers\n      - wikipedia       # Encyclopedia\n    enable_engine_selection: true\n    enable_categories: true\n\n    # DuckDuckGo fallback settings\n    region: \"wt-wt\"\n    safesearch: \"moderate\"\n</code></pre>"},{"location":"advanced/searxng-setup/#test-the-integration","title":"Test the Integration","text":"<pre><code>from consoul.ai.tools import web_search\n\n# Basic search (will use SearxNG)\nresult = web_search.invoke({\n    \"query\": \"Python programming\",\n    \"max_results\": 3\n})\nprint(result)\n\n# Engine-specific search\nresult = web_search.invoke({\n    \"query\": \"machine learning papers\",\n    \"engines\": [\"arxiv\", \"google\"],\n    \"max_results\": 5\n})\nprint(result)\n\n# Category search\nresult = web_search.invoke({\n    \"query\": \"cybersecurity breach\",\n    \"categories\": [\"news\", \"it\"],\n    \"max_results\": 5\n})\nprint(result)\n</code></pre>"},{"location":"advanced/searxng-setup/#available-engines","title":"Available Engines","text":"<p>SearxNG supports 135+ engines. Here are the most useful for development:</p>"},{"location":"advanced/searxng-setup/#code-development","title":"Code &amp; Development","text":"<ul> <li><code>github</code> - Code repositories</li> <li><code>gitlab</code> - GitLab repositories</li> <li><code>stackoverflow</code> - Programming Q&amp;A</li> <li><code>stackexchange</code> - Stack Exchange network</li> <li><code>searchcode</code> - Source code search</li> <li><code>dockerhub</code> - Docker images</li> </ul>"},{"location":"advanced/searxng-setup/#documentation-learning","title":"Documentation &amp; Learning","text":"<ul> <li><code>wikipedia</code> - Encyclopedia</li> <li><code>wikidata</code> - Structured data</li> <li><code>devdocs</code> - Developer documentation</li> <li><code>mdn</code> - Mozilla Developer Network</li> </ul>"},{"location":"advanced/searxng-setup/#academic-research","title":"Academic &amp; Research","text":"<ul> <li><code>arxiv</code> - Scientific papers</li> <li><code>google scholar</code> - Academic search</li> <li><code>pubmed</code> - Medical research</li> <li><code>semantic scholar</code> - AI-powered research</li> </ul>"},{"location":"advanced/searxng-setup/#general-web","title":"General Web","text":"<ul> <li><code>google</code> - Google search</li> <li><code>bing</code> - Microsoft search</li> <li><code>duckduckgo</code> - Privacy search</li> <li><code>brave</code> - Brave search</li> </ul>"},{"location":"advanced/searxng-setup/#news-social","title":"News &amp; Social","text":"<ul> <li><code>reddit</code> - Reddit posts</li> <li><code>hackernews</code> - Hacker News</li> <li><code>google news</code> - News articles</li> </ul>"},{"location":"advanced/searxng-setup/#package-managers","title":"Package Managers","text":"<ul> <li><code>npm</code> - Node.js packages</li> <li><code>pypi</code> - Python packages</li> <li><code>crates</code> - Rust packages</li> <li><code>rubygems</code> - Ruby gems</li> </ul>"},{"location":"advanced/searxng-setup/#available-categories","title":"Available Categories","text":"<p>Categories let you filter searches by topic:</p> <ul> <li><code>general</code> - General web search (default)</li> <li><code>it</code> - Information technology</li> <li><code>news</code> - News articles</li> <li><code>images</code> - Image search</li> <li><code>videos</code> - Video search</li> <li><code>music</code> - Music search</li> <li><code>files</code> - File search</li> <li><code>science</code> - Scientific content</li> <li><code>social media</code> - Social platforms</li> <li><code>map</code> - Maps and locations</li> </ul>"},{"location":"advanced/searxng-setup/#advanced-configuration","title":"Advanced Configuration","text":""},{"location":"advanced/searxng-setup/#custom-searxng-settings","title":"Custom SearxNG Settings","text":"<p>To customize SearxNG behavior, mount a config file:</p> <pre><code># docker-compose.yml\nservices:\n  searxng:\n    image: searxng/searxng:latest\n    volumes:\n      - ./searxng/settings.yml:/etc/searxng/settings.yml:ro\n</code></pre> <p>Create <code>searxng/settings.yml</code>:</p> <pre><code># Minimal custom config\nuse_default_settings: true\n\nserver:\n  secret_key: \"your-secret-key-here\"  # Generate with: openssl rand -hex 32\n  base_url: \"http://localhost:8888\"\n\nsearch:\n  default_lang: \"en\"\n  max_request_timeout: 10.0\n  formats:\n    - html\n    - json\n\nengines:\n  - name: google\n    engine: google\n    shortcut: go\n    weight: 1.0\n    disabled: false\n\n  - name: github\n    engine: github\n    shortcut: gh\n    disabled: false\n\n  # Add more engines...\n</code></pre>"},{"location":"advanced/searxng-setup/#enable-json-api","title":"Enable JSON API","text":"<p>SearxNG's JSON API is automatically available:</p> <pre><code># Test JSON endpoint\ncurl \"http://localhost:8888/search?q=python&amp;format=json\"\n</code></pre> <p>Consoul uses this endpoint via LangChain's <code>SearxSearchWrapper</code>.</p>"},{"location":"advanced/searxng-setup/#production-deployment","title":"Production Deployment","text":""},{"location":"advanced/searxng-setup/#environment-variables","title":"Environment Variables","text":"<pre><code># docker-compose.yml\nenvironment:\n  - BASE_URL=https://search.yourdomain.com\n  - INSTANCE_NAME=My SearxNG\n  - AUTOCOMPLETE=google\n  - UWSGI_WORKERS=4\n  - UWSGI_THREADS=2\n</code></pre>"},{"location":"advanced/searxng-setup/#behind-reverse-proxy-nginx","title":"Behind Reverse Proxy (Nginx)","text":"<pre><code>server {\n    listen 443 ssl http2;\n    server_name search.yourdomain.com;\n\n    ssl_certificate /path/to/cert.pem;\n    ssl_certificate_key /path/to/key.pem;\n\n    location / {\n        proxy_pass http://localhost:8888;\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n    }\n}\n</code></pre> <p>Update Consoul config: </p><pre><code>web_search:\n  searxng_url: \"https://search.yourdomain.com\"\n</code></pre><p></p>"},{"location":"advanced/searxng-setup/#behind-reverse-proxy-traefik","title":"Behind Reverse Proxy (Traefik)","text":"<pre><code># docker-compose.yml\nservices:\n  searxng:\n    image: searxng/searxng:latest\n    labels:\n      - \"traefik.enable=true\"\n      - \"traefik.http.routers.searxng.rule=Host(`search.yourdomain.com`)\"\n      - \"traefik.http.routers.searxng.entrypoints=websecure\"\n      - \"traefik.http.routers.searxng.tls.certresolver=letsencrypt\"\n</code></pre>"},{"location":"advanced/searxng-setup/#troubleshooting","title":"Troubleshooting","text":""},{"location":"advanced/searxng-setup/#searxng-not-responding","title":"SearxNG Not Responding","text":"<pre><code># Check container status\ndocker ps | grep searxng\n\n# View logs\ndocker logs searxng\n\n# Restart container\ndocker restart searxng\n</code></pre>"},{"location":"advanced/searxng-setup/#connection-refused","title":"Connection Refused","text":"<p>Verify SearxNG is listening: </p><pre><code>curl http://localhost:8888/healthz\n</code></pre><p></p> <p>If this fails, check: 1. Port mapping: <code>-p 8888:8080</code> maps container port 8080 to host 8888 2. Firewall rules allow port 8888 3. Container is running: <code>docker ps</code></p>"},{"location":"advanced/searxng-setup/#engine-not-working","title":"Engine Not Working","text":"<p>Some engines may be disabled by default. Enable in <code>settings.yml</code>:</p> <pre><code>engines:\n  - name: github\n    disabled: false  # Change from true\n</code></pre> <p>Restart container after changes.</p>"},{"location":"advanced/searxng-setup/#fallback-to-duckduckgo","title":"Fallback to DuckDuckGo","text":"<p>Consoul automatically falls back to DuckDuckGo if SearxNG is unavailable. Check logs:</p> <pre><code>import logging\nlogging.basicConfig(level=logging.INFO)\n\n# This will log which backend is used\nweb_search.invoke({\"query\": \"test\"})\n</code></pre>"},{"location":"advanced/searxng-setup/#performance-tuning","title":"Performance Tuning","text":""},{"location":"advanced/searxng-setup/#increase-workers","title":"Increase Workers","text":"<pre><code># docker-compose.yml\nenvironment:\n  - UWSGI_WORKERS=8    # Default: 4\n  - UWSGI_THREADS=4    # Default: 2\n</code></pre>"},{"location":"advanced/searxng-setup/#add-redis-cache","title":"Add Redis Cache","text":"<pre><code>services:\n  redis:\n    image: redis:alpine\n    restart: unless-stopped\n\n  searxng:\n    environment:\n      - REDIS_URL=redis://redis:6379/0\n    depends_on:\n      - redis\n</code></pre>"},{"location":"advanced/searxng-setup/#limit-engines","title":"Limit Engines","text":"<p>For faster results, disable slow engines:</p> <pre><code>engines:\n  - name: wikipedia\n    disabled: true  # Disable if not needed\n</code></pre>"},{"location":"advanced/searxng-setup/#references","title":"References","text":"<ul> <li>SearxNG Docs: https://docs.searxng.org/</li> <li>Docker Hub: https://hub.docker.com/r/searxng/searxng</li> <li>GitHub: https://github.com/searxng/searxng</li> <li>Perplexica (Reference Implementation): https://github.com/ItzCrazyKns/Perplexica</li> <li>LangChain Integration: https://python.langchain.com/docs/integrations/tools/searx_search</li> </ul>"},{"location":"advanced/searxng-setup/#next-steps","title":"Next Steps","text":"<ol> <li>Test Different Engines: Experiment with GitHub, Stack Overflow, arXiv for specialized searches</li> <li>Configure Categories: Try filtering by <code>it</code>, <code>news</code>, or <code>science</code></li> <li>Monitor Performance: Check Docker stats with <code>docker stats searxng</code></li> <li>Customize Settings: Add/remove engines based on your needs</li> <li>Set Up Monitoring: Use Prometheus/Grafana for production deployments</li> </ol> <p>Need Help? - Consoul Issues: https://github.com/goatbytes/consoul/issues - SearxNG Issues: https://github.com/searxng/searxng/issues</p>"},{"location":"api/","title":"Overview","text":""},{"location":"api/#sdk-overview","title":"SDK Overview","text":"<p>Build AI-powered applications with the Consoul SDK - a simple, powerful Python library for integrating language models and tool calling into your projects.</p>"},{"location":"api/#why-consoul-sdk","title":"Why Consoul SDK?","text":"<p>\ud83d\ude80 Simple: 3 lines to add AI chat to any Python app</p> <p>\ud83d\udee0\ufe0f Powerful: 13 built-in tools for file operations, web search, and command execution</p> <p>\ud83d\udd27 Flexible: Support for OpenAI, Anthropic, Google, and local Ollama models</p> <p>\ud83d\udd12 Secure: Risk-based tool approval and permission system</p> <p>\ud83d\udce6 Batteries Included: Conversation history, token tracking, cost estimation</p>"},{"location":"api/#quick-start","title":"Quick Start","text":""},{"location":"api/#installation","title":"Installation","text":"<p>Install Consoul in your Python project:</p> <pre><code># Basic installation\npip install consoul\n\n# With all features (MLX, Ollama support)\npip install consoul[all]\n\n# For development\npip install consoul[dev]\n</code></pre> <p>Requirements: - Python 3.10+ - API keys for your chosen provider (OpenAI, Anthropic, Google, or Ollama)</p> <p>Setup API Keys:</p> <pre><code># Set via environment variables\nexport OPENAI_API_KEY=\"sk-...\"\nexport ANTHROPIC_API_KEY=\"sk-ant-...\"\nexport GOOGLE_API_KEY=\"...\"\n\n# Or initialize configuration file\nconsoul init\n</code></pre>"},{"location":"api/#your-first-chat-3-lines","title":"Your First Chat (3 Lines)","text":"<pre><code>from consoul import Consoul\n\nconsole = Consoul()\nprint(console.chat(\"What is 2+2?\"))  # \u2192 \"4\"\n</code></pre> <p>Done! Consoul automatically: - Loads your configuration - Handles API authentication - Manages conversation history</p>"},{"location":"api/#add-tools-file-operations-web-search-etc","title":"Add Tools (File Operations, Web Search, etc.)","text":"<pre><code>from consoul import Consoul\n\nconsole = Consoul(tools=True)  # Enable all built-in tools\nconsole.chat(\"List Python files in the current directory\")\n</code></pre> <p>The AI can now use tools to interact with your system.</p>"},{"location":"api/#build-an-agent","title":"Build an Agent","text":"<p>Agents combine AI reasoning with tools to accomplish complex tasks:</p> <pre><code>from consoul import Consoul\n\ncode_analyzer = Consoul(\n    tools=[\"grep\", \"code_search\", \"read\"],\n    system_prompt=\"You are a code analysis expert. Help find and explain code.\"\n)\n\ncode_analyzer.chat(\"Find all database queries in this project\")\ncode_analyzer.chat(\"Are there any security vulnerabilities?\")\ncode_analyzer.chat(\"Where should I add rate limiting?\")\n</code></pre> <p>The AI will use tools to search code, read files, and provide analysis.</p>"},{"location":"api/#core-concepts","title":"Core Concepts","text":""},{"location":"api/#1-models","title":"1. Models","text":"<p>Consoul supports multiple AI providers with automatic provider detection:</p> <pre><code>from consoul import Consoul\n\n# OpenAI\nconsole = Consoul(model=\"gpt-4o\")\n\n# Anthropic\nconsole = Consoul(model=\"claude-3-5-sonnet-20241022\")\n\n# Google\nconsole = Consoul(model=\"gemini-2.0-flash-exp\")\n\n# Local Ollama\nconsole = Consoul(model=\"llama3.2\")\n</code></pre>"},{"location":"api/#2-tools","title":"2. Tools","text":"<p>Tools let the AI perform actions beyond text generation:</p> Tool Category Examples Risk Level Search <code>grep</code>, <code>code_search</code>, <code>find_references</code> SAFE File Edit <code>create_file</code>, <code>edit_lines</code>, <code>delete_file</code> CAUTION-DANGEROUS Web <code>web_search</code>, <code>read_url</code>, <code>wikipedia</code> SAFE Execute <code>bash</code> CAUTION-DANGEROUS <p>Enable tools by category, risk level, or name:</p> <pre><code># Safe tools only (read-only)\nconsole = Consoul(tools=\"safe\")\n\n# Specific category\nconsole = Consoul(tools=\"search\")\n\n# Specific tools\nconsole = Consoul(tools=[\"bash\", \"grep\", \"code_search\"])\n\n# Risk-based filtering\nconsole = Consoul(tools=\"caution\")  # SAFE + CAUTION tools\n</code></pre>"},{"location":"api/#3-conversation-history","title":"3. Conversation History","text":"<p>Consoul maintains conversation context automatically:</p> <pre><code>console = Consoul()\n\nconsole.chat(\"My name is Alice\")\nconsole.chat(\"What programming language should I learn?\")\nresponse = console.chat(\"What's my name?\")  # \u2192 \"Your name is Alice.\"\n\n# Start fresh\nconsole.clear()\n</code></pre>"},{"location":"api/#4-custom-tools","title":"4. Custom Tools","text":"<p>Extend functionality with your own tools:</p> <pre><code>from consoul import Consoul\nfrom langchain_core.tools import tool\n\n@tool\ndef calculate_fibonacci(n: int) -&gt; int:\n    \"\"\"Calculate the nth Fibonacci number.\"\"\"\n    if n &lt;= 1:\n        return n\n    a, b = 0, 1\n    for _ in range(2, n + 1):\n        a, b = b, a + b\n    return b\n\nconsole = Consoul(tools=[calculate_fibonacci, \"bash\"])\nconsole.chat(\"What's the 15th Fibonacci number?\")  # Uses your tool\n</code></pre>"},{"location":"api/#5-introspection","title":"5. Introspection","text":"<p>Monitor usage, costs, and configuration:</p> <pre><code>console = Consoul(tools=True)\nconsole.chat(\"Hello!\")\n\n# View settings\nconsole.settings\n# {'model': 'claude-3-5-sonnet-20241022', 'tools_enabled': True, ...}\n\n# Estimate costs (approximation based on total tokens)\nconsole.last_cost\n# {'input_tokens': 87, 'output_tokens': 12, 'estimated_cost': 0.000441}\n# Note: This is a rough estimate. Use provider dashboards for exact costs.\n\n# Last request details\nconsole.last_request\n# {'message': 'Hello!', 'model': 'claude-...', 'tokens_before': 0}\n</code></pre>"},{"location":"api/#built-in-tools-catalog","title":"Built-in Tools Catalog","text":""},{"location":"api/#search-tools-safe","title":"Search Tools (SAFE)","text":"<ul> <li><code>grep</code> - Search file contents with patterns</li> <li><code>code_search</code> - Find code patterns (classes, functions)</li> <li><code>find_references</code> - Find symbol references</li> <li><code>read</code> - Read file contents</li> </ul>"},{"location":"api/#file-edit-tools-caution-dangerous","title":"File Edit Tools (CAUTION-DANGEROUS)","text":"<ul> <li><code>create_file</code> - Create new files</li> <li><code>edit_lines</code> - Edit specific line ranges</li> <li><code>edit_replace</code> - Search and replace in files</li> <li><code>append_file</code> - Append content to files</li> <li><code>delete_file</code> - Delete files (DANGEROUS)</li> </ul>"},{"location":"api/#web-tools-safe","title":"Web Tools (SAFE)","text":"<ul> <li><code>web_search</code> - Search the web</li> <li><code>read_url</code> - Fetch and parse web pages</li> <li><code>wikipedia</code> - Search Wikipedia</li> </ul>"},{"location":"api/#execute-tools-caution","title":"Execute Tools (CAUTION)","text":"<ul> <li><code>bash</code> - Execute shell commands</li> </ul> <p>See Tools Deep Dive for detailed documentation.</p>"},{"location":"api/#security-safety","title":"Security &amp; Safety","text":""},{"location":"api/#risk-levels","title":"Risk Levels","text":"<p>Every tool has a risk classification:</p> <ul> <li>SAFE: Read-only operations (grep, web_search, read)</li> <li>CAUTION: File operations and safe commands (create_file, bash ls)</li> <li>DANGEROUS: Destructive operations (delete_file, bash rm)</li> </ul> <p>Filter tools by risk:</p> <pre><code># Only safe, read-only tools\nconsole = Consoul(tools=\"safe\")\n\n# Safe + caution (file operations)\nconsole = Consoul(tools=\"caution\")\n\n# All tools (be careful!)\nconsole = Consoul(tools=\"dangerous\")\n</code></pre>"},{"location":"api/#best-practices","title":"Best Practices","text":"<ol> <li>Start with <code>tools=\"safe\"</code> for untrusted AI interactions</li> <li>Use version control (git) when enabling file-edit tools</li> <li>Principle of least privilege: Only grant necessary tools</li> <li>Review tool approvals: Check what the AI wants to do</li> <li>Monitor usage: Track <code>console.last_cost</code> for token estimates (use provider dashboards for exact costs)</li> </ol>"},{"location":"api/#common-use-cases","title":"Common Use Cases","text":""},{"location":"api/#code-analysis","title":"Code Analysis","text":"<pre><code>analyzer = Consoul(\n    tools=[\"grep\", \"code_search\", \"read\"],\n    system_prompt=\"You are a code reviewer. Find issues and suggest improvements.\"\n)\n\nanalyzer.chat(\"Find all TODO comments\")\nanalyzer.chat(\"Are there security vulnerabilities?\")\nanalyzer.chat(\"Check for code duplication\")\n</code></pre>"},{"location":"api/#file-management","title":"File Management","text":"<pre><code>file_manager = Consoul(\n    tools=[\"bash\", \"create_file\", \"edit_lines\"],\n    system_prompt=\"You are a file organization assistant.\"\n)\n\nfile_manager.chat(\"Create a Python project structure\")\nfile_manager.chat(\"Add type hints to all functions\")\nfile_manager.chat(\"Organize imports according to PEP 8\")\n</code></pre>"},{"location":"api/#web-research","title":"Web Research","text":"<pre><code>researcher = Consoul(\n    tools=[\"web_search\", \"read_url\", \"wikipedia\"],\n    system_prompt=\"You are a research assistant. Cite your sources.\"\n)\n\nresearcher.chat(\"What's new in Python 3.13?\")\nresearcher.chat(\"Compare FastAPI vs Flask\")\nresearcher.chat(\"Explain quantum computing\")\n</code></pre>"},{"location":"api/#devops-automation","title":"DevOps Automation","text":"<pre><code>devops = Consoul(\n    tools=[\"bash\", \"create_file\", \"edit_lines\"],\n    system_prompt=\"You are a DevOps expert. Follow best practices.\"\n)\n\ndevops.chat(\"Create a Dockerfile for this app\")\ndevops.chat(\"Set up GitHub Actions CI/CD\")\ndevops.chat(\"Configure Docker Compose\")\n</code></pre>"},{"location":"api/#api-reference","title":"API Reference","text":""},{"location":"api/#consoul-class","title":"Consoul Class","text":"<pre><code>Consoul(\n    model: str | None = None,\n    profile: str = \"default\",\n    tools: bool | str | list = True,\n    temperature: float | None = None,\n    system_prompt: str | None = None,\n    persist: bool = True,\n    api_key: str | None = None,\n    discover_tools: bool = False\n)\n</code></pre> <p>Methods:</p> <ul> <li><code>chat(message: str) -&gt; str</code>: Send a message, get a response</li> <li><code>ask(message: str, show_tokens: bool) -&gt; ConsoulResponse</code>: Get structured response with metadata</li> <li><code>clear() -&gt; None</code>: Clear conversation history</li> </ul> <p>Properties:</p> <ul> <li><code>settings</code>: Current configuration</li> <li><code>last_request</code>: Last API request details</li> <li><code>last_cost</code>: Token usage and cost estimate</li> </ul>"},{"location":"api/#consoulresponse-class","title":"ConsoulResponse Class","text":"<pre><code>class ConsoulResponse:\n    content: str    # Response text\n    tokens: int     # Token count (if show_tokens=True)\n    model: str      # Model name\n</code></pre> <p>See API Reference for complete documentation.</p>"},{"location":"api/#configuration","title":"Configuration","text":"<p>Consoul uses profiles stored in <code>~/.config/consoul/config.yaml</code>:</p> <pre><code>profiles:\n  default:\n    model: claude-3-5-sonnet-20241022\n    temperature: 0.7\n    system_prompt: \"You are a helpful AI assistant.\"\n\n  code-expert:\n    model: gpt-4o\n    temperature: 0.3\n    system_prompt: \"You are a senior software engineer.\"\n</code></pre> <p>Use profiles:</p> <pre><code># Use default profile\nconsole = Consoul()\n\n# Use specific profile\nconsole = Consoul(profile=\"code-expert\")\n\n# Override profile settings\nconsole = Consoul(profile=\"default\", temperature=0.9)\n</code></pre> <p>Initialize configuration:</p> <pre><code>consoul init  # Create config file\n</code></pre>"},{"location":"api/#learning-path","title":"Learning Path","text":"<ol> <li>Tutorial - Learn SDK fundamentals step-by-step</li> <li>Tools - Master all 13 built-in tools</li> <li>Building Agents - Create specialized AI agents</li> <li>API Reference - Complete API documentation</li> </ol>"},{"location":"api/#examples","title":"Examples","text":""},{"location":"api/#minimal-chat-3-lines","title":"Minimal Chat (3 Lines)","text":"<pre><code>from consoul import Consoul\n\nconsole = Consoul()\nprint(console.chat(\"Hello!\"))\n</code></pre>"},{"location":"api/#multi-turn-conversation","title":"Multi-Turn Conversation","text":"<pre><code>from consoul import Consoul\n\nconsole = Consoul()\nconsole.chat(\"My name is Alice\")\nconsole.chat(\"I'm learning Python\")\nresponse = console.chat(\"What's my name and what am I learning?\")\n# \u2192 \"Your name is Alice and you're learning Python.\"\n</code></pre>"},{"location":"api/#custom-tool-example","title":"Custom Tool Example","text":"<pre><code>from consoul import Consoul\nfrom langchain_core.tools import tool\n\n@tool\ndef get_weather(city: str) -&gt; str:\n    \"\"\"Get weather for a city.\"\"\"\n    return f\"The weather in {city} is sunny, 72\u00b0F\"\n\nconsole = Consoul(tools=[get_weather])\nprint(console.chat(\"What's the weather in San Francisco?\"))\n# \u2192 \"The weather in San Francisco is sunny, 72\u00b0F\"\n</code></pre>"},{"location":"api/#cost-tracking","title":"Cost Tracking","text":"<pre><code>from consoul import Consoul\n\nconsole = Consoul(model=\"gpt-4o\")\nconsole.chat(\"Explain quantum computing\")\n\ncost = console.last_cost\nprint(f\"Tokens: {cost['total_tokens']}\")\nprint(f\"Estimated cost: ${cost['estimated_cost']:.4f}\")\n# Note: This is a rough approximation. Check provider dashboards for exact costs.\n</code></pre>"},{"location":"api/#support","title":"Support","text":"<ul> <li>GitHub Issues - Report bugs</li> <li>Discussions - Ask questions</li> <li>Documentation - Full docs</li> </ul>"},{"location":"api/#license","title":"License","text":"<p>MIT License - see LICENSE</p> <p>Ready to build? Start with the Tutorial \u2192</p>"},{"location":"api/agents/","title":"Building Agents","text":""},{"location":"api/agents/#building-agentic-agents","title":"Building Agentic Agents","text":"<p>Learn how to build specialized AI agents that combine reasoning with tools to accomplish complex tasks autonomously.</p>"},{"location":"api/agents/#what-is-an-agent","title":"What is an Agent?","text":"<p>An agent is an AI system that:</p> <ol> <li>Reasons about tasks and breaks them into steps</li> <li>Uses tools to gather information or take actions</li> <li>Iterates until the goal is achieved</li> </ol> <p>In Consoul, agents are simply AI models + tools + good prompts:</p> <pre><code>from consoul import Consoul\n\n# This is an agent!\nagent = Consoul(\n    tools=[\"grep\", \"code_search\", \"read\"],\n    system_prompt=\"You are a code analysis expert. Help find and explain code.\"\n)\n\nagent.chat(\"Find all database queries in this project\")\n</code></pre> <p>The AI will: 1. Use <code>code_search</code> to find database-related code 2. Use <code>grep</code> to search for SQL patterns 3. Use <code>read</code> to examine specific files 4. Synthesize findings into a coherent answer</p>"},{"location":"api/agents/#agent-design-patterns","title":"Agent Design Patterns","text":""},{"location":"api/agents/#pattern-1-search-analysis-agent","title":"Pattern 1: Search &amp; Analysis Agent","text":"<p>Combines search tools to find and analyze information:</p> <pre><code>from consoul import Consoul\n\ncode_analyzer = Consoul(\n    model=\"gpt-4o\",  # Good reasoning for multi-step tasks\n    tools=[\"grep\", \"code_search\", \"find_references\", \"read\"],\n    system_prompt=\"\"\"You are a senior software engineer specialized in code analysis.\n\nWhen analyzing code:\n1. First search broadly with code_search\n2. Then examine specific files with read\n3. Find all usages with find_references\n4. Provide concrete examples from the codebase\n\nBe thorough but concise.\"\"\",\n    temperature=0.3  # Lower temperature for analytical tasks\n)\n\n# Use the agent\ncode_analyzer.chat(\"How is authentication implemented in this codebase?\")\ncode_analyzer.chat(\"Find potential security vulnerabilities\")\ncode_analyzer.chat(\"Where should I add rate limiting?\")\n</code></pre> <p>When to use: Code reviews, security audits, understanding unfamiliar codebases</p>"},{"location":"api/agents/#pattern-2-file-management-agent","title":"Pattern 2: File Management Agent","text":"<p>Automates file operations with safety guardrails:</p> <pre><code>from consoul import Consoul\n\nfile_manager = Consoul(\n    model=\"claude-3-5-sonnet-20241022\",\n    tools=[\"bash\", \"create_file\", \"edit_lines\", \"read\", \"append_file\"],\n    system_prompt=\"\"\"You are a careful file management assistant.\n\nRules:\n- Always use 'ls' to verify before file operations\n- Read files before editing them\n- Confirm destructive operations with the user\n- Use git status to check for uncommitted changes\n\nBe methodical and explain what you're doing.\"\"\",\n    temperature=0.2  # Very deterministic for file operations\n)\n\n# Use the agent\nfile_manager.chat(\"Create a basic FastAPI project structure\")\nfile_manager.chat(\"Add error handling to all API routes\")\nfile_manager.chat(\"Organize imports in Python files according to PEP 8\")\n</code></pre> <p>When to use: Code generation, refactoring, project scaffolding</p> <p>File Edit Tools</p> <p>File-edit tools (<code>create_file</code>, <code>edit_lines</code>, <code>delete_file</code>) can modify your codebase. Always:</p> <ul> <li>Work in a git repository with committed changes</li> <li>Review changes before committing</li> <li>Start with dry runs or test directories</li> <li>Use <code>tools=\"safe\"</code> when you don't need file modifications</li> </ul>"},{"location":"api/agents/#pattern-3-web-research-agent","title":"Pattern 3: Web Research Agent","text":"<p>Gathers and synthesizes information from the web:</p> <pre><code>from consoul import Consoul\n\nresearcher = Consoul(\n    model=\"gemini-2.0-flash-exp\",  # Good for long documents\n    tools=[\"web_search\", \"read_url\", \"wikipedia\"],\n    system_prompt=\"\"\"You are a thorough research assistant.\n\nResearch methodology:\n1. Start with web_search to find authoritative sources\n2. Use read_url to examine full articles\n3. Cross-reference with wikipedia for background\n4. Always cite your sources with URLs\n\nProvide well-organized summaries with citations.\"\"\",\n    temperature=0.5  # Balanced for research\n)\n\n# Use the agent\nresearcher.chat(\"Research best practices for Python async error handling in 2024\")\nresearcher.chat(\"Compare FastAPI vs Flask for microservices\")\nresearcher.chat(\"What are the latest security considerations for JWT authentication?\")\n</code></pre> <p>When to use: Technology research, competitive analysis, learning new topics</p>"},{"location":"api/agents/#pattern-4-devops-assistant","title":"Pattern 4: DevOps Assistant","text":"<p>Combines bash execution with file operations:</p> <pre><code>from consoul import Consoul\n\ndevops = Consoul(\n    model=\"gpt-4o\",\n    tools=[\"bash\", \"read\", \"edit_lines\", \"create_file\"],\n    system_prompt=\"\"\"You are a DevOps assistant expert in Docker, CI/CD, and deployment.\n\nBest practices:\n- Test commands with dry runs first (e.g., docker build --dry-run)\n- Check existing configurations before modifying\n- Explain what each command does and why\n- Follow 12-factor app principles\n\nBe cautious with destructive operations.\"\"\",\n    temperature=0.3\n)\n\n# Use the agent\ndevops.chat(\"Create a Dockerfile for this Python application\")\ndevops.chat(\"Set up GitHub Actions CI/CD for automated testing\")\ndevops.chat(\"Configure Docker Compose for local development\")\n</code></pre> <p>When to use: Infrastructure setup, deployment automation, CI/CD configuration</p>"},{"location":"api/agents/#pattern-5-documentation-agent","title":"Pattern 5: Documentation Agent","text":"<p>Generates and updates documentation:</p> <pre><code>from consoul import Consoul\n\ndoc_writer = Consoul(\n    model=\"claude-3-5-sonnet-20241022\",  # Excellent writing quality\n    tools=[\"read\", \"code_search\", \"create_file\", \"edit_lines\"],\n    system_prompt=\"\"\"You are a technical documentation expert.\n\nDocumentation standards:\n- Write clear, concise explanations\n- Include code examples from the actual codebase\n- Use proper Markdown formatting\n- Add docstrings to all public functions\n- Follow Google-style docstring format\n\nPrioritize clarity and accuracy.\"\"\",\n    temperature=0.4\n)\n\n# Use the agent\ndoc_writer.chat(\"Generate API documentation from the code\")\ndoc_writer.chat(\"Add docstrings to all functions in src/auth.py\")\ndoc_writer.chat(\"Create a README with usage examples\")\n</code></pre> <p>When to use: Documentation generation, API docs, code comments</p>"},{"location":"api/agents/#advanced-agent-techniques","title":"Advanced Agent Techniques","text":""},{"location":"api/agents/#multi-step-reasoning","title":"Multi-Step Reasoning","text":"<p>Guide the agent through complex tasks step-by-step:</p> <pre><code>from consoul import Consoul\n\narchitect = Consoul(\n    model=\"gpt-4o\",\n    tools=[\"read\", \"code_search\", \"create_file\", \"edit_lines\"],\n    system_prompt=\"\"\"You are a software architect. For complex tasks:\n\n1. ANALYZE: Understand current codebase structure\n2. PLAN: Outline the changes needed\n3. IMPLEMENT: Make changes incrementally\n4. VERIFY: Check that changes are correct\n\nExplain each step before doing it.\"\"\",\n    temperature=0.4\n)\n\narchitect.chat(\"\"\"\nAdd user authentication to this Flask app:\n1. Create a User model\n2. Add login/logout routes\n3. Implement JWT token generation\n4. Add authentication middleware\n\"\"\")\n</code></pre>"},{"location":"api/agents/#error-recovery","title":"Error Recovery","text":"<p>Teach agents to handle failures gracefully:</p> <pre><code>from consoul import Consoul\n\nrobust_agent = Consoul(\n    model=\"gpt-4o\",\n    tools=[\"bash\", \"read\", \"edit_lines\"],\n    system_prompt=\"\"\"You are a robust automation assistant.\n\nError handling:\n- If a command fails, read the error message carefully\n- Try alternative approaches\n- Verify assumptions before retrying\n- Ask for help if stuck after 2 attempts\n\nNever give up - find a solution.\"\"\",\n    temperature=0.3\n)\n\nrobust_agent.chat(\"Install dependencies and run tests, fixing any errors\")\n</code></pre>"},{"location":"api/agents/#domain-specific-agents","title":"Domain-Specific Agents","text":"<p>Create experts in specific domains:</p> <pre><code>from consoul import Consoul\n\n# Security auditor\nsecurity_agent = Consoul(\n    tools=[\"grep\", \"code_search\", \"read\"],\n    system_prompt=\"\"\"You are a security auditor specializing in OWASP Top 10.\n\nAudit checklist:\n- SQL injection vulnerabilities\n- XSS attack vectors\n- CSRF protection\n- Authentication weaknesses\n- Sensitive data exposure\n- Insecure dependencies\n\nProvide severity ratings and remediation advice.\"\"\"\n)\n\n# Performance optimizer\nperf_agent = Consoul(\n    tools=[\"grep\", \"code_search\", \"read\", \"bash\"],\n    system_prompt=\"\"\"You are a performance optimization expert.\n\nOptimization areas:\n- Database query efficiency (N+1 queries, missing indexes)\n- Memory leaks and excessive allocations\n- Inefficient algorithms (O(n\u00b2) \u2192 O(n log n))\n- Caching opportunities\n- Lazy loading vs eager loading\n\nUse profiling tools before suggesting changes.\"\"\"\n)\n\n# API designer\napi_agent = Consoul(\n    tools=[\"read\", \"code_search\", \"create_file\"],\n    system_prompt=\"\"\"You are an API design expert following REST and OpenAPI standards.\n\nDesign principles:\n- RESTful resource naming\n- Proper HTTP methods and status codes\n- Versioning strategy\n- Pagination and filtering\n- Error response format\n- OpenAPI/Swagger documentation\n\nFollow industry best practices (JSON:API, HAL, etc.).\"\"\"\n)\n</code></pre>"},{"location":"api/agents/#multi-agent-coordination","title":"Multi-Agent Coordination","text":"<p>Combine specialized agents for complex workflows:</p> <pre><code>from consoul import Consoul\n\nclass DevelopmentTeam:\n    \"\"\"Simulates a development team with specialized roles.\"\"\"\n\n    def __init__(self):\n        # Architect designs the solution\n        self.architect = Consoul(\n            tools=[\"read\", \"code_search\"],\n            system_prompt=\"You are a software architect. Design solutions.\"\n        )\n\n        # Developer implements code\n        self.developer = Consoul(\n            tools=[\"create_file\", \"edit_lines\", \"bash\"],\n            system_prompt=\"You are a developer. Implement features.\"\n        )\n\n        # Reviewer checks quality\n        self.reviewer = Consoul(\n            tools=[\"read\", \"grep\", \"code_search\"],\n            system_prompt=\"You are a code reviewer. Check quality and security.\"\n        )\n\n    def build_feature(self, requirement: str):\n        \"\"\"Coordinate agents to build a feature.\"\"\"\n\n        # 1. Architect designs\n        design = self.architect.chat(f\"Design a solution for: {requirement}\")\n        print(f\"\ud83d\udcd0 Design: {design}\\n\")\n\n        # 2. Developer implements\n        implementation = self.developer.chat(\n            f\"Implement this design:\\n{design}\\n\\nRequirement: {requirement}\"\n        )\n        print(f\"\ud83d\udcbb Implementation: {implementation}\\n\")\n\n        # 3. Reviewer audits\n        review = self.reviewer.chat(\n            f\"Review this implementation:\\n{implementation}\"\n        )\n        print(f\"\u2705 Review: {review}\\n\")\n\n        return {\"design\": design, \"implementation\": implementation, \"review\": review}\n\n# Use the team\nteam = DevelopmentTeam()\nteam.build_feature(\"Add rate limiting to the API\")\n</code></pre>"},{"location":"api/agents/#production-best-practices","title":"Production Best Practices","text":""},{"location":"api/agents/#logging-and-monitoring","title":"Logging and Monitoring","text":"<p>Track agent behavior in production:</p> <pre><code>import logging\nfrom consoul import Consoul\n\n# Set up logging\nlogging.basicConfig(\n    level=logging.INFO,\n    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s'\n)\nlogger = logging.getLogger(__name__)\n\nclass MonitoredAgent:\n    \"\"\"Agent with comprehensive logging.\"\"\"\n\n    def __init__(self, name: str, **kwargs):\n        self.name = name\n        self.console = Consoul(**kwargs)\n        self.logger = logging.getLogger(f\"agent.{name}\")\n\n    def execute(self, task: str):\n        \"\"\"Execute task with logging.\"\"\"\n        self.logger.info(f\"Starting task: {task}\")\n\n        try:\n            # Track costs before\n            cost_before = self.console.last_cost\n\n            # Execute\n            result = self.console.chat(task)\n\n            # Track costs after\n            cost_after = self.console.last_cost\n            tokens_used = cost_after['total_tokens']\n            estimated_cost = cost_after['estimated_cost']\n\n            self.logger.info(\n                f\"Task completed. Tokens: {tokens_used}, \"\n                f\"Cost: ${estimated_cost:.4f}\"\n            )\n\n            return result\n\n        except Exception as e:\n            self.logger.error(f\"Task failed: {e}\", exc_info=True)\n            raise\n\n# Use it\nagent = MonitoredAgent(\n    name=\"code_analyzer\",\n    tools=[\"grep\", \"code_search\"],\n    system_prompt=\"Analyze code\"\n)\n\nagent.execute(\"Find all TODO comments\")\n</code></pre>"},{"location":"api/agents/#rate-limiting","title":"Rate Limiting","text":"<p>Prevent API quota exhaustion:</p> <pre><code>import time\nfrom consoul import Consoul\n\nclass RateLimitedAgent:\n    \"\"\"Agent with rate limiting.\"\"\"\n\n    def __init__(self, requests_per_minute: int = 10, **kwargs):\n        self.console = Consoul(**kwargs)\n        self.min_delay = 60.0 / requests_per_minute\n        self.last_request = 0\n\n    def chat(self, message: str) -&gt; str:\n        \"\"\"Chat with rate limiting.\"\"\"\n        # Enforce minimum delay between requests\n        elapsed = time.time() - self.last_request\n        if elapsed &lt; self.min_delay:\n            time.sleep(self.min_delay - elapsed)\n\n        self.last_request = time.time()\n        return self.console.chat(message)\n\n# Use it (max 10 requests/minute)\nagent = RateLimitedAgent(\n    requests_per_minute=10,\n    tools=[\"web_search\"]\n)\n\nfor query in queries:\n    result = agent.chat(query)  # Auto rate-limited\n</code></pre>"},{"location":"api/agents/#graceful-degradation","title":"Graceful Degradation","text":"<p>Handle tool failures elegantly:</p> <pre><code>from consoul import Consoul\n\nagent = Consoul(\n    tools=[\"bash\", \"read\"],\n    system_prompt=\"\"\"If a tool fails, try alternative approaches:\n\n1. bash fails \u2192 read the file directly\n2. read fails \u2192 use bash cat\n3. Both fail \u2192 explain the limitation\n\nNever stop trying until you've exhausted all options.\"\"\"\n)\n\n# The agent will try alternatives if tools fail\nagent.chat(\"Show me the contents of config.yaml\")\n</code></pre>"},{"location":"api/agents/#testing-agents","title":"Testing Agents","text":"<p>Write tests for agent behavior:</p> <pre><code>import pytest\nfrom consoul import Consoul\n\ndef test_code_analyzer():\n    \"\"\"Test code analysis agent.\"\"\"\n    agent = Consoul(\n        tools=[\"grep\", \"code_search\"],\n        system_prompt=\"You are a code analyzer.\"\n    )\n\n    # Test basic functionality\n    result = agent.chat(\"Find TODO comments\")\n    assert \"TODO\" in result or \"no TODO\" in result.lower()\n\n    # Test conversation memory\n    agent.chat(\"Remember: focus on security issues\")\n    result = agent.chat(\"What should I focus on?\")\n    assert \"security\" in result.lower()\n\ndef test_agent_with_mocked_tools():\n    \"\"\"Test agent with mocked tool responses.\"\"\"\n    # In production, mock expensive operations\n    # Use unittest.mock to mock tool.invoke()\n    pass\n</code></pre>"},{"location":"api/agents/#real-world-agent-examples","title":"Real-World Agent Examples","text":""},{"location":"api/agents/#automated-code-reviewer","title":"Automated Code Reviewer","text":"<pre><code>from consoul import Consoul\n\ncode_reviewer = Consoul(\n    model=\"claude-3-5-sonnet-20241022\",\n    tools=[\"read\", \"grep\", \"code_search\"],\n    system_prompt=\"\"\"You are a senior code reviewer.\n\nReview checklist:\n\u2713 Code style and PEP 8 compliance\n\u2713 Type hints and docstrings\n\u2713 Error handling\n\u2713 Security vulnerabilities\n\u2713 Performance concerns\n\u2713 Test coverage\n\nProvide constructive feedback with examples.\"\"\",\n    temperature=0.2\n)\n\n# Review a pull request\ncode_reviewer.chat(\"Review the changes in src/api/auth.py\")\ncode_reviewer.chat(\"Are there any security issues?\")\ncode_reviewer.chat(\"Suggest improvements\")\n</code></pre>"},{"location":"api/agents/#migration-assistant","title":"Migration Assistant","text":"<pre><code>from consoul import Consoul\n\nmigration_agent = Consoul(\n    model=\"gpt-4o\",\n    tools=[\"read\", \"code_search\", \"edit_lines\", \"create_file\"],\n    system_prompt=\"\"\"You are a migration specialist.\n\nMigration process:\n1. Analyze current implementation\n2. Plan migration steps\n3. Create compatibility layer\n4. Incremental migration\n5. Deprecation warnings\n6. Final cutover\n\nMaintain backward compatibility during migration.\"\"\",\n    temperature=0.3\n)\n\n# Migrate from SQLAlchemy 1.x to 2.0\nmigration_agent.chat(\"Analyze the current SQLAlchemy usage\")\nmigration_agent.chat(\"Create a migration plan to SQLAlchemy 2.0\")\nmigration_agent.chat(\"Implement the first migration step\")\n</code></pre>"},{"location":"api/agents/#dependency-updater","title":"Dependency Updater","text":"<pre><code>from consoul import Consoul\n\ndep_updater = Consoul(\n    model=\"gpt-4o\",\n    tools=[\"bash\", \"read\", \"edit_lines\"],\n    system_prompt=\"\"\"You are a dependency management expert.\n\nUpdate process:\n1. Check current versions\n2. Identify outdated packages\n3. Review changelogs for breaking changes\n4. Update incrementally (minor \u2192 major)\n5. Run tests after each update\n6. Document breaking changes\n\nNever update all at once - be incremental.\"\"\",\n    temperature=0.2\n)\n\n# Update project dependencies\ndep_updater.chat(\"Check for outdated Python packages\")\ndep_updater.chat(\"Update packages without breaking changes\")\ndep_updater.chat(\"Create a plan for major version updates\")\n</code></pre>"},{"location":"api/agents/#key-takeaways","title":"Key Takeaways","text":"<ol> <li>Agents = AI + Tools + Prompts: Combine them thoughtfully</li> <li>System prompts matter: Guide agent behavior explicitly</li> <li>Start simple: Basic agent \u2192 Add tools \u2192 Add sophistication</li> <li>Error handling: Teach agents to recover from failures</li> <li>Monitor production: Log costs, errors, and performance</li> <li>Test behavior: Agents are software - test them!</li> </ol>"},{"location":"api/agents/#next-steps","title":"Next Steps","text":"<ul> <li>Tools Deep Dive - Master all 13 built-in tools</li> <li>SDK Tutorial - Learn SDK fundamentals</li> <li>API Reference - Complete API documentation</li> </ul> <p>Now build your agent! \ud83e\udd16</p>"},{"location":"api/reference/","title":"API Reference","text":""},{"location":"api/reference/#api-reference","title":"API Reference","text":"<p>Complete reference documentation for the Consoul SDK.</p>"},{"location":"api/reference/#consoul-class","title":"Consoul Class","text":"<p>The main SDK interface for integrating AI chat into your applications.</p>"},{"location":"api/reference/#consoul.sdk.Consoul","title":"consoul.sdk.Consoul","text":"<pre><code>Consoul(\n    model: str | None = None,\n    profile: str = \"default\",\n    tools: bool | str | list[str | BaseTool] | None = True,\n    temperature: float | None = None,\n    system_prompt: str | None = None,\n    persist: bool = True,\n    api_key: str | None = None,\n    discover_tools: bool = False,\n)\n</code></pre> <p>High-level Consoul SDK interface.</p> <p>The easiest way to add AI chat to your Python application.</p> <p>Examples:</p> <p>Basic chat:     &gt;&gt;&gt; console = Consoul()     &gt;&gt;&gt; console.chat(\"Hello!\")     'Hi! How can I help you?'</p> <p>With tools:     &gt;&gt;&gt; console = Consoul(tools=True)     &gt;&gt;&gt; console.chat(\"List files\")</p> <p>Custom model:     &gt;&gt;&gt; console = Consoul(model=\"gpt-4o\")     &gt;&gt;&gt; response = console.ask(\"Explain\", show_tokens=True)     &gt;&gt;&gt; print(f\"Tokens: {response.tokens}\")</p> <p>Introspection:     &gt;&gt;&gt; console.settings     {'model': 'claude-3-5-sonnet-20241022', 'profile': 'default', ...}     &gt;&gt;&gt; console.last_cost</p> <p>Initialize Consoul SDK.</p> <p>Parameters:</p> Name Type Description Default <code>model</code> <code>str | None</code> <p>Model name (e.g., \"gpt-4o\", \"claude-3-5-sonnet\").    Auto-detects provider. Defaults to profile's model.</p> <code>None</code> <code>profile</code> <code>str</code> <p>Profile name to use (default: \"default\")</p> <code>'default'</code> <code>tools</code> <code>bool | str | list[str | BaseTool] | None</code> <p>Tool specification. Supports multiple formats:    - True: Enable all built-in tools (default)    - False/None: Disable all tools (chat-only mode)    - \"safe\"/\"caution\"/\"dangerous\": Risk level filtering    - \"search\"/\"file-edit\"/\"web\"/\"execute\": Category filtering    - [\"bash\", \"grep\"]: Specific tools by name    - [\"search\", \"web\"]: Multiple categories    - [\"search\", \"bash\"]: Mix categories and tools    - [custom_tool, \"bash\"]: Mix custom and built-in tools</p> <p>Security guidelines:    - SAFE: Read-only operations (grep, code_search, web_search)    - CAUTION: File operations and command execution (requires oversight)    - Start with tools=\"safe\" for untrusted AI interactions    - Use principle of least privilege (only grant needed tools)    - Always use version control (git) when enabling file operations</p> <code>True</code> <code>temperature</code> <code>float | None</code> <p>Override temperature (0.0-2.0)</p> <code>None</code> <code>system_prompt</code> <code>str | None</code> <p>Override system prompt</p> <code>None</code> <code>persist</code> <code>bool</code> <p>Save conversation history (default: True)</p> <code>True</code> <code>api_key</code> <code>str | None</code> <p>Override API key (falls back to environment)</p> <code>None</code> <code>discover_tools</code> <code>bool</code> <p>Auto-discover tools from .consoul/tools/ (default: False)             Discovered tools default to CAUTION risk level.</p> <code>False</code> <p>Raises:</p> Type Description <code>ValueError</code> <p>If profile not found or invalid parameters</p> <code>MissingAPIKeyError</code> <p>If no API key found for provider</p> <p>Examples:</p> <p>Basic usage:     &gt;&gt;&gt; console = Consoul()  # All tools enabled     &gt;&gt;&gt; console = Consoul(model=\"gpt-4o\", temperature=0.7)</p> <p>Tool specification:     &gt;&gt;&gt; # Disable tools     &gt;&gt;&gt; console = Consoul(tools=False)</p> <pre><code>&gt;&gt;&gt; # Only safe read-only tools\n&gt;&gt;&gt; console = Consoul(tools=\"safe\")\n\n&gt;&gt;&gt; # Specific tools by name\n&gt;&gt;&gt; console = Consoul(tools=[\"bash\", \"grep\", \"code_search\"])\n\n&gt;&gt;&gt; # Custom tool + built-in\n&gt;&gt;&gt; from langchain_core.tools import tool\n&gt;&gt;&gt; @tool\n... def my_tool(query: str) -&gt; str:\n...     return \"result\"\n&gt;&gt;&gt; console = Consoul(tools=[my_tool, \"bash\"])\n</code></pre> <p>Category-based specification:     &gt;&gt;&gt; # All search tools     &gt;&gt;&gt; console = Consoul(tools=\"search\")</p> <pre><code>&gt;&gt;&gt; # All file editing tools\n&gt;&gt;&gt; console = Consoul(tools=\"file-edit\")\n\n&gt;&gt;&gt; # Multiple categories\n&gt;&gt;&gt; console = Consoul(tools=[\"search\", \"web\"])\n\n&gt;&gt;&gt; # Mix categories and specific tools\n&gt;&gt;&gt; console = Consoul(tools=[\"search\", \"bash\"])\n</code></pre> <p>Tool discovery:     &gt;&gt;&gt; # Auto-discover tools from .consoul/tools/     &gt;&gt;&gt; console = Consoul(discover_tools=True)</p> <pre><code>&gt;&gt;&gt; # Combine with specific tools\n&gt;&gt;&gt; console = Consoul(tools=[\"bash\", \"grep\"], discover_tools=True)\n\n&gt;&gt;&gt; # Only discovered tools (no built-in)\n&gt;&gt;&gt; console = Consoul(tools=False, discover_tools=True)\n</code></pre> Available tool categories <p>search, file-edit, web, execute</p> Available tool names <p>bash, grep, code_search, find_references, create_file, edit_lines, edit_replace, append_file, delete_file, read_url, web_search</p> Tool discovery <p>When discover_tools=True, Consoul will scan .consoul/tools/ for custom tools. Create a .consoul/tools/ directory in your project and add Python files with @tool decorated functions:</p> <pre><code>.consoul/tools/my_tool.py:\n    from langchain_core.tools import tool\n\n    @tool\n    def my_custom_tool(query: str) -&gt; str:\n        '''My custom tool description.'''\n        return process(query)\n</code></pre> <p>All discovered tools default to RiskLevel.CAUTION for safety.</p>"},{"location":"api/reference/#consoul.sdk.Consoul.last_cost","title":"last_cost  <code>property</code>","text":"<pre><code>last_cost: dict[str, Any]\n</code></pre> <p>Get token usage and accurate cost of last request.</p> <p>Returns:</p> Type Description <code>dict[str, Any]</code> <p>Dictionary with input_tokens, output_tokens, total_tokens, and estimated cost</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; console.chat(\"Hello\")\n&gt;&gt;&gt; console.last_cost\n{'input_tokens': 87, 'output_tokens': 12, 'total_tokens': 99, ...}\n</code></pre> Note <p>Token counts are accurate when available from the model provider's usage_metadata. Falls back to conversation history token counting if unavailable. Cost calculations use model-specific pricing data from major providers (OpenAI, Anthropic, Google). Includes support for prompt caching costs.</p>"},{"location":"api/reference/#consoul.sdk.Consoul.last_request","title":"last_request  <code>property</code>","text":"<pre><code>last_request: dict[str, Any] | None\n</code></pre> <p>Get details about the last API request.</p> <p>Returns:</p> Type Description <code>dict[str, Any] | None</code> <p>Dictionary with message, model, token count, etc.</p> <code>dict[str, Any] | None</code> <p>None if no requests made yet.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; console.chat(\"Hello\")\n&gt;&gt;&gt; console.last_request\n{'message': 'Hello', 'model': 'claude-3-5-sonnet-20241022', ...}\n</code></pre>"},{"location":"api/reference/#consoul.sdk.Consoul.settings","title":"settings  <code>property</code>","text":"<pre><code>settings: dict[str, Any]\n</code></pre> <p>Get current configuration settings.</p> <p>Returns:</p> Type Description <code>dict[str, Any]</code> <p>Dictionary with model, profile, tools, and other settings</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; console.settings\n{'model': 'claude-3-5-sonnet-20241022', 'profile': 'default', ...}\n</code></pre>"},{"location":"api/reference/#consoul.sdk.Consoul.ask","title":"ask","text":"<pre><code>ask(\n    message: str, show_tokens: bool = False\n) -&gt; ConsoulResponse\n</code></pre> <p>Send a message and get a rich response with metadata.</p> <p>Parameters:</p> Name Type Description Default <code>message</code> <code>str</code> <p>Your message</p> required <code>show_tokens</code> <code>bool</code> <p>Include token count in response</p> <code>False</code> <p>Returns:</p> Type Description <code>ConsoulResponse</code> <p>ConsoulResponse with content, tokens, and model info</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; response = console.ask(\"Hello\", show_tokens=True)\n&gt;&gt;&gt; print(response.content)\n&gt;&gt;&gt; print(f\"Tokens: {response.tokens}\")\n</code></pre>"},{"location":"api/reference/#consoul.sdk.Consoul.chat","title":"chat","text":"<pre><code>chat(message: str) -&gt; str\n</code></pre> <p>Send a message and get a response.</p> <p>This is a stateful method - conversation history is maintained across multiple calls.</p> <p>Parameters:</p> Name Type Description Default <code>message</code> <code>str</code> <p>Your message to the AI</p> required <p>Returns:</p> Type Description <code>str</code> <p>AI's response as a string</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; console.chat(\"What is 2+2?\")\n'4'\n&gt;&gt;&gt; console.chat(\"What about 3+3?\")  # Remembers context\n'6'\n</code></pre>"},{"location":"api/reference/#consoul.sdk.Consoul.clear","title":"clear","text":"<pre><code>clear() -&gt; None\n</code></pre> <p>Clear conversation history and start fresh.</p> <p>The system prompt is preserved.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; console.chat(\"Hello\")\n&gt;&gt;&gt; console.chat(\"Remember me?\")  # AI remembers\n&gt;&gt;&gt; console.clear()\n&gt;&gt;&gt; console.chat(\"Remember me?\")  # AI doesn't remember\n</code></pre>"},{"location":"api/reference/#consoulresponse-class","title":"ConsoulResponse Class","text":"<p>Structured response object returned by <code>Consoul.ask()</code>.</p>"},{"location":"api/reference/#consoul.sdk.ConsoulResponse","title":"consoul.sdk.ConsoulResponse","text":"<pre><code>ConsoulResponse(\n    content: str, tokens: int = 0, model: str = \"\"\n)\n</code></pre> <p>Response from Consoul chat/ask methods.</p> <p>Attributes:</p> Name Type Description <code>content</code> <p>The AI's response text</p> <code>tokens</code> <p>Number of tokens used (if requested)</p> <code>model</code> <p>Model name that generated the response</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; response = console.ask(\"Hello\", show_tokens=True)\n&gt;&gt;&gt; print(response.content)\n&gt;&gt;&gt; print(f\"Tokens: {response.tokens}\")\n</code></pre> <p>Initialize response.</p> <p>Parameters:</p> Name Type Description Default <code>content</code> <code>str</code> <p>Response text</p> required <code>tokens</code> <code>int</code> <p>Token count</p> <code>0</code> <code>model</code> <code>str</code> <p>Model name</p> <code>''</code>"},{"location":"api/reference/#consoul.sdk.ConsoulResponse.__repr__","title":"__repr__","text":"<pre><code>__repr__() -&gt; str\n</code></pre> <p>Return detailed representation.</p>"},{"location":"api/reference/#consoul.sdk.ConsoulResponse.__str__","title":"__str__","text":"<pre><code>__str__() -&gt; str\n</code></pre> <p>Return content as string for easy printing.</p>"},{"location":"api/reference/#tool-registry","title":"Tool Registry","text":"<p>Manage and configure tools for AI agents.</p>"},{"location":"api/reference/#consoul.ai.tools.registry.ToolRegistry","title":"consoul.ai.tools.registry.ToolRegistry","text":"<pre><code>ToolRegistry(\n    config: ToolConfig,\n    approval_provider: ApprovalProvider | None = None,\n    audit_logger: AuditLogger | None = None,\n)\n</code></pre> <p>Central registry for managing LangChain tools.</p> <p>Handles tool registration, configuration, security policy enforcement, and binding tools to chat models for tool calling.</p> <p>This registry is SDK-ready and works without TUI dependencies.</p> IMPORTANT - Approval Workflow Coordination <p>The registry provides approval caching (once_per_session mode) but does NOT handle user approval itself. You must implement an ApprovalProvider (see SOUL-66) that:</p> <ol> <li>Checks registry.needs_approval(tool_name)</li> <li>If True: Shows approval UI and gets user decision</li> <li>If approved: Calls registry.mark_approved(tool_name)</li> <li>Executes the tool</li> </ol> <p>The registry-level caching is an optimization to avoid showing the approval modal multiple times for the same tool. It does NOT replace the approval provider.</p> Example <p>from consoul.config.models import ToolConfig from consoul.ai.tools import ToolRegistry, RiskLevel from langchain_core.tools import tool</p> <p>@tool ... def my_tool(x: int) -&gt; int: ...     '''Example tool''' ...     return x * 2</p> <p>config = ToolConfig(enabled=True, timeout=30) registry = ToolRegistry(config) registry.register(my_tool, risk_level=RiskLevel.SAFE) tools_list = registry.list_tools() assert len(tools_list) == 1</p> <p>Initialize tool registry with configuration.</p> <p>Parameters:</p> Name Type Description Default <code>config</code> <code>ToolConfig</code> <p>ToolConfig instance controlling tool behavior</p> required <code>approval_provider</code> <code>ApprovalProvider | None</code> <p>Optional approval provider for tool execution. If None, will attempt to use TuiApprovalProvider (if TUI available) or raise error if no provider available.</p> <code>None</code> <code>audit_logger</code> <code>AuditLogger | None</code> <p>Optional audit logger for tool execution tracking. If None, creates FileAuditLogger or NullAuditLogger based on config.</p> <code>None</code>"},{"location":"api/reference/#consoul.ai.tools.registry.ToolRegistry.register","title":"register","text":"<pre><code>register(\n    tool: BaseTool,\n    risk_level: RiskLevel = RiskLevel.SAFE,\n    tags: list[str] | None = None,\n    enabled: bool = True,\n) -&gt; None\n</code></pre> <p>Register a LangChain tool in the registry.</p> <p>Parameters:</p> Name Type Description Default <code>tool</code> <code>BaseTool</code> <p>LangChain BaseTool instance (decorated with @tool)</p> required <code>risk_level</code> <code>RiskLevel</code> <p>Security risk classification for this tool</p> <code>SAFE</code> <code>tags</code> <code>list[str] | None</code> <p>Optional tags for categorization</p> <code>None</code> <code>enabled</code> <code>bool</code> <p>Whether tool is enabled (overrides global config.enabled)</p> <code>True</code> <p>Raises:</p> Type Description <code>ToolValidationError</code> <p>If tool is invalid or already registered</p> Example <p>from langchain_core.tools import tool @tool ... def bash_execute(command: str) -&gt; str: ...     '''Execute bash command''' ...     return \"output\" registry.register(bash_execute, risk_level=RiskLevel.DANGEROUS)</p>"},{"location":"api/reference/#consoul.ai.tools.registry.ToolRegistry.unregister","title":"unregister","text":"<pre><code>unregister(tool_name: str) -&gt; None\n</code></pre> <p>Remove a tool from the registry.</p> <p>Parameters:</p> Name Type Description Default <code>tool_name</code> <code>str</code> <p>Name of tool to unregister</p> required <p>Raises:</p> Type Description <code>ToolNotFoundError</code> <p>If tool is not registered</p>"},{"location":"api/reference/#consoul.ai.tools.registry.ToolRegistry.get_tool","title":"get_tool","text":"<pre><code>get_tool(tool_name: str) -&gt; ToolMetadata\n</code></pre> <p>Retrieve tool metadata by name.</p> <p>Parameters:</p> Name Type Description Default <code>tool_name</code> <code>str</code> <p>Name of the tool to retrieve</p> required <p>Returns:</p> Type Description <code>ToolMetadata</code> <p>ToolMetadata instance for the requested tool</p> <p>Raises:</p> Type Description <code>ToolNotFoundError</code> <p>If tool is not registered</p> Example <p>metadata = registry.get_tool(\"bash_execute\") assert metadata.risk_level == RiskLevel.DANGEROUS</p>"},{"location":"api/reference/#consoul.ai.tools.registry.ToolRegistry.list_tools","title":"list_tools","text":"<pre><code>list_tools(\n    enabled_only: bool = False,\n    risk_level: RiskLevel | None = None,\n    tags: list[str] | None = None,\n) -&gt; list[ToolMetadata]\n</code></pre> <p>List registered tools with optional filtering.</p> <p>Parameters:</p> Name Type Description Default <code>enabled_only</code> <code>bool</code> <p>Only return enabled tools</p> <code>False</code> <code>risk_level</code> <code>RiskLevel | None</code> <p>Filter by risk level</p> <code>None</code> <code>tags</code> <code>list[str] | None</code> <p>Filter by tags (tool must have ALL specified tags)</p> <code>None</code> <p>Returns:</p> Type Description <code>list[ToolMetadata]</code> <p>List of ToolMetadata instances matching filters</p> Example <p>safe_tools = registry.list_tools(risk_level=RiskLevel.SAFE) enabled_tools = registry.list_tools(enabled_only=True)</p>"},{"location":"api/reference/#consoul.ai.tools.registry.ToolRegistry.bind_to_model","title":"bind_to_model","text":"<pre><code>bind_to_model(\n    model: BaseChatModel,\n    tool_names: list[str] | None = None,\n) -&gt; BaseChatModel\n</code></pre> <p>Bind registered tools to a LangChain chat model.</p> <p>This enables the model to call tools via the tool calling API.</p> <p>Parameters:</p> Name Type Description Default <code>model</code> <code>BaseChatModel</code> <p>LangChain BaseChatModel instance</p> required <code>tool_names</code> <code>list[str] | None</code> <p>Optional list of specific tools to bind (default: all enabled tools)</p> <code>None</code> <p>Returns:</p> Type Description <code>BaseChatModel</code> <p>Model with tools bound (via bind_tools())</p> <p>Raises:</p> Type Description <code>ToolNotFoundError</code> <p>If a requested tool is not registered</p> Example <p>from consoul.ai import get_chat_model chat_model = get_chat_model(\"claude-3-5-sonnet-20241022\") model_with_tools = registry.bind_to_model(chat_model)</p>"},{"location":"api/reference/#consoul.ai.tools.registry.ToolRegistry.bind_to_model--model-can-now-request-tool-executions","title":"Model can now request tool executions","text":""},{"location":"api/reference/#consoul.ai.tools.registry.ToolRegistry.needs_approval","title":"needs_approval","text":"<pre><code>needs_approval(\n    tool_name: str, arguments: dict[str, Any] | None = None\n) -&gt; bool\n</code></pre> <p>Determine if tool execution requires user approval.</p> <p>IMPORTANT: This method checks registry-level approval caching ONLY. It does NOT invoke the approval provider (see SOUL-66). The approval provider must check needs_approval() first, then show approval UI if needed.</p> <p>Workflow: 1. Approval provider calls registry.needs_approval(tool_name, arguments) 2. If True: Show approval modal/prompt, get user decision 3. If user approves: Call registry.mark_approved(tool_name) 4. Execute tool</p> <p>Based on approval_mode/permission_policy configuration: - 'always': Always require approval (PARANOID policy) - 'risk_based': Based on risk level vs threshold (BALANCED/TRUSTING policies) - 'once_per_session': Require approval on first use, then cache approval - 'whitelist': Only require approval for tools not in allowed_tools - 'never': Never require approval (UNRESTRICTED policy - DANGEROUS)</p> <p>Special handling for bash_execute: - Checks command-level whitelist from BashToolConfig.whitelist_patterns - Whitelisted commands bypass approval even in 'always' mode</p> <p>Parameters:</p> Name Type Description Default <code>tool_name</code> <code>str</code> <p>Name of tool to check</p> required <code>arguments</code> <code>dict[str, Any] | None</code> <p>Optional tool arguments (used for command-level whitelist and risk assessment)</p> <code>None</code> <p>Returns:</p> Type Description <code>bool</code> <p>True if approval UI should be shown, False if cached/whitelisted</p> Example <p>config = ToolConfig(approval_mode=\"once_per_session\") registry = ToolRegistry(config) registry.needs_approval(\"bash_execute\")  # True (first time)</p> Warning <p>Never execute tools when needs_approval() returns True without going through the approval provider first. The registry-level caching is an optimization, not a replacement for user approval.</p>"},{"location":"api/reference/#consoul.ai.tools.registry.ToolRegistry.needs_approval--approval-provider-shows-modal-user-approves","title":"... approval provider shows modal, user approves ...","text":"<p>registry.mark_approved(\"bash_execute\") registry.needs_approval(\"bash_execute\")  # False (cached, skip modal)</p>"},{"location":"api/reference/#consoul.ai.tools.registry.ToolRegistry.needs_approval--command-level-whitelist","title":"Command-level whitelist","text":"<p>config = ToolConfig(bash=BashToolConfig(whitelist_patterns=[\"git status\"])) registry.needs_approval(\"bash_execute\", {\"command\": \"git status\"})  # False (whitelisted)</p>"},{"location":"api/reference/#consoul.ai.tools.registry.ToolRegistry.needs_approval--risk-based-approval-balanced-policy","title":"Risk-based approval (BALANCED policy)","text":"<p>from consoul.ai.tools.permissions import PermissionPolicy config = ToolConfig(permission_policy=PermissionPolicy.BALANCED) registry = ToolRegistry(config)</p>"},{"location":"api/reference/#consoul.ai.tools.registry.ToolRegistry.needs_approval--safe-commands-auto-approved-caution-require-approval","title":"SAFE commands auto-approved, CAUTION+ require approval","text":""},{"location":"api/reference/#consoul.ai.tools.registry.ToolRegistry.mark_approved","title":"mark_approved","text":"<pre><code>mark_approved(tool_name: str) -&gt; None\n</code></pre> <p>Mark a tool as approved for this session.</p> <p>IMPORTANT: This method should ONLY be called by the approval provider AFTER the user has explicitly approved the tool execution. Never call this method directly without user approval.</p> <p>Used with 'once_per_session' approval mode to cache approval decisions so the user doesn't need to approve the same tool multiple times in one session.</p> <p>Parameters:</p> Name Type Description Default <code>tool_name</code> <code>str</code> <p>Name of tool to mark as approved</p> required Warning <p>Calling this method bypasses the approval UI for future executions of this tool in the current session. Only call after explicit user approval through the approval provider (SOUL-66).</p> Example"},{"location":"api/reference/#consoul.ai.tools.registry.ToolRegistry.mark_approved--in-approval-provider-implementation","title":"In approval provider implementation:","text":"<p>if registry.needs_approval(\"bash\"): ...     user_approved = show_approval_modal(\"bash\", args) ...     if user_approved: ...         registry.mark_approved(\"bash\")  # Cache approval ...         # Now execute tool</p>"},{"location":"api/reference/#tool-metadata","title":"Tool Metadata","text":"<p>Tool configuration and metadata structures.</p>"},{"location":"api/reference/#consoul.ai.tools.base.ToolMetadata","title":"consoul.ai.tools.base.ToolMetadata  <code>dataclass</code>","text":"<pre><code>ToolMetadata(\n    name: str,\n    description: str,\n    risk_level: RiskLevel,\n    tool: BaseTool,\n    schema: dict[str, Any],\n    enabled: bool = True,\n    tags: list[str] | None = None,\n    categories: list[ToolCategory] | None = None,\n)\n</code></pre> <p>Metadata for a registered tool.</p> <p>Stores information about a tool's configuration, schema, risk level, and the underlying LangChain tool instance.</p> <p>Attributes:</p> Name Type Description <code>name</code> <code>str</code> <p>Tool name (used for lookups and binding to models)</p> <code>description</code> <code>str</code> <p>Human-readable description of what the tool does</p> <code>risk_level</code> <code>RiskLevel</code> <p>Security risk classification</p> <code>tool</code> <code>BaseTool</code> <p>The LangChain BaseTool instance</p> <code>schema</code> <code>dict[str, Any]</code> <p>JSON schema for tool arguments (auto-generated from tool)</p> <code>enabled</code> <code>bool</code> <p>Whether this tool is currently enabled</p> <code>tags</code> <code>list[str] | None</code> <p>Optional tags for categorization (e.g., [\"filesystem\", \"readonly\"])</p> <code>categories</code> <code>list[ToolCategory] | None</code> <p>Optional functional categories for grouping tools</p>"},{"location":"api/reference/#consoul.ai.tools.base.ToolMetadata.__post_init__","title":"__post_init__","text":"<pre><code>__post_init__() -&gt; None\n</code></pre> <p>Validate metadata after initialization.</p>"},{"location":"api/reference/#consoul.ai.tools.base.RiskLevel","title":"consoul.ai.tools.base.RiskLevel","text":"<p>               Bases: <code>str</code>, <code>Enum</code></p> <p>Risk assessment level for tool execution.</p> <p>Used to classify tools based on their potential impact and inform user approval workflows with appropriate warnings.</p> <p>Attributes:</p> Name Type Description <code>SAFE</code> <p>Low-risk operations (ls, pwd, echo, cat read-only files)</p> <code>CAUTION</code> <p>Medium-risk operations (mkdir, cp, mv, git commit)</p> <code>DANGEROUS</code> <p>High-risk operations (rm -rf, dd, kill -9, chmod 777)</p> <code>BLOCKED</code> <p>Explicitly prohibited operations (sudo, rm -rf /, fork bombs)</p>"},{"location":"api/reference/#consoul.ai.tools.base.RiskLevel.__str__","title":"__str__","text":"<pre><code>__str__() -&gt; str\n</code></pre> <p>Return string representation of risk level.</p>"},{"location":"api/reference/#consoul.ai.tools.base.ToolCategory","title":"consoul.ai.tools.base.ToolCategory","text":"<p>               Bases: <code>str</code>, <code>Enum</code></p> <p>Functional categories for tool classification.</p> <p>Used to group tools by their primary purpose, enabling category-based tool filtering in the SDK.</p> <p>Attributes:</p> Name Type Description <code>SEARCH</code> <p>Search and lookup tools (grep, code_search, find_references)</p> <code>FILE_EDIT</code> <p>File manipulation tools (create, edit, delete, append)</p> <code>WEB</code> <p>Web-based tools (read_url, web_search)</p> <code>EXECUTE</code> <p>Command execution tools (bash_execute)</p>"},{"location":"api/reference/#consoul.ai.tools.base.ToolCategory.__str__","title":"__str__","text":"<pre><code>__str__() -&gt; str\n</code></pre> <p>Return string representation of category.</p>"},{"location":"api/reference/#configuration","title":"Configuration","text":"<p>Configuration models for profiles and tools.</p>"},{"location":"api/reference/#consoul.config.models.ConsoulConfig","title":"consoul.config.models.ConsoulConfig","text":"<p>               Bases: <code>BaseModel</code></p> <p>Root configuration for Consoul application.</p> <p>This is the main configuration model that contains all settings. Profiles define HOW to use AI (prompts, settings). Provider/model define WHICH AI to use (tracked separately).</p>"},{"location":"api/reference/#consoul.config.models.ConsoulConfig.get_active_profile","title":"get_active_profile","text":"<pre><code>get_active_profile() -&gt; ProfileConfig\n</code></pre> <p>Get the currently active profile configuration.</p> <p>Returns:</p> Type Description <code>ProfileConfig</code> <p>The active ProfileConfig instance.</p> <p>Raises:</p> Type Description <code>KeyError</code> <p>If the active profile doesn't exist.</p>"},{"location":"api/reference/#consoul.config.models.ConsoulConfig.get_api_key","title":"get_api_key","text":"<pre><code>get_api_key(provider: Provider) -&gt; SecretStr | None\n</code></pre> <p>Get API key for a provider with lazy loading from environment.</p> <p>Parameters:</p> Name Type Description Default <code>provider</code> <code>Provider</code> <p>The provider to get the API key for.</p> required <p>Returns:</p> Type Description <code>SecretStr | None</code> <p>SecretStr containing the API key, or None if not found.</p>"},{"location":"api/reference/#consoul.config.models.ConsoulConfig.get_current_model_config","title":"get_current_model_config","text":"<pre><code>get_current_model_config() -&gt; ModelConfig\n</code></pre> <p>Build ModelConfig from current_provider and current_model.</p> <p>Returns:</p> Type Description <code>ModelConfig</code> <p>Appropriate ModelConfig subclass based on current provider.</p>"},{"location":"api/reference/#consoul.config.models.ConsoulConfig.serialize_model","title":"serialize_model","text":"<pre><code>serialize_model(serializer: Any) -&gt; dict[str, Any]\n</code></pre> <p>Custom serializer to exclude API keys from all serialization modes.</p> <p>This ensures API keys are never leaked via model_dump(), YAML export, or any other serialization path.</p>"},{"location":"api/reference/#consoul.config.models.ConsoulConfig.validate_active_profile","title":"validate_active_profile  <code>classmethod</code>","text":"<pre><code>validate_active_profile(v: str) -&gt; str\n</code></pre> <p>Validate active profile name is not empty.</p>"},{"location":"api/reference/#consoul.config.models.ConsoulConfig.validate_active_profile_exists","title":"validate_active_profile_exists","text":"<pre><code>validate_active_profile_exists() -&gt; ConsoulConfig\n</code></pre> <p>Validate that the active profile exists in profiles.</p>"},{"location":"api/reference/#consoul.config.models.ProfileConfig","title":"consoul.config.models.ProfileConfig","text":"<p>               Bases: <code>BaseModel</code></p> <p>Configuration profile with conversation and context settings.</p> <p>Profiles define HOW to use AI (system prompts, context, conversation settings), not WHICH AI to use (model/provider are configured separately).</p>"},{"location":"api/reference/#consoul.config.models.ProfileConfig.validate_profile_name","title":"validate_profile_name  <code>classmethod</code>","text":"<pre><code>validate_profile_name(v: str) -&gt; str\n</code></pre> <p>Validate profile name.</p>"},{"location":"api/reference/#consoul.config.models.ToolConfig","title":"consoul.config.models.ToolConfig","text":"<p>               Bases: <code>BaseModel</code></p> <p>Configuration for tool calling system.</p> <p>Controls tool execution behavior, security policies, and approval workflows. This configuration is SDK-level (not TUI-specific) to support headless usage.</p> <p>Supports both predefined permission policies and manual configuration: - Use permission_policy for preset security postures (PARANOID/BALANCED/TRUSTING/UNRESTRICTED) - Use manual settings (approval_mode, auto_approve) for custom configurations - Policy takes precedence over manual settings when both are specified</p> <p>Example (with policy):     &gt;&gt;&gt; from consoul.ai.tools.permissions import PermissionPolicy     &gt;&gt;&gt; config = ToolConfig(     ...     enabled=True,     ...     permission_policy=PermissionPolicy.BALANCED     ... )</p> <p>Example (manual):     &gt;&gt;&gt; config = ToolConfig(     ...     enabled=True,     ...     approval_mode=\"always\",     ...     allowed_tools=[\"bash\"]     ... )</p>"},{"location":"api/reference/#consoul.config.models.ToolConfig.validate_auto_approve","title":"validate_auto_approve  <code>classmethod</code>","text":"<pre><code>validate_auto_approve(v: bool) -&gt; bool\n</code></pre> <p>Validate auto_approve is not enabled (security check).</p> <p>Raises a warning in logs if auto_approve is True, but allows it for testing purposes. Production code should never set this to True.</p>"},{"location":"api/reference/#consoul.config.models.ToolConfig.validate_permission_policy","title":"validate_permission_policy","text":"<pre><code>validate_permission_policy() -&gt; ToolConfig\n</code></pre> <p>Validate permission policy and warn about dangerous configurations.</p> <p>Checks for UNRESTRICTED policy and warns about security implications. Also validates that policy settings are consistent. Sets default policy to BALANCED if not specified.</p>"},{"location":"api/reference/#conversation-management","title":"Conversation Management","text":""},{"location":"api/reference/#consoul.ai.history.ConversationHistory","title":"consoul.ai.history.ConversationHistory","text":"<pre><code>ConversationHistory(\n    model_name: str,\n    max_tokens: int | None = None,\n    model: BaseChatModel | None = None,\n    persist: bool = True,\n    session_id: str | None = None,\n    db_path: Path | str | None = None,\n    summarize: bool = False,\n    summarize_threshold: int = 20,\n    keep_recent: int = 10,\n    summary_model: BaseChatModel | None = None,\n)\n</code></pre> <p>Manages conversation history with intelligent token-based trimming.</p> <p>Stores messages as LangChain BaseMessage objects and provides utilities for token counting, message trimming, and format conversion. Ensures conversations stay within model context windows while preserving important context.</p> <p>Attributes:</p> Name Type Description <code>model_name</code> <p>Model identifier for token counting</p> <code>max_tokens</code> <p>Maximum tokens allowed in conversation</p> <code>messages</code> <code>list[BaseMessage]</code> <p>List of LangChain BaseMessage objects</p> Example <p>history = ConversationHistory(\"gpt-4o\", max_tokens=4000) history.add_system_message(\"You are helpful.\") history.add_user_message(\"Hi!\") history.add_assistant_message(\"Hello!\") len(history) 3 history.count_tokens() 24</p> <p>Initialize conversation history.</p> <p>Parameters:</p> Name Type Description Default <code>model_name</code> <code>str</code> <p>Model identifier (e.g., \"gpt-4o\", \"claude-3-5-sonnet\")</p> required <code>max_tokens</code> <code>int | None</code> <p>Context limit override. Special values:        - None: Auto-size to 75% of model's context window        - 0: Auto-size to 75% of model's context window        - &gt; 0: Use explicit limit (capped at model maximum)</p> <code>None</code> <code>model</code> <code>BaseChatModel | None</code> <p>Optional LangChain model instance for provider-specific token counting</p> <code>None</code> <code>persist</code> <code>bool</code> <p>Enable SQLite persistence (default: True)</p> <code>True</code> <code>session_id</code> <code>str | None</code> <p>Optional session ID to resume existing conversation</p> <code>None</code> <code>db_path</code> <code>Path | str | None</code> <p>Optional custom database path (default: ~/.consoul/history.db)</p> <code>None</code> <code>summarize</code> <code>bool</code> <p>Enable conversation summarization for long conversations (default: False)</p> <code>False</code> <code>summarize_threshold</code> <code>int</code> <p>Trigger summarization after N messages (default: 20)</p> <code>20</code> <code>keep_recent</code> <code>int</code> <p>Keep last N messages verbatim when summarizing (default: 10)</p> <code>10</code> <code>summary_model</code> <code>BaseChatModel | None</code> <p>Optional cheaper model for generating summaries (default: use main model)</p> <code>None</code> Example"},{"location":"api/reference/#consoul.ai.history.ConversationHistory--in-memory-with-auto-sizing-75-of-model-capacity","title":"In-memory with auto-sizing (75% of model capacity)","text":"<p>history = ConversationHistory(\"gpt-4o\")</p>"},{"location":"api/reference/#consoul.ai.history.ConversationHistory--with-explicit-context-limit","title":"With explicit context limit","text":"<p>history = ConversationHistory(\"gpt-4o\", max_tokens=50000)</p>"},{"location":"api/reference/#consoul.ai.history.ConversationHistory--with-persistence-new-session","title":"With persistence - new session","text":"<p>history = ConversationHistory(\"gpt-4o\", persist=True) session = history.session_id</p>"},{"location":"api/reference/#consoul.ai.history.ConversationHistory--with-persistence-resume-session","title":"With persistence - resume session","text":"<p>history = ConversationHistory(\"gpt-4o\", persist=True, session_id=session)</p>"},{"location":"api/reference/#consoul.ai.history.ConversationHistory--with-summarization-for-cost-savings","title":"With summarization for cost savings","text":"<p>history = ConversationHistory( ...     \"gpt-4o\", ...     model=chat_model, ...     summarize=True, ...     summarize_threshold=20 ... )</p>"},{"location":"api/reference/#consoul.ai.history.ConversationHistory.add_user_message","title":"add_user_message","text":"<pre><code>add_user_message(content: str) -&gt; None\n</code></pre> <p>Add user message to conversation history.</p> <p>Parameters:</p> Name Type Description Default <code>content</code> <code>str</code> <p>User message content</p> required Example <p>history = ConversationHistory(\"gpt-4o\") history.add_user_message(\"Hello!\") len(history) 1</p>"},{"location":"api/reference/#consoul.ai.history.ConversationHistory.add_assistant_message","title":"add_assistant_message","text":"<pre><code>add_assistant_message(content: str) -&gt; None\n</code></pre> <p>Add assistant message to conversation history.</p> <p>Parameters:</p> Name Type Description Default <code>content</code> <code>str</code> <p>Assistant message content</p> required Example <p>history = ConversationHistory(\"gpt-4o\") history.add_assistant_message(\"Hi there!\") len(history) 1</p>"},{"location":"api/reference/#consoul.ai.history.ConversationHistory.add_system_message","title":"add_system_message","text":"<pre><code>add_system_message(content: str) -&gt; None\n</code></pre> <p>Add or replace system message.</p> <p>System messages are always stored at position 0. If a system message already exists, it is replaced. Only one system message is supported.</p> <p>Parameters:</p> Name Type Description Default <code>content</code> <code>str</code> <p>System message content</p> required Example <p>history = ConversationHistory(\"gpt-4o\") history.add_system_message(\"You are helpful.\") history.add_system_message(\"You are very helpful.\")  # Replaces first len(history) 1</p>"},{"location":"api/reference/#consoul.ai.history.ConversationHistory.clear","title":"clear","text":"<pre><code>clear(preserve_system: bool = True) -&gt; None\n</code></pre> <p>Clear conversation history.</p> <p>Parameters:</p> Name Type Description Default <code>preserve_system</code> <code>bool</code> <p>If True, keep the system message (default)</p> <code>True</code> Example <p>history = ConversationHistory(\"gpt-4o\") history.add_system_message(\"You are helpful.\") history.add_user_message(\"Hi!\") history.clear(preserve_system=True) len(history) 1  # System message preserved</p>"},{"location":"api/reference/#consoul.ai.history.ConversationHistory.get_trimmed_messages","title":"get_trimmed_messages","text":"<pre><code>get_trimmed_messages(\n    reserve_tokens: int = 1000, strategy: str = \"last\"\n) -&gt; list[BaseMessage]\n</code></pre> <p>Get messages trimmed to fit model's context window.</p> <p>Uses LangChain's trim_messages to intelligently trim the conversation while preserving the system message and ensuring valid message sequences.</p> <p>If summarization is enabled and the conversation exceeds the threshold, older messages are summarized and recent messages are kept verbatim, providing significant token savings while preserving context.</p> <p>Parameters:</p> Name Type Description Default <code>reserve_tokens</code> <code>int</code> <p>Tokens to reserve for response (default 1000)</p> <code>1000</code> <code>strategy</code> <code>str</code> <p>Trimming strategy - \"last\" keeps recent messages (default)</p> <code>'last'</code> <p>Returns:</p> Name Type Description <code>list[BaseMessage]</code> <p>Trimmed list of messages that fit within token limit.</p> <code>list[BaseMessage]</code> <p>With summarization: [system_msg, summary_msg, recent_messages]</p> <code>Without</code> <code>list[BaseMessage]</code> <p>standard LangChain trim_messages result</p> <p>Raises:</p> Type Description <code>TokenLimitExceededError</code> <p>If reserve_tokens &gt;= max_tokens, preventing                     any messages from being sent.</p> Example <p>history = ConversationHistory(\"gpt-4o\") history.add_system_message(\"You are helpful.\")</p>"},{"location":"api/reference/#consoul.ai.history.ConversationHistory.get_trimmed_messages--add-many-messages","title":"... add many messages ...","text":"<p>trimmed = history.get_trimmed_messages(reserve_tokens=1000)</p>"},{"location":"api/reference/#consoul.ai.history.ConversationHistory.get_trimmed_messages--system-message-is-always-preserved","title":"System message is always preserved","text":""},{"location":"api/reference/#consoul.ai.history.ConversationHistory.get_trimmed_messages--with-summarization-enabled","title":"With summarization enabled","text":"<p>history = ConversationHistory( ...     \"gpt-4o\", ...     model=chat_model, ...     summarize=True ... )</p>"},{"location":"api/reference/#consoul.ai.history.ConversationHistory.get_trimmed_messages--add-30-messages","title":"... add 30 messages ...","text":"<p>trimmed = history.get_trimmed_messages()</p>"},{"location":"api/reference/#consoul.ai.history.ConversationHistory.get_trimmed_messages--returns-system-summary-last_10_messages-instead-of-30","title":"Returns: [system, summary, last_10_messages] instead of 30","text":""},{"location":"api/reference/#consoul.ai.history.ConversationHistory.count_tokens","title":"count_tokens","text":"<pre><code>count_tokens() -&gt; int\n</code></pre> <p>Count total tokens in current conversation history.</p> <p>Returns:</p> Type Description <code>int</code> <p>Total number of tokens in all messages</p> Example <p>history = ConversationHistory(\"gpt-4o\") history.add_user_message(\"Hello!\") tokens = history.count_tokens() tokens &gt; 0 True</p>"},{"location":"api/reference/#tool-catalog","title":"Tool Catalog","text":"<p>Tool discovery and resolution utilities.</p>"},{"location":"api/reference/#consoul.ai.tools.catalog.get_tool_by_name","title":"consoul.ai.tools.catalog.get_tool_by_name","text":"<pre><code>get_tool_by_name(\n    name: str,\n) -&gt; tuple[BaseTool, RiskLevel, list[ToolCategory]] | None\n</code></pre> <p>Get tool, risk level, and categories by friendly name.</p> <p>Parameters:</p> Name Type Description Default <code>name</code> <code>str</code> <p>Tool name (e.g., \"bash\", \"grep\")</p> required <p>Returns:</p> Type Description <code>tuple[BaseTool, RiskLevel, list[ToolCategory]] | None</code> <p>Tuple of (tool, risk_level, categories) if found, None otherwise</p> Example <p>result = get_tool_by_name(\"bash\") if result: ...     tool, risk, categories = result ...     assert risk == RiskLevel.CAUTION</p>"},{"location":"api/reference/#consoul.ai.tools.catalog.get_tools_by_risk_level","title":"consoul.ai.tools.catalog.get_tools_by_risk_level","text":"<pre><code>get_tools_by_risk_level(\n    risk: str | RiskLevel,\n) -&gt; list[tuple[BaseTool, RiskLevel, list[ToolCategory]]]\n</code></pre> <p>Get all tools matching or below the specified risk level.</p> <p>Parameters:</p> Name Type Description Default <code>risk</code> <code>str | RiskLevel</code> <p>Risk level filter (\"safe\", \"caution\", \"dangerous\")</p> required <p>Returns:</p> Type Description <code>list[tuple[BaseTool, RiskLevel, list[ToolCategory]]]</code> <p>List of (tool, risk_level, categories) tuples</p> Example <p>tools = get_tools_by_risk_level(\"safe\") assert all(risk == RiskLevel.SAFE for _, risk, _ in tools)</p>"},{"location":"api/reference/#consoul.ai.tools.catalog.get_tools_by_category","title":"consoul.ai.tools.catalog.get_tools_by_category","text":"<pre><code>get_tools_by_category(\n    category: str | ToolCategory,\n) -&gt; list[tuple[BaseTool, RiskLevel, list[ToolCategory]]]\n</code></pre> <p>Get all tools in a specific category.</p> <p>Parameters:</p> Name Type Description Default <code>category</code> <code>str | ToolCategory</code> <p>Category filter (e.g., \"search\", \"file-edit\", \"web\")</p> required <p>Returns:</p> Type Description <code>list[tuple[BaseTool, RiskLevel, list[ToolCategory]]]</code> <p>List of (tool, risk_level, categories) tuples</p> Example <p>tools = get_tools_by_category(\"search\") assert len(tools) &gt; 0 for tool, _, cats in tools: ...     assert ToolCategory.SEARCH in cats</p>"},{"location":"api/reference/#consoul.ai.tools.catalog.get_all_tool_names","title":"consoul.ai.tools.catalog.get_all_tool_names","text":"<pre><code>get_all_tool_names() -&gt; list[str]\n</code></pre> <p>Get list of all available tool names.</p> <p>Returns:</p> Type Description <code>list[str]</code> <p>Sorted list of tool names</p> Example <p>names = get_all_tool_names() assert \"bash\" in names assert \"grep\" in names</p>"},{"location":"api/reference/#consoul.ai.tools.catalog.get_all_category_names","title":"consoul.ai.tools.catalog.get_all_category_names","text":"<pre><code>get_all_category_names() -&gt; list[str]\n</code></pre> <p>Get list of all available category names.</p> <p>Returns:</p> Type Description <code>list[str]</code> <p>Sorted list of category names</p> Example <p>names = get_all_category_names() assert \"search\" in names assert \"file-edit\" in names</p>"},{"location":"api/reference/#tool-discovery","title":"Tool Discovery","text":""},{"location":"api/reference/#consoul.ai.tools.discovery.discover_tools_from_directory","title":"consoul.ai.tools.discovery.discover_tools_from_directory","text":"<pre><code>discover_tools_from_directory(\n    directory: Path | str, recursive: bool = True\n) -&gt; list[tuple[BaseTool, RiskLevel]]\n</code></pre> <p>Discover tools from a directory.</p> <p>Scans Python files in the specified directory for: - Functions decorated with @tool - Instantiated BaseTool objects</p> <p>IMPORTANT: This function only discovers tool INSTANCES, not class definitions. If you define a BaseTool subclass, you must instantiate it in the module:</p> <pre><code># This will be discovered:\nmy_tool = MyToolClass()\n\n# This will NOT be discovered:\nclass MyToolClass(BaseTool):\n    ...\n</code></pre> <p>Parameters:</p> Name Type Description Default <code>directory</code> <code>Path | str</code> <p>Directory to scan for tools</p> required <code>recursive</code> <code>bool</code> <p>Whether to recursively scan subdirectories (default: True)</p> <code>True</code> <p>Returns:</p> Type Description <code>list[tuple[BaseTool, RiskLevel]]</code> <p>List of (tool, risk_level) tuples for discovered tools.</p> <code>list[tuple[BaseTool, RiskLevel]]</code> <p>All discovered tools default to RiskLevel.CAUTION for safety.</p> Example <pre><code>from pathlib import Path\nfrom consoul.ai.tools.discovery import discover_tools_from_directory\n\n# Discover tools from .consoul/tools/\ntools = discover_tools_from_directory(Path(\".consoul/tools\"))\n\n# Non-recursive scan\ntools = discover_tools_from_directory(Path(\".consoul/tools\"), recursive=False)\n</code></pre> Notes <ul> <li>Syntax errors in tool files are logged as warnings and skipped</li> <li>Import errors are logged as warnings and skipped</li> <li>Non-tool objects and class definitions are silently ignored</li> <li>Discovered tools are assigned RiskLevel.CAUTION by default</li> </ul>"},{"location":"api/reference/#next-steps","title":"Next Steps","text":"<ul> <li>Tutorial - Learn SDK fundamentals</li> <li>Tools - Master all 13 built-in tools</li> <li>Building Agents - Create specialized AI agents</li> </ul>"},{"location":"api/tools/","title":"Tools","text":""},{"location":"api/tools/#tools-deep-dive","title":"Tools Deep Dive","text":"<p>Master Consoul's 13 built-in tools for file operations, code search, web research, and command execution.</p>"},{"location":"api/tools/#what-are-tools","title":"What are Tools?","text":"<p>Tools are functions that the AI can call to interact with your system. When you enable tools, the AI can:</p> <ul> <li>Search files with grep and code patterns</li> <li>Create, edit, and delete files</li> <li>Execute shell commands</li> <li>Search the web and fetch URLs</li> <li>Read Wikipedia articles</li> </ul> <p>Tools transform a chat-only AI into an agent capable of autonomous action.</p>"},{"location":"api/tools/#how-tools-work","title":"How Tools Work","text":"<p>Under the hood, Consoul uses LangChain's tool calling system:</p> <ol> <li>AI requests a tool call with arguments</li> <li>Consoul executes the tool</li> <li>Tool result is returned to the AI</li> <li>AI incorporates result into its response</li> </ol> <p>Example flow:</p> <pre><code>You: \"Find all TODO comments in Python files\"\nAI: [Calls grep_search tool with pattern=\"TODO\" and glob=\"*.py\"]\nTool: Returns list of TODOs with file paths\nAI: \"I found 7 TODO comments: src/main.py:42, ...\"\n</code></pre>"},{"location":"api/tools/#tool-categories","title":"Tool Categories","text":"<p>Tools are organized into 4 categories:</p> Category Purpose Tool Count SEARCH Find and read information 4 tools FILE_EDIT Modify files 5 tools WEB Access web content 3 tools EXECUTE Run shell commands 1 tool <p>Enable by category:</p> <pre><code>from consoul import Consoul\n\n# Only search tools\nconsole = Consoul(tools=\"search\")\n\n# Only web tools\nconsole = Consoul(tools=\"web\")\n\n# Multiple categories\nconsole = Consoul(tools=[\"search\", \"web\"])\n</code></pre>"},{"location":"api/tools/#risk-levels","title":"Risk Levels","text":"<p>Every tool is classified by risk:</p>"},{"location":"api/tools/#safe-read-only","title":"SAFE (Read-Only)","text":"<p>No system modifications. Perfect for untrusted AI interactions.</p> <p>Tools: <code>grep</code>, <code>code_search</code>, <code>find_references</code>, <code>read</code>, <code>web_search</code>, <code>read_url</code>, <code>wikipedia</code></p> <pre><code>console = Consoul(tools=\"safe\")  # Only SAFE tools\n</code></pre>"},{"location":"api/tools/#caution-file-operations","title":"CAUTION (File Operations)","text":"<p>Creates/modifies files or executes safe commands. Requires oversight.</p> <p>Tools: <code>create_file</code>, <code>edit_lines</code>, <code>edit_replace</code>, <code>append_file</code>, <code>bash</code> (safe commands)</p> <pre><code>console = Consoul(tools=\"caution\")  # SAFE + CAUTION tools\n</code></pre>"},{"location":"api/tools/#dangerous-destructive","title":"DANGEROUS (Destructive)","text":"<p>Can delete files or run destructive commands. Use with extreme care.</p> <p>Tools: <code>delete_file</code>, <code>bash</code> (destructive commands like rm, kill)</p> <pre><code>console = Consoul(tools=\"dangerous\")  # All tools\n</code></pre>"},{"location":"api/tools/#tool-catalog","title":"Tool Catalog","text":""},{"location":"api/tools/#search-tools","title":"Search Tools","text":""},{"location":"api/tools/#grep-search-file-contents","title":"<code>grep</code> - Search File Contents","text":"<p>Search file contents using regex patterns.</p> <p>Use cases: - Find TODO comments - Search for error messages - Find specific code patterns</p> <pre><code>from consoul import Consoul\n\nconsole = Consoul(tools=[\"grep\"])\nconsole.chat(\"Find all TODO comments in Python files\")\nconsole.chat(\"Search for 'database' in config files\")\nconsole.chat(\"Find error handling code\")\n</code></pre> <p>Tool parameters: - <code>pattern</code> (str): Regex pattern to search - <code>path</code> (str): Directory or file to search (default: current dir) - <code>glob</code> (str): File pattern filter (e.g., \"*.py\")</p> <p>Risk: SAFE (read-only)</p>"},{"location":"api/tools/#code_search-find-code-patterns","title":"<code>code_search</code> - Find Code Patterns","text":"<p>Find classes, functions, and methods in code.</p> <p>Use cases: - Find class definitions - Locate function implementations - Discover method usages</p> <pre><code>from consoul import Consoul\n\nconsole = Consoul(tools=[\"code_search\"])\nconsole.chat(\"Find the User class definition\")\nconsole.chat(\"Where is the calculate_total function?\")\nconsole.chat(\"Show me all API route handlers\")\n</code></pre> <p>Tool parameters: - <code>pattern</code> (str): Code element to find (class/function name) - <code>path</code> (str): Directory to search (default: current dir) - <code>type_filter</code> (str): Filter by file type (e.g., \"python\", \"javascript\")</p> <p>Risk: SAFE (read-only)</p>"},{"location":"api/tools/#find_references-find-symbol-references","title":"<code>find_references</code> - Find Symbol References","text":"<p>Find all usages of a symbol (function, class, variable).</p> <p>Use cases: - Impact analysis before refactoring - Find all callers of a function - Track variable usage</p> <pre><code>from consoul import Consoul\n\nconsole = Consoul(tools=[\"find_references\"])\nconsole.chat(\"Where is the authenticate() function called?\")\nconsole.chat(\"Find all references to the API_KEY variable\")\nconsole.chat(\"Show me all usages of the User class\")\n</code></pre> <p>Tool parameters: - <code>symbol</code> (str): Symbol name to find references for - <code>path</code> (str): Directory to search (default: current dir)</p> <p>Risk: SAFE (read-only)</p>"},{"location":"api/tools/#read-read-file-contents","title":"<code>read</code> - Read File Contents","text":"<p>Read the full contents of a file.</p> <p>Use cases: - Examine configuration files - Read source code - Check file contents before editing</p> <pre><code>from consoul import Consoul\n\nconsole = Consoul(tools=[\"read\"])\nconsole.chat(\"Show me the contents of config.yaml\")\nconsole.chat(\"Read the README.md file\")\nconsole.chat(\"What's in src/main.py?\")\n</code></pre> <p>Tool parameters: - <code>file_path</code> (str): Path to file to read - <code>start_line</code> (int, optional): Start reading from line number - <code>end_line</code> (int, optional): Stop reading at line number</p> <p>Risk: SAFE (read-only)</p>"},{"location":"api/tools/#file-edit-tools","title":"File Edit Tools","text":"<p>File Operations</p> <p>File-edit tools modify your filesystem. Always:</p> <ul> <li>Work in a git repository with committed changes</li> <li>Review changes before committing</li> <li>Test in a safe directory first</li> <li>Use <code>tools=\"safe\"</code> when you don't need file modifications</li> </ul>"},{"location":"api/tools/#create_file-create-new-files","title":"<code>create_file</code> - Create New Files","text":"<p>Create a new file with specified content.</p> <p>Use cases: - Generate boilerplate code - Create configuration files - Scaffold project structure</p> <pre><code>from consoul import Consoul\n\nconsole = Consoul(tools=[\"create_file\"])\nconsole.chat(\"Create a basic FastAPI main.py file\")\nconsole.chat(\"Generate a .gitignore for Python projects\")\nconsole.chat(\"Create a README.md with project overview\")\n</code></pre> <p>Tool parameters: - <code>file_path</code> (str): Path for new file - <code>content</code> (str): File contents - <code>overwrite</code> (bool): Overwrite if exists (default: False) - <code>dry_run</code> (bool): Preview without creating (default: False)</p> <p>Risk: CAUTION (creates files)</p>"},{"location":"api/tools/#edit_lines-edit-specific-lines","title":"<code>edit_lines</code> - Edit Specific Lines","text":"<p>Replace specific line ranges in a file.</p> <p>Use cases: - Fix bugs in specific functions - Update configuration values - Modify specific code sections</p> <pre><code>from consoul import Consoul\n\nconsole = Consoul(tools=[\"edit_lines\", \"read\"])\nconsole.chat(\"Change the API port from 8000 to 8080 in config.py\")\nconsole.chat(\"Fix the typo on line 42 of README.md\")\nconsole.chat(\"Update the version number in setup.py\")\n</code></pre> <p>Tool parameters: - <code>file_path</code> (str): File to edit - <code>start_line</code> (int): First line to replace - <code>end_line</code> (int): Last line to replace - <code>new_content</code> (str): Replacement content - <code>dry_run</code> (bool): Preview without editing</p> <p>Risk: CAUTION (modifies files)</p>"},{"location":"api/tools/#edit_replace-search-and-replace","title":"<code>edit_replace</code> - Search and Replace","text":"<p>Find and replace text in files.</p> <p>Use cases: - Rename variables across files - Update API endpoints - Fix repeated typos</p> <pre><code>from consoul import Consoul\n\nconsole = Consoul(tools=[\"edit_replace\"])\nconsole.chat(\"Rename 'old_function' to 'new_function' in all Python files\")\nconsole.chat(\"Replace 'http://api.old.com' with 'https://api.new.com'\")\nconsole.chat(\"Fix the misspelling of 'recieve' to 'receive'\")\n</code></pre> <p>Tool parameters: - <code>file_path</code> (str): File to edit - <code>old_text</code> (str): Text to find - <code>new_text</code> (str): Replacement text - <code>regex</code> (bool): Use regex patterns (default: False) - <code>dry_run</code> (bool): Preview without editing</p> <p>Risk: CAUTION (modifies files)</p>"},{"location":"api/tools/#append_file-append-to-files","title":"<code>append_file</code> - Append to Files","text":"<p>Add content to the end of a file.</p> <p>Use cases: - Add new functions to modules - Append log entries - Extend configuration files</p> <pre><code>from consoul import Consoul\n\nconsole = Consoul(tools=[\"append_file\"])\nconsole.chat(\"Add a new test function to tests/test_api.py\")\nconsole.chat(\"Append a new route handler to routes.py\")\nconsole.chat(\"Add .DS_Store to .gitignore\")\n</code></pre> <p>Tool parameters: - <code>file_path</code> (str): File to append to - <code>content</code> (str): Content to add - <code>dry_run</code> (bool): Preview without appending</p> <p>Risk: CAUTION (modifies files)</p>"},{"location":"api/tools/#delete_file-delete-files","title":"<code>delete_file</code> - Delete Files","text":"<p>Permanently delete a file.</p> <p>Use cases: - Remove obsolete files - Clean up generated files - Delete temporary files</p> <pre><code>from consoul import Consoul\n\nconsole = Consoul(tools=[\"delete_file\"])\nconsole.chat(\"Delete all .pyc files in the project\")\nconsole.chat(\"Remove obsolete_module.py\")\nconsole.chat(\"Delete temporary files in /tmp\")\n</code></pre> <p>Tool parameters: - <code>file_path</code> (str): File to delete - <code>confirm</code> (bool): Require confirmation (default: True)</p> <p>Risk: DANGEROUS (irreversible deletion)</p>"},{"location":"api/tools/#web-tools","title":"Web Tools","text":""},{"location":"api/tools/#web_search-search-the-web","title":"<code>web_search</code> - Search the Web","text":"<p>Search the web using a search engine.</p> <p>Use cases: - Find documentation - Research libraries and frameworks - Look up error messages</p> <pre><code>from consoul import Consoul\n\nconsole = Consoul(tools=[\"web_search\"])\nconsole.chat(\"Find the latest FastAPI documentation\")\nconsole.chat(\"Search for Python async best practices 2024\")\nconsole.chat(\"Look up 'ModuleNotFoundError: No module named requests'\")\n</code></pre> <p>Tool parameters: - <code>query</code> (str): Search query - <code>num_results</code> (int): Number of results to return (default: 5)</p> <p>Risk: SAFE (read-only web access)</p>"},{"location":"api/tools/#read_url-fetch-web-pages","title":"<code>read_url</code> - Fetch Web Pages","text":"<p>Fetch and parse content from a URL.</p> <p>Use cases: - Read documentation pages - Extract article content - Fetch API documentation</p> <pre><code>from consoul import Consoul\n\nconsole = Consoul(tools=[\"read_url\"])\nconsole.chat(\"Summarize https://docs.python.org/3/library/asyncio.html\")\nconsole.chat(\"Read the FastAPI tutorial and explain key concepts\")\nconsole.chat(\"What does this blog post say about microservices?\")\n</code></pre> <p>Tool parameters: - <code>url</code> (str): URL to fetch - <code>parse</code> (bool): Parse and extract main content (default: True)</p> <p>Risk: SAFE (read-only web access)</p>"},{"location":"api/tools/#wikipedia-search-wikipedia","title":"<code>wikipedia</code> - Search Wikipedia","text":"<p>Search and read Wikipedia articles.</p> <p>Use cases: - Research background information - Get definitions and overviews - Understand technical concepts</p> <pre><code>from consoul import Consoul\n\nconsole = Consoul(tools=[\"wikipedia\"])\nconsole.chat(\"Explain quantum computing using Wikipedia\")\nconsole.chat(\"What is the history of Python programming language?\")\nconsole.chat(\"Summarize the REST architectural style\")\n</code></pre> <p>Tool parameters: - <code>query</code> (str): Search query - <code>sentences</code> (int): Number of sentences to return (default: 3)</p> <p>Risk: SAFE (read-only web access)</p>"},{"location":"api/tools/#execute-tools","title":"Execute Tools","text":""},{"location":"api/tools/#bash-execute-shell-commands","title":"<code>bash</code> - Execute Shell Commands","text":"<p>Execute shell commands with dynamic risk assessment.</p> <p>Use cases: - Run scripts and build tools - Execute git commands - Run tests and linters</p> <pre><code>from consoul import Consoul\n\nconsole = Consoul(tools=[\"bash\"])\nconsole.chat(\"Run the test suite with pytest\")\nconsole.chat(\"Check git status\")\nconsole.chat(\"Install dependencies with pip\")\n</code></pre> <p>Tool parameters: - <code>command</code> (str): Shell command to execute - <code>working_dir</code> (str): Directory to run command in - <code>timeout</code> (int): Command timeout in seconds</p> <p>Risk: CAUTION-DANGEROUS (depends on command)</p> <p>Dynamic Risk Assessment:</p> <p>Bash commands are assessed for risk before execution:</p> Command Example Risk Level Reason <code>ls</code>, <code>pwd</code>, <code>echo</code> SAFE Read-only operations <code>git status</code>, <code>pip install</code> CAUTION Safe but modifies state <code>rm -rf</code>, <code>kill -9</code>, <code>sudo</code> DANGEROUS Destructive or privileged <code>:(){ :\\|:&amp; };:</code> (fork bomb) BLOCKED Malicious patterns <p>The AI must request user approval for CAUTION+ commands.</p>"},{"location":"api/tools/#tool-specification","title":"Tool Specification","text":""},{"location":"api/tools/#enable-all-tools","title":"Enable All Tools","text":"<pre><code>from consoul import Consoul\n\nconsole = Consoul(tools=True)  # All 13 tools enabled\n</code></pre>"},{"location":"api/tools/#filter-by-risk-level","title":"Filter by Risk Level","text":"<pre><code># Only SAFE tools (read-only)\nconsole = Consoul(tools=\"safe\")\n\n# SAFE + CAUTION tools (file operations)\nconsole = Consoul(tools=\"caution\")\n\n# All tools including DANGEROUS\nconsole = Consoul(tools=\"dangerous\")\n</code></pre>"},{"location":"api/tools/#filter-by-category","title":"Filter by Category","text":"<pre><code># Only search tools\nconsole = Consoul(tools=\"search\")\n\n# Only web tools\nconsole = Consoul(tools=\"web\")\n\n# Only file-edit tools\nconsole = Consoul(tools=\"file-edit\")\n\n# Only execute tools\nconsole = Consoul(tools=\"execute\")\n\n# Multiple categories\nconsole = Consoul(tools=[\"search\", \"web\"])\n</code></pre>"},{"location":"api/tools/#specific-tools","title":"Specific Tools","text":"<pre><code># Exact tools by name\nconsole = Consoul(tools=[\"bash\", \"grep\", \"read\"])\n\n# Mix categories and specific tools\nconsole = Consoul(tools=[\"search\", \"create_file\"])\n</code></pre>"},{"location":"api/tools/#custom-tools","title":"Custom Tools","text":"<p>Create your own tools using LangChain's <code>@tool</code> decorator:</p> <pre><code>from consoul import Consoul\nfrom langchain_core.tools import tool\n\n@tool\ndef calculate_fibonacci(n: int) -&gt; int:\n    \"\"\"Calculate the nth Fibonacci number.\n\n    Args:\n        n: Position in Fibonacci sequence (1-indexed)\n\n    Returns:\n        The nth Fibonacci number\n    \"\"\"\n    if n &lt;= 1:\n        return n\n    a, b = 0, 1\n    for _ in range(2, n + 1):\n        a, b = b, a + b\n    return b\n\n# Use custom tool\nconsole = Consoul(tools=[calculate_fibonacci, \"bash\", \"grep\"])\nconsole.chat(\"What's the 20th Fibonacci number?\")\n</code></pre>"},{"location":"api/tools/#custom-tool-requirements","title":"Custom Tool Requirements","text":"<ol> <li>Decorator: Must use <code>@tool</code> from <code>langchain_core.tools</code></li> <li>Docstring: Must have a descriptive docstring (AI reads this!)</li> <li>Type Hints: Parameters and return value must be typed</li> <li>Return Type: Must return <code>str</code> or JSON-serializable value</li> </ol> <pre><code>from langchain_core.tools import tool\nimport json\n\n@tool\ndef search_database(query: str, limit: int = 10) -&gt; str:\n    \"\"\"Search the product database for matching items.\n\n    Args:\n        query: Search query string\n        limit: Maximum number of results (default: 10)\n\n    Returns:\n        JSON string with search results including id, name, price\n    \"\"\"\n    # Your implementation\n    results = db.search(query, limit=limit)\n    return json.dumps(results)\n</code></pre>"},{"location":"api/tools/#tool-discovery","title":"Tool Discovery","text":"<p>Automatically discover tools from <code>.consoul/tools/</code> directory:</p>"},{"location":"api/tools/#directory-structure","title":"Directory Structure","text":"<pre><code>your_project/\n\u251c\u2500\u2500 .consoul/\n\u2502   \u2514\u2500\u2500 tools/\n\u2502       \u251c\u2500\u2500 database.py      # Custom database tools\n\u2502       \u251c\u2500\u2500 api_client.py    # Custom API tools\n\u2502       \u2514\u2500\u2500 helpers.py       # Utility tools\n\u251c\u2500\u2500 main.py\n\u2514\u2500\u2500 README.md\n</code></pre>"},{"location":"api/tools/#example-tool-file","title":"Example Tool File","text":"<p><code>.consoul/tools/database.py</code>:</p> <pre><code>from langchain_core.tools import tool\nimport json\n\n@tool\ndef query_users(email: str) -&gt; str:\n    \"\"\"Query users table by email address.\n\n    Args:\n        email: User email to search for\n\n    Returns:\n        JSON with user data or error message\n    \"\"\"\n    user = db.users.find_one({\"email\": email})\n    if user:\n        return json.dumps(user)\n    return json.dumps({\"error\": \"User not found\"})\n\n@tool\ndef create_user(email: str, name: str) -&gt; str:\n    \"\"\"Create a new user in the database.\n\n    Args:\n        email: User email address\n        name: User full name\n\n    Returns:\n        JSON with created user data\n    \"\"\"\n    user_id = db.users.insert({\"email\": email, \"name\": name})\n    return json.dumps({\"id\": user_id, \"email\": email, \"name\": name})\n</code></pre>"},{"location":"api/tools/#enable-discovery","title":"Enable Discovery","text":"<pre><code>from consoul import Consoul\n\n# Discover and load all tools from .consoul/tools/\nconsole = Consoul(discover_tools=True)\n\n# Combine with built-in tools\nconsole = Consoul(tools=[\"bash\", \"grep\"], discover_tools=True)\n\n# Only discovered tools (no built-in)\nconsole = Consoul(tools=False, discover_tools=True)\n</code></pre> <p>Discovered tools default to <code>RiskLevel.CAUTION</code> for safety.</p>"},{"location":"api/tools/#security-best-practices","title":"Security Best Practices","text":""},{"location":"api/tools/#principle-of-least-privilege","title":"Principle of Least Privilege","text":"<p>Only grant tools the AI actually needs:</p> <pre><code># Good: Specific tools for specific tasks\ncode_analyzer = Consoul(tools=[\"grep\", \"code_search\", \"read\"])\n\n# Bad: All tools when only search is needed\ncode_analyzer = Consoul(tools=True)\n</code></pre>"},{"location":"api/tools/#start-with-safe-tools","title":"Start with Safe Tools","text":"<p>Test with read-only tools first:</p> <pre><code># Phase 1: Develop with safe tools\nagent = Consoul(tools=\"safe\")\n\n# Phase 2: Add file operations when needed\nagent = Consoul(tools=\"caution\")\n\n# Phase 3: Add destructive tools with extreme care\nagent = Consoul(tools=\"dangerous\")\n</code></pre>"},{"location":"api/tools/#use-version-control","title":"Use Version Control","text":"<p>Always work in a git repository:</p> <pre><code># Before enabling file-edit tools\ngit status  # Ensure clean working tree\ngit commit -am \"Checkpoint before AI edits\"\n\n# After AI makes changes\ngit diff  # Review all changes\ngit commit -am \"AI-generated changes\"  # Or git reset --hard to undo\n</code></pre>"},{"location":"api/tools/#review-tool-approvals","title":"Review Tool Approvals","text":"<p>Check what the AI wants to do:</p> <pre><code># The approval system shows you:\n# - Tool name\n# - Arguments (file paths, commands, etc.)\n# - Risk level\n# - Dynamic risk assessment (for bash)\n\n# Approve: AI executes the tool\n# Deny: AI cannot use this tool\n</code></pre>"},{"location":"api/tools/#monitor-costs","title":"Monitor Costs","text":"<p>Track API usage when using tools:</p> <pre><code>console = Consoul(tools=True)\nconsole.chat(\"Find and fix all TODO comments\")\n\n# Check costs\ncost = console.last_cost\nprint(f\"Tokens: {cost['total_tokens']}\")\nprint(f\"Estimated cost: ${cost['estimated_cost']:.4f}\")\n</code></pre>"},{"location":"api/tools/#tool-combinations","title":"Tool Combinations","text":"<p>Common tool combinations for specific tasks:</p>"},{"location":"api/tools/#code-analysis","title":"Code Analysis","text":"<pre><code>tools = [\"grep\", \"code_search\", \"find_references\", \"read\"]\n</code></pre>"},{"location":"api/tools/#web-research","title":"Web Research","text":"<pre><code>tools = [\"web_search\", \"read_url\", \"wikipedia\"]\n</code></pre>"},{"location":"api/tools/#file-management","title":"File Management","text":"<pre><code>tools = [\"bash\", \"create_file\", \"edit_lines\", \"read\"]\n</code></pre>"},{"location":"api/tools/#testing-ci","title":"Testing &amp; CI","text":"<pre><code>tools = [\"bash\", \"read\", \"grep\"]\n</code></pre>"},{"location":"api/tools/#documentation","title":"Documentation","text":"<pre><code>tools = [\"read\", \"code_search\", \"create_file\", \"edit_lines\"]\n</code></pre>"},{"location":"api/tools/#available-tools-quick-reference","title":"Available Tools Quick Reference","text":"Tool Category Risk Description <code>grep</code> SEARCH SAFE Search file contents with regex <code>code_search</code> SEARCH SAFE Find classes, functions, methods <code>find_references</code> SEARCH SAFE Find symbol usages <code>read</code> SEARCH SAFE Read file contents <code>create_file</code> FILE_EDIT CAUTION Create new files <code>edit_lines</code> FILE_EDIT CAUTION Edit specific line ranges <code>edit_replace</code> FILE_EDIT CAUTION Search and replace in files <code>append_file</code> FILE_EDIT CAUTION Append to files <code>delete_file</code> FILE_EDIT DANGEROUS Delete files <code>web_search</code> WEB SAFE Search the web <code>read_url</code> WEB SAFE Fetch web pages <code>wikipedia</code> WEB SAFE Search Wikipedia <code>bash</code> EXECUTE CAUTION+ Execute shell commands"},{"location":"api/tools/#next-steps","title":"Next Steps","text":"<ul> <li>Tutorial - Learn SDK fundamentals</li> <li>Building Agents - Create specialized AI agents</li> <li>API Reference - Complete API documentation</li> </ul> <p>Master tools to build powerful agents! \ud83d\udee0\ufe0f</p>"},{"location":"api/tutorial/","title":"Tutorial","text":""},{"location":"api/tutorial/#sdk-tutorial","title":"SDK Tutorial","text":"<p>Learn how to integrate Consoul's AI capabilities into your Python applications through hands-on examples.</p> <p>Learning Philosophy</p> <p>You'll learn fastest by writing and running code. Each example is ready to copy and run immediately. Type it out or copy it - then experiment!</p>"},{"location":"api/tutorial/#installation","title":"Installation","text":"<p>Install Consoul in your Python project:</p> <pre><code># Basic installation\npip install consoul\n\n# With all features (MLX, Ollama support)\npip install consoul[all]\n\n# For development\npip install consoul[dev]\n</code></pre> <p>Requirements: - Python 3.10+ - API keys for your chosen provider (OpenAI, Anthropic, Google, or Ollama)</p> <p>Setup API Keys:</p> <p>Set your API keys via environment variables:</p> <pre><code>export OPENAI_API_KEY=\"sk-...\"\nexport ANTHROPIC_API_KEY=\"sk-ant-...\"\nexport GOOGLE_API_KEY=\"...\"\n</code></pre> <p>Or initialize a configuration file:</p> <pre><code>consoul init\n</code></pre> <p>This creates <code>~/.config/consoul/config.yaml</code> with default settings.</p>"},{"location":"api/tutorial/#first-steps","title":"First Steps","text":""},{"location":"api/tutorial/#your-first-chat","title":"Your First Chat","text":"<p>The simplest possible AI chat in 3 lines:</p> <pre><code>from consoul import Consoul\n\nconsole = Consoul()\nprint(console.chat(\"What is 2+2?\"))\n</code></pre> <p>Output: </p><pre><code>4\n</code></pre><p></p> <p>That's it! Consoul automatically:</p> <ul> <li>Loads your configuration from <code>~/.config/consoul/</code></li> <li>Uses your default profile's model (e.g., <code>claude-3-5-sonnet-20241022</code>)</li> <li>Handles API authentication via environment variables</li> </ul>"},{"location":"api/tutorial/#getting-response-metadata","title":"Getting Response Metadata","text":"<p>Want more than just the text? Use <code>.ask()</code> for structured responses:</p> <pre><code>from consoul import Consoul\n\nconsole = Consoul()\nresponse = console.ask(\"Explain Python decorators\", show_tokens=True)\n\nprint(response.content)\nprint(f\"\\nModel: {response.model}\")\nprint(f\"Tokens: {response.tokens}\")\n</code></pre> <p>Output: </p><pre><code>Decorators are functions that modify other functions...\n\nModel: claude-3-5-sonnet-20241022\nTokens: 127\n</code></pre><p></p>"},{"location":"api/tutorial/#multi-turn-conversations","title":"Multi-Turn Conversations","text":"<p>Consoul maintains conversation history automatically:</p> <pre><code>from consoul import Consoul\n\nconsole = Consoul()\n\n# First message\nconsole.chat(\"My name is Alice\")\n\n# Ask about programming\nconsole.chat(\"What programming language should I learn?\")\n\n# Reference earlier context\nresponse = console.chat(\"What's my name?\")\nprint(response)  # \"Your name is Alice.\"\n</code></pre> <p>The AI remembers your entire conversation. Clear it when starting fresh:</p> <pre><code>console.clear()  # Removes history, keeps system prompt\nconsole.chat(\"What's my name?\")  # \"I don't have that information\"\n</code></pre>"},{"location":"api/tutorial/#choosing-models","title":"Choosing Models","text":"<p>Override the default model:</p> <pre><code>from consoul import Consoul\n\n# Use GPT-4o\nconsole = Consoul(model=\"gpt-4o\")\nconsole.chat(\"Hello!\")\n\n# Use Gemini\nconsole = Consoul(model=\"gemini-2.0-flash-exp\")\nconsole.chat(\"Hello!\")\n\n# Use local Ollama model\nconsole = Consoul(model=\"llama3.2\")\nconsole.chat(\"Hello!\")\n</code></pre> <p>Consoul auto-detects the provider from the model name.</p>"},{"location":"api/tutorial/#custom-configuration","title":"Custom Configuration","text":"<p>Control temperature, system prompts, and more:</p> <pre><code>from consoul import Consoul\n\nconsole = Consoul(\n    model=\"gpt-4o\",\n    temperature=0.7,  # 0.0 = deterministic, 2.0 = creative\n    system_prompt=\"You are a helpful Python expert who gives concise answers.\",\n    persist=True  # Save conversation history (default)\n)\n\nresponse = console.chat(\"How do I sort a list?\")\nprint(response)\n</code></pre>"},{"location":"api/tutorial/#adding-tools","title":"Adding Tools","text":"<p>Tools let the AI perform actions - search files, execute commands, read URLs, and more.</p>"},{"location":"api/tutorial/#enable-all-tools","title":"Enable All Tools","text":"<pre><code>from consoul import Consoul\n\nconsole = Consoul(tools=True)  # All 13 built-in tools\nconsole.chat(\"List Python files in the current directory\")\n</code></pre> <p>The AI can now use tools like <code>bash_execute</code>, <code>grep_search</code>, <code>code_search</code>, etc.</p> <p>Tool Security</p> <p>Tools can modify your system (create/delete files, run commands). Start with <code>tools=\"safe\"</code> for read-only operations.</p>"},{"location":"api/tutorial/#safe-tools-only","title":"Safe Tools Only","text":"<p>For untrusted AI interactions, use read-only tools:</p> <pre><code>from consoul import Consoul\n\nconsole = Consoul(tools=\"safe\")  # Only SAFE risk level\nconsole.chat(\"Search for TODO comments in Python files\")\n</code></pre> <p>Safe tools include: - <code>grep</code> - Search file contents - <code>code_search</code> - Find code patterns - <code>read_file</code> - Read file contents - <code>web_search</code> - Search the web - <code>read_url</code> - Fetch web pages</p>"},{"location":"api/tutorial/#tool-categories","title":"Tool Categories","text":"<p>Filter tools by category:</p> <pre><code>from consoul import Consoul\n\n# Only search tools\nconsole = Consoul(tools=\"search\")\nconsole.chat(\"Find all functions named 'calculate'\")\n\n# Only web tools\nconsole = Consoul(tools=\"web\")\nconsole.chat(\"What's the latest Python release?\")\n\n# Multiple categories\nconsole = Consoul(tools=[\"search\", \"web\"])\nconsole.chat(\"Search docs and check online\")\n</code></pre> <p>Available categories: <code>search</code>, <code>file-edit</code>, <code>web</code>, <code>execute</code></p>"},{"location":"api/tutorial/#specific-tools","title":"Specific Tools","text":"<p>Choose exactly which tools to enable:</p> <pre><code>from consoul import Consoul\n\n# Bash and grep only\nconsole = Consoul(tools=[\"bash\", \"grep\"])\nconsole.chat(\"List files and search for 'TODO'\")\n\n# File editing tools\nconsole = Consoul(tools=[\"create_file\", \"edit_lines\", \"read\"])\nconsole.chat(\"Create a new README.md file\")\n</code></pre>"},{"location":"api/tutorial/#risk-levels-explained","title":"Risk Levels Explained","text":"<p>Tools are classified by risk:</p> Risk Level Description Examples SAFE Read-only operations <code>grep</code>, <code>code_search</code>, <code>read_file</code>, <code>web_search</code> CAUTION File operations, command execution <code>create_file</code>, <code>edit_file</code>, <code>bash</code> (safe commands) DANGEROUS Destructive operations <code>delete_file</code>, <code>bash</code> (rm, kill, etc.) <p>Use risk levels to filter tools:</p> <pre><code>from consoul import Consoul\n\n# Safe tools only (read-only)\nconsole = Consoul(tools=\"safe\")\n\n# Safe + Caution tools (file operations)\nconsole = Consoul(tools=\"caution\")\n\n# All tools including dangerous (be careful!)\nconsole = Consoul(tools=\"dangerous\")\n</code></pre>"},{"location":"api/tutorial/#custom-tools","title":"Custom Tools","text":"<p>Create your own tools using LangChain's <code>@tool</code> decorator:</p> <pre><code>from consoul import Consoul\nfrom langchain_core.tools import tool\n\n@tool\ndef calculate_fibonacci(n: int) -&gt; int:\n    \"\"\"Calculate the nth Fibonacci number.\n\n    Args:\n        n: Position in Fibonacci sequence (1-indexed)\n    \"\"\"\n    if n &lt;= 1:\n        return n\n    a, b = 0, 1\n    for _ in range(2, n + 1):\n        a, b = b, a + b\n    return b\n\n# Add custom tool alongside built-in tools\nconsole = Consoul(tools=[calculate_fibonacci, \"bash\", \"grep\"])\nconsole.chat(\"What's the 15th Fibonacci number? Use the tool.\")\n</code></pre> <p>Output: </p><pre><code>The 15th Fibonacci number is 610.\n</code></pre><p></p> <p>The AI automatically discovers your tool, reads its docstring, and calls it with the right arguments.</p>"},{"location":"api/tutorial/#tool-requirements","title":"Tool Requirements","text":"<p>Custom tools must:</p> <ol> <li>Be decorated with <code>@tool</code></li> <li>Have a descriptive docstring (the AI reads this!)</li> <li>Use type hints for parameters</li> <li>Return a string or JSON-serializable value</li> </ol> <pre><code>@tool\ndef search_database(query: str, limit: int = 10) -&gt; str:\n    \"\"\"Search the product database.\n\n    Args:\n        query: Search query string\n        limit: Maximum results to return (default: 10)\n\n    Returns:\n        JSON string with search results\n    \"\"\"\n    # Your implementation\n    results = db.search(query, limit=limit)\n    return json.dumps(results)\n</code></pre>"},{"location":"api/tutorial/#tool-discovery","title":"Tool Discovery","text":"<p>Store custom tools in <code>.consoul/tools/</code> for automatic discovery:</p> <pre><code>your_project/\n\u251c\u2500\u2500 .consoul/\n\u2502   \u2514\u2500\u2500 tools/\n\u2502       \u251c\u2500\u2500 database.py      # @tool decorated functions\n\u2502       \u251c\u2500\u2500 api_client.py    # @tool decorated functions\n\u2502       \u2514\u2500\u2500 helpers.py       # @tool decorated functions\n\u251c\u2500\u2500 main.py\n\u2514\u2500\u2500 README.md\n</code></pre> <p>Enable discovery:</p> <pre><code>from consoul import Consoul\n\n# Discover tools from .consoul/tools/\nconsole = Consoul(discover_tools=True)\n\n# Combine with built-in tools\nconsole = Consoul(tools=[\"bash\", \"grep\"], discover_tools=True)\n\n# Only discovered tools (no built-in)\nconsole = Consoul(tools=False, discover_tools=True)\n</code></pre> <p>Discovered tools default to <code>RiskLevel.CAUTION</code> for safety.</p>"},{"location":"api/tutorial/#session-introspection","title":"Session Introspection","text":"<p>Monitor your AI usage:</p> <pre><code>from consoul import Consoul\n\nconsole = Consoul(model=\"gpt-4o\", tools=True)\nconsole.chat(\"Hello!\")\n\n# View settings\nprint(console.settings)\n# {'model': 'gpt-4o', 'profile': 'default', 'tools_enabled': True, ...}\n\n# Check last request\nprint(console.last_request)\n# {'message': 'Hello!', 'model': 'gpt-4o', 'messages_count': 2, ...}\n\n# Estimate costs (rough approximation)\nprint(console.last_cost)\n# {'input_tokens': 87, 'output_tokens': 12, 'estimated_cost': 0.000441, ...}\n# Note: This is a rough estimate. Use provider dashboards for exact costs.\n</code></pre>"},{"location":"api/tutorial/#error-handling","title":"Error Handling","text":"<p>Handle API errors gracefully:</p> <pre><code>from consoul import Consoul\n\nconsole = Consoul()\n\ntry:\n    response = console.chat(\"Hello!\")\n    print(response)\nexcept Exception as e:\n    print(f\"Error: {e}\")\n    # Handle rate limits, API errors, network issues, etc.\n</code></pre> <p>Common errors: - Authentication: Missing API keys - Rate Limits: Too many requests - Network: Connection failures - Tool Execution: Tool-specific errors</p>"},{"location":"api/tutorial/#async-support","title":"Async Support","text":"<p>For async applications, use standard Python async patterns:</p> <pre><code>import asyncio\nfrom consoul import Consoul\n\nasync def main():\n    console = Consoul(model=\"claude-3-5-sonnet-20241022\")\n\n    # Consoul's .chat() is synchronous, but you can run it in executor\n    loop = asyncio.get_event_loop()\n    response = await loop.run_in_executor(\n        None,\n        console.chat,\n        \"Explain async/await\"\n    )\n    print(response)\n\nasyncio.run(main())\n</code></pre> <p>For true async streaming, use the underlying <code>ChatManager</code> API (see API Reference).</p>"},{"location":"api/tutorial/#best-practices","title":"Best Practices","text":""},{"location":"api/tutorial/#security","title":"Security","text":"<ul> <li>Start with <code>tools=\"safe\"</code> for untrusted AI interactions</li> <li>Use version control (git) when enabling file-edit tools</li> <li>Principle of least privilege: Only grant necessary tools</li> <li>Review tool approvals: Check what the AI wants to do</li> </ul>"},{"location":"api/tutorial/#performance","title":"Performance","text":"<ul> <li>Reuse Consoul instances: Don't create new ones per message</li> <li>Use <code>console.clear()</code>: When starting unrelated conversations</li> <li>Monitor <code>console.last_cost</code>: Track token usage and costs</li> <li>Choose appropriate models: GPT-4o-mini vs GPT-4o vs Claude</li> </ul>"},{"location":"api/tutorial/#development","title":"Development","text":"<ul> <li>Start simple: Basic chat first, then add tools</li> <li>Test custom tools: Verify they work before giving to AI</li> <li>Read tool docstrings: The AI reads them too!</li> <li>Use descriptive system prompts: Guide the AI's behavior</li> </ul>"},{"location":"api/tutorial/#next-steps","title":"Next Steps","text":"<ul> <li>Building Agents - Create specialized AI agents for complex tasks</li> <li>Tools Deep Dive - Learn about all 13 built-in tools</li> <li>API Reference - Complete API documentation</li> </ul>"},{"location":"api/tutorial/#example-projects","title":"Example Projects","text":""},{"location":"api/tutorial/#code-search-assistant","title":"Code Search Assistant","text":"<pre><code>from consoul import Consoul\n\nconsole = Consoul(\n    tools=[\"grep\", \"code_search\", \"read\"],\n    system_prompt=\"You are a code search assistant. Help find code patterns.\"\n)\n\nconsole.chat(\"Find all TODO comments in Python files\")\nconsole.chat(\"Show me the implementation of the User class\")\nconsole.chat(\"Where is the database connection configured?\")\n</code></pre>"},{"location":"api/tutorial/#file-organizer","title":"File Organizer","text":"<pre><code>from consoul import Consoul\n\nconsole = Consoul(\n    tools=[\"bash\", \"create_file\", \"edit_lines\"],\n    system_prompt=\"You are a file organization assistant.\"\n)\n\nconsole.chat(\"List all .txt files in Downloads/\")\nconsole.chat(\"Create a folder structure for a Python project\")\nconsole.chat(\"Move all PDFs to Documents/PDFs/\")\n</code></pre>"},{"location":"api/tutorial/#web-research-bot","title":"Web Research Bot","text":"<pre><code>from consoul import Consoul\n\nconsole = Consoul(\n    tools=[\"web_search\", \"read_url\", \"wikipedia\"],\n    system_prompt=\"You are a research assistant. Cite your sources.\"\n)\n\nconsole.chat(\"What's the latest on Python 3.13 release?\")\nconsole.chat(\"Compare React vs Vue.js in 2024\")\nconsole.chat(\"Summarize the Wikipedia article on quantum computing\")\n</code></pre> <p>Start building! \ud83d\ude80</p>"},{"location":"cli-reference/","title":"Overview","text":""},{"location":"cli-reference/#cli-reference","title":"CLI Reference","text":"<p>Complete reference for all Consoul commands and options.</p>"},{"location":"cli-reference/#table-of-contents","title":"Table of Contents","text":"<ul> <li> <p><code>consoul chat</code> - Start an interactive chat session.</p> </li> <li> <p><code>consoul describe</code> - Describe Consoul CLI commands and their schemas.</p> </li> <li> <p><code>consoul history</code> - Manage conversation history.</p> </li> <li> <p><code>consoul history clear</code> - Delete all conversation history.</p> </li> <li> <p><code>consoul history delete</code> - Delete a conversation session.</p> </li> <li> <p><code>consoul history export</code> - Export conversation(s) to a file.</p> </li> <li> <p><code>consoul history import</code> - Import conversations from Consoul JSON export.</p> </li> <li> <p><code>consoul history list</code> - List recent conversation sessions.</p> </li> <li> <p><code>consoul history search</code> - Search conversation history using full-text search.</p> </li> <li> <p><code>consoul history show</code> - Show conversation details for a specific session.</p> </li> <li> <p><code>consoul history stats</code> - Show conversation history statistics.</p> </li> <li> <p><code>consoul history summary</code> - Show conversation summary for a specific session.</p> </li> <li> <p><code>consoul init</code> - Initialize a new Consoul configuration file.</p> </li> <li> <p><code>consoul preset</code> - Manage tool presets.</p> </li> <li> <p><code>consoul preset list</code> - List all available tool presets (built-in + custom).</p> </li> <li> <p><code>consoul tui</code> - Launch Consoul TUI.</p> </li> </ul>"},{"location":"cli-reference/#global-options","title":"Global Options","text":"<p>These options can be used with any command:</p> <ul> <li><code>--help</code> - Show help message and exit</li> <li><code>--profile PROFILE</code> - Configuration profile to use (default: default)</li> <li><code>--list-profiles</code> - List all available profiles and exit</li> <li><code>--temperature FLOAT</code> - Override model temperature (0.0-2.0)</li> <li><code>--model TEXT</code> - Override model name</li> <li><code>--max-tokens INT</code> - Override maximum tokens to generate</li> </ul>"},{"location":"cli-reference/#commands","title":"Commands","text":""},{"location":"cli-reference/#consoul-chat","title":"<code>consoul chat</code>","text":"<p>Start an interactive chat session with streaming responses.</p> <p>Usage:</p> <pre><code>consoul chat [OPTIONS]\n</code></pre> <p>Description:</p> <p>The chat command launches an interactive CLI session for conversing with AI models. Features include streaming token-by-token responses, rich markdown rendering, conversation history with context retention, history navigation (up/down arrows), and optional tool execution with approval.</p> <p>Unlike the TUI mode, CLI chat provides a lightweight, single-session interface focused on quick interactions.</p> <p>Options:</p> <ul> <li><code>-m, --model TEXT</code> - Model to use (e.g., gpt-4o, claude-3-5-sonnet-20241022, llama3)</li> <li><code>--no-stream</code> - Disable streaming responses (show complete response at once)</li> <li><code>--no-markdown</code> - Disable markdown rendering (show plain text)</li> <li><code>--tools / --no-tools</code> - Enable/disable tool execution (overrides config)</li> <li><code>--multiline</code> - Enable multi-line input mode (use Alt+Enter to submit)</li> </ul> <p>Global Options:</p> <ul> <li><code>--profile TEXT</code> - Configuration profile to use</li> <li><code>--temperature FLOAT</code> - Override model temperature (0.0-2.0)</li> <li><code>--max-tokens INT</code> - Override maximum tokens to generate</li> </ul> <p>Examples:</p> <pre><code># Basic usage with default profile\nconsoul chat\n\n# Use specific model\nconsoul chat --model gpt-4o\n\n# Use specific profile\nconsoul --profile creative chat\n\n# Disable tools and markdown\nconsoul chat --no-tools --no-markdown\n\n# Multi-line mode for code blocks\nconsoul chat --multiline\n</code></pre> <p>In-Session Controls:</p> <ul> <li>Enter - Send message</li> <li>Ctrl+C or Ctrl+D - Quit session</li> <li>Up/Down arrows - Navigate input history</li> <li>Escape - Clear current input line</li> </ul> <p>Slash Commands:</p> <p>Type <code>/help</code> during the session to see available slash commands:</p> Command Description <code>/help</code> Show available commands <code>/clear</code> Clear conversation history <code>/tokens</code> Show token usage and limits <code>/stats</code> Show detailed session statistics <code>/exit</code>, <code>/quit</code> Exit the chat session <code>/model &lt;name&gt;</code> Switch to different model mid-session <code>/tools &lt;on\\|off&gt;</code> Toggle tool execution <code>/export &lt;file&gt;</code> Export conversation to .md or .json <p>See CLI Chat Guide for comprehensive documentation.</p>"},{"location":"cli-reference/#consoul-describe","title":"<code>consoul describe</code>","text":"<p>Describe Consoul CLI commands and their schemas.</p> <pre><code>consoul describe [command_path] [options]\n</code></pre> <p>Arguments:</p> <ul> <li><code>command_path</code> -  (optional, default: )</li> <li>Type: <code>text</code></li> </ul> <p>Options:</p> <ul> <li><code>-f, --format</code> - Output format (default: json)</li> <li>Type: <code>choice</code></li> <li>Choices: <code>json</code>, <code>markdown</code></li> <li> <p>Default: <code>json</code></p> </li> <li> <p><code>-o, --output</code> - Write output to file instead of stdout</p> </li> <li>Type: <code>path</code></li> <li> <p>Default: ``</p> </li> <li> <p><code>--indent</code> - JSON indentation spaces (default: 2)</p> </li> <li>Type: <code>integer</code></li> <li> <p>Default: <code>2</code></p> </li> <li> <p><code>--compact</code> - Compact JSON output (no indentation)</p> </li> <li>Type: <code>boolean</code></li> </ul>"},{"location":"cli-reference/#consoul-history","title":"<code>consoul history</code>","text":"<p>Manage conversation history.</p> <pre><code>consoul history\n</code></pre> <p>Subcommands:</p> <ul> <li> <p><code>clear</code> - Delete all conversation history.</p> </li> <li> <p><code>delete</code> - Delete a conversation session.</p> </li> <li> <p><code>export</code> - Export conversation(s) to a file.</p> </li> <li> <p><code>import</code> - Import conversations from Consoul JSON export.</p> </li> <li> <p><code>list</code> - List recent conversation sessions.</p> </li> <li> <p><code>search</code> - Search conversation history using full-text search.</p> </li> <li> <p><code>show</code> - Show conversation details for a specific session.</p> </li> <li> <p><code>stats</code> - Show conversation history statistics.</p> </li> <li> <p><code>summary</code> - Show conversation summary for a specific session.</p> </li> </ul> <p>See individual command documentation for details.</p>"},{"location":"cli-reference/#consoul-history-clear","title":"<code>consoul history clear</code>","text":"<p>Delete all conversation history.</p> <pre><code>consoul history clear [options]\n</code></pre> <p>Options:</p> <ul> <li><code>--db_path</code> - Path to history database (default: ~/.consoul/history.db)</li> <li>Type: <code>path</code></li> <li> <p>Default: ``</p> </li> <li> <p><code>--yes</code> - Confirm the action without prompting.</p> </li> <li>Type: <code>boolean</code></li> </ul>"},{"location":"cli-reference/#consoul-history-delete","title":"<code>consoul history delete</code>","text":"<p>Delete a conversation session.</p> <pre><code>consoul history delete &lt;session_id&gt; [options]\n</code></pre> <p>Arguments:</p> <ul> <li><code>session_id</code> -  (required)</li> <li>Type: <code>text</code></li> </ul> <p>Options:</p> <ul> <li><code>--db_path</code> - Path to history database (default: ~/.consoul/history.db)</li> <li>Type: <code>path</code></li> <li> <p>Default: ``</p> </li> <li> <p><code>--yes</code> - Confirm the action without prompting.</p> </li> <li>Type: <code>boolean</code></li> </ul>"},{"location":"cli-reference/#consoul-history-export","title":"<code>consoul history export</code>","text":"<p>Export conversation(s) to a file.</p> <pre><code>consoul history export [session_id] &lt;output_file&gt; [options]\n</code></pre> <p>Arguments:</p> <ul> <li><code>session_id</code> -  (optional, default: )</li> <li> <p>Type: <code>text</code></p> </li> <li> <p><code>output_file</code> -  (required)</p> </li> <li>Type: <code>path</code></li> </ul> <p>Options:</p> <ul> <li><code>-f, --format</code> - Output format (default: json)</li> <li>Type: <code>choice</code></li> <li>Choices: <code>json</code>, <code>markdown</code>, <code>html</code>, <code>csv</code></li> <li> <p>Default: <code>json</code></p> </li> <li> <p><code>--all</code> - Export all conversations (JSON format only)</p> </li> <li> <p>Type: <code>boolean</code></p> </li> <li> <p><code>--db_path</code> - Path to history database (default: ~/.consoul/history.db)</p> </li> <li>Type: <code>path</code></li> <li>Default: ``</li> </ul>"},{"location":"cli-reference/#consoul-history-import","title":"<code>consoul history import</code>","text":"<p>Import conversations from Consoul JSON export.</p> <pre><code>consoul history import &lt;import_file&gt; [options]\n</code></pre> <p>Arguments:</p> <ul> <li><code>import_file</code> -  (required)</li> <li>Type: <code>path</code></li> </ul> <p>Options:</p> <ul> <li><code>--dry_run</code> - Validate import file without importing</li> <li> <p>Type: <code>boolean</code></p> </li> <li> <p><code>--db_path</code> - Path to history database (default: ~/.consoul/history.db)</p> </li> <li>Type: <code>path</code></li> <li>Default: ``</li> </ul>"},{"location":"cli-reference/#consoul-history-list","title":"<code>consoul history list</code>","text":"<p>List recent conversation sessions.</p> <pre><code>consoul history list [options]\n</code></pre> <p>Options:</p> <ul> <li><code>-n, --limit</code> - Number of conversations to show (default: 10)</li> <li>Type: <code>integer</code></li> <li> <p>Default: <code>10</code></p> </li> <li> <p><code>--db_path</code> - Path to history database (default: ~/.consoul/history.db)</p> </li> <li>Type: <code>path</code></li> <li>Default: ``</li> </ul>"},{"location":"cli-reference/#consoul-history-search","title":"<code>consoul history search</code>","text":"<p>Search conversation history using full-text search.</p> <pre><code>consoul history search &lt;query&gt; [options]\n</code></pre> <p>Arguments:</p> <ul> <li><code>query</code> -  (required)</li> <li>Type: <code>text</code></li> </ul> <p>Options:</p> <ul> <li><code>-n, --limit</code> - Maximum number of results to return (default: 20)</li> <li>Type: <code>integer</code></li> <li> <p>Default: <code>20</code></p> </li> <li> <p><code>--model</code> - Filter results by model name</p> </li> <li>Type: <code>text</code></li> <li> <p>Default: ``</p> </li> <li> <p><code>--after</code> - Filter results after this date (ISO format: YYYY-MM-DD)</p> </li> <li>Type: <code>text</code></li> <li> <p>Default: ``</p> </li> <li> <p><code>--before</code> - Filter results before this date (ISO format: YYYY-MM-DD)</p> </li> <li>Type: <code>text</code></li> <li> <p>Default: ``</p> </li> <li> <p><code>-c, --context</code> - Number of surrounding messages to show (default: 2)</p> </li> <li>Type: <code>integer</code></li> <li> <p>Default: <code>2</code></p> </li> <li> <p><code>-f, --format</code> - Output format (default: text)</p> </li> <li>Type: <code>choice</code></li> <li>Choices: <code>text</code>, <code>json</code></li> <li> <p>Default: <code>text</code></p> </li> <li> <p><code>--db_path</code> - Path to history database (default: ~/.consoul/history.db)</p> </li> <li>Type: <code>path</code></li> <li>Default: ``</li> </ul>"},{"location":"cli-reference/#consoul-history-show","title":"<code>consoul history show</code>","text":"<p>Show conversation details for a specific session.</p> <pre><code>consoul history show &lt;session_id&gt; [options]\n</code></pre> <p>Arguments:</p> <ul> <li><code>session_id</code> -  (required)</li> <li>Type: <code>text</code></li> </ul> <p>Options:</p> <ul> <li><code>--db_path</code> - Path to history database (default: ~/.consoul/history.db)</li> <li>Type: <code>path</code></li> <li>Default: ``</li> </ul>"},{"location":"cli-reference/#consoul-history-stats","title":"<code>consoul history stats</code>","text":"<p>Show conversation history statistics.</p> <pre><code>consoul history stats [options]\n</code></pre> <p>Options:</p> <ul> <li><code>--db_path</code> - Path to history database (default: ~/.consoul/history.db)</li> <li>Type: <code>path</code></li> <li>Default: ``</li> </ul>"},{"location":"cli-reference/#consoul-history-summary","title":"<code>consoul history summary</code>","text":"<p>Show conversation summary for a specific session.</p> <pre><code>consoul history summary &lt;session_id&gt; [options]\n</code></pre> <p>Arguments:</p> <ul> <li><code>session_id</code> -  (required)</li> <li>Type: <code>text</code></li> </ul> <p>Options:</p> <ul> <li><code>--db_path</code> - Path to history database (default: ~/.consoul/history.db)</li> <li>Type: <code>path</code></li> <li>Default: ``</li> </ul>"},{"location":"cli-reference/#consoul-init","title":"<code>consoul init</code>","text":"<p>Initialize a new Consoul configuration file.</p> <pre><code>consoul init &lt;config_path&gt;\n</code></pre> <p>Arguments:</p> <ul> <li><code>config_path</code> -  (required)</li> <li>Type: <code>path</code></li> </ul>"},{"location":"cli-reference/#consoul-preset","title":"<code>consoul preset</code>","text":"<p>Manage tool presets.</p> <pre><code>consoul preset\n</code></pre> <p>Subcommands:</p> <ul> <li><code>list</code> - List all available tool presets (built-in + custom).</li> </ul> <p>See individual command documentation for details.</p>"},{"location":"cli-reference/#consoul-preset-list","title":"<code>consoul preset list</code>","text":"<p>List all available tool presets (built-in + custom).</p> <pre><code>consoul preset list\n</code></pre>"},{"location":"cli-reference/#consoul-tui","title":"<code>consoul tui</code>","text":"<p>Launch Consoul TUI.</p> <pre><code>consoul tui [options]\n</code></pre> <p>Options:</p> <ul> <li><code>--theme</code> - Color theme (monokai, dracula, nord, gruvbox)</li> <li>Type: <code>text</code></li> <li> <p>Default: ``</p> </li> <li> <p><code>--debug</code> - Enable debug logging</p> </li> <li> <p>Type: <code>boolean</code></p> </li> <li> <p><code>--log_file</code> - Debug log file path</p> </li> <li>Type: <code>path</code></li> <li> <p>Default: ``</p> </li> <li> <p><code>--tools</code> - Tool specification: 'all', 'none', 'safe', 'caution', 'dangerous', category names (search/file-edit/web/execute), or comma-separated tool names (bash,grep,code_search)</p> </li> <li>Type: <code>text</code></li> <li> <p>Default: ``</p> </li> <li> <p><code>--preset</code> - Tool preset: 'readonly', 'development', 'safe-research', 'power-user', or custom preset name. Overrides --tools flag.</p> </li> <li>Type: <code>text</code></li> <li> <p>Default: ``</p> </li> <li> <p><code>--test_mode</code> - Test mode (auto-exit)</p> </li> <li>Type: <code>boolean</code></li> </ul>"},{"location":"cli-reference/#see-also","title":"See Also","text":"<ul> <li>User Guide - Getting started with Consoul</li> <li>TUI Guide - Terminal User Interface documentation</li> <li>Configuration - Configuration reference</li> </ul>"},{"location":"examples/file-editing/","title":"File Editing Examples","text":""},{"location":"examples/file-editing/#file-editing-examples","title":"File Editing Examples","text":"<p>This directory contains working examples demonstrating Consoul's file editing capabilities.</p>"},{"location":"examples/file-editing/#examples","title":"Examples","text":""},{"location":"examples/file-editing/#1-simple_editpy","title":"1. simple_edit.py","text":"<p>Basic file editing with natural language requests.</p> <p>What it demonstrates: - Fixing specific lines - Adding logging statements - Updating configuration values - Adding error handling - Preview changes before applying (dry-run)</p> <p>Run it: </p><pre><code>cd docs/examples/file-editing\npython simple_edit.py\n</code></pre><p></p> <p>Key concepts: - Natural language file editing - Line-based edits - Approval workflow - Audit logging</p>"},{"location":"examples/file-editing/#2-search_replacepy","title":"2. search_replace.py","text":"<p>Progressive matching with tolerance levels.</p> <p>What it demonstrates: - Strict matching: Exact character-for-character - Whitespace tolerance: Ignores indentation differences - Fuzzy matching: Handles typos (\u226580% similarity) - Tab/space preservation - CRLF/LF preservation - Multiple edits in one operation - Similarity suggestions (\"Did you mean...?\")</p> <p>Run it: </p><pre><code>cd docs/examples/file-editing\npython search_replace.py\n</code></pre><p></p> <p>Key concepts: - Progressive matching levels - Format preservation - Batch replacements - Error recovery with suggestions</p>"},{"location":"examples/file-editing/#3-refactoringpy","title":"3. refactoring.py","text":"<p>Complete multi-file refactoring workflows.</p> <p>What it demonstrates: - Function rename with call site updates - Adding type hints to a module - Adding error handling to risky operations - Adding docstrings to undocumented functions - Migrating configuration format</p> <p>Run it: </p><pre><code>cd docs/examples/file-editing\npython refactoring.py\n</code></pre><p></p> <p>Key concepts: - Multi-step workflows - Combining multiple tools (code_search, find_references, file editing) - Systematic refactoring approach - Verification after changes</p>"},{"location":"examples/file-editing/#4-config_examplesyaml","title":"4. config_examples.yaml","text":"<p>Sample configurations for different environments.</p> <p>What it contains: - Development environment (permissive) - Production environment (restrictive) - Balanced environment (recommended) - Python-only environment - Web development environment - Documentation-only environment - Testing environment (unrestricted) - Custom project template</p> <p>Use it: </p><pre><code># Copy a configuration to your profile\ncp docs/examples/file-editing/config_examples.yaml ~/.consoul/config.yaml\n\n# Or reference specific sections in your config\n</code></pre><p></p> <p>Key concepts: - Extension filtering - Path blocking - Size limits - Permission policies - Environment-specific settings</p>"},{"location":"examples/file-editing/#prerequisites","title":"Prerequisites","text":"<p>Before running these examples:</p> <ol> <li> <p>Install Consoul with tools enabled: </p><pre><code>pip install consoul\n</code></pre><p></p> </li> <li> <p>Set up API keys: </p><pre><code>export ANTHROPIC_API_KEY=your-key-here\n</code></pre><p></p> </li> <li> <p>Configure tools in your profile: </p><pre><code># ~/.consoul/config.yaml\nprofiles:\n  default:\n    tools:\n      enabled: true\n      permission_policy: balanced\n</code></pre><p></p> </li> </ol>"},{"location":"examples/file-editing/#understanding-the-examples","title":"Understanding the Examples","text":""},{"location":"examples/file-editing/#tolerance-levels","title":"Tolerance Levels","text":"Tolerance When to Use Example <code>strict</code> Exact content known Replace constants, literals <code>whitespace</code> Refactoring code Different indentation levels <code>fuzzy</code> Handling typos \"calculate_totle\" \u2192 \"calculate_total\""},{"location":"examples/file-editing/#permission-policies","title":"Permission Policies","text":"Policy Behavior Use Case <code>paranoid</code> Approve every operation Production <code>balanced</code> Approve CAUTION+ Development <code>trusting</code> Auto-approve CAUTION Trusted environment <code>unrestricted</code> Auto-approve all Testing only"},{"location":"examples/file-editing/#file-edit-tools","title":"File Edit Tools","text":"Tool Purpose Risk Level <code>edit_file_lines</code> Edit specific lines/ranges CAUTION <code>edit_file_search_replace</code> Search and replace CAUTION <code>create_file</code> Create new files CAUTION <code>delete_file</code> Delete files CAUTION <code>append_to_file</code> Append content CAUTION"},{"location":"examples/file-editing/#safety-tips","title":"Safety Tips","text":"<p>\u2705 DO: - Use <code>dry_run=True</code> to preview changes - Start with <code>permission_policy: paranoid</code> - Review diff previews carefully - Use version control (git) - Monitor audit logs - Test in safe environment first</p> <p>\u274c DON'T: - Use <code>permission_policy: unrestricted</code> in production - Disable audit logging - Ignore approval prompts - Edit files without backups - Allow all extensions in production</p>"},{"location":"examples/file-editing/#troubleshooting","title":"Troubleshooting","text":""},{"location":"examples/file-editing/#search-text-not-found","title":"\"Search text not found\"","text":"<p>Cause: Exact match failed</p> <p>Solutions: 1. Try <code>tolerance=\"whitespace\"</code> to ignore indentation 2. Try <code>tolerance=\"fuzzy\"</code> for typos 3. Check \"Did you mean?\" suggestions 4. Verify file hasn't changed</p>"},{"location":"examples/file-editing/#extension-not-allowed","title":"\"Extension not allowed\"","text":"<p>Cause: File extension not in whitelist</p> <p>Solution: Add to <code>allowed_extensions</code> in config: </p><pre><code>tools:\n  file_edit:\n    allowed_extensions:\n      - \".py\"\n      - \".your_extension\"\n</code></pre><p></p>"},{"location":"examples/file-editing/#path-is-blocked","title":"\"Path is blocked\"","text":"<p>Cause: Path in <code>blocked_paths</code> list</p> <p>Solution: Remove from blocklist if safe: </p><pre><code>tools:\n  file_edit:\n    blocked_paths:\n      # Remove or comment out if needed\n      # - \"/your/path\"\n</code></pre><p></p>"},{"location":"examples/file-editing/#additional-resources","title":"Additional Resources","text":"<ul> <li>File Editing Guide - Comprehensive documentation</li> <li>Tool Calling - Complete tool reference</li> <li>Security - Security best practices</li> <li>Configuration - Profile configuration</li> </ul>"},{"location":"examples/file-editing/#feedback","title":"Feedback","text":"<p>Found an issue or have a suggestion? Please open an issue: https://github.com/goatbytes/consoul/issues</p>"},{"location":"research/read_url_tool_research/","title":"read_url Tool Research","text":""},{"location":"research/read_url_tool_research/#read_url-tool-research","title":"read_url Tool Research","text":"<p>Date: 2025-11-14 Researcher: Claude (via user request) Purpose: Research and design a <code>read_url</code> tool for Consoul AI to convert web URLs into LLM-readable content</p>"},{"location":"research/read_url_tool_research/#executive-summary","title":"Executive Summary","text":"<p>After comprehensive research, Jina AI Reader emerges as the best solution for a <code>read_url</code> tool due to: - \u2705 Zero configuration (no API key needed for basic usage) - \u2705 Fast response times (~2s) - \u2705 Clean markdown output optimized for LLMs - \u2705 Generous free tier (20 RPM no-auth, 500 RPM with free API key) - \u2705 Proven reliability (used by major AI products)</p> <p>Recommended Implementation: Jina Reader as primary, with optional trafilatura fallback for privacy-sensitive use cases.</p>"},{"location":"research/read_url_tool_research/#research-findings","title":"Research Findings","text":""},{"location":"research/read_url_tool_research/#1-jina-ai-reader","title":"1. Jina AI Reader","text":"<p>URL: <code>https://r.jina.ai/{target_url}</code></p>"},{"location":"research/read_url_tool_research/#capabilities","title":"Capabilities","text":"<ul> <li>Converts any URL to clean, LLM-optimized markdown</li> <li>Supports HTML pages, PDFs, and complex web structures</li> <li>Image captioning for webpage images</li> <li>Extracts structured content with metadata</li> <li>Supports 29 languages</li> <li>Returns clean markdown with proper formatting</li> </ul>"},{"location":"research/read_url_tool_research/#rate-limits-pricing","title":"Rate Limits &amp; Pricing","text":"Tier Rate Limit Price Tokens No Auth 20 RPM Free N/A Free API Key 500 RPM Free 10M tokens Premium 5,000 RPM Paid Token-based"},{"location":"research/read_url_tool_research/#performance","title":"Performance","text":"<ul> <li>Response Time: ~2 seconds average</li> <li>Output Size: Typically 100-500 lines for standard pages</li> <li>Quality: Excellent - removes nav, ads, footers automatically</li> </ul>"},{"location":"research/read_url_tool_research/#limitations","title":"Limitations","text":"<ul> <li>Cannot access login-protected content</li> <li>No content translation</li> <li>Publicly accessible URLs only</li> <li>Token limits on free tier</li> </ul>"},{"location":"research/read_url_tool_research/#test-results","title":"Test Results","text":"<p>GoatBytes.IO homepage (186 lines, 2.2s): </p><pre><code>Title: GoatBytes.IO\n\nURL Source: https://goatbytes.io/\n\nMarkdown Content:\nGoatBytes.IO\n===============\n\nSecure software solutions for a changing world\n==============================================\n...\n</code></pre><p></p> <p>GitHub profile (clean extraction, nav removed): </p><pre><code>Title: GoatBytes.IO\n\nURL Source: https://github.com/goatbytes\n\nOur mission is to develop secure software solutions that empower\nbusinesses to transform the world.\n\nPopular repositories Loading\n----------------------------\n...\n</code></pre><p></p> <p>Academic paper (arXiv): Successfully extracted paper title, abstract, and metadata.</p>"},{"location":"research/read_url_tool_research/#2-trafilatura","title":"2. Trafilatura","text":"<p>Installation: <code>pip install trafilatura</code></p>"},{"location":"research/read_url_tool_research/#capabilities_1","title":"Capabilities","text":"<ul> <li>Python library for web scraping and text extraction</li> <li>Supports markdown, XML, JSON, TXT output</li> <li>Language-aware extraction</li> <li>Sitemap and RSS feed discovery</li> <li>Link extraction and filtering</li> <li>Used by HuggingFace, IBM, Microsoft Research</li> </ul>"},{"location":"research/read_url_tool_research/#pricing","title":"Pricing","text":"<ul> <li>Free (open source)</li> <li>No rate limits (runs locally)</li> <li>No API dependencies</li> </ul>"},{"location":"research/read_url_tool_research/#performance_1","title":"Performance","text":"<ul> <li>Response Time: Varies (depends on page complexity)</li> <li>Quality: Good for news/articles, struggles with modern JS-heavy sites</li> <li>Privacy: Excellent (all local processing)</li> </ul>"},{"location":"research/read_url_tool_research/#test-results_1","title":"Test Results","text":"<p>Wikipedia: \u2705 Success - Clean extraction </p><pre><code># Python (programming language)\n\n**Python** is a high-level, general-purpose programming language.\nIts design philosophy emphasizes code readability with the use of\nsignificant indentation...\n</code></pre><p></p> <p>GoatBytes.IO: \u274c Failed - Returned None (likely JS-rendered content)</p> <p>Conclusion: Trafilatura works well for static content (news, Wikipedia, blogs) but fails on modern JS-heavy sites.</p>"},{"location":"research/read_url_tool_research/#3-markdownify","title":"3. Markdownify","text":"<p>Installation: Already installed in Consoul</p>"},{"location":"research/read_url_tool_research/#capabilities_2","title":"Capabilities","text":"<ul> <li>Python library for HTML-to-Markdown conversion</li> <li>Works with requests/BeautifulSoup</li> <li>Highly customizable conversion rules</li> </ul>"},{"location":"research/read_url_tool_research/#pricing_1","title":"Pricing","text":"<ul> <li>Free (open source)</li> <li>No dependencies on external services</li> </ul>"},{"location":"research/read_url_tool_research/#performance_2","title":"Performance","text":"<ul> <li>Fast (local processing)</li> <li>Quality: Raw - includes all HTML (nav, ads, scripts)</li> </ul>"},{"location":"research/read_url_tool_research/#test-results_2","title":"Test Results","text":"<p>GoatBytes.IO: \u26a0\ufe0f Partial success - Converted but included navigation, footers, etc.</p> <p>Conclusion: Good for simple HTML conversion but lacks intelligent content extraction.</p>"},{"location":"research/read_url_tool_research/#4-firecrawl","title":"4. Firecrawl","text":"<p>URL: <code>https://api.firecrawl.dev</code></p>"},{"location":"research/read_url_tool_research/#capabilities_3","title":"Capabilities","text":"<ul> <li>\"Web Data API for AI\" - LLM-optimized scraping</li> <li>JavaScript rendering support</li> <li>Recursive crawling</li> <li>Structured data extraction</li> <li>Python SDK available</li> </ul>"},{"location":"research/read_url_tool_research/#pricing_2","title":"Pricing","text":"Tier Credits Price Free 500 pages $0 Hobby 3,000 pages $16/mo Standard 100,000 pages $83/mo Growth 500,000 pages $333/mo"},{"location":"research/read_url_tool_research/#conclusion","title":"Conclusion","text":"<ul> <li>Excellent quality but requires API key</li> <li>Limited free tier (500 pages total, not per month)</li> <li>Not ideal for Consoul's \"zero-config\" philosophy</li> </ul>"},{"location":"research/read_url_tool_research/#5-other-solutions-evaluated","title":"5. Other Solutions Evaluated","text":""},{"location":"research/read_url_tool_research/#beautifulsoup-readability","title":"BeautifulSoup + Readability","text":"<ul> <li>Pros: Full control, local processing</li> <li>Cons: Requires complex extraction logic, maintenance burden</li> </ul>"},{"location":"research/read_url_tool_research/#newspaper3k","title":"newspaper3k","text":"<ul> <li>Pros: Article extraction, metadata parsing</li> <li>Cons: Unmaintained (last update 2020), Python 3.7 only</li> </ul>"},{"location":"research/read_url_tool_research/#scrapy","title":"Scrapy","text":"<ul> <li>Pros: Powerful, scalable</li> <li>Cons: Overkill for single-URL fetching, steep learning curve</li> </ul>"},{"location":"research/read_url_tool_research/#playwrightselenium-html2text","title":"Playwright/Selenium + html2text","text":"<ul> <li>Pros: Handles JavaScript rendering</li> <li>Cons: Heavy dependencies (browser), slow, complex setup</li> </ul>"},{"location":"research/read_url_tool_research/#comparison-matrix","title":"Comparison Matrix","text":"Solution Setup Free Speed Quality JS Sites Privacy Jina Reader None \u2705 20 RPM \u26a1 2s \u2b50\u2b50\u2b50\u2b50\u2b50 \u2705 \u26a0\ufe0f External Trafilatura pip \u2705 Unlimited \u26a1 Fast \u2b50\u2b50\u2b50\u2b50 \u274c \u2705 Local Markdownify pip \u2705 Unlimited \u26a1\u26a1 Instant \u2b50\u2b50 \u274c \u2705 Local Firecrawl API key \u26a0\ufe0f 500 total \u26a1 2-5s \u2b50\u2b50\u2b50\u2b50\u2b50 \u2705 \u26a0\ufe0f External"},{"location":"research/read_url_tool_research/#recommended-implementation","title":"Recommended Implementation","text":""},{"location":"research/read_url_tool_research/#primary-jina-ai-reader","title":"Primary: Jina AI Reader","text":"<p>Why Jina? 1. Zero friction - Works immediately, no setup 2. Best quality - Purpose-built for LLMs 3. Generous free tier - 20 RPM is enough for most use cases 4. Proven track record - Used by production AI applications 5. Handles modern web - JS rendering, complex layouts</p> <p>Configuration: </p><pre><code>class ReadUrlToolConfig(BaseModel):\n    \"\"\"Configuration for read_url tool.\"\"\"\n\n    # Jina Reader settings\n    jina_api_key: str | None = Field(\n        default=None,\n        description=\"Optional Jina AI API key for higher rate limits (500 RPM)\",\n    )\n    timeout: int = Field(\n        default=10,\n        gt=0,\n        le=30,\n        description=\"Request timeout in seconds\",\n    )\n\n    # Fallback settings\n    enable_fallback: bool = Field(\n        default=True,\n        description=\"Enable trafilatura fallback if Jina fails\",\n    )\n\n    # Output settings\n    include_images: bool = Field(\n        default=True,\n        description=\"Include image captions in output\",\n    )\n    max_length: int = Field(\n        default=50000,\n        description=\"Maximum output length in characters\",\n    )\n</code></pre><p></p> <p>Tool Signature: </p><pre><code>@tool\ndef read_url(\n    url: str,\n    use_fallback: bool | None = None,\n) -&gt; str:\n    \"\"\"Read and convert a web page to LLM-ready markdown.\n\n    Uses Jina AI Reader for best results, with optional trafilatura fallback.\n\n    Args:\n        url: URL to read (must be publicly accessible)\n        use_fallback: Force fallback to trafilatura (default: auto)\n\n    Returns:\n        Markdown-formatted content from the URL\n    \"\"\"\n</code></pre><p></p>"},{"location":"research/read_url_tool_research/#implementation-plan","title":"Implementation Plan","text":""},{"location":"research/read_url_tool_research/#phase-1-core-implementation-2-3-hours","title":"Phase 1: Core Implementation (2-3 hours)","text":"<ol> <li>Create ReadUrlToolConfig in <code>config/models.py</code></li> <li>Jina API key (optional)</li> <li>Timeout settings</li> <li>Fallback configuration</li> <li> <p>Output preferences</p> </li> <li> <p>Implement read_url.py in <code>ai/tools/implementations/</code></p> </li> <li><code>_read_with_jina()</code> - Primary method</li> <li><code>_read_with_trafilatura()</code> - Fallback method</li> <li><code>read_url()</code> - Main tool function with auto-fallback</li> <li> <p>Error handling and logging</p> </li> <li> <p>Export and register in tool registry</p> </li> <li>Add to <code>__init__.py</code> exports</li> <li>Register with <code>RiskLevel.SAFE</code></li> <li>Tags: <code>[\"web\", \"readonly\", \"content\"]</code></li> </ol>"},{"location":"research/read_url_tool_research/#phase-2-tui-integration-30-min","title":"Phase 2: TUI Integration (30 min)","text":"<ol> <li>Import and configure in <code>tui/app.py</code></li> <li>Set config from profile settings</li> <li>Register with tool registry</li> </ol>"},{"location":"research/read_url_tool_research/#phase-3-documentation-1-hour","title":"Phase 3: Documentation (1 hour)","text":"<ol> <li>Update <code>docs/tools.md</code> with:</li> <li>read_url capabilities</li> <li>Configuration examples</li> <li>Use cases and examples</li> <li> <p>Jina vs trafilatura comparison</p> </li> <li> <p>Add to README features list</p> </li> </ol>"},{"location":"research/read_url_tool_research/#phase-4-testing-1-hour","title":"Phase 4: Testing (1 hour)","text":"<ol> <li>Test with various URL types:</li> <li>Corporate websites (goatbytes.io)</li> <li>GitHub profiles/repos</li> <li>Documentation pages</li> <li>Academic papers (arXiv)</li> <li>News articles</li> <li> <p>Blog posts</p> </li> <li> <p>Test fallback behavior</p> </li> <li>Test rate limiting</li> <li>Test error handling</li> </ol> <p>Total Estimated Time: 4.5-5.5 hours</p>"},{"location":"research/read_url_tool_research/#use-cases","title":"Use Cases","text":""},{"location":"research/read_url_tool_research/#1-enhanced-web-search-workflow","title":"1. Enhanced Web Search Workflow","text":"<p>Current (limited): </p><pre><code>User: \"Find information about GoatBytes.IO\"\n\u2192 web_search returns URLs\n\u2192 User sees titles/snippets only\n</code></pre><p></p> <p>With read_url: </p><pre><code>User: \"Find and read information about GoatBytes.IO\"\n\u2192 web_search finds URLs\n\u2192 read_url fetches full content from top result\n\u2192 User gets complete, formatted content\n</code></pre><p></p>"},{"location":"research/read_url_tool_research/#2-documentation-reading","title":"2. Documentation Reading","text":"<pre><code># Find and read LangChain docs\nweb_search(\"LangChain tool calling documentation\")\n\u2192 Returns: https://python.langchain.com/docs/concepts/tools\n\nread_url(\"https://python.langchain.com/docs/concepts/tools\")\n\u2192 Returns: Full markdown documentation\n</code></pre>"},{"location":"research/read_url_tool_research/#3-competitive-analysis","title":"3. Competitive Analysis","text":"<pre><code># Read competitor websites\nread_url(\"https://competitor.com/features\")\n\u2192 Clean markdown of features page\n</code></pre>"},{"location":"research/read_url_tool_research/#4-academic-research","title":"4. Academic Research","text":"<pre><code># Read arXiv papers\nread_url(\"https://arxiv.org/abs/2301.00234\")\n\u2192 Paper abstract and metadata\n</code></pre>"},{"location":"research/read_url_tool_research/#security-considerations","title":"Security Considerations","text":""},{"location":"research/read_url_tool_research/#risks","title":"Risks","text":"<ol> <li>SSRF (Server-Side Request Forgery)</li> <li>Risk: LLM could try to access internal URLs (localhost, 192.168.x.x)</li> <li> <p>Mitigation: Validate URLs, block private IP ranges</p> </li> <li> <p>Rate Limiting</p> </li> <li>Risk: Excessive requests to Jina or target sites</li> <li> <p>Mitigation: Respect rate limits, implement caching</p> </li> <li> <p>Malicious Content</p> </li> <li>Risk: Fetching malicious pages, XSS in markdown</li> <li> <p>Mitigation: Jina sanitizes content, markdown is safe</p> </li> <li> <p>Privacy</p> </li> <li>Risk: Sending private URLs to external service (Jina)</li> <li>Mitigation: Offer trafilatura fallback, document privacy implications</li> </ol>"},{"location":"research/read_url_tool_research/#recommended-protections","title":"Recommended Protections","text":"<pre><code>def _validate_url(url: str) -&gt; bool:\n    \"\"\"Validate URL is safe to fetch.\"\"\"\n    parsed = urlparse(url)\n\n    # Must be HTTP(S)\n    if parsed.scheme not in ('http', 'https'):\n        raise ToolExecutionError(\"Only HTTP(S) URLs are supported\")\n\n    # Block private IPs\n    hostname = parsed.hostname\n    if hostname in ('localhost', '127.0.0.1', '0.0.0.0'):\n        raise ToolExecutionError(\"Cannot fetch localhost URLs\")\n\n    if hostname.startswith('192.168.') or hostname.startswith('10.'):\n        raise ToolExecutionError(\"Cannot fetch private network URLs\")\n\n    return True\n</code></pre>"},{"location":"research/read_url_tool_research/#future-enhancements","title":"Future Enhancements","text":""},{"location":"research/read_url_tool_research/#short-term-next-6-months","title":"Short-term (Next 6 months)","text":"<ol> <li>Caching - Cache fetched URLs to reduce API calls</li> <li>PDF Support - Use Jina's PDF reading capabilities</li> <li>Batch Reading - Read multiple URLs in one call</li> <li>Content Summarization - Optional LLM summarization of long content</li> </ol>"},{"location":"research/read_url_tool_research/#medium-term-6-12-months","title":"Medium-term (6-12 months)","text":"<ol> <li>Custom Extraction Rules - CSS selectors for specific content</li> <li>Screenshot Capture - Return page screenshots</li> <li>Archive Support - Read from web.archive.org</li> <li>Diff Detection - Track changes over time</li> </ol>"},{"location":"research/read_url_tool_research/#long-term-12-months","title":"Long-term (12+ months)","text":"<ol> <li>Site Crawling - Recursive site reading (like Firecrawl)</li> <li>JavaScript Execution - Full browser rendering (Playwright integration)</li> <li>Authentication - Read login-protected pages</li> <li>Custom Parsers - Plugin system for site-specific extraction</li> </ol>"},{"location":"research/read_url_tool_research/#alternatives-considered-but-rejected","title":"Alternatives Considered But Rejected","text":""},{"location":"research/read_url_tool_research/#why-not-beautifulsoup-custom-logic","title":"Why not BeautifulSoup + Custom Logic?","text":"<ul> <li>Maintenance burden - Need to handle edge cases</li> <li>Quality issues - Hard to extract clean content from modern sites</li> <li>Time investment - Reinventing what Jina already does well</li> </ul>"},{"location":"research/read_url_tool_research/#why-not-firecrawl","title":"Why not Firecrawl?","text":"<ul> <li>API key required - Breaks zero-config philosophy</li> <li>Limited free tier - 500 pages total (not monthly)</li> <li>Overkill - Too many features for simple URL reading</li> </ul>"},{"location":"research/read_url_tool_research/#why-not-playwrightselenium","title":"Why not Playwright/Selenium?","text":"<ul> <li>Heavy dependencies - Requires browser installation</li> <li>Slow - 5-10s per page vs 2s for Jina</li> <li>Complex - Harder to maintain and debug</li> </ul>"},{"location":"research/read_url_tool_research/#conclusion_1","title":"Conclusion","text":"<p>Recommended Approach: Implement <code>read_url</code> with: 1. Jina AI Reader as primary (zero-config, best quality) 2. Trafilatura as optional fallback (privacy, offline use) 3. URL validation for security 4. RiskLevel.SAFE (read-only, no system modification)</p> <p>Expected Benefits: - Complements <code>web_search</code> tool perfectly - Enables complete web research workflows - Zero-config for immediate use - Optional API key for power users (500 RPM) - Privacy-conscious fallback available</p> <p>Next Steps: 1. Create SOUL-XXX ticket for implementation 2. Implement Phase 1 (core functionality) 3. Test with real use cases 4. Document and deploy</p>"},{"location":"research/read_url_tool_research/#references","title":"References","text":"<ul> <li>Jina AI Reader: https://jina.ai/reader</li> <li>Trafilatura: https://github.com/adbar/trafilatura</li> <li>Firecrawl: https://www.firecrawl.dev/</li> <li>LangChain Tools: https://python.langchain.com/docs/concepts/tools</li> <li>SOUL-91: Advanced search tools research (web_search implementation)</li> </ul>"},{"location":"sdk/tool-calling-integration/","title":"Tool Calling SDK Integration","text":""},{"location":"sdk/tool-calling-integration/#tool-calling-sdk-integration","title":"Tool Calling SDK Integration","text":"<p>Guide for integrating Consoul's tool calling system into host applications without TUI dependencies.</p>"},{"location":"sdk/tool-calling-integration/#table-of-contents","title":"Table of Contents","text":"<ul> <li>Overview</li> <li>Architecture</li> <li>Quick Start</li> <li>Custom Approval Provider</li> <li>Custom Audit Logger</li> <li>Configuration</li> <li>Testing</li> <li>Examples</li> </ul>"},{"location":"sdk/tool-calling-integration/#overview","title":"Overview","text":"<p>Consoul is designed as an SDK that host applications can embed. The tool calling system works in any environment:</p> <ul> <li>CLI tools - Terminal-based approval prompts</li> <li>Web applications - HTTP API approval workflows</li> <li>IDE plugins - Dialog-based approval</li> <li>Headless services - Policy-based auto-approval</li> </ul> <p>The core tool system is independent of the Textual TUI, allowing full customization of approval UX and audit logging.</p>"},{"location":"sdk/tool-calling-integration/#when-to-use-custom-integration","title":"When to Use Custom Integration","text":"<p>Use custom providers when: - Building CLI tools (use <code>CliApprovalProvider</code>) - Integrating into web apps (implement HTTP-based approval) - Building IDE extensions (implement dialog-based approval) - Implementing custom audit/compliance requirements - Running in headless/automated environments</p> <p>Use the built-in TUI when: - Building interactive terminal applications - Wanting rich terminal UI out-of-the-box</p>"},{"location":"sdk/tool-calling-integration/#architecture","title":"Architecture","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502           Host Application                  \u2502\n\u2502  (CLI tool, Web app, IDE plugin)           \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                  \u2502\n                  \u251c\u2500\u25ba Custom ApprovalProvider\n                  \u2502   (Your UX implementation)\n                  \u2502\n                  \u251c\u2500\u25ba Custom AuditLogger\n                  \u2502   (Your logging backend)\n                  \u2502\n                  \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502         Consoul Core (SDK)                  \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502\n\u2502  \u2502 ToolRegistry                         \u2502  \u2502\n\u2502  \u2502  - Tool registration                 \u2502  \u2502\n\u2502  \u2502  - Approval coordination             \u2502  \u2502\n\u2502  \u2502  - Security validation               \u2502  \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502\n\u2502                                             \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502\n\u2502  \u2502 Tool Implementations                 \u2502  \u2502\n\u2502  \u2502  - bash_execute                      \u2502  \u2502\n\u2502  \u2502  - read_file                         \u2502  \u2502\n\u2502  \u2502  - Custom tools                      \u2502  \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"sdk/tool-calling-integration/#key-components","title":"Key Components","text":"<ul> <li>ToolRegistry: Central registry managing tools, approval, and audit</li> <li>ApprovalProvider: Protocol for implementing custom approval UX</li> <li>AuditLogger: Protocol for implementing custom audit logging</li> <li>ToolConfig: Configuration for tool behavior and policies</li> </ul>"},{"location":"sdk/tool-calling-integration/#quick-start","title":"Quick Start","text":""},{"location":"sdk/tool-calling-integration/#minimal-cli-example","title":"Minimal CLI Example","text":"<pre><code>from consoul.config.loader import load_config\nfrom consoul.ai.tools import ToolRegistry, RiskLevel\nfrom consoul.ai.tools.implementations import (\n    bash_execute,\n    read_file,\n    set_bash_config,\n    set_read_config,\n)\nfrom consoul.ai.tools.providers import CliApprovalProvider\n\n# Load configuration\nconfig = load_config()\n\n# Inject tool configs from profile (IMPORTANT: do this before registration)\nif config.tools.bash:\n    set_bash_config(config.tools.bash)\nif config.tools.read:\n    set_read_config(config.tools.read)\n\n# Create CLI approval provider\napproval_provider = CliApprovalProvider(verbose=True)\n\n# Create tool registry with custom provider\nregistry = ToolRegistry(\n    config=config.tools,\n    approval_provider=approval_provider\n)\n\n# Register tools\nregistry.register(bash_execute, risk_level=RiskLevel.CAUTION)\nregistry.register(read_file, risk_level=RiskLevel.SAFE, tags=[\"filesystem\", \"readonly\"])\n\n# Use with LangChain\nfrom langchain_anthropic import ChatAnthropic\n\nmodel = ChatAnthropic(model=\"claude-3-5-sonnet-20241022\")\nmodel_with_tools = registry.bind_to_model(model)\n\n# Now the AI can use tools with CLI approval prompts\nresponse = model_with_tools.invoke(\"Read README.md and list all Python files\")\n</code></pre>"},{"location":"sdk/tool-calling-integration/#configuration","title":"Configuration","text":"<pre><code># config.yaml\nprofiles:\n  default:\n    tools:\n      enabled: true\n      permission_policy: balanced\n      audit_logging: true\n</code></pre>"},{"location":"sdk/tool-calling-integration/#custom-approval-provider","title":"Custom Approval Provider","text":""},{"location":"sdk/tool-calling-integration/#protocol-definition","title":"Protocol Definition","text":"<pre><code>from typing import Protocol\nfrom consoul.ai.tools.approval import ToolApprovalRequest, ToolApprovalResponse\n\nclass ApprovalProvider(Protocol):\n    \"\"\"Protocol for custom approval implementations.\"\"\"\n\n    async def request_approval(\n        self, request: ToolApprovalRequest\n    ) -&gt; ToolApprovalResponse:\n        \"\"\"Request approval for tool execution.\n\n        Args:\n            request: Contains tool_name, arguments, risk_level, etc.\n\n        Returns:\n            ToolApprovalResponse with approved=True/False\n        \"\"\"\n        ...\n</code></pre>"},{"location":"sdk/tool-calling-integration/#cli-approval-built-in","title":"CLI Approval (Built-in)","text":"<p>Consoul provides <code>CliApprovalProvider</code> for terminal-based approval:</p> <pre><code>from consoul.ai.tools.providers import CliApprovalProvider\n\n# Basic usage\nprovider = CliApprovalProvider()\n\n# With options\nprovider = CliApprovalProvider(\n    show_arguments=True,  # Display tool arguments\n    verbose=True          # Show risk level and context\n)\n\nregistry = ToolRegistry(config.tools, approval_provider=provider)\n</code></pre> <p>Output: </p><pre><code>============================================================\nTool Execution Request: bash_execute\n============================================================\n\nArguments:\n  command: ls -la\n\nRisk Level: CAUTION\n\n============================================================\nApprove execution? (y/n):\n</code></pre><p></p>"},{"location":"sdk/tool-calling-integration/#web-approval-example","title":"Web Approval Example","text":"<p>For web applications, implement HTTP-based approval:</p> <pre><code>import aiohttp\nfrom consoul.ai.tools.approval import (\n    ApprovalProvider,\n    ToolApprovalRequest,\n    ToolApprovalResponse,\n)\n\nclass WebApprovalProvider:\n    \"\"\"HTTP-based approval for web applications.\"\"\"\n\n    def __init__(self, approval_url: str, auth_token: str):\n        self.approval_url = approval_url\n        self.auth_token = auth_token\n\n    async def request_approval(\n        self, request: ToolApprovalRequest\n    ) -&gt; ToolApprovalResponse:\n        \"\"\"Send approval request to web API.\"\"\"\n        async with aiohttp.ClientSession() as session:\n            async with session.post(\n                self.approval_url,\n                json={\n                    \"tool_name\": request.tool_name,\n                    \"arguments\": request.arguments,\n                    \"risk_level\": request.risk_level.value,\n                    \"tool_call_id\": request.tool_call_id,\n                },\n                headers={\"Authorization\": f\"Bearer {self.auth_token}\"},\n                timeout=aiohttp.ClientTimeout(total=60),\n            ) as resp:\n                if resp.status != 200:\n                    return ToolApprovalResponse(\n                        approved=False,\n                        reason=f\"HTTP {resp.status}\"\n                    )\n\n                data = await resp.json()\n                return ToolApprovalResponse(\n                    approved=data[\"approved\"],\n                    reason=data.get(\"reason\"),\n                )\n\n# Usage\nprovider = WebApprovalProvider(\n    approval_url=\"https://api.example.com/tool-approval\",\n    auth_token=\"your-token\"\n)\nregistry = ToolRegistry(config.tools, approval_provider=provider)\n</code></pre>"},{"location":"sdk/tool-calling-integration/#policy-based-auto-approval","title":"Policy-Based Auto-Approval","text":"<p>For headless environments, implement policy-based approval:</p> <pre><code>class PolicyApprovalProvider:\n    \"\"\"Auto-approve based on policy rules.\"\"\"\n\n    def __init__(self, allow_safe: bool = True, allow_caution: bool = False):\n        self.allow_safe = allow_safe\n        self.allow_caution = allow_caution\n\n    async def request_approval(\n        self, request: ToolApprovalRequest\n    ) -&gt; ToolApprovalResponse:\n        \"\"\"Auto-approve based on risk level.\"\"\"\n        from consoul.ai.tools import RiskLevel\n\n        if request.risk_level == RiskLevel.SAFE and self.allow_safe:\n            return ToolApprovalResponse(\n                approved=True,\n                reason=\"Auto-approved: SAFE risk level\"\n            )\n\n        if request.risk_level == RiskLevel.CAUTION and self.allow_caution:\n            return ToolApprovalResponse(\n                approved=True,\n                reason=\"Auto-approved: CAUTION risk level\"\n            )\n\n        return ToolApprovalResponse(\n            approved=False,\n            reason=f\"Policy denied: {request.risk_level.value}\"\n        )\n</code></pre>"},{"location":"sdk/tool-calling-integration/#custom-audit-logger","title":"Custom Audit Logger","text":""},{"location":"sdk/tool-calling-integration/#protocol-definition_1","title":"Protocol Definition","text":"<pre><code>from typing import Protocol\nfrom consoul.ai.tools.audit import AuditEvent\n\nclass AuditLogger(Protocol):\n    \"\"\"Protocol for custom audit logging.\"\"\"\n\n    async def log_event(self, event: AuditEvent) -&gt; None:\n        \"\"\"Log an audit event.\n\n        Args:\n            event: Contains timestamp, event_type, tool_name, arguments, result, etc.\n        \"\"\"\n        ...\n</code></pre>"},{"location":"sdk/tool-calling-integration/#database-audit-logger","title":"Database Audit Logger","text":"<pre><code>import asyncpg\nfrom consoul.ai.tools.audit import AuditLogger, AuditEvent\n\nclass PostgresAuditLogger:\n    \"\"\"Audit logger using PostgreSQL.\"\"\"\n\n    def __init__(self, connection_string: str):\n        self.connection_string = connection_string\n\n    async def log_event(self, event: AuditEvent) -&gt; None:\n        \"\"\"Log event to PostgreSQL.\"\"\"\n        try:\n            conn = await asyncpg.connect(self.connection_string)\n\n            await conn.execute(\n                \"\"\"\n                INSERT INTO tool_audit_log (\n                    timestamp, event_type, tool_name, arguments,\n                    decision, result, duration_ms, error\n                )\n                VALUES ($1, $2, $3, $4, $5, $6, $7, $8)\n                \"\"\",\n                event.timestamp,\n                event.event_type,\n                event.tool_name,\n                json.dumps(event.arguments),\n                event.decision,\n                event.result,\n                event.duration_ms,\n                event.error,\n            )\n\n            await conn.close()\n        except Exception as e:\n            # Don't break tool execution on audit failures\n            import sys\n            print(f\"Audit logging error: {e}\", file=sys.stderr)\n\n# Usage\naudit_logger = PostgresAuditLogger(\"postgresql://localhost/consoul\")\nregistry = ToolRegistry(\n    config.tools,\n    approval_provider=provider,\n    audit_logger=audit_logger\n)\n</code></pre>"},{"location":"sdk/tool-calling-integration/#multi-backend-logger","title":"Multi-Backend Logger","text":"<pre><code>class MultiAuditLogger:\n    \"\"\"Log to multiple backends simultaneously.\"\"\"\n\n    def __init__(self, loggers: list[AuditLogger]):\n        self.loggers = loggers\n\n    async def log_event(self, event: AuditEvent) -&gt; None:\n        \"\"\"Log to all backends concurrently.\"\"\"\n        import asyncio\n\n        tasks = [logger.log_event(event) for logger in self.loggers]\n        await asyncio.gather(*tasks, return_exceptions=True)\n\n# Usage: Log to both file and database\nfrom consoul.ai.tools.audit import FileAuditLogger\n\nmulti_logger = MultiAuditLogger([\n    FileAuditLogger(Path.home() / \".consoul\" / \"audit.jsonl\"),\n    PostgresAuditLogger(\"postgresql://localhost/consoul\"),\n])\n</code></pre>"},{"location":"sdk/tool-calling-integration/#configuration_1","title":"Configuration","text":""},{"location":"sdk/tool-calling-integration/#programmatic-setup","title":"Programmatic Setup","text":"<pre><code>from consoul.config.models import ToolConfig, BashToolConfig\nfrom consoul.ai.tools.permissions import PermissionPolicy\n\n# Create tool configuration programmatically\ntool_config = ToolConfig(\n    enabled=True,\n    permission_policy=PermissionPolicy.BALANCED,\n    audit_logging=True,\n    audit_log_file=Path(\"/var/log/consoul/audit.jsonl\"),\n    bash=BashToolConfig(\n        timeout=60,\n        whitelist_patterns=[\"git status\", \"git log\", \"ls\", \"pwd\"],\n        blocked_patterns=[\"sudo\", \"rm -rf /\"],\n    ),\n)\n\nregistry = ToolRegistry(config=tool_config)\n</code></pre>"},{"location":"sdk/tool-calling-integration/#per-user-policies","title":"Per-User Policies","text":"<pre><code>def create_user_registry(user_id: str, user_role: str) -&gt; ToolRegistry:\n    \"\"\"Create tool registry with user-specific policy.\"\"\"\n\n    # Select policy based on user role\n    if user_role == \"admin\":\n        policy = PermissionPolicy.TRUSTING\n    elif user_role == \"developer\":\n        policy = PermissionPolicy.BALANCED\n    else:\n        policy = PermissionPolicy.PARANOID\n\n    config = ToolConfig(\n        enabled=True,\n        permission_policy=policy,\n        audit_logging=True,\n    )\n\n    # Custom audit logger with user context\n    audit_logger = UserAuditLogger(user_id=user_id)\n\n    return ToolRegistry(\n        config=config,\n        approval_provider=get_user_approval_provider(user_id),\n        audit_logger=audit_logger,\n    )\n</code></pre>"},{"location":"sdk/tool-calling-integration/#environment-based-configuration","title":"Environment-Based Configuration","text":"<pre><code>import os\n\ndef get_environment_config() -&gt; ToolConfig:\n    \"\"\"Load configuration based on environment.\"\"\"\n    env = os.getenv(\"ENVIRONMENT\", \"development\")\n\n    if env == \"production\":\n        return ToolConfig(\n            enabled=True,\n            permission_policy=PermissionPolicy.PARANOID,\n            audit_logging=True,\n            audit_log_file=Path(\"/var/log/consoul/audit.jsonl\"),\n        )\n    elif env == \"development\":\n        return ToolConfig(\n            enabled=True,\n            permission_policy=PermissionPolicy.BALANCED,\n            audit_logging=True,\n        )\n    else:  # testing\n        return ToolConfig(\n            enabled=True,\n            permission_policy=PermissionPolicy.UNRESTRICTED,\n            audit_logging=False,\n        )\n</code></pre>"},{"location":"sdk/tool-calling-integration/#testing","title":"Testing","text":""},{"location":"sdk/tool-calling-integration/#mock-approval-provider","title":"Mock Approval Provider","text":"<pre><code>from consoul.ai.tools.approval import ToolApprovalRequest, ToolApprovalResponse\n\nclass MockApprovalProvider:\n    \"\"\"Mock provider for testing.\"\"\"\n\n    def __init__(self, always_approve: bool = True):\n        self.always_approve = always_approve\n        self.requests = []  # Track requests for assertions\n\n    async def request_approval(\n        self, request: ToolApprovalRequest\n    ) -&gt; ToolApprovalResponse:\n        self.requests.append(request)\n\n        return ToolApprovalResponse(\n            approved=self.always_approve,\n            reason=\"Mock approval\" if self.always_approve else \"Mock denial\"\n        )\n</code></pre>"},{"location":"sdk/tool-calling-integration/#unit-test-example","title":"Unit Test Example","text":"<pre><code>import pytest\nfrom consoul.config.models import ToolConfig\nfrom consoul.ai.tools import ToolRegistry, RiskLevel\nfrom consoul.ai.tools.permissions import PermissionPolicy\n\n@pytest.fixture\ndef mock_registry():\n    \"\"\"Create registry with mock approval.\"\"\"\n    config = ToolConfig(\n        enabled=True,\n        permission_policy=PermissionPolicy.UNRESTRICTED,\n        audit_logging=False,\n    )\n\n    provider = MockApprovalProvider(always_approve=True)\n\n    return ToolRegistry(config, approval_provider=provider)\n\n@pytest.mark.asyncio\nasync def test_tool_approval(mock_registry):\n    \"\"\"Test tool approval workflow.\"\"\"\n    from langchain_core.tools import tool\n\n    @tool\n    def test_tool(x: int) -&gt; int:\n        \"\"\"Test tool.\"\"\"\n        return x * 2\n\n    mock_registry.register(test_tool, risk_level=RiskLevel.SAFE)\n\n    # Request approval\n    response = await mock_registry.request_tool_approval(\n        tool_name=\"test_tool\",\n        arguments={\"x\": 5},\n    )\n\n    assert response.approved\n</code></pre>"},{"location":"sdk/tool-calling-integration/#integration-test-pattern","title":"Integration Test Pattern","text":"<pre><code>@pytest.mark.asyncio\nasync def test_end_to_end_tool_execution():\n    \"\"\"Test complete tool execution with real components.\"\"\"\n    from consoul.config.loader import load_config\n    from consoul.ai.tools import bash_execute\n\n    config = load_config()\n\n    # Use real CLI provider but with mock input\n    provider = CliApprovalProvider()\n    registry = ToolRegistry(config.tools, approval_provider=provider)\n    registry.register(bash_execute, risk_level=RiskLevel.SAFE)\n\n    # Execute safe command\n    result = bash_execute(command=\"echo 'test'\")\n    assert \"test\" in result\n</code></pre>"},{"location":"sdk/tool-calling-integration/#working-with-code-search-tools","title":"Working with Code Search Tools","text":""},{"location":"sdk/tool-calling-integration/#overview_1","title":"Overview","text":"<p>Consoul provides three complementary code search tools for semantic code analysis and navigation:</p> <ul> <li>grep_search - Fast text-based pattern matching using ripgrep</li> <li>code_search - AST-based symbol definition search using tree-sitter</li> <li>find_references - Symbol usage finder for refactoring analysis</li> </ul> <p>All search tools are RiskLevel.SAFE (read-only) and can be auto-approved in most security policies.</p>"},{"location":"sdk/tool-calling-integration/#quick-start-search-tools","title":"Quick Start - Search Tools","text":"<pre><code>from consoul.ai.tools import ToolRegistry, RiskLevel\nfrom consoul.ai.tools.implementations import grep_search, code_search, find_references\n\n# Register all search tools (all SAFE - read-only)\nregistry = ToolRegistry(config=config.tools, approval_provider=provider)\n\nregistry.register(grep_search, risk_level=RiskLevel.SAFE, tags=[\"search\", \"text\"])\nregistry.register(code_search, risk_level=RiskLevel.SAFE, tags=[\"search\", \"ast\"])\nregistry.register(find_references, risk_level=RiskLevel.SAFE, tags=[\"search\", \"refactoring\"])\n\n# Bind to AI model for tool calling\nmodel_with_tools = registry.bind_to_model(model)\n\n# AI can now use natural language search\nresponse = model_with_tools.invoke(\"\"\"\nFind the ToolRegistry class definition, then find all places where it's instantiated\n\"\"\")\n</code></pre>"},{"location":"sdk/tool-calling-integration/#pattern-1-programmatic-search-workflow","title":"Pattern 1: Programmatic Search Workflow","text":"<pre><code>from consoul.ai.tools import grep_search, code_search, find_references\nimport json\n\ndef analyze_symbol(symbol_name: str) -&gt; dict:\n    \"\"\"Complete symbol analysis for refactoring.\"\"\"\n\n    # Step 1: Find definition\n    definition = code_search.invoke({\n        \"query\": symbol_name,\n        \"symbol_type\": \"function\",\n        \"path\": \"src/\"\n    })\n\n    def_data = json.loads(definition)\n    if not def_data:\n        return {\"error\": f\"Symbol '{symbol_name}' not found\"}\n\n    # Step 2: Find all usages\n    references = find_references.invoke({\n        \"symbol\": symbol_name,\n        \"scope\": \"project\",\n        \"include_definition\": True\n    })\n\n    ref_data = json.loads(references)\n\n    # Step 3: Analyze impact\n    files_affected = {ref[\"file\"] for ref in ref_data}\n\n    return {\n        \"symbol\": symbol_name,\n        \"definition\": def_data[0],\n        \"usage_count\": len(ref_data) - 1,  # Exclude definition\n        \"files_affected\": len(files_affected),\n        \"references\": ref_data\n    }\n\n# Use in your application\nanalysis = analyze_symbol(\"process_data\")\nprint(f\"Refactoring impact: {analysis['usage_count']} usages in {analysis['files_affected']} files\")\n</code></pre>"},{"location":"sdk/tool-calling-integration/#pattern-2-multi-step-discovery","title":"Pattern 2: Multi-Step Discovery","text":"<pre><code>from consoul import Consoul\n\n# Initialize with search tools enabled\nconsole = Consoul(tools=True, profile=\"default\")\n\n# Step 1: Fast text search to find candidates\ngrep_results = console.chat(\"Find all files that mention 'authentication'\")\n\n# Step 2: Find semantic definitions\ncode_results = console.chat(\"Find the authenticate_user function definition\")\n\n# Step 3: Find all usages\nref_results = console.chat(\"Find all places where authenticate_user is called\")\n\n# AI automatically chooses the right tool for each step\n</code></pre>"},{"location":"sdk/tool-calling-integration/#pattern-3-dead-code-detection","title":"Pattern 3: Dead Code Detection","text":"<pre><code>def find_unused_functions(directory: str) -&gt; list[dict]:\n    \"\"\"Find functions with zero references (potential dead code).\"\"\"\n\n    # Get all functions in directory\n    all_functions = code_search.invoke({\n        \"symbol_type\": \"function\",\n        \"path\": directory\n    })\n\n    functions = json.loads(all_functions)\n    unused = []\n\n    for func in functions:\n        # Check for usages\n        refs = find_references.invoke({\n            \"symbol\": func[\"name\"],\n            \"scope\": \"directory\",\n            \"path\": directory\n        })\n\n        ref_count = len(json.loads(refs))\n\n        if ref_count == 0:\n            unused.append(func)\n\n    return unused\n\n# Use in code review automation\nunused = find_unused_functions(\"src/legacy/\")\nprint(f\"Found {len(unused)} potentially unused functions\")\n</code></pre>"},{"location":"sdk/tool-calling-integration/#configuration-for-search-tools","title":"Configuration for Search Tools","text":"<pre><code>from consoul.config.models import (\n    CodeSearchToolConfig,\n    FindReferencesToolConfig,\n    GrepToolConfig\n)\n\n# Configure search behavior\nconfig = ToolConfig(\n    enabled=True,\n    permission_policy=PermissionPolicy.BALANCED,  # Auto-approve SAFE tools\n\n    # grep_search config\n    grep=GrepToolConfig(\n        # No special config needed - uses ripgrep or grep fallback\n    ),\n\n    # code_search config\n    code_search=CodeSearchToolConfig(\n        max_file_size_kb=1024,  # Skip files &gt;1MB\n        max_results=100,        # Limit results to prevent overflow\n        supported_extensions=[\".py\", \".js\", \".ts\", \".go\", \".rs\"]\n    ),\n\n    # find_references config\n    find_references=FindReferencesToolConfig(\n        max_file_size_kb=1024,\n        max_results=100,\n        supported_extensions=[\".py\", \".js\", \".ts\", \".go\", \".rs\"]\n    )\n)\n</code></pre>"},{"location":"sdk/tool-calling-integration/#performance-optimization","title":"Performance Optimization","text":"<p>Both <code>code_search</code> and <code>find_references</code> use intelligent caching for 5-10x speedup:</p> <pre><code>from consoul.ai.tools.cache import CodeSearchCache\n\n# Optional: Pre-warm cache for frequently searched directories\ncache = CodeSearchCache()\n\n# First search - parses files (slow)\nresult1 = code_search.invoke({\"query\": \".*\", \"path\": \"src/core/\"})\n\n# Second search - uses cache (fast)\nresult2 = find_references.invoke({\"symbol\": \"MyClass\", \"scope\": \"directory\", \"path\": \"src/core/\"})\n\n# Check cache stats\nstats = cache.get_stats()\nprint(f\"Cache hit rate: {stats.hit_rate:.1%}\")  # Should be &gt;50% after warmup\n</code></pre>"},{"location":"sdk/tool-calling-integration/#language-support","title":"Language Support","text":"Language Extensions grep_search code_search find_references Python .py \u2705 \u2705 \u2705 JavaScript .js, .jsx \u2705 \u2705 \u2705 TypeScript .ts, .tsx \u2705 \u2705 \u2705 Go .go \u2705 \u2705 \u2705 Kotlin .kt \u2705 \u2705 \u2705 Rust .rs \u2705 \u2705 \u274c Java .java \u2705 \u2705 \u274c C/C++ .c, .cpp, .h, .hpp \u2705 \u2705 \u274c <p>\u2705 Full support | \u274c No support</p> <p>Note: find_references supports Python, JavaScript/TypeScript, Go, Kotlin, and Java. For other languages, use grep_search for text-based reference finding.</p>"},{"location":"sdk/tool-calling-integration/#use-cases","title":"Use Cases","text":"Use Case Tool Why Find TODO comments <code>grep_search</code> Comments aren't in AST Find function definition <code>code_search</code> Semantic definition search Find all function calls <code>find_references</code> Usage tracking Search across any file type <code>grep_search</code> Works on all text Pre-refactoring analysis <code>find_references</code> Impact analysis Code inventory <code>code_search</code> List all symbols Dead code detection <code>code_search</code> + <code>find_references</code> Definition without usages"},{"location":"sdk/tool-calling-integration/#documentation","title":"Documentation","text":"<p>See comprehensive guides: - Code Search Guide - Complete usage guide - Troubleshooting - Common issues - Working Examples - Python code</p>"},{"location":"sdk/tool-calling-integration/#working-with-built-in-tools","title":"Working with Built-in Tools","text":""},{"location":"sdk/tool-calling-integration/#read_file-tool","title":"read_file Tool","text":"<p>The <code>read_file</code> tool allows AI agents to read file contents with security controls and truncation limits.</p>"},{"location":"sdk/tool-calling-integration/#basic-usage","title":"Basic Usage","text":"<pre><code>from consoul.ai.tools import ToolRegistry, RiskLevel\nfrom consoul.ai.tools.implementations import read_file\n\nregistry = ToolRegistry(config=config.tools, approval_provider=provider)\n\n# Register as SAFE (read-only, no side effects)\nregistry.register(\n    read_file,\n    risk_level=RiskLevel.SAFE,\n    tags=[\"filesystem\", \"readonly\"]\n)\n\n# AI can now read files\nresponse = model_with_tools.invoke(\"Read the README.md file\")\n</code></pre>"},{"location":"sdk/tool-calling-integration/#custom-configuration","title":"Custom Configuration","text":"<pre><code>from consoul.ai.tools.implementations import read_file, set_read_config\nfrom consoul.config.models import ReadToolConfig\n\n# Configure read tool limits\nread_config = ReadToolConfig(\n    max_lines_default=1000,        # Max lines per read (without offset/limit)\n    max_line_length=2000,          # Truncate lines longer than this\n    max_output_chars=40000,        # Max total output characters\n    allowed_extensions=[\".py\", \".md\", \".txt\", \".json\"],  # Whitelist extensions\n    blocked_paths=[\"/etc/shadow\", \"/proc\"],  # Blacklist sensitive paths\n    enable_pdf=True,               # Enable PDF support (requires pypdf)\n    pdf_max_pages=50,              # Max PDF pages to read\n)\n\n# Inject config before registration\nset_read_config(read_config)\nregistry.register(read_file, risk_level=RiskLevel.SAFE)\n</code></pre>"},{"location":"sdk/tool-calling-integration/#security-features","title":"Security Features","text":"<ul> <li>Extension filtering: Only allow specific file types</li> <li>Path blocking: Prevent access to sensitive paths</li> <li>Line truncation: Limit per-line characters (prevents minified files)</li> <li>Output limits: Cap total character count (prevents context overflow)</li> <li>Binary detection: Rejects non-text files (except PDFs if enabled)</li> </ul>"},{"location":"sdk/tool-calling-integration/#pdf-support-optional","title":"PDF Support (Optional)","text":"<pre><code># Install PDF support\n# pip install consoul[pdf]\n\n# Enable in config\nconfig = ReadToolConfig(\n    enable_pdf=True,\n    pdf_max_pages=50,\n    allowed_extensions=[\".pdf\", \".txt\", \".md\"]\n)\nset_read_config(config)\n\n# AI can now read PDFs\nresponse = model_with_tools.invoke(\"Read documentation.pdf pages 1-5\")\n</code></pre>"},{"location":"sdk/tool-calling-integration/#examples","title":"Examples","text":"<p>Complete working examples are available in <code>examples/sdk/</code>:</p> <ul> <li>cli_approval_example.py - Complete CLI tool with approval</li> <li>web_approval_provider.py - HTTP-based approval implementation</li> <li>custom_audit_logger.py - Database and cloud audit loggers</li> <li>read_file_example.py - Working with the read_file tool</li> </ul>"},{"location":"sdk/tool-calling-integration/#best-practices","title":"Best Practices","text":""},{"location":"sdk/tool-calling-integration/#approval-providers","title":"Approval Providers","text":"<p>\u2705 DO: - Implement timeout handling - Log approval decisions - Provide clear context to users - Handle network failures gracefully - Use async/await properly</p> <p>\u274c DON'T: - Block the event loop with sync I/O - Throw exceptions on denial - Store secrets in plain text - Skip validation of responses</p>"},{"location":"sdk/tool-calling-integration/#audit-loggers","title":"Audit Loggers","text":"<p>\u2705 DO: - Handle logging failures gracefully (don't break tool execution) - Use structured logging formats - Implement log rotation - Secure sensitive data - Batch writes for performance</p> <p>\u274c DON'T: - Block tool execution on logging errors - Log sensitive data (passwords, keys) - Use synchronous I/O - Ignore storage limits</p>"},{"location":"sdk/tool-calling-integration/#configuration_2","title":"Configuration","text":"<p>\u2705 DO: - Use environment-specific configs - Implement per-user policies - Document security implications - Test policy enforcement - Validate configuration on startup</p> <p>\u274c DON'T: - Use UNRESTRICTED in production - Hardcode credentials - Skip validation - Ignore policy violations</p>"},{"location":"sdk/tool-calling-integration/#troubleshooting","title":"Troubleshooting","text":""},{"location":"sdk/tool-calling-integration/#provider-not-called","title":"Provider Not Called","text":"<p>Problem: Custom approval provider not being invoked</p> <p>Solutions: 1. Ensure <code>permission_policy</code> is not set to <code>UNRESTRICTED</code> 2. Check tool risk level requires approval 3. Verify provider is passed to <code>ToolRegistry</code> 4. Check tool is not in whitelist</p>"},{"location":"sdk/tool-calling-integration/#async-issues","title":"Async Issues","text":"<p>Problem: \"coroutine was never awaited\" errors</p> <p>Solutions: 1. Always use <code>async def</code> for provider methods 2. Use <code>await</code> when calling async functions 3. Don't call async functions from sync code 4. Use <code>asyncio.run()</code> for top-level execution</p>"},{"location":"sdk/tool-calling-integration/#audit-logging-not-working","title":"Audit Logging Not Working","text":"<p>Problem: Events not appearing in audit log</p> <p>Solutions: 1. Verify <code>audit_logging=True</code> in config 2. Check log file path is writable 3. Look for errors in stderr 4. Ensure audit logger is passed to registry</p>"},{"location":"sdk/tool-calling-integration/#api-reference","title":"API Reference","text":"<p>See full API documentation: - Tool Calling Guide - Configuration Reference - API Documentation</p>"},{"location":"user-guide/cli-chat/","title":"Chat Mode","text":""},{"location":"user-guide/cli-chat/#cli-chat-mode","title":"CLI Chat Mode","text":"<p>Interactive command-line chat sessions with AI models, featuring streaming responses, slash commands, and tool execution.</p>"},{"location":"user-guide/cli-chat/#overview","title":"Overview","text":"<p>CLI chat mode provides a lightweight, terminal-based interface for conversing with AI models. Unlike the full TUI mode, CLI chat focuses on quick, single-session interactions with minimal visual overhead.</p>"},{"location":"user-guide/cli-chat/#when-to-use-cli-chat","title":"When to Use CLI Chat","text":"<p>Use CLI chat for:</p> <ul> <li>Quick questions and answers</li> <li>Debugging sessions</li> <li>Code assistance conversations</li> <li>Scripting and automation</li> <li>Remote SSH sessions</li> <li>Minimal terminal environments</li> </ul> <p>Use TUI mode for:</p> <ul> <li>Long, complex conversations</li> <li>Multiple simultaneous chats</li> <li>Rich visual feedback</li> <li>Image analysis with attachments</li> <li>Advanced session management</li> </ul>"},{"location":"user-guide/cli-chat/#getting-started","title":"Getting Started","text":""},{"location":"user-guide/cli-chat/#basic-usage","title":"Basic Usage","text":"<p>Launch an interactive chat session:</p> <pre><code>consoul chat\n</code></pre> <p>You'll see a welcome message with your profile and model information:</p> <pre><code>\u256d\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 Consoul Chat \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256e\n\u2502 Profile: default                                  \u2502\n\u2502 Model: anthropic/claude-3-5-sonnet-20241022       \u2502\n\u2502                                                   \u2502\n\u2502 Type /help for commands | exit or Ctrl+C to quit \u2502\n\u2502 Escape clears input                               \u2502\n\u2570\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256f\n\nYou: _\n</code></pre>"},{"location":"user-guide/cli-chat/#your-first-conversation","title":"Your First Conversation","text":"<p>Type your message and press Enter:</p> <pre><code>You: What is the difference between lists and tuples in Python?\nAssistant: The main differences between lists and tuples in Python are...\n[Response with markdown formatting and syntax highlighting]\n\nYou: Can you show me an example?\nAssistant: Certainly! Here's an example...\n\nYou: /tokens\n\u256d\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 Token Usage \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256e\n\u2502 Messages: 2                        \u2502\n\u2502 Tokens: 245 / 200,000 (0.1%)       \u2502\n\u2502 Model: claude-3-5-sonnet-20241022  \u2502\n\u2570\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256f\n\nYou: /exit\nExiting...\n\n\u256d\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 Session Summary \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256e\n\u2502 Messages: 2                            \u2502\n\u2502 Tokens: 245                            \u2502\n\u2570\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256f\n\nGoodbye!\n</code></pre>"},{"location":"user-guide/cli-chat/#exiting-a-session","title":"Exiting a Session","text":"<p>There are multiple ways to exit:</p> <ul> <li>Type <code>exit</code> and press Enter</li> <li>Press <code>Ctrl+C</code></li> <li>Press <code>Ctrl+D</code></li> <li>Use the <code>/exit</code> or <code>/quit</code> slash command</li> </ul>"},{"location":"user-guide/cli-chat/#command-line-options","title":"Command-Line Options","text":""},{"location":"user-guide/cli-chat/#model-selection","title":"Model Selection","text":"<p>Override the default model from your profile:</p> <pre><code># Use GPT-4o\nconsoul chat --model gpt-4o\n\n# Use Ollama local model\nconsoul chat --model llama3\n\n# Use Claude Opus\nconsoul chat --model claude-3-opus-20240229\n</code></pre> <p>Short form:</p> <pre><code>consoul chat -m gpt-4o\n</code></pre>"},{"location":"user-guide/cli-chat/#streaming-control","title":"Streaming Control","text":"<p>Disable token-by-token streaming for instant full responses:</p> <pre><code>consoul chat --no-stream\n</code></pre> <p>This shows the complete response at once instead of streaming it token-by-token.</p>"},{"location":"user-guide/cli-chat/#markdown-rendering","title":"Markdown Rendering","text":"<p>Disable rich markdown rendering for plain text output:</p> <pre><code>consoul chat --no-markdown\n</code></pre> <p>Useful for: - Copying responses to clipboard - Piping output to other commands - Terminal compatibility issues</p>"},{"location":"user-guide/cli-chat/#tool-execution","title":"Tool Execution","text":"<p>Override tool execution settings:</p> <pre><code># Disable tools for this session\nconsoul chat --no-tools\n\n# Enable tools (overrides config)\nconsoul chat --tools\n</code></pre> <p>See Tool Execution &amp; Approval for details.</p>"},{"location":"user-guide/cli-chat/#multi-line-input","title":"Multi-Line Input","text":"<p>Enable multi-line input mode for entering code blocks:</p> <pre><code>consoul chat --multiline\n</code></pre> <p>In multi-line mode: - Press <code>Enter</code> to add new lines - Press <code>Alt+Enter</code> to submit your message</p>"},{"location":"user-guide/cli-chat/#global-options","title":"Global Options","text":"<p>These work with all Consoul commands:</p> <pre><code># Use specific profile\nconsoul --profile creative chat\n\n# Override temperature\nconsoul --temperature 0.2 chat\n\n# Set max tokens\nconsoul --max-tokens 1000 chat\n\n# Combine options\nconsoul --profile code-assistant --temperature 0.1 chat --model gpt-4o\n</code></pre>"},{"location":"user-guide/cli-chat/#keyboard-shortcuts","title":"Keyboard Shortcuts","text":"<p>Master these shortcuts for efficient chat sessions:</p> Shortcut Action Enter Send message (submit in single-line mode) Alt+Enter Submit message (in multi-line mode only) Ctrl+C Quit the chat session Ctrl+D Quit the chat session (EOF) Escape Clear current input line Up Arrow Navigate to previous input (history) Down Arrow Navigate to next input (history) Home Move cursor to start of line End Move cursor to end of line"},{"location":"user-guide/cli-chat/#history-navigation","title":"History Navigation","text":"<p>Use arrow keys to navigate through your input history:</p> <pre><code>You: How do I sort a list?\nAssistant: You can use the sorted() function...\n\nYou: [Press Up Arrow]\nYou: How do I sort a list? [Previous input restored]\n\nYou: [Press Down Arrow]\nYou: [Empty - returns to current input]\n</code></pre>"},{"location":"user-guide/cli-chat/#slash-commands","title":"Slash Commands","text":"<p>Slash commands provide in-session control without exiting. Type <code>/help</code> to see all available commands.</p>"},{"location":"user-guide/cli-chat/#command-reference","title":"Command Reference","text":""},{"location":"user-guide/cli-chat/#help-show-available-commands","title":"<code>/help</code> - Show Available Commands","text":"<p>Display all slash commands with descriptions:</p> <pre><code>You: /help\n\n\u256d\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 Available Slash Commands \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256e\n\u2502 Command     Arguments      Description              \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 /help                      Show this help message   \u2502\n\u2502 /clear                     Clear conversation       \u2502\n\u2502 /tokens                    Show token usage         \u2502\n\u2502 /stats                     Show session statistics  \u2502\n\u2502 /exit                      Exit chat session        \u2502\n\u2502 /model      &lt;model_name&gt;   Switch to different model\u2502\n\u2502 /tools      &lt;on|off&gt;       Toggle tool execution    \u2502\n\u2502 /export     &lt;filename&gt;     Export conversation      \u2502\n\u2570\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256f\n</code></pre> <p>Alias: <code>/help</code> can also be invoked as <code>/?</code></p>"},{"location":"user-guide/cli-chat/#clear-clear-conversation-history","title":"<code>/clear</code> - Clear Conversation History","text":"<p>Remove all messages from the current conversation (preserves system prompt):</p> <pre><code>You: /clear\n\u2713 Conversation history cleared (system prompt preserved)\n</code></pre> <p>Use this to start fresh without exiting and restarting.</p>"},{"location":"user-guide/cli-chat/#tokens-show-token-usage","title":"<code>/tokens</code> - Show Token Usage","text":"<p>Display current token count and usage percentage:</p> <pre><code>You: /tokens\n\n\u256d\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 Token Usage \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256e\n\u2502 Messages: 5                        \u2502\n\u2502 Tokens: 1,247 / 200,000 (0.6%)     \u2502\n\u2502 Model: claude-3-5-sonnet-20241022  \u2502\n\u2570\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256f\n</code></pre> <p>Helps monitor usage against model context limits.</p>"},{"location":"user-guide/cli-chat/#stats-session-statistics","title":"<code>/stats</code> - Session Statistics","text":"<p>Show detailed session information:</p> <pre><code>You: /stats\n\n\u256d\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 Session Statistics \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256e\n\u2502 Model: anthropic/claude-3-5-sonnet-20241022\u2502\n\u2502 Session ID: abc123def456                   \u2502\n\u2502                                            \u2502\n\u2502 Messages:                                  \u2502\n\u2502   User: 3                                  \u2502\n\u2502   Assistant: 3                             \u2502\n\u2502   System: 1                                \u2502\n\u2502   Tool: 2                                  \u2502\n\u2502   Total: 9                                 \u2502\n\u2502                                            \u2502\n\u2502 Tokens: 2,456 / 200,000 (1.2%)             \u2502\n\u2502                                            \u2502\n\u2502 Tools: enabled (5 available)               \u2502\n\u2570\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256f\n</code></pre>"},{"location":"user-guide/cli-chat/#exit-or-quit-exit-session","title":"<code>/exit</code> or <code>/quit</code> - Exit Session","text":"<p>Gracefully end the chat session:</p> <pre><code>You: /exit\nExiting...\n\n\u256d\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 Session Summary \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256e\n\u2502 Messages: 10                           \u2502\n\u2502 Tokens: 3,421                          \u2502\n\u2570\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256f\n\nGoodbye!\n</code></pre> <p>Aliases: Both <code>/exit</code> and <code>/quit</code> work identically.</p>"},{"location":"user-guide/cli-chat/#model-model_name-switch-models","title":"<code>/model &lt;model_name&gt;</code> - Switch Models","text":"<p>Change to a different AI model mid-session:</p> <pre><code>You: /model gpt-4o\n\u2713 Switched to model: openai/gpt-4o\n\nYou: /model llama3\n\u2713 Switched to model: ollama/llama3\n\nYou: /model claude-3-opus-20240229\n\u2713 Switched to model: anthropic/claude-3-opus-20240229\n</code></pre> <p>The provider is auto-detected from the model name. Conversation history is preserved when switching models.</p> <p>Common use cases:</p> <ul> <li>Switch to a stronger model for complex questions</li> <li>Use faster/cheaper models for simple queries</li> <li>Compare responses from different models</li> </ul>"},{"location":"user-guide/cli-chat/#tools-onoff-toggle-tool-execution","title":"<code>/tools &lt;on|off&gt;</code> - Toggle Tool Execution","text":"<p>Enable or disable tool execution during the session:</p> <pre><code>You: /tools off\n\u2713 Tools disabled\n\nYou: /tools on\n\u2713 Tools enabled (5 tools available)\n\nYou: /tools\nTools: enabled (5 tools available)\nUsage: /tools &lt;on|off&gt;\n</code></pre> <p>Without arguments, <code>/tools</code> shows current status.</p>"},{"location":"user-guide/cli-chat/#export-filename-export-conversation","title":"<code>/export &lt;filename&gt;</code> - Export Conversation","text":"<p>Save the conversation to a file in markdown or JSON format:</p> <pre><code>You: /export conversation.md\n\u2713 Conversation exported to: conversation.md\n\nYou: /export chat-2025-01-15.json\n\u2713 Conversation exported to: chat-2025-01-15.json\n</code></pre> <p>Format is auto-detected from file extension:</p> <ul> <li><code>.md</code> - Markdown format with metadata and formatted messages</li> <li><code>.json</code> - JSON format with complete message history</li> </ul> <p>Markdown export example:</p> <pre><code># Conversation: abc123def456\n\n**Model**: claude-3-5-sonnet-20241022\n**Created**: 2025-01-15T10:30:00\n**Messages**: 6\n**Total Tokens**: (not tracked in CLI export)\n\n---\n\n## \ud83d\udc64 User\n*2025-01-15T10:30:05*\n\nWhat is the difference between lists and tuples?\n\n---\n\n## \ud83e\udd16 Assistant\n*2025-01-15T10:30:08*\n\nThe main differences are...\n</code></pre>"},{"location":"user-guide/cli-chat/#tool-execution-approval","title":"Tool Execution &amp; Approval","text":"<p>When tools are enabled, the AI can execute commands and search your codebase. The approval workflow depends on your security policy.</p>"},{"location":"user-guide/cli-chat/#how-it-works","title":"How It Works","text":"<ol> <li> <p>AI requests tool execution: </p><pre><code>You: What files are in this directory?\nAssistant: I'll use the bash tool to check...\n\n\u256d\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 Tool Execution Request \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256e\n\u2502 Tool: bash_execute                        \u2502\n\u2502 Command: ls -la                           \u2502\n\u2502 Risk: SAFE                                \u2502\n\u2502                                           \u2502\n\u2502 Approve? [y/N]: _                         \u2502\n\u2570\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256f\n</code></pre><p></p> </li> <li> <p>You approve or deny:</p> </li> <li>Type <code>y</code> and press Enter to approve</li> <li>Type <code>n</code> or press Enter to deny</li> <li> <p>(Cancel the session to abort the request)</p> </li> <li> <p>Tool executes and AI continues: ``` Approve? [y/N]: y</p> </li> </ol> <p>[Tool Output] total 48 drwxr-xr-x  12 user staff  384 Jan 15 10:30 . drwxr-xr-x   8 user staff  256 Jan 15 09:15 .. -rw-r--r--   1 user staff 1234 Jan 15 10:25 main.py ...</p>"},{"location":"user-guide/code-search/","title":"Code Search","text":""},{"location":"user-guide/code-search/#code-search","title":"Code Search","text":"<p>Navigate your codebase like an IDE\u2014find function definitions, locate usages, and search code semantically using AI-powered tools.</p>"},{"location":"user-guide/code-search/#introduction","title":"Introduction","text":"<p>Ever wished you could just ask \"Where is the <code>calculate_total</code> function?\" instead of manually grepping through files? Consoul's code search tools understand code structure, not just text\u2014finding definitions, usages, and references across your entire project.</p> <p>Quick example: </p><pre><code>$ consoul chat \"Find all usages of deprecated_function\"\n</code></pre><p></p> <p>The AI uses semantic code analysis to locate every call, import, and reference\u2014not just text matches.</p> <p>Related Tools: - File Editing - Modify code after finding it - Image Analysis - Analyze code in screenshots</p>"},{"location":"user-guide/code-search/#table-of-contents","title":"Table of Contents","text":"<ul> <li>Overview</li> <li>Available Tools</li> <li>When to Use Which Tool</li> <li>Language Support</li> <li>Common Use Cases</li> <li>Performance</li> <li>Integration Patterns</li> <li>Best Practices</li> </ul>"},{"location":"user-guide/code-search/#overview","title":"Overview","text":"<p>Consoul provides three complementary code search tools that work together to help you understand and navigate codebases:</p> <ol> <li>grep_search - Fast text-based pattern matching</li> <li>code_search - AST-based semantic symbol search</li> <li>find_references - Symbol usage finder</li> </ol> <p>These tools are designed to work like an IDE's navigation features, but accessible through AI chat or programmatic SDK usage.</p>"},{"location":"user-guide/code-search/#key-benefits","title":"Key Benefits","text":"<ul> <li>Semantic Understanding: AST-based parsing understands code structure, not just text</li> <li>Multi-Language: Support for Python, JavaScript/TypeScript, Go, Rust, Java, C/C++</li> <li>Fast with Caching: Intelligent mtime-based caching provides 5-10x speedup</li> <li>Safe Operations: All search tools are read-only (RiskLevel.SAFE)</li> <li>AI-Friendly: Designed for tool calling with clear, structured JSON output</li> </ul>"},{"location":"user-guide/code-search/#available-tools","title":"Available Tools","text":""},{"location":"user-guide/code-search/#grep_search","title":"grep_search","text":"<p>Purpose: Fast text pattern matching across files</p> <p>Use when: - Searching for simple text strings or regex patterns - Finding TODO/FIXME comments - Searching across any file type (not just code) - Need fastest possible search - Pattern doesn't require understanding code structure</p> <p>Technology: ripgrep (with grep fallback)</p> <p>Speed: Very fast (&lt;1s for typical projects)</p> <p>Example: </p><pre><code>from consoul.ai.tools import grep_search\n\n# Find all TODO comments in Python files\nresult = grep_search.invoke({\n    \"pattern\": \"TODO\",\n    \"glob_pattern\": \"*.py\",\n    \"case_sensitive\": False\n})\n</code></pre><p></p>"},{"location":"user-guide/code-search/#code_search","title":"code_search","text":"<p>Purpose: Find symbol definitions (functions, classes, methods)</p> <p>Use when: - Finding where a function/class is defined - Locating symbol definitions before reading code - Building code inventory or documentation - Need to understand code structure</p> <p>Technology: tree-sitter AST parsing</p> <p>Speed: Fast with cache (~1-2s first run, &lt;1s cached)</p> <p>Example: </p><pre><code>from consoul.ai.tools import code_search\n\n# Find the ToolRegistry class definition\nresult = code_search.invoke({\n    \"query\": \"ToolRegistry\",\n    \"symbol_type\": \"class\"\n})\n</code></pre><p></p>"},{"location":"user-guide/code-search/#find_references","title":"find_references","text":"<p>Purpose: Find all usages/references of a symbol</p> <p>Use when: - Planning to refactor/rename a function - Understanding how a symbol is used - Finding dead code (zero references) - Impact analysis before changes - Understanding dependencies</p> <p>Technology: tree-sitter AST parsing (with cache)</p> <p>Speed: Medium (~2-3s first run, &lt;1s cached)</p> <p>Example: </p><pre><code>from consoul.ai.tools import find_references\n\n# Find all usages of bash_execute\nresult = find_references.invoke({\n    \"symbol\": \"bash_execute\",\n    \"scope\": \"project\"\n})\n</code></pre><p></p>"},{"location":"user-guide/code-search/#when-to-use-which-tool","title":"When to Use Which Tool","text":""},{"location":"user-guide/code-search/#decision-matrix","title":"Decision Matrix","text":"Question Tool Why \"Where is function X defined?\" <code>code_search</code> Finds definitions semantically \"Where is function X used?\" <code>find_references</code> Finds all usages \"Find all TODO comments\" <code>grep_search</code> Text pattern in comments \"What functions are in file.py?\" <code>code_search</code> Lists all symbols \"Is this function still used?\" <code>find_references</code> Check for usages \"Find all error messages\" <code>grep_search</code> String literal search \"Find calls to deprecated_fn\" <code>find_references</code> Finds function calls \"Find class MyClass\" <code>code_search</code> Find class definition \"Search across all file types\" <code>grep_search</code> Works on any text \"Find imports of module X\" <code>find_references</code> Finds import statements"},{"location":"user-guide/code-search/#tool-comparison","title":"Tool Comparison","text":"grep_search code_search find_references What it finds Text patterns Symbol definitions Symbol usages Understanding Text-based Structure-aware Structure-aware Speed Very fast Fast (cached) Medium (cached) File types Any text Source code Source code Comments \u2705 Finds in comments \u274c Ignores comments \u274c Ignores comments Strings \u2705 Finds in strings \u274c Ignores strings \u274c Ignores strings Context Line context Symbol context Usage context Cache N/A \u2705 Cached \u2705 Cached"},{"location":"user-guide/code-search/#common-workflows","title":"Common Workflows","text":"<p>Refactoring a Function: </p><pre><code>1. code_search \u2192 Find definition\n2. find_references \u2192 Find all usages\n3. Analyze impact\n4. Make changes\n5. find_references \u2192 Verify no broken references\n</code></pre><p></p> <p>Understanding a Feature: </p><pre><code>1. grep_search \u2192 Find relevant comments/docs\n2. code_search \u2192 Find main classes/functions\n3. find_references \u2192 Understand dependencies\n</code></pre><p></p> <p>Code Review: </p><pre><code>1. grep_search \u2192 Find TODOs, FIXMEs, console.logs\n2. code_search \u2192 Check new symbols added\n3. find_references \u2192 Verify proper usage\n</code></pre><p></p>"},{"location":"user-guide/code-search/#language-support","title":"Language Support","text":""},{"location":"user-guide/code-search/#support-matrix","title":"Support Matrix","text":"Language Extension grep_search code_search find_references Notes Python .py \u2705 \u2705 \u2705 Full support JavaScript .js \u2705 \u2705 \u2705 Full support TypeScript .ts, .tsx \u2705 \u2705 \u2705 Full support JSX .jsx \u2705 \u2705 \u2705 Full support Go .go \u2705 \u2705 \u2705 Full support Kotlin .kt \u2705 \u2705 \u2705 Full support Rust .rs \u2705 \u2705 \u274c Use grep_search for references Java .java \u2705 \u2705 \u274c Use grep_search for references C .c, .h \u2705 \u2705 \u274c Use grep_search for references C++ .cpp, .hpp \u2705 \u2705 \u274c Use grep_search for references <p>Legend: - \u2705 Full support - All features work correctly - \u274c No support - Tool doesn't work for this language</p> <p>Note: find_references currently implements reference detection for Python, JavaScript/TypeScript, Go, Kotlin, and Java. For Rust and C/C++, use grep_search for text-based reference finding.</p>"},{"location":"user-guide/code-search/#detected-node-types-by-language","title":"Detected Node Types by Language","text":""},{"location":"user-guide/code-search/#python","title":"Python","text":"<ul> <li>Definitions: function_definition, class_definition, method</li> <li>References: call, import_from_statement, attribute</li> </ul>"},{"location":"user-guide/code-search/#javascripttypescript","title":"JavaScript/TypeScript","text":"<ul> <li>Definitions: function_declaration, class_declaration, method_definition</li> <li>References: call_expression, import_specifier, member_expression</li> </ul>"},{"location":"user-guide/code-search/#go","title":"Go","text":"<ul> <li>Definitions: function_declaration, type_declaration</li> <li>References: call_expression, selector_expression</li> </ul>"},{"location":"user-guide/code-search/#common-use-cases","title":"Common Use Cases","text":""},{"location":"user-guide/code-search/#1-find-all-todo-comments","title":"1. Find All TODO Comments","text":"<p>Goal: Locate all TODO items across the project</p> <p>Tool: grep_search</p> <pre><code>result = grep_search.invoke({\n    \"pattern\": r\"TODO|FIXME|XXX|HACK\",\n    \"glob_pattern\": \"*.{py,js,ts}\",\n    \"context_lines\": 2\n})\n</code></pre> <p>Why grep_search? TODOs are in comments, which AST tools ignore.</p>"},{"location":"user-guide/code-search/#2-find-function-definition","title":"2. Find Function Definition","text":"<p>Goal: Locate where <code>calculate_total</code> is defined</p> <p>Tool: code_search</p> <pre><code>result = code_search.invoke({\n    \"query\": \"calculate_total\",\n    \"symbol_type\": \"function\"\n})\n</code></pre> <p>Why code_search? Finds exact definition location semantically.</p>"},{"location":"user-guide/code-search/#3-find-all-function-usages","title":"3. Find All Function Usages","text":"<p>Goal: Find every call to <code>deprecated_function</code> before removing it</p> <p>Tool: find_references</p> <pre><code>result = find_references.invoke({\n    \"symbol\": \"deprecated_function\",\n    \"scope\": \"project\",\n    \"include_definition\": True  # Shows definition + usages\n})\n</code></pre> <p>Why find_references? Distinguishes function calls from definition.</p>"},{"location":"user-guide/code-search/#4-locate-dead-code","title":"4. Locate Dead Code","text":"<p>Goal: Find functions with zero references</p> <p>Workflow: </p><pre><code># 1. Get all functions\nfunctions = code_search.invoke({\"symbol_type\": \"function\"})\n\n# 2. Check each for references\nfor func in parse_results(functions):\n    refs = find_references.invoke({\"symbol\": func[\"name\"]})\n    if len(parse_results(refs)) == 0:\n        print(f\"Dead code: {func['name']} at {func['file']}:{func['line']}\")\n</code></pre><p></p>"},{"location":"user-guide/code-search/#5-understand-class-dependencies","title":"5. Understand Class Dependencies","text":"<p>Goal: See how <code>ShoppingCart</code> class is used</p> <p>Workflow: </p><pre><code># 1. Find class definition\ndefinition = code_search.invoke({\n    \"query\": \"ShoppingCart\",\n    \"symbol_type\": \"class\"\n})\n\n# 2. Find all usages\nusages = find_references.invoke({\n    \"symbol\": \"ShoppingCart\",\n    \"scope\": \"project\"\n})\n\n# 3. Analyze instantiations vs imports\n</code></pre><p></p>"},{"location":"user-guide/code-search/#6-search-across-documentation","title":"6. Search Across Documentation","text":"<p>Goal: Find documentation for a specific API</p> <p>Tool: grep_search</p> <pre><code>result = grep_search.invoke({\n    \"pattern\": \"authenticate user\",\n    \"path\": \"docs/\",\n    \"case_sensitive\": False\n})\n</code></pre> <p>Why grep_search? Markdown/docs aren't source code.</p>"},{"location":"user-guide/code-search/#7-find-all-methods-of-a-class","title":"7. Find All Methods of a Class","text":"<p>Goal: List all methods in <code>ToolRegistry</code> class</p> <p>Tool: code_search</p> <pre><code>result = code_search.invoke({\n    \"query\": \".*\",  # Match all\n    \"symbol_type\": \"method\",\n    \"path\": \"src/consoul/ai/tools/registry.py\"\n})\n</code></pre>"},{"location":"user-guide/code-search/#8-pre-refactoring-analysis","title":"8. Pre-Refactoring Analysis","text":"<p>Goal: Safely rename <code>old_name</code> to <code>new_name</code></p> <p>Complete Workflow: </p><pre><code># 1. Find definition\ndefinition = code_search.invoke({\"query\": \"old_name\"})\nprint(f\"Defined at: {definition}\")\n\n# 2. Find all usages\nreferences = find_references.invoke({\"symbol\": \"old_name\"})\nusage_count = len(parse_results(references))\nprint(f\"Found {usage_count} usages\")\n\n# 3. Review each usage before refactoring\n# 4. Make changes\n# 5. Verify with find_references again\n</code></pre><p></p>"},{"location":"user-guide/code-search/#performance","title":"Performance","text":""},{"location":"user-guide/code-search/#speed-benchmarks","title":"Speed Benchmarks","text":"<p>Typical project (1000 files, ~100K LOC):</p> Tool First Run Cached Cache Benefit grep_search 0.5s 0.5s N/A (always fast) code_search 2.5s 0.3s 8x faster find_references 3.0s 0.4s 7x faster <p>Large project (5000 files, ~500K LOC):</p> Tool First Run Cached Cache Benefit grep_search 1.2s 1.2s N/A code_search 8.5s 0.8s 10x faster find_references 10.0s 1.0s 10x faster"},{"location":"user-guide/code-search/#cache-behavior","title":"Cache Behavior","text":"<p>How caching works: 1. First search: Parses AST and caches results with file mtime 2. Subsequent searches: Checks mtime, returns cached data if unchanged 3. File modified: Detects mtime change, reparses file 4. Shared cache: code_search and find_references share cache instance</p> <p>Cache keys: - code_search: <code>tags:{file_path}</code> - find_references: <code>refs:{file_path}</code></p> <p>Cache location: - Default: <code>~/.consoul/cache/code-search.v1/</code> - Configurable via CodeSearchCache initialization</p>"},{"location":"user-guide/code-search/#optimization-tips","title":"Optimization Tips","text":"<p>1. Use narrowest scope possible </p><pre><code># Slow - searches entire project\nfind_references.invoke({\"symbol\": \"foo\", \"scope\": \"project\"})\n\n# Fast - searches one directory\nfind_references.invoke({\"symbol\": \"foo\", \"scope\": \"directory\", \"path\": \"src/\"})\n\n# Fastest - searches one file\nfind_references.invoke({\"symbol\": \"foo\", \"scope\": \"file\", \"path\": \"src/main.py\"})\n</code></pre><p></p> <p>2. Use ripgrep for text search </p><pre><code># Install ripgrep for 5-10x faster grep_search\nbrew install ripgrep  # macOS\napt-get install ripgrep  # Ubuntu\n</code></pre><p></p> <p>3. Warm up cache for common operations </p><pre><code># Run code_search once to populate cache\ncode_search.invoke({\"query\": \".*\", \"path\": \"src/\"})\n\n# Future searches will be much faster\n</code></pre><p></p> <p>4. Filter by symbol type </p><pre><code># Faster - parses less\ncode_search.invoke({\"query\": \"Foo\", \"symbol_type\": \"class\"})\n\n# Slower - searches all symbol types\ncode_search.invoke({\"query\": \"Foo\"})\n</code></pre><p></p> <p>5. Use case-insensitive search wisely </p><pre><code># Slower - must check more variations\nfind_references.invoke({\"symbol\": \"foo\", \"case_sensitive\": False})\n\n# Faster - exact match only\nfind_references.invoke({\"symbol\": \"Foo\", \"case_sensitive\": True})\n</code></pre><p></p>"},{"location":"user-guide/code-search/#integration-patterns","title":"Integration Patterns","text":""},{"location":"user-guide/code-search/#pattern-1-multi-step-discovery","title":"Pattern 1: Multi-Step Discovery","text":"<pre><code>from consoul import Consoul\n\nconsole = Consoul(tools=True)\n\n# Step 1: Find potential matches with grep\ngrep_results = console.chat(\"Search for 'calculate' in Python files\")\n\n# Step 2: Find exact definitions\ncode_results = console.chat(\"Find the calculate_total function definition\")\n\n# Step 3: Find all usages\nref_results = console.chat(\"Find all usages of calculate_total\")\n</code></pre>"},{"location":"user-guide/code-search/#pattern-2-programmatic-search-workflow","title":"Pattern 2: Programmatic Search Workflow","text":"<pre><code>from consoul.ai.tools import grep_search, code_search, find_references\nimport json\n\ndef analyze_function(function_name: str):\n    \"\"\"Complete analysis of a function.\"\"\"\n\n    # 1. Find definition\n    definition = code_search.invoke({\n        \"query\": function_name,\n        \"symbol_type\": \"function\"\n    })\n    def_data = json.loads(definition)\n\n    if not def_data:\n        print(f\"Function {function_name} not found\")\n        return\n\n    # 2. Find references\n    references = find_references.invoke({\n        \"symbol\": function_name,\n        \"scope\": \"project\"\n    })\n    ref_data = json.loads(references)\n\n    # 3. Report\n    print(f\"Function: {function_name}\")\n    print(f\"Defined at: {def_data[0]['file']}:{def_data[0]['line']}\")\n    print(f\"Used {len(ref_data)} times\")\n\n    return {\n        \"definition\": def_data[0],\n        \"references\": ref_data,\n        \"usage_count\": len(ref_data)\n    }\n\n# Use it\nanalyze_function(\"bash_execute\")\n</code></pre>"},{"location":"user-guide/code-search/#pattern-3-custom-approval-for-search","title":"Pattern 3: Custom Approval for Search","text":"<pre><code>from consoul.ai.tools import ToolRegistry, RiskLevel\nfrom consoul.ai.tools.providers import CliApprovalProvider\nfrom consoul.ai.tools import grep_search, code_search, find_references\n\n# All search tools are SAFE - can auto-approve\nregistry = ToolRegistry(\n    config=config.tools,\n    approval_provider=CliApprovalProvider()\n)\n\n# Register search tools (all SAFE)\nregistry.register(grep_search, risk_level=RiskLevel.SAFE)\nregistry.register(code_search, risk_level=RiskLevel.SAFE)\nregistry.register(find_references, risk_level=RiskLevel.SAFE)\n\n# Bind to model for AI usage\nmodel = registry.bind_to_model(model)\n</code></pre>"},{"location":"user-guide/code-search/#pattern-4-batch-analysis","title":"Pattern 4: Batch Analysis","text":"<pre><code>def find_unused_functions(directory: str):\n    \"\"\"Find functions with zero references.\"\"\"\n\n    # Get all functions\n    all_functions = code_search.invoke({\n        \"symbol_type\": \"function\",\n        \"path\": directory\n    })\n\n    functions = json.loads(all_functions)\n    unused = []\n\n    for func in functions:\n        # Check for usages\n        refs = find_references.invoke({\n            \"symbol\": func[\"name\"],\n            \"scope\": \"directory\",\n            \"path\": directory\n        })\n\n        ref_count = len(json.loads(refs))\n        if ref_count == 0:\n            unused.append(func)\n\n    return unused\n\n# Find unused functions in src/\nunused = find_unused_functions(\"src/\")\nprint(f\"Found {len(unused)} unused functions\")\n</code></pre>"},{"location":"user-guide/code-search/#best-practices","title":"Best Practices","text":""},{"location":"user-guide/code-search/#1-choose-the-right-tool","title":"1. Choose the Right Tool","text":"<p>\u2705 DO: - Use grep_search for comments, strings, and documentation - Use code_search to find definitions - Use find_references to find usages - Combine tools for comprehensive analysis</p> <p>\u274c DON'T: - Use grep_search for finding function calls (use find_references) - Use code_search for text in comments (use grep_search) - Search entire project when you know the directory</p>"},{"location":"user-guide/code-search/#2-leverage-caching","title":"2. Leverage Caching","text":"<p>\u2705 DO: - Run searches on same files multiple times to benefit from cache - Use code_search before find_references (shares cache) - Keep searches in same session for cache benefit</p> <p>\u274c DON'T: - Clear cache unnecessarily - Run searches in separate processes (cache not shared)</p>"},{"location":"user-guide/code-search/#3-scope-appropriately","title":"3. Scope Appropriately","text":"<p>\u2705 DO: - Use file scope when you know the file - Use directory scope for package/module searches - Use project scope only when necessary</p> <p>\u274c DON'T: - Default to project scope for everything - Search entire codebase for file-specific questions</p>"},{"location":"user-guide/code-search/#4-handle-results-properly","title":"4. Handle Results Properly","text":"<p>\u2705 DO: - Parse JSON results before using - Check for empty results - Handle errors gracefully - Validate file paths exist</p> <p>\u274c DON'T: - Assume results are always valid - Ignore empty result sets - Skip error handling</p>"},{"location":"user-guide/code-search/#5-performance-optimization","title":"5. Performance Optimization","text":"<p>\u2705 DO: - Install ripgrep for faster grep_search - Use specific symbol_type filters - Warm cache for frequently searched directories - Use case-sensitive search when possible</p> <p>\u274c DON'T: - Search with overly broad patterns - Disable caching - Search large binary files - Use case-insensitive unless needed</p>"},{"location":"user-guide/code-search/#troubleshooting","title":"Troubleshooting","text":"<p>Common issues and solutions for Consoul's code search tools.</p>"},{"location":"user-guide/code-search/#tool-not-found-errors","title":"Tool Not Found Errors","text":""},{"location":"user-guide/code-search/#error-tool-grep_search-not-found-in-registry","title":"Error: \"Tool 'grep_search' not found in registry\"","text":"<p>Cause: Tool not registered with ToolRegistry</p> <p>Solution: </p><pre><code>from consoul.ai.tools import ToolRegistry, grep_search, RiskLevel\n\nregistry = ToolRegistry(config=config.tools)\nregistry.register(grep_search, risk_level=RiskLevel.SAFE)\n</code></pre><p></p> <p>In TUI: Ensure tools are enabled in config: </p><pre><code>profiles:\n  default:\n    tools:\n      enabled: true\n</code></pre><p></p>"},{"location":"user-guide/code-search/#error-toolexecutionerror-ripgrep-not-found","title":"Error: \"ToolExecutionError: ripgrep not found\"","text":"<p>Cause: grep_search prefers ripgrep but can't find it</p> <p>Solution: Install ripgrep or use grep fallback: </p><pre><code># macOS\nbrew install ripgrep\n\n# Ubuntu/Debian\napt-get install ripgrep\n\n# Windows (Scoop)\nscoop install ripgrep\n</code></pre><p></p> <p>Fallback: grep_search automatically falls back to standard grep if ripgrep not found.</p>"},{"location":"user-guide/code-search/#language-not-supported","title":"Language Not Supported","text":""},{"location":"user-guide/code-search/#error-unsupported-language-for-file-xyz","title":"Error: \"Unsupported language for file: *.xyz\"","text":"<p>Cause: File extension not recognized by tree-sitter</p> <p>Supported Extensions: - Python: .py - JavaScript: .js, .jsx - TypeScript: .ts, .tsx - Go: .go - Rust: .rs - Java: .java - C/C++: .c, .cpp, .h, .hpp</p> <p>Solution: Only use code_search and find_references on supported file types. Use grep_search for other files.</p>"},{"location":"user-guide/code-search/#how-to-check-language-support","title":"How to Check Language Support","text":"<pre><code>from grep_ast import filename_to_lang\n\n# Check if file is supported\nlang = filename_to_lang(\"myfile.py\")\nif lang:\n    print(f\"Supported: {lang}\")\nelse:\n    print(\"Not supported - use grep_search instead\")\n</code></pre>"},{"location":"user-guide/code-search/#cache-issues","title":"Cache Issues","text":""},{"location":"user-guide/code-search/#cache-not-working-still-slow-on-repeat-searches","title":"Cache Not Working - Still Slow on Repeat Searches","text":"<p>Symptoms: code_search and find_references always take full parse time</p> <p>Diagnosis: </p><pre><code>from consoul.ai.tools.cache import CodeSearchCache\n\ncache = CodeSearchCache()\nstats = cache.get_stats()\nprint(f\"Hit rate: {stats.hit_rate:.1%}\")  # Should be &gt;50% after warmup\nprint(f\"Hits: {stats.hits}, Misses: {stats.misses}\")\n</code></pre><p></p> <p>Causes &amp; Solutions:</p> <p>1. Cache directory not writable </p><pre><code>from pathlib import Path\n\ncache_dir = Path.home() / \".consoul\" / \"cache\" / \"code-search.v1\"\nprint(cache_dir.exists())  # Should be True\nprint(os.access(cache_dir, os.W_OK))  # Should be True\n\n# Fix permissions\ncache_dir.mkdir(parents=True, exist_ok=True)\n</code></pre><p></p> <p>2. Files changing between searches </p><pre><code># Check file modification times\nstat src/file.py  # mtime should be stable\n</code></pre><p></p> <p>3. Running in different processes - Cache is per-process - Solution: Keep searches in same Python session</p> <p>4. Cache manually cleared </p><pre><code># Don't do this unless necessary\ncache.invalidate_cache()\n</code></pre><p></p>"},{"location":"user-guide/code-search/#cache-growing-too-large","title":"Cache Growing Too Large","text":"<p>Check cache size: </p><pre><code>cache = CodeSearchCache()\nstats = cache.get_stats()\nprint(f\"Cache size: {stats.size_bytes / 1024 / 1024:.1f} MB\")\n</code></pre><p></p> <p>Solution: Configure smaller size limit: </p><pre><code>cache = CodeSearchCache(size_limit_mb=50)  # Default is 100MB\n</code></pre><p></p> <p>Manual cleanup: </p><pre><code>cache.invalidate_cache()  # Clears all entries\n</code></pre><p></p>"},{"location":"user-guide/code-search/#performance-problems","title":"Performance Problems","text":""},{"location":"user-guide/code-search/#searches-taking-too-long-10s","title":"Searches Taking Too Long (&gt;10s)","text":"<p>Diagnosis: 1. Check project size: </p><pre><code>find . -name \"*.py\" | wc -l  # How many files?\ndu -sh .  # Total size\n</code></pre><p></p> <ol> <li>Check if cache is being used: <pre><code>stats = cache.get_stats()\nprint(f\"Hit rate: {stats.hit_rate:.1%}\")  # Should be &gt;0% on repeat\n</code></pre></li> </ol> <p>Solutions:</p> <p>1. Use narrower scope </p><pre><code># Slow - searches whole project\nfind_references.invoke({\"symbol\": \"foo\", \"scope\": \"project\"})\n\n# Faster - search one directory\nfind_references.invoke({\"symbol\": \"foo\", \"scope\": \"directory\", \"path\": \"src/\"})\n\n# Fastest - search one file\nfind_references.invoke({\"symbol\": \"foo\", \"scope\": \"file\", \"path\": \"src/main.py\"})\n</code></pre><p></p> <p>2. Increase file size limit </p><pre><code>tools:\n  code_search:\n    max_file_size_kb: 2048  # Default is 1024 (1MB)\n</code></pre><p></p> <p>3. Skip large generated files Add to <code>.gitignore</code> or filter: </p><pre><code># Skip build directories\ncode_search.invoke({\"query\": \"Foo\", \"path\": \"src/\"})  # Not build/\n</code></pre><p></p> <p>4. Use grep_search for simple patterns </p><pre><code># Fast text search instead of AST\ngrep_search.invoke({\"pattern\": \"MyClass\"})\n</code></pre><p></p>"},{"location":"user-guide/code-search/#grep_search-slower-than-expected","title":"grep_search Slower Than Expected","text":"<p>Diagnosis: </p><pre><code>which rg  # Should find ripgrep\nrg --version  # Check version\n</code></pre><p></p> <p>Solution: Install ripgrep for 5-10x speedup: </p><pre><code>brew install ripgrep  # macOS\napt-get install ripgrep  # Ubuntu\n</code></pre><p></p> <p>Fallback performance: Standard grep is slower but still functional.</p>"},{"location":"user-guide/code-search/#parsing-errors","title":"Parsing Errors","text":""},{"location":"user-guide/code-search/#error-failed-to-parse-ast","title":"Error: \"Failed to parse AST\"","text":"<p>Symptoms: - code_search returns empty results - find_references shows warning: \"Failed to parse file.py\"</p> <p>Causes:</p> <p>1. Syntax errors in source file </p><pre><code># File has invalid Python syntax\ndef foo(  # Missing closing paren\n    return 42\n</code></pre><p></p> <p>Solution: Fix syntax errors in source files. tree-sitter requires valid syntax.</p> <p>2. Tree-sitter language pack issue </p><pre><code># Check if tree-sitter-language-pack is installed\npython -c \"import tree_sitter_language_pack; print('OK')\"\n</code></pre><p></p> <p>Solution: Reinstall dependency: </p><pre><code>pip install --force-reinstall tree-sitter-language-pack&gt;=0.11.0\n</code></pre><p></p> <p>3. Encoding issues </p><pre><code># File isn't UTF-8\nresult = file_path.read_text(encoding=\"utf-8\", errors=\"ignore\")\n</code></pre><p></p> <p>Solution: Convert file to UTF-8 or let tools ignore decode errors (automatic).</p>"},{"location":"user-guide/code-search/#error-failed-to-get-parser-for-language","title":"Error: \"Failed to get parser for language\"","text":"<p>Cause: Language not supported by tree-sitter</p> <p>Solution: Check supported languages and use grep_search for unsupported files.</p>"},{"location":"user-guide/code-search/#empty-results","title":"Empty Results","text":""},{"location":"user-guide/code-search/#code_search-returns-no-results","title":"code_search Returns No Results","text":"<p>Diagnosis Checklist:</p> <ol> <li> <p>Verify file exists: </p><pre><code>ls -la path/to/file.py\n</code></pre><p></p> </li> <li> <p>Check file isn't too large: </p><pre><code># Default limit is 1MB\nfile_size_kb = Path(\"file.py\").stat().st_size / 1024\nprint(f\"Size: {file_size_kb:.1f} KB\")  # Should be &lt;1024\n</code></pre><p></p> </li> <li> <p>Verify symbol exists: </p><pre><code># Use grep to confirm symbol is in file\ngrep_search.invoke({\"pattern\": \"MyClass\", \"path\": \"file.py\"})\n</code></pre><p></p> </li> <li> <p>Check symbol type: </p><pre><code># Maybe it's a method, not a function\ncode_search.invoke({\"query\": \"MyClass\", \"symbol_type\": \"method\"})\n</code></pre><p></p> </li> <li> <p>Try case-insensitive: </p><pre><code>code_search.invoke({\"query\": \"myclass\", \"case_sensitive\": False})\n</code></pre><p></p> </li> </ol> <p>Common Issues:</p> <p>Symbol is in comment/string: - code_search ignores comments and strings - Solution: Use grep_search instead</p> <p>Symbol is imported, not defined: - code_search finds definitions, not imports - Solution: Use find_references to find imports</p> <p>Symbol is in unsupported file: - Check language support matrix - Solution: Use grep_search for unsupported languages</p>"},{"location":"user-guide/code-search/#find_references-returns-no-results","title":"find_references Returns No Results","text":"<p>Diagnosis:</p> <ol> <li> <p>Symbol might not be used: </p><pre><code># Check if symbol is defined but unused (dead code)\ncode_search.invoke({\"query\": \"MyClass\"})  # Finds definition\nfind_references.invoke({\"symbol\": \"MyClass\"})  # Finds usages\n</code></pre><p></p> </li> <li> <p>Symbol name might be different: </p><pre><code># Case-sensitive by default\nfind_references.invoke({\"symbol\": \"myclass\", \"case_sensitive\": False})\n</code></pre><p></p> </li> <li> <p>Symbol only used in comments:</p> </li> <li>find_references ignores comments</li> <li> <p>Solution: Use grep_search</p> </li> <li> <p>Scope too narrow: </p><pre><code># Maybe references are in other directories\nfind_references.invoke({\"symbol\": \"Foo\", \"scope\": \"project\"})  # Wider\n</code></pre><p></p> </li> </ol>"},{"location":"user-guide/code-search/#permission-errors","title":"Permission Errors","text":""},{"location":"user-guide/code-search/#error-permission-denied","title":"Error: \"Permission denied\"","text":"<p>Cause: No read access to file or directory</p> <p>Solution: </p><pre><code># Check permissions\nls -la path/to/file\n\n# Fix permissions\nchmod +r path/to/file\n</code></pre><p></p>"},{"location":"user-guide/code-search/#error-failed-to-access-cache-directory","title":"Error: \"Failed to access cache directory\"","text":"<p>Cause: Cache directory not writable</p> <p>Solution: </p><pre><code># Create cache directory with correct permissions\nmkdir -p ~/.consoul/cache/code-search.v1\nchmod 755 ~/.consoul/cache/code-search.v1\n</code></pre><p></p>"},{"location":"user-guide/code-search/#debug-mode","title":"Debug Mode","text":"<p>Enable debug logging to troubleshoot issues:</p> <pre><code>import logging\n\n# Enable debug logging\nlogging.basicConfig(level=logging.DEBUG)\n\n# Or configure Consoul logging\nfrom consoul.ai.tools.implementations import code_search\n\n# Run with debug output\nresult = code_search.invoke({\"query\": \"Foo\"})\n# Will show detailed parsing info\n</code></pre>"},{"location":"user-guide/code-search/#getting-help","title":"Getting Help","text":"<p>If issues persist:</p> <ol> <li> <p>Check version: </p><pre><code>import consoul\nprint(consoul.__version__)\n</code></pre><p></p> </li> <li> <p>Verify dependencies: </p><pre><code>pip list | grep -E \"tree-sitter|grep-ast|ripgrep\"\n</code></pre><p></p> </li> <li> <p>Minimal reproduction: </p><pre><code>from consoul.ai.tools import code_search\n\n# Simplest possible test\nresult = code_search.invoke({\"query\": \".*\", \"path\": \".\"})\nprint(result)\n</code></pre><p></p> </li> <li> <p>Report issue:</p> </li> <li>GitHub: https://github.com/goatbytes/consoul/issues</li> <li>Include: Python version, OS, error message, minimal reproduction</li> </ol>"},{"location":"user-guide/code-search/#quick-reference","title":"Quick Reference","text":"Issue Quick Fix Tool not found Enable tools in config.yaml Language not supported Use grep_search instead Cache not working Check ~/.consoul/cache permissions Too slow Use narrower scope, install ripgrep Parsing errors Check file syntax, verify UTF-8 Empty results Check file size, try case-insensitive Permission denied Fix file/directory permissions"},{"location":"user-guide/code-search/#see-also","title":"See Also","text":"<p>Other Tools: - File Editing - Edit code after finding it with search - Image Analysis - Analyze code from screenshots</p> <p>SDK &amp; API: - SDK Tools Overview - Using search tools programmatically - Tool Configuration - Configuring tools in your code</p> <p>Configuration: - Configuration Guide - Enable/disable tools and settings</p>"},{"location":"user-guide/configuration/","title":"Configuration","text":""},{"location":"user-guide/configuration/#configuration","title":"Configuration","text":"<p>Learn how to configure Consoul to match your workflow and preferences.</p>"},{"location":"user-guide/configuration/#configuration-file","title":"Configuration File","text":"<p>Consoul uses a YAML configuration file located at:</p> <pre><code>~/.config/consoul/config.yaml\n</code></pre>"},{"location":"user-guide/configuration/#creating-the-configuration","title":"Creating the Configuration","text":"<pre><code># Create config directory\nmkdir -p ~/.config/consoul\n\n# Create basic config\ncat &gt; ~/.config/consoul/config.yaml &lt;&lt; 'EOF'\nprovider: anthropic\nmodel: claude-3-5-sonnet-20241022\ntheme: dark\nsave_conversations: true\nEOF\n</code></pre>"},{"location":"user-guide/configuration/#core-settings","title":"Core Settings","text":""},{"location":"user-guide/configuration/#provider-configuration","title":"Provider Configuration","text":"<pre><code># Default provider (anthropic, openai, google)\nprovider: anthropic\n\n# Default model for the provider\nmodel: claude-3-5-sonnet-20241022\n\n# Provider-specific settings\nproviders:\n  anthropic:\n    api_key: ${ANTHROPIC_API_KEY}\n    default_model: claude-3-5-sonnet-20241022\n    max_tokens: 4096\n    temperature: 0.7\n\n  openai:\n    api_key: ${OPENAI_API_KEY}\n    default_model: gpt-4\n    max_tokens: 2048\n    temperature: 0.7\n\n  google:\n    api_key: ${GOOGLE_API_KEY}\n    default_model: gemini-pro\n</code></pre>"},{"location":"user-guide/configuration/#ui-settings","title":"UI Settings","text":"<pre><code># Theme (dark, light, auto)\ntheme: dark\n\n# Editor for multi-line input (vim, nano, emacs)\neditor: vim\n\n# Show timestamps in TUI\nshow_timestamps: true\n\n# Syntax highlighting\nsyntax_highlighting: true\n\n# Color scheme\ncolors:\n  primary: cyan\n  accent: purple\n  error: red\n  success: green\n\n# Reasoning/thinking display (for models like DeepSeek-R1, QwQ, Cogito)\n# Options: always, auto, never, collapsed\nshow_thinking: auto\n\n# Model patterns that produce reasoning output (used with show_thinking: auto)\nthinking_models:\n  - qwq\n  - deepseek-r1\n  - deepseek\n  - phi4-reasoning\n  - cogito\n</code></pre>"},{"location":"user-guide/configuration/#conversation-settings","title":"Conversation Settings","text":"<pre><code># Save conversations to disk\nsave_conversations: true\n\n# Maximum number of messages to keep in history\nmax_history: 50\n\n# Auto-save interval (seconds)\nauto_save_interval: 30\n\n# Conversation storage location\nconversation_dir: ~/.config/consoul/conversations\n</code></pre>"},{"location":"user-guide/configuration/#default-behavior","title":"Default Behavior","text":"<pre><code># Default temperature (0.0 - 1.0)\ntemperature: 0.7\n\n# Default max tokens\nmax_tokens: 2048\n\n# Default system prompt\nsystem_prompt: \"You are a helpful AI assistant for developers.\"\n\n# Stream responses in real-time\nstream: true\n</code></pre>"},{"location":"user-guide/configuration/#environment-variables","title":"Environment Variables","text":""},{"location":"user-guide/configuration/#api-keys","title":"API Keys","text":"<pre><code># Anthropic\nexport ANTHROPIC_API_KEY=\"sk-ant-...\"\n\n# OpenAI\nexport OPENAI_API_KEY=\"sk-...\"\n\n# Google\nexport GOOGLE_API_KEY=\"...\"\n</code></pre>"},{"location":"user-guide/configuration/#configuration-override","title":"Configuration Override","text":"<pre><code># Override config file location\nexport CONSOUL_CONFIG_PATH=\"/custom/path/config.yaml\"\n\n# Override conversation directory\nexport CONSOUL_CONVERSATION_DIR=\"/custom/conversations\"\n</code></pre>"},{"location":"user-guide/configuration/#provider-specific-configuration","title":"Provider-Specific Configuration","text":""},{"location":"user-guide/configuration/#anthropic-claude","title":"Anthropic (Claude)","text":"<pre><code>providers:\n  anthropic:\n    api_key: ${ANTHROPIC_API_KEY}\n    default_model: claude-3-5-sonnet-20241022\n    max_tokens: 4096\n    temperature: 0.7\n\n    # Available models\n    models:\n      - claude-3-5-sonnet-20241022\n      - claude-3-opus-20240229\n      - claude-3-sonnet-20240229\n      - claude-3-haiku-20240307\n</code></pre>"},{"location":"user-guide/configuration/#openai","title":"OpenAI","text":"<pre><code>providers:\n  openai:\n    api_key: ${OPENAI_API_KEY}\n    default_model: gpt-4\n    max_tokens: 2048\n    temperature: 0.7\n\n    # Organization (optional)\n    organization: org-...\n\n    # Available models\n    models:\n      - gpt-4\n      - gpt-4-turbo-preview\n      - gpt-3.5-turbo\n</code></pre>"},{"location":"user-guide/configuration/#google-gemini","title":"Google (Gemini)","text":"<pre><code>providers:\n  google:\n    api_key: ${GOOGLE_API_KEY}\n    default_model: gemini-pro\n\n    # Available models\n    models:\n      - gemini-pro\n      - gemini-pro-vision\n</code></pre>"},{"location":"user-guide/configuration/#advanced-configuration","title":"Advanced Configuration","text":""},{"location":"user-guide/configuration/#reasoningthinking-display","title":"Reasoning/Thinking Display","text":"<p>Modern reasoning models (like DeepSeek-R1, QwQ, Phi4-Reasoning, and Cogito) output their chain-of-thought reasoning in special tags like <code>&lt;think&gt;...&lt;/think&gt;</code>. Consoul can automatically detect and display this thinking separately from the final response.</p> <p>Configuration Options:</p> <pre><code># Control when thinking is displayed\nshow_thinking: auto  # Options: always, auto, never, collapsed\n\n# Models known to produce reasoning output\nthinking_models:\n  - qwq\n  - deepseek-r1\n  - deepseek\n  - phi4-reasoning\n  - cogito\n</code></pre> <p>Display Modes:</p> <ul> <li><code>always</code>: Show thinking for all responses that have it</li> <li><code>auto</code> (default): Show only for known reasoning models</li> <li><code>never</code>: Extract thinking but don't display it</li> <li><code>collapsed</code>: Show thinking but collapsed by default (expandable)</li> </ul> <p>Example:</p> <p>When using a reasoning model like <code>qwq:32b</code>:</p> <pre><code>\u250c\u2500 Assistant \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 \u25b6 Thinking (click to expand)              \u2502\n\u2502                                            \u2502\n\u2502 The answer is 4.                          \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>Clicking the thinking section expands it to show the full reasoning:</p> <pre><code>\u250c\u2500 Assistant \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 \u25bc Thinking                                 \u2502\n\u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502 \u2502 To solve 2+2, I need to add the two   \u2502 \u2502\n\u2502 \u2502 numbers together. 2 + 2 = 4. This is  \u2502 \u2502\n\u2502 \u2502 a basic arithmetic operation.         \u2502 \u2502\n\u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2502                                            \u2502\n\u2502 The answer is 4.                          \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"user-guide/configuration/#context-management","title":"Context Management","text":"<pre><code>context:\n  # Maximum context size (tokens)\n  max_context_size: 100000\n\n  # Maximum file size to include (bytes)\n  max_file_size: 1048576  # 1MB\n\n  # File patterns to exclude\n  exclude_patterns:\n    - \"*.pyc\"\n    - \"__pycache__/*\"\n    - \".git/*\"\n    - \"node_modules/*\"\n</code></pre>"},{"location":"user-guide/configuration/#logging","title":"Logging","text":"<pre><code>logging:\n  # Log level (DEBUG, INFO, WARNING, ERROR)\n  level: INFO\n\n  # Log file location\n  file: ~/.config/consoul/consoul.log\n\n  # Log format\n  format: \"%(asctime)s - %(name)s - %(levelname)s - %(message)s\"\n\n  # Log to console\n  console: false\n</code></pre>"},{"location":"user-guide/configuration/#performance","title":"Performance","text":"<pre><code>performance:\n  # Enable caching\n  cache_enabled: true\n\n  # Cache directory\n  cache_dir: ~/.cache/consoul\n\n  # Cache TTL (seconds)\n  cache_ttl: 3600\n\n  # Maximum concurrent requests\n  max_concurrent_requests: 5\n</code></pre>"},{"location":"user-guide/configuration/#plugins","title":"Plugins","text":"<pre><code>plugins:\n  # Enable plugin system\n  enabled: true\n\n  # Plugin directory\n  directory: ~/.config/consoul/plugins\n\n  # Auto-load plugins\n  auto_load:\n    - git_integration\n    - code_execution\n</code></pre>"},{"location":"user-guide/configuration/#command-line-overrides","title":"Command-Line Overrides","text":"<p>Configuration can be overridden via command-line flags:</p> <pre><code># Override provider\nconsoul chat --provider openai \"Your question\"\n\n# Override model\nconsoul chat --model gpt-4 \"Your question\"\n\n# Override temperature\nconsoul chat --temperature 0.2 \"Your question\"\n\n# Override max tokens\nconsoul chat --max-tokens 1000 \"Your question\"\n\n# Custom system prompt\nconsoul chat --system \"You are a Python expert\" \"Your question\"\n</code></pre>"},{"location":"user-guide/configuration/#configuration-profiles","title":"Configuration Profiles","text":"<p>Profiles define HOW to use AI (system prompts, context settings, conversation behavior), separate from WHICH AI to use (model/provider configuration).</p>"},{"location":"user-guide/configuration/#built-in-profiles","title":"Built-in Profiles","text":"<p>Consoul includes several pre-configured profiles optimized for different tasks:</p>"},{"location":"user-guide/configuration/#default","title":"<code>default</code>","text":"<p>Balanced settings for general development work: - Concise, direct communication style (&lt; 4 lines typically) - Markdown-formatted terminal output - Code quality focus (mimic conventions, runnable code) - Defensive security only</p>"},{"location":"user-guide/configuration/#code-review","title":"<code>code-review</code>","text":"<p>Focused profile for thorough code review: - Senior engineer perspective - Focus on quality, best practices, security - Higher context limit (8192 tokens)</p>"},{"location":"user-guide/configuration/#creative","title":"<code>creative</code>","text":"<p>Brainstorming and ideation profile: - Encourages innovative thinking - No system/git context included - Exploratory approach</p>"},{"location":"user-guide/configuration/#fast","title":"<code>fast</code>","text":"<p>Quick responses with minimal context: - Lower context limit (2048 tokens) - Concise, to-the-point answers - Optimized for speed</p>"},{"location":"user-guide/configuration/#viewing-built-in-profiles","title":"Viewing Built-in Profiles","text":"<pre><code># List all available profiles\nconsoul profile list\n\n# Show profile details\nconsoul profile show default\n\n# View the default system prompt\nconsoul profile show default --system-prompt\n</code></pre>"},{"location":"user-guide/configuration/#creating-custom-profiles","title":"Creating Custom Profiles","text":"<p>Profiles can be customized in your config file:</p> <pre><code># ~/.config/consoul/config.yaml\ndefault_profile: development\n\nprofiles:\n  development:\n    name: development\n    description: \"Custom development profile\"\n    system_prompt: |\n      You are an expert Python developer.\n      Focus on clean, idiomatic code.\n    conversation:\n      persist: true\n      auto_resume: true\n      retention_days: 30\n    context:\n      max_context_tokens: 8192\n      include_system_info: true\n      include_git_info: true\n</code></pre>"},{"location":"user-guide/configuration/#profile-configuration-options","title":"Profile Configuration Options","text":"<pre><code>profiles:\n  my_profile:\n    # Identity\n    name: my_profile\n    description: \"Profile description\"\n\n    # System prompt (optional - overrides built-in)\n    system_prompt: \"Custom instructions for AI behavior\"\n\n    # Conversation settings\n    conversation:\n      persist: false           # Save conversation to disk\n      db_path: ~/.consoul/history.db\n      auto_resume: false       # Resume last conversation on startup\n      retention_days: 0        # Keep conversations for N days (0 = forever)\n      summarize: false         # Summarize old messages\n      summarize_threshold: 20  # Summarize after N messages\n      keep_recent: 10          # Keep N recent messages unsummarized\n\n    # Context settings\n    context:\n      max_context_tokens: 4096        # Maximum context window\n      include_system_info: true       # Include OS/env information\n      include_git_info: true          # Include git repository info\n      custom_context_files: []        # Additional files to include\n</code></pre>"},{"location":"user-guide/configuration/#using-profiles","title":"Using Profiles","text":"<pre><code># Use specific profile\nconsoul chat --profile code-review \"Review this PR\"\n\n# Set default profile in config\nconsoul config set default_profile creative\n\n# Or set via environment variable\nexport CONSOUL_PROFILE=fast\nconsoul chat \"Quick question\"\n</code></pre>"},{"location":"user-guide/configuration/#default-system-prompt","title":"Default System Prompt","text":"<p>The <code>default</code> profile includes a minimal system prompt that emphasizes:</p> <ul> <li>Conciseness: Respond in &lt; 4 lines unless detail requested</li> <li>Terminal formatting: Use markdown for rich rendering</li> <li>Code quality: Follow existing conventions, provide runnable code</li> <li>Security: Defensive security tasks only</li> </ul> <p>You can override this by setting <code>system_prompt</code> in your custom profile.</p>"},{"location":"user-guide/configuration/#configuration-management","title":"Configuration Management","text":""},{"location":"user-guide/configuration/#view-current-configuration","title":"View Current Configuration","text":"<pre><code># Show all settings\nconsoul config show\n\n# Show specific setting\nconsoul config get provider\n</code></pre>"},{"location":"user-guide/configuration/#update-configuration","title":"Update Configuration","text":"<pre><code># Set a value\nconsoul config set provider openai\n\n# Set nested value\nconsoul config set providers.anthropic.temperature 0.8\n</code></pre>"},{"location":"user-guide/configuration/#reset-configuration","title":"Reset Configuration","text":"<pre><code># Reset to defaults\nconsoul config reset\n\n# Reset specific setting\nconsoul config reset theme\n</code></pre>"},{"location":"user-guide/configuration/#example-configurations","title":"Example Configurations","text":""},{"location":"user-guide/configuration/#minimal-configuration","title":"Minimal Configuration","text":"<pre><code>provider: anthropic\nmodel: claude-3-5-sonnet-20241022\n</code></pre>"},{"location":"user-guide/configuration/#full-featured-configuration","title":"Full-Featured Configuration","text":"<pre><code># Core settings\nprovider: anthropic\nmodel: claude-3-5-sonnet-20241022\ntheme: dark\n\n# Providers\nproviders:\n  anthropic:\n    api_key: ${ANTHROPIC_API_KEY}\n    default_model: claude-3-5-sonnet-20241022\n    max_tokens: 4096\n    temperature: 0.7\n\n  openai:\n    api_key: ${OPENAI_API_KEY}\n    default_model: gpt-4\n    temperature: 0.7\n\n# UI\nui:\n  editor: vim\n  show_timestamps: true\n  syntax_highlighting: true\n\n# Conversations\nconversations:\n  save: true\n  max_history: 100\n  auto_save_interval: 30\n\n# Context\ncontext:\n  max_context_size: 100000\n  max_file_size: 1048576\n  exclude_patterns:\n    - \"*.pyc\"\n    - \"__pycache__/*\"\n    - \".git/*\"\n\n# Logging\nlogging:\n  level: INFO\n  file: ~/.config/consoul/consoul.log\n</code></pre>"},{"location":"user-guide/configuration/#tool-configuration","title":"Tool Configuration","text":""},{"location":"user-guide/configuration/#overview","title":"Overview","text":"<p>Consoul's tool calling system allows AI models to execute commands and interact with your system with security controls. See the Tool Calling Guide for comprehensive documentation.</p>"},{"location":"user-guide/configuration/#basic-tool-settings","title":"Basic Tool Settings","text":"<pre><code>tools:\n  # Enable/disable tool calling\n  enabled: true\n\n  # Permission policy (recommended approach)\n  permission_policy: balanced  # paranoid, balanced, trusting, unrestricted\n\n  # Audit logging\n  audit_logging: true\n  audit_log_file: ~/.consoul/tool_audit.jsonl\n\n  # Tool whitelist (empty = all tools allowed)\n  allowed_tools:\n    - bash_execute\n\n  # Bash-specific settings\n  bash:\n    timeout: 30\n    whitelist_patterns:\n      - \"git status\"\n      - \"ls\"\n    blocked_patterns:\n      - \"^sudo\\\\s\"\n      - \"rm\\\\s+(-[rf]+\\\\s+)?/\"\n</code></pre>"},{"location":"user-guide/configuration/#permission-policies","title":"Permission Policies","text":"Policy Description Use Case paranoid Prompt for every command Production, maximum security balanced \u2b50 Auto-approve SAFE, prompt for CAUTION+ Recommended default trusting Auto-approve SAFE+CAUTION, prompt DANGEROUS Development convenience unrestricted Auto-approve all (DANGEROUS) Testing only"},{"location":"user-guide/configuration/#example-configurations_1","title":"Example Configurations","text":"<p>Development: </p><pre><code>  tools:\n    enabled: true\n    permission_policy: balanced\n    bash:\n      timeout: 60\n      whitelist_patterns:\n        - \"git status\"\n        - \"npm test\"\n        - \"make test\"\n</code></pre><p></p> <p>Production: </p><pre><code>    tools:\n      enabled: true\n      permission_policy: paranoid\n      bash:\n        timeout: 30\n        blocked_patterns:\n          - \"rm\"\n          - \"mv\"\n          - \"chmod\"\n</code></pre><p></p>"},{"location":"user-guide/configuration/#image-analysis-tool","title":"Image Analysis Tool","text":"<p>Configure multimodal vision capabilities for analyzing images with AI models.</p> <pre><code>tools:\n  image_analysis:\n    # Enable/disable image analysis\n    enabled: true\n\n    # Auto-detect image paths in messages (e.g., \"analyze screenshot.png\")\n    auto_detect_in_messages: true\n\n    # Maximum file size per image (MB)\n    max_image_size_mb: 5.0\n\n    # Maximum number of images per query\n    max_images_per_query: 5\n\n    # Allowed file extensions\n    allowed_extensions:\n      - \".png\"\n      - \".jpg\"\n      - \".jpeg\"\n      - \".gif\"\n      - \".webp\"\n\n    # Blocked paths for security (prevent accessing sensitive files)\n    blocked_paths:\n      - \"~/.ssh\"           # SSH keys\n      - \"/etc\"             # System config\n      - \"~/.aws\"           # AWS credentials\n      - \"~/.config/consoul\" # Prevent leaking API keys\n      - \"/System\"          # macOS system files\n      - \"/Windows\"         # Windows system files\n</code></pre> <p>Security Considerations:</p> <ul> <li>Images are sent to external AI provider APIs (Claude, OpenAI, Google, etc.)</li> <li>Use <code>blocked_paths</code> to prevent accessing sensitive directories</li> <li>File size limits prevent large uploads that could incur high API costs</li> <li>Magic byte validation prevents malicious file uploads via extension spoofing</li> <li>Path traversal protection blocks attempts to access parent directories</li> </ul> <p>Supported Vision Models:</p> Provider Models Anthropic <code>claude-3-5-sonnet-20241022</code>, <code>claude-3-opus-20240229</code>, <code>claude-3-haiku-20240307</code> OpenAI <code>gpt-4o</code>, <code>gpt-4o-mini</code> Google <code>gemini-2.0-flash</code>, <code>gemini-1.5-pro</code> Ollama (local) <code>llava:latest</code>, <code>bakllava:latest</code> <p>Example Usage:</p> <pre><code># High-resolution diagram analysis\ntools:\n  image_analysis:\n    enabled: true\n    max_image_size_mb: 10.0  # Allow larger technical diagrams\n    max_images_per_query: 3\n    auto_detect_in_messages: true\n\n# Privacy-focused (local only)\nactive_profile: local_vision\n\nprofiles:\n  local_vision:\n    provider: ollama\n    model: llava:latest\n\ntools:\n  image_analysis:\n    enabled: true\n    max_image_size_mb: 20.0  # Local models have no API cost\n</code></pre> <p>See the Image Analysis Guide for detailed usage instructions and examples.</p>"},{"location":"user-guide/configuration/#see-also","title":"See Also","text":"<ul> <li>Tool Calling Guide - Complete documentation</li> <li>Configuration Examples - Pre-configured templates</li> <li>Custom Tool Development - Working examples</li> </ul>"},{"location":"user-guide/configuration/#troubleshooting","title":"Troubleshooting","text":""},{"location":"user-guide/configuration/#configuration-not-loading","title":"Configuration Not Loading","text":"<ol> <li>Check file location: <code>~/.config/consoul/config.yaml</code></li> <li>Verify YAML syntax: <code>python -c \"import yaml; yaml.safe_load(open('~/.config/consoul/config.yaml'))\"</code></li> <li>Check permissions: <code>ls -la ~/.config/consoul/</code></li> </ol>"},{"location":"user-guide/configuration/#environment-variable-issues","title":"Environment Variable Issues","text":"<pre><code># Check if variable is set\necho $ANTHROPIC_API_KEY\n\n# Verify it's in your shell config\ncat ~/.zshrc | grep ANTHROPIC_API_KEY\n\n# Test with explicit variable\nANTHROPIC_API_KEY=your-key consoul chat \"test\"\n</code></pre>"},{"location":"user-guide/configuration/#provider-connection-issues","title":"Provider Connection Issues","text":"<ol> <li>Verify API key is correct</li> <li>Check network connectivity</li> <li>Try a different provider</li> <li>Enable debug logging: <code>consoul config set logging.level DEBUG</code></li> </ol>"},{"location":"user-guide/configuration/#next-steps","title":"Next Steps","text":"<ul> <li>Getting Started \u2013 Learn basic usage</li> <li>Usage Examples \u2013 Common configuration scenarios</li> <li>Tool Calling Guide \u2013 AI command execution</li> <li>API Reference \u2013 Package documentation</li> </ul>"},{"location":"user-guide/file-editing/","title":"File Editing","text":""},{"location":"user-guide/file-editing/#file-editing-tools","title":"File Editing Tools","text":"<p>Let the AI write, edit, and manage files for you\u2014with powerful safety controls and surgical precision.</p>"},{"location":"user-guide/file-editing/#introduction","title":"Introduction","text":"<p>Consoul's file editing tools let AI models create, modify, and delete files in your project. Instead of copying code from a chat window and manually pasting it into your editor, the AI can make changes directly\u2014and you can review them first.</p> <p>Quick example: </p><pre><code>$ consoul chat \"Add error handling to calculate_total in src/utils.py\"\n</code></pre><p></p> <p>The AI will find the function, add try/catch blocks, preserve your formatting, and make the change\u2014all without you opening an editor.</p> <p>Related Tools: - Code Search - Find code before editing - Image Analysis - Analyze screenshots and UI</p>"},{"location":"user-guide/file-editing/#table-of-contents","title":"Table of Contents","text":"<ul> <li>Overview</li> <li>Available Tools</li> <li>edit_file_lines</li> <li>edit_file_search_replace</li> <li>create_file</li> <li>delete_file</li> <li>append_to_file</li> <li>Configuration</li> <li>Security &amp; Permissions</li> <li>Progressive Matching</li> <li>Common Workflows</li> <li>Troubleshooting</li> </ul>"},{"location":"user-guide/file-editing/#overview","title":"Overview","text":""},{"location":"user-guide/file-editing/#what-are-file-editing-tools","title":"What are File Editing Tools?","text":"<p>File editing tools enable AI models to create, modify, and delete files in your project with precision and safety controls. These tools provide:</p> <ul> <li>Line-based editing: Modify specific lines or ranges with surgical precision</li> <li>Search/replace: Find and replace content with progressive matching</li> <li>Safety controls: Path validation, extension filtering, size limits</li> <li>Preview-before-edit: Dry-run mode shows diff previews without modifications</li> <li>Atomic operations: Temp file + rename prevents corruption</li> <li>Optimistic locking: Detects concurrent edits via expected_hash</li> </ul>"},{"location":"user-guide/file-editing/#why-use-file-editing-tools","title":"Why Use File Editing Tools?","text":"<p>Instead of manual editing: </p><pre><code># Manual approach\n$ vim src/utils.py  # Find line 42\n$ # Make change manually\n$ # Hope you didn't introduce syntax errors\n</code></pre><p></p> <p>AI-powered editing: </p><pre><code>console.chat(\"Add error handling to the calculate_total function in src/utils.py\")\n# AI finds function, adds try/catch, preserves formatting\n</code></pre><p></p> <p>Benefits: - \u2705 AI understands context and intent - \u2705 Preserves formatting (tabs/spaces, line endings) - \u2705 Generates diff previews for review - \u2705 Validates changes before applying - \u2705 Prevents path traversal and dangerous operations</p>"},{"location":"user-guide/file-editing/#security-model","title":"Security Model","text":"<p>Most file editing tools are classified as Risk Level: CAUTION, with the exception of <code>delete_file</code> which is Risk Level: DANGEROUS due to its destructive nature. All file operations require user approval by default.</p> <p>Security layers: 1. Path validation: Blocks <code>..</code> traversal and absolute dangerous paths 2. Extension filtering: Whitelist of allowed file extensions 3. Size limits: Prevents runaway edits (max bytes, max edits) 4. Approval workflow: User confirms before modifications 5. Audit logging: All operations logged with timestamps</p>"},{"location":"user-guide/file-editing/#quick-start","title":"Quick Start","text":"<p>Enable in configuration: </p><pre><code>profiles:\n  default:\n    tools:\n      enabled: true\n      permission_policy: balanced  # Prompts for CAUTION-level tools\n</code></pre><p></p> <p>Basic usage: </p><pre><code>from consoul import Consoul\n\nconsole = Consoul(tools=True)\n\n# Let AI edit files\nconsole.chat(\"Fix the typo in line 12 of README.md\")\nconsole.chat(\"Refactor the login function to use async/await\")\nconsole.chat(\"Add type hints to all functions in src/models.py\")\n</code></pre><p></p>"},{"location":"user-guide/file-editing/#available-tools","title":"Available Tools","text":""},{"location":"user-guide/file-editing/#edit_file_lines","title":"edit_file_lines","text":"<p>Edit specific lines or line ranges with exact precision.</p> <p>Capabilities: - Edit single lines or ranges (e.g., \"5-10\", \"42\") - Replace multiple non-overlapping ranges in one operation - Delete lines by providing empty content - Insert lines by expanding ranges - Optimistic locking via <code>expected_hash</code> - Dry-run mode for previews</p> <p>Risk Level: CAUTION (modifies files, requires approval)</p> <p>Input Schema: </p><pre><code>class EditFileLinesInput(BaseModel):\n    file_path: str              # File to edit\n    line_edits: dict[str, str]  # {\"3-5\": \"new content\", \"10\": \"line 10\"}\n    expected_hash: str | None   # SHA256 for optimistic locking\n    dry_run: bool               # Preview without modifying (default: False)\n</code></pre><p></p> <p>Example: </p><pre><code>from consoul.ai.tools.implementations import edit_file_lines\n\n# Edit single line\nresult = edit_file_lines.invoke({\n    \"file_path\": \"src/main.py\",\n    \"line_edits\": {\"42\": \"    logger.error('Something went wrong')\"}\n})\n\n# Edit multiple ranges\nresult = edit_file_lines.invoke({\n    \"file_path\": \"src/config.py\",\n    \"line_edits\": {\n        \"1-3\": \"# Updated header\\n# Version 2.0\\n# Author: Team\",\n        \"25\": \"DEBUG = False\"\n    }\n})\n\n# Preview changes (dry-run)\nresult = edit_file_lines.invoke({\n    \"file_path\": \"src/utils.py\",\n    \"line_edits\": {\"10-15\": \"# TODO: Refactor this section\"},\n    \"dry_run\": True\n})\n# Result contains diff preview, file unchanged\n</code></pre><p></p> <p>Response Format: </p><pre><code>{\n  \"status\": \"success\",\n  \"bytes_written\": 1024,\n  \"checksum\": \"abc123...\",\n  \"changed_lines\": [\"3-5\", \"10\"],\n  \"preview\": \"--- a/src/main.py\\n+++ b/src/main.py\\n@@ -42,1 +42,1 @@\\n-    print('Error')\\n+    logger.error('Something went wrong')\\n\"\n}\n</code></pre><p></p> <p>Common Use Cases: - Fix specific lines identified by linters - Update version numbers or constants - Add logging statements - Fix syntax errors at known line numbers - Batch update configuration values</p>"},{"location":"user-guide/file-editing/#edit_file_search_replace","title":"edit_file_search_replace","text":"<p>Search for content and replace with progressive matching (strict/whitespace/fuzzy).</p> <p>Capabilities: - Strict matching: Exact text match (default) - Whitespace tolerance: Ignores leading/trailing whitespace and indentation - Fuzzy matching: Similarity-based matching for typos - Tab preservation: Maintains original indentation style - CRLF preservation: Keeps Windows line endings - Ambiguity detection: Warns if search text appears multiple times - Similarity suggestions: \"Did you mean...?\" for failed searches</p> <p>Risk Level: CAUTION (modifies files, requires approval)</p> <p>Input Schema: </p><pre><code>class EditFileSearchReplaceInput(BaseModel):\n    file_path: str\n    edits: list[dict]           # [{\"search\": \"old\", \"replace\": \"new\"}]\n    tolerance: str              # \"strict\", \"whitespace\", or \"fuzzy\"\n    expected_hash: str | None\n    dry_run: bool\n</code></pre><p></p> <p>Example (Strict): </p><pre><code>from consoul.ai.tools.implementations import edit_file_search_replace\n\n# Exact match\nresult = edit_file_search_replace.invoke({\n    \"file_path\": \"src/models.py\",\n    \"edits\": [\n        {\"search\": \"class User:\", \"replace\": \"class User(BaseModel):\"}\n    ],\n    \"tolerance\": \"strict\"\n})\n</code></pre><p></p> <p>Example (Whitespace Tolerance): </p><pre><code># Ignores indentation differences - useful when search block has different indent\nresult = edit_file_search_replace.invoke({\n    \"file_path\": \"src/app.py\",\n    \"edits\": [\n        {\n            \"search\": \"def login():\\n    validate()\\n    return True\",\n            \"replace\": \"async def login():\\n    await validate()\\n    return True\"\n        }\n    ],\n    \"tolerance\": \"whitespace\"\n})\n# Matches even if actual file has different indentation\n# Preserves original tabs/spaces in replacement\n</code></pre><p></p> <p>Example (Fuzzy Matching): </p><pre><code># Handles typos and minor differences\nresult = edit_file_search_replace.invoke({\n    \"file_path\": \"src/utils.py\",\n    \"edits\": [\n        {\n            \"search\": \"def calculate_totle():\",  # Typo in search\n            \"replace\": \"def calculate_total():\"\n        }\n    ],\n    \"tolerance\": \"fuzzy\"\n})\n# Matches \"def calculate_total():\" with 90%+ similarity\n# Warning: \"Fuzzy matched with 94% similarity\"\n</code></pre><p></p> <p>Response Format: </p><pre><code>{\n  \"status\": \"success\",\n  \"bytes_written\": 2048,\n  \"checksum\": \"def456...\",\n  \"preview\": \"--- a/src/models.py\\n+++ b/src/models.py\\n...\",\n  \"warnings\": [\"Fuzzy matched 'calculate_totle' \u2192 'calculate_total' (94% similarity)\"]\n}\n</code></pre><p></p> <p>Common Use Cases: - Refactor function signatures - Rename classes/variables - Update import statements - Fix typos with fuzzy matching - Multi-line block replacements</p>"},{"location":"user-guide/file-editing/#create_file","title":"create_file","text":"<p>Create new files or overwrite existing ones with safety controls.</p> <p>Capabilities: - Create files with automatic parent directory creation - Overwrite protection (disabled by default) - Extension validation - Content size limits - Dry-run preview shows \"new file\" diff - Returns SHA256 checksum</p> <p>Risk Level: CAUTION (creates files, requires approval)</p> <p>Input Schema: </p><pre><code>class CreateFileInput(BaseModel):\n    file_path: str\n    content: str\n    overwrite: bool      # Allow overwriting existing files (default: False)\n    dry_run: bool\n</code></pre><p></p> <p>Example: </p><pre><code>from consoul.ai.tools.implementations import create_file\n\n# Create new file\nresult = create_file.invoke({\n    \"file_path\": \"src/new_feature.py\",\n    \"content\": '''\"\"\"New feature module.\"\"\"\n\ndef new_function():\n    \"\"\"Placeholder for new functionality.\"\"\"\n    pass\n'''\n})\n\n# Create with nested directories\nresult = create_file.invoke({\n    \"file_path\": \"docs/guides/advanced/custom-tools.md\",\n    \"content\": \"# Custom Tools Guide\\n\\n...\"\n})\n# Creates docs/guides/advanced/ directories automatically\n\n# Preview file creation (dry-run)\nresult = create_file.invoke({\n    \"file_path\": \"config/production.yaml\",\n    \"content\": \"env: production\\ndebug: false\\n\",\n    \"dry_run\": True\n})\n# Shows diff: all lines marked as additions, file not created\n</code></pre><p></p> <p>Overwrite Control: </p><pre><code># Attempt to overwrite without permission (default)\nresult = create_file.invoke({\n    \"file_path\": \"README.md\",  # File exists\n    \"content\": \"New content\",\n    \"overwrite\": False  # Default\n})\n# Error: \"File already exists and overwrite=False\"\n\n# Explicit overwrite (requires allow_overwrite in config)\nresult = create_file.invoke({\n    \"file_path\": \"README.md\",\n    \"content\": \"Updated content\",\n    \"overwrite\": True  # Requires FileEditToolConfig.allow_overwrite=True\n})\n</code></pre><p></p> <p>Response Format: </p><pre><code>{\n  \"status\": \"success\",\n  \"bytes_written\": 512,\n  \"checksum\": \"789abc...\",\n  \"preview\": \"--- /dev/null\\n+++ b/src/new_feature.py\\n@@ -0,0 +1,5 @@\\n+\\\"\\\"\\\"New feature module.\\\"\\\"\\\"\\n+\\n+def new_function():\\n+...\"\n}\n</code></pre><p></p> <p>Common Use Cases: - Generate boilerplate code files - Create configuration files - Initialize project structure - Generate documentation - Create test files</p>"},{"location":"user-guide/file-editing/#delete_file","title":"delete_file","text":"<p>Safely delete files with validation and approval.</p> <p>Capabilities: - Delete individual files (not directories) - Path validation (blocks dangerous paths) - Extension filtering - Dry-run preview shows deletion diff - Returns absolute path and timestamp</p> <p>Risk Level: DANGEROUS (destructive operation, always requires approval)</p> <p>Input Schema: </p><pre><code>class DeleteFileInput(BaseModel):\n    file_path: str\n    dry_run: bool\n</code></pre><p></p> <p>Example: </p><pre><code>from consoul.ai.tools.implementations import delete_file\n\n# Delete file\nresult = delete_file.invoke({\n    \"file_path\": \"old_module.py\"\n})\n\n# Preview deletion (dry-run)\nresult = delete_file.invoke({\n    \"file_path\": \"temp/cache.json\",\n    \"dry_run\": True\n})\n# Shows diff: all lines marked as deletions, file not deleted\n</code></pre><p></p> <p>Response Format: </p><pre><code>{\n  \"status\": \"deleted\",\n  \"path\": \"/absolute/path/to/old_module.py\",\n  \"timestamp\": \"2025-11-15T10:30:45.123456Z\"\n}\n</code></pre><p></p> <p>Security: </p><pre><code># Blocked: Directory deletion\ndelete_file.invoke({\"file_path\": \"src/\"})\n# Error: \"Not a file: src/ is a directory\"\n\n# Blocked: Path traversal\ndelete_file.invoke({\"file_path\": \"../../../etc/passwd\"})\n# Error: \"Path traversal detected\"\n\n# Blocked: Extension filtering (if configured)\ndelete_file.invoke({\"file_path\": \"important.db\"})\n# Error: \"Extension .db not allowed\"\n</code></pre><p></p> <p>Common Use Cases: - Remove deprecated files - Clean up temporary files - Delete generated files before regeneration - Remove old backups - Cleanup after refactoring</p>"},{"location":"user-guide/file-editing/#append_to_file","title":"append_to_file","text":"<p>Append content to existing files or create new ones.</p> <p>Capabilities: - Append to end of existing files - Smart newline handling (adds separator if needed) - Create file if missing (opt-in via <code>create_if_missing</code>) - CRLF/LF preservation - Size limit validation (total file size after append) - Dry-run preview shows appended content</p> <p>Risk Level: CAUTION (modifies files, requires approval)</p> <p>Input Schema: </p><pre><code>class AppendToFileInput(BaseModel):\n    file_path: str\n    content: str\n    create_if_missing: bool  # Create file if doesn't exist (default: True)\n    dry_run: bool\n</code></pre><p></p> <p>Example: </p><pre><code>from consoul.ai.tools.implementations import append_to_file\n\n# Append to existing file\nresult = append_to_file.invoke({\n    \"file_path\": \"CHANGELOG.md\",\n    \"content\": \"\\n## v2.0.0\\n\\n- Added file editing tools\\n- Improved security\"\n})\n\n# Append with newline separator (automatic)\nresult = append_to_file.invoke({\n    \"file_path\": \"logs/app.log\",\n    \"content\": \"[2025-11-15] Application started\"\n})\n# If file doesn't end with \\n, adds \\n before appending\n\n# Create new file (create_if_missing=True)\nresult = append_to_file.invoke({\n    \"file_path\": \"notes.txt\",\n    \"content\": \"First note\\n\",\n    \"create_if_missing\": True\n})\n\n# Prevent creation (create_if_missing=False)\nresult = append_to_file.invoke({\n    \"file_path\": \"missing.txt\",\n    \"content\": \"Content\",\n    \"create_if_missing\": False\n})\n# Error: \"File not found and create_if_missing=False\"\n</code></pre><p></p> <p>Newline Handling: </p><pre><code># File ends without newline: \"line1\\nline2\"\nappend_to_file.invoke({\"file_path\": \"test.txt\", \"content\": \"line3\"})\n# Result: \"line1\\nline2\\nline3\" (added separator)\n\n# File ends with newline: \"line1\\nline2\\n\"\nappend_to_file.invoke({\"file_path\": \"test.txt\", \"content\": \"line3\"})\n# Result: \"line1\\nline2\\nline3\" (no double newline)\n</code></pre><p></p> <p>Response Format: </p><pre><code>{\n  \"status\": \"success\",\n  \"bytes_written\": 1536,\n  \"checksum\": \"bcd789...\",\n  \"preview\": \"--- a/CHANGELOG.md\\n+++ b/CHANGELOG.md\\n@@ -10,0 +10,4 @@\\n+\\n+## v2.0.0\\n+...\"\n}\n</code></pre><p></p> <p>Common Use Cases: - Add changelog entries - Append log entries - Add test cases - Extend configuration files - Add documentation sections</p>"},{"location":"user-guide/file-editing/#configuration","title":"Configuration","text":""},{"location":"user-guide/file-editing/#fileedittoolconfig","title":"FileEditToolConfig","text":"<p>Configure file editing tools via <code>FileEditToolConfig</code> in your profile:</p> <pre><code>profiles:\n  default:\n    tools:\n      enabled: true\n      file_edit:\n        # Extension filtering\n        allowed_extensions:\n          - \".py\"\n          - \".js\"\n          - \".ts\"\n          - \".md\"\n          - \".txt\"\n          - \".json\"\n          - \".yaml\"\n          - \".yml\"\n          # \"\" allows extensionless files (Dockerfile, Makefile)\n\n        # Path blocking\n        blocked_paths:\n          # System defaults\n          - \"/etc/shadow\"\n          - \"/etc/passwd\"\n          - \"/proc\"\n          - \"/dev\"\n          - \"/sys\"\n          # CRITICAL: Add secret paths (not in defaults!)\n          - \"~/.ssh\"\n          - \"~/.aws\"\n          - \"~/.gnupg\"\n\n        # Size limits\n        max_payload_bytes: 1048576  # 1MB max content size\n        max_edits: 50               # Max line edits per operation\n\n        # Overwrite control\n        allow_overwrite: false      # Must be true to overwrite existing files\n\n        # Encoding\n        default_encoding: \"utf-8\"   # File encoding for read/write\n</code></pre>"},{"location":"user-guide/file-editing/#configuration-options","title":"Configuration Options","text":"Option Type Default Description <code>allowed_extensions</code> list[str] <code>[]</code> (all) Allowed file extensions (empty = all allowed) <code>blocked_paths</code> list[str] <code>[\"/etc\", \"/sys\", ...]</code> Paths that cannot be edited <code>max_payload_bytes</code> int <code>1048576</code> (1MB) Maximum content size in bytes <code>max_edits</code> int <code>50</code> Maximum number of line edits per operation <code>allow_overwrite</code> bool <code>false</code> Allow <code>create_file</code> to overwrite existing files <code>default_encoding</code> str <code>\"utf-8\"</code> Default file encoding"},{"location":"user-guide/file-editing/#extension-filtering","title":"Extension Filtering","text":"<p>Allow all file types: </p><pre><code>file_edit:\n  allowed_extensions: []  # Empty list = all extensions allowed\n</code></pre><p></p> <p>Restrict to specific types: </p><pre><code>file_edit:\n  allowed_extensions:\n    - \".py\"    # Python\n    - \".js\"    # JavaScript\n    - \".md\"    # Markdown\n    - \".txt\"   # Text\n    - \"\"       # Extensionless (Dockerfile, Makefile)\n</code></pre><p></p> <p>Case-insensitive matching: - <code>.py</code> matches <code>.PY</code>, <code>.Py</code>, <code>.pY</code> - Extension filtering is case-insensitive</p>"},{"location":"user-guide/file-editing/#path-blocking","title":"Path Blocking","text":"<p>Default blocked paths: </p><pre><code>DEFAULT_BLOCKED_PATHS = [\n    \"/etc/shadow\",  # Shadow password file\n    \"/etc/passwd\",  # User account information\n    \"/proc\",        # Process information\n    \"/dev\",         # Device files\n    \"/sys\",         # Kernel interface\n]\n</code></pre><p></p> <p>\u26a0\ufe0f WARNING: The defaults do NOT include common secret locations like <code>~/.ssh</code>, <code>~/.aws</code>, or <code>~/.gnupg</code>. You must explicitly add these to your configuration for production use.</p> <p>Recommended production configuration: </p><pre><code>file_edit:\n  blocked_paths:\n    # System defaults (already included)\n    - \"/etc/shadow\"\n    - \"/etc/passwd\"\n    - \"/proc\"\n    - \"/dev\"\n    - \"/sys\"\n    # CRITICAL ADDITIONS for production\n    - \"~/.ssh\"          # SSH keys\n    - \"~/.aws\"          # AWS credentials\n    - \"~/.gnupg\"        # GPG keys\n    - \"~/.config/gcloud\"  # Google Cloud credentials\n    # Optional project-specific blocks\n    - \"/var/www/production\"  # Production web root\n    - \"~/.config/secrets\"     # Local secrets\n    - \"${PROJECT_ROOT}/vendor\"  # Third-party code\n</code></pre><p></p>"},{"location":"user-guide/file-editing/#size-limits","title":"Size Limits","text":"<p>Prevent large edits: </p><pre><code>file_edit:\n  max_payload_bytes: 524288  # 512KB limit\n  max_edits: 25              # Max 25 line ranges per edit\n</code></pre><p></p> <p>Validation: - <code>edit_file_lines</code>: Total size of all <code>line_edits</code> values - <code>edit_file_search_replace</code>: Total size of all <code>replace</code> values - <code>create_file</code>: Size of <code>content</code> parameter - <code>append_to_file</code>: Size of existing file + new <code>content</code></p>"},{"location":"user-guide/file-editing/#encoding-settings","title":"Encoding Settings","text":"<p>UTF-8 (default): </p><pre><code>file_edit:\n  default_encoding: \"utf-8\"  # Unicode support\n</code></pre><p></p> <p>Latin-1 (fallback): </p><pre><code>file_edit:\n  default_encoding: \"latin-1\"  # ASCII + extended characters\n</code></pre><p></p> <p>Note: Files are always read with UTF-8 first, falling back to Latin-1 if decoding fails.</p>"},{"location":"user-guide/file-editing/#security-permissions","title":"Security &amp; Permissions","text":""},{"location":"user-guide/file-editing/#risk-classification","title":"Risk Classification","text":"<p>Risk Levels: - Most file editing tools: CAUTION (edit_file_lines, edit_file_search_replace, create_file, append_to_file) - <code>delete_file</code>: DANGEROUS (destructive operation)</p> <p>Approval Requirements: - CAUTION tools: Require approval with <code>balanced</code> or <code>paranoid</code>, auto-approved with <code>trusting</code> - DANGEROUS tools: Always require approval (even with <code>trusting</code>), only auto-approved with <code>unrestricted</code></p>"},{"location":"user-guide/file-editing/#path-validation","title":"Path Validation","text":"<p>Protections: 1. Path traversal detection: Blocks <code>..</code> in paths 2. Absolute path validation: Checks against blocked paths 3. Symlink resolution: Resolves to real path before validation 4. Directory rejection: File operations reject directories</p> <p>Example: </p><pre><code># BLOCKED: Path traversal\nedit_file_lines.invoke({\n    \"file_path\": \"../../../etc/passwd\",\n    \"line_edits\": {\"1\": \"hacked\"}\n})\n# Error: \"Path traversal detected: .. not allowed\"\n\n# BLOCKED: Blocked path\ncreate_file.invoke({\n    \"file_path\": \"/etc/malicious.conf\",\n    \"content\": \"bad content\"\n})\n# Error: \"Path is blocked: /etc\"\n\n# ALLOWED: Safe relative path\nedit_file_lines.invoke({\n    \"file_path\": \"src/utils.py\",\n    \"line_edits\": {\"42\": \"fixed\"}\n})\n</code></pre><p></p>"},{"location":"user-guide/file-editing/#extension-validation","title":"Extension Validation","text":"<p>Enforcement: - Checked AFTER path traversal validation - Case-insensitive comparison - Extensionless files require explicit <code>\"\"</code> in allowed list</p> <p>Example: </p><pre><code># Configuration\nfile_edit:\n  allowed_extensions:\n    - \".py\"\n    - \".md\"\n</code></pre><p></p> <pre><code># ALLOWED\nedit_file_lines.invoke({\n    \"file_path\": \"src/main.py\",  # .py allowed\n    \"line_edits\": {\"1\": \"# Updated\"}\n})\n\n# BLOCKED\nedit_file_lines.invoke({\n    \"file_path\": \"config.yaml\",  # .yaml not in allowed list\n    \"line_edits\": {\"1\": \"env: prod\"}\n})\n# Error: \"Extension .yaml not allowed\"\n\n# BLOCKED: Extensionless without explicit permission\nedit_file_lines.invoke({\n    \"file_path\": \"Dockerfile\",\n    \"line_edits\": {\"1\": \"FROM python:3.12\"}\n})\n# Error: \"Extensionless files not allowed (add '' to allowed_extensions)\"\n</code></pre>"},{"location":"user-guide/file-editing/#approval-workflow","title":"Approval Workflow","text":"<p>With TUI (interactive): 1. AI requests file edit operation 2. Approval modal shows:    - Tool name and file path    - Diff preview (if dry-run supported)    - Risk level: CAUTION 3. User approves or denies 4. If approved, operation executes 5. Result shown in chat interface</p> <p>With SDK (programmatic): </p><pre><code>from consoul.ai.tools.approval import ApprovalProvider, ToolApprovalRequest, ToolApprovalResponse\n\nclass CustomApprovalProvider(ApprovalProvider):\n    async def request_approval(self, request: ToolApprovalRequest) -&gt; ToolApprovalResponse:\n        # Custom approval logic\n        if request.preview:\n            print(\"Diff preview:\\n\" + request.preview)\n\n        # Auto-approve Python files\n        if request.arguments[\"file_path\"].endswith(\".py\"):\n            return ToolApprovalResponse(approved=True)\n\n        # Deny other files\n        return ToolApprovalResponse(\n            approved=False,\n            reason=\"Only .py files auto-approved\"\n        )\n</code></pre><p></p>"},{"location":"user-guide/file-editing/#audit-logging","title":"Audit Logging","text":"<p>All file operations logged: </p><pre><code>{\"timestamp\": \"2025-11-15T10:30:45Z\", \"event_type\": \"request\", \"tool_name\": \"edit_file_lines\", \"arguments\": {\"file_path\": \"src/main.py\", \"line_edits\": {...}}}\n{\"timestamp\": \"2025-11-15T10:30:46Z\", \"event_type\": \"approval\", \"tool_name\": \"edit_file_lines\", \"decision\": true}\n{\"timestamp\": \"2025-11-15T10:30:47Z\", \"event_type\": \"result\", \"tool_name\": \"edit_file_lines\", \"result\": {\"status\": \"success\", \"bytes_written\": 1024, ...}}\n</code></pre><p></p> <p>Query audit log: </p><pre><code># View all file edits\njq 'select(.tool_name | startswith(\"edit_\") or startswith(\"create_\") or startswith(\"delete_\") or startswith(\"append_\"))' \\\n  ~/.consoul/tool_audit.jsonl\n\n# Find denied operations\njq 'select(.event_type==\"denial\" and (.tool_name | contains(\"file\")))' \\\n  ~/.consoul/tool_audit.jsonl\n</code></pre><p></p>"},{"location":"user-guide/file-editing/#progressive-matching","title":"Progressive Matching","text":""},{"location":"user-guide/file-editing/#overview_1","title":"Overview","text":"<p>Progressive matching allows <code>edit_file_search_replace</code> to handle variations in whitespace, formatting, and even typos. Three tolerance levels are available:</p> Tolerance Use Case Matches Preserves strict Exact replacement Character-for-character N/A (exact match) whitespace Refactoring Ignores indentation Original tabs/spaces, CRLF fuzzy Fixing typos Similarity \u226580% Original content structure"},{"location":"user-guide/file-editing/#strict-matching-default","title":"Strict Matching (Default)","text":"<p>Behavior: - Exact character-for-character match - Whitespace must match exactly - Line endings must match exactly - Fastest matching mode</p> <p>Use when: - You know the exact content - Replacing constants or literals - Working with machine-generated code</p> <p>Example: </p><pre><code>edit_file_search_replace.invoke({\n    \"file_path\": \"config.py\",\n    \"edits\": [\n        {\"search\": \"DEBUG = True\", \"replace\": \"DEBUG = False\"}\n    ],\n    \"tolerance\": \"strict\"\n})\n# Only matches if exactly \"DEBUG = True\" (no extra spaces)\n</code></pre><p></p>"},{"location":"user-guide/file-editing/#whitespace-tolerance","title":"Whitespace Tolerance","text":"<p>Behavior: - Ignores leading/trailing whitespace on each line - Ignores differences in indentation - Preserves original tab/space style - Preserves original line endings (CRLF/LF)</p> <p>Use when: - Search block has different indentation than file - Refactoring code with varying indent levels - Copying code from documentation</p> <p>Example: </p><pre><code># File contains (with 4-space indent):\n\"\"\"\n    def login(user):\n        validate(user)\n        return True\n\"\"\"\n\n# Search with no indent\nedit_file_search_replace.invoke({\n    \"file_path\": \"auth.py\",\n    \"edits\": [\n        {\n            \"search\": \"def login(user):\\n    validate(user)\\n    return True\",\n            \"replace\": \"async def login(user):\\n    await validate(user)\\n    return True\"\n        }\n    ],\n    \"tolerance\": \"whitespace\"\n})\n# Matches despite indentation difference\n# Preserves original 4-space indent in replacement\n</code></pre><p></p> <p>Tab Preservation: </p><pre><code># File uses tabs: \"\\tdef foo():\\n\\t\\tpass\"\n# Search uses spaces: \"def foo():\\n    pass\"\n\nedit_file_search_replace.invoke({\n    \"edits\": [{\"search\": \"def foo():\\n    pass\", \"replace\": \"def bar():\\n    return\"}],\n    \"tolerance\": \"whitespace\"\n})\n# Matches and preserves tabs: \"\\tdef bar():\\n\\t\\treturn\"\n</code></pre><p></p> <p>CRLF Preservation: </p><pre><code># File uses CRLF: \"line1\\r\\nline2\\r\\n\"\n# Search uses LF: \"line1\\nline2\"\n\nedit_file_search_replace.invoke({\n    \"edits\": [{\"search\": \"line1\\nline2\", \"replace\": \"LINE1\\nLINE2\"}],\n    \"tolerance\": \"whitespace\"\n})\n# Matches and preserves CRLF: \"LINE1\\r\\nLINE2\\r\\n\"\n</code></pre><p></p>"},{"location":"user-guide/file-editing/#fuzzy-matching","title":"Fuzzy Matching","text":"<p>Behavior: - Matches based on similarity score (\u226580% default) - Handles typos in search text - Shows confidence score in warning - Suggests similar blocks if no match</p> <p>Use when: - You have a typo in the search text - Code has minor formatting differences - You want \"did you mean?\" suggestions</p> <p>Example: </p><pre><code># File contains: \"def calculate_total(items):\"\n\n# Search has typo\nedit_file_search_replace.invoke({\n    \"file_path\": \"utils.py\",\n    \"edits\": [\n        {\n            \"search\": \"def calculate_totle(items):\",  # Typo: \"totle\"\n            \"replace\": \"def calculate_sum(items):\"\n        }\n    ],\n    \"tolerance\": \"fuzzy\"\n})\n# Success with warning: \"Fuzzy matched with 94% similarity\"\n</code></pre><p></p> <p>Similarity Suggestions: </p><pre><code># Search text not found\nedit_file_search_replace.invoke({\n    \"edits\": [{\"search\": \"def proces_order():\", \"replace\": \"...\"}],\n    \"tolerance\": \"fuzzy\"\n})\n# Error: \"Search text 'def proces_order():' not found\"\n# Did you mean:\n#   - def process_order():    (91% similar)\n#   - def process_payment():  (85% similar)\n</code></pre><p></p>"},{"location":"user-guide/file-editing/#common-workflows","title":"Common Workflows","text":""},{"location":"user-guide/file-editing/#workflow-1-refactoring-a-function","title":"Workflow 1: Refactoring a Function","text":"<p>Objective: Rename function and update signature</p> <pre><code>from consoul import Consoul\n\nconsole = Consoul(tools=True)\n\n# Step 1: Find function definition and usages\nconsole.chat(\"Find all usages of calculate_total() in the project\")\n# AI uses code_search + find_references\n\n# Step 2: Rename function with whitespace tolerance\nconsole.chat(\"\"\"\nRename calculate_total() to calculate_sum() in src/utils.py.\nThe function signature should also accept a 'tax_rate' parameter.\n\"\"\")\n# AI uses edit_file_search_replace with tolerance=\"whitespace\"\n\n# Step 3: Update all call sites\nconsole.chat(\"Update all calls to calculate_sum() to include tax_rate=0.08\")\n# AI edits each file with line-based edits\n</code></pre>"},{"location":"user-guide/file-editing/#workflow-2-batch-configuration-updates","title":"Workflow 2: Batch Configuration Updates","text":"<p>Objective: Update config values across multiple files</p> <pre><code>console.chat(\"\"\"\nUpdate all YAML files in config/ to set:\n- environment: production\n- debug: false\n- log_level: INFO\n\"\"\")\n# AI uses glob pattern to find files, edit_file_search_replace for each\n</code></pre>"},{"location":"user-guide/file-editing/#workflow-3-adding-documentation","title":"Workflow 3: Adding Documentation","text":"<p>Objective: Add docstrings to undocumented functions</p> <pre><code>console.chat(\"\"\"\nFind all functions in src/ without docstrings and add comprehensive\ndocstrings following Google style guide.\n\"\"\")\n# AI uses code_search to find functions, edit_file_lines to add docstrings\n</code></pre>"},{"location":"user-guide/file-editing/#workflow-4-error-handling","title":"Workflow 4: Error Handling","text":"<p>Objective: Add try/catch to risky operations</p> <pre><code>console.chat(\"\"\"\nReview all file I/O operations in src/ and add proper error handling\nwith try/except blocks. Log errors using the logger module.\n\"\"\")\n# AI uses grep_search to find file operations, edit_file_search_replace to wrap in try/catch\n</code></pre>"},{"location":"user-guide/file-editing/#workflow-5-type-hints-migration","title":"Workflow 5: Type Hints Migration","text":"<p>Objective: Add type hints to existing Python code</p> <pre><code>console.chat(\"\"\"\nAdd type hints to all function signatures in src/models.py.\nUse typing module for complex types (List, Dict, Optional).\n\"\"\")\n# AI uses edit_file_lines to add type hints while preserving formatting\n</code></pre>"},{"location":"user-guide/file-editing/#troubleshooting","title":"Troubleshooting","text":""},{"location":"user-guide/file-editing/#common-errors","title":"Common Errors","text":""},{"location":"user-guide/file-editing/#validationerror-search-text-not-found","title":"ValidationError: Search text not found","text":"<p>Problem: <code>edit_file_search_replace</code> can't find the search text</p> <p>Causes &amp; Solutions:</p> <ol> <li> <p>Whitespace differences: </p><pre><code># Change tolerance from strict to whitespace\nedit_file_search_replace.invoke({\n    \"edits\": [...],\n    \"tolerance\": \"whitespace\"  # Instead of \"strict\"\n})\n</code></pre><p></p> </li> <li> <p>Typo in search text: </p><pre><code># Use fuzzy matching\nedit_file_search_replace.invoke({\n    \"edits\": [...],\n    \"tolerance\": \"fuzzy\"\n})\n# Check \"Did you mean?\" suggestions in error message\n</code></pre><p></p> </li> <li> <p>Content changed since read: </p><pre><code># Re-read file and try again\n# Or use expected_hash to detect concurrent edits\n</code></pre><p></p> </li> </ol>"},{"location":"user-guide/file-editing/#validationerror-overlapping-line-ranges","title":"ValidationError: Overlapping line ranges","text":"<p>Problem: <code>edit_file_lines</code> edits overlap (e.g., \"1-5\" and \"3-7\")</p> <p>Solution: Use non-overlapping ranges </p><pre><code># BAD: Overlapping\n{\"line_edits\": {\"1-5\": \"...\", \"3-7\": \"...\"}}\n\n# GOOD: Non-overlapping\n{\"line_edits\": {\"1-5\": \"...\", \"6-10\": \"...\"}}\n</code></pre><p></p>"},{"location":"user-guide/file-editing/#validationerror-line-x-exceeds-file-length","title":"ValidationError: Line X exceeds file length","text":"<p>Problem: Line number out of bounds</p> <p>Solution: Check file length first </p><pre><code># Read file first to see number of lines\nread_file.invoke({\"file_path\": \"test.py\"})\n# Then edit within bounds\n</code></pre><p></p>"},{"location":"user-guide/file-editing/#validationerror-extension-not-allowed","title":"ValidationError: Extension not allowed","text":"<p>Problem: File extension not in allowed list</p> <p>Solution: Update configuration </p><pre><code>file_edit:\n  allowed_extensions:\n    - \".py\"\n    - \".yaml\"  # Add missing extension\n</code></pre><p></p>"},{"location":"user-guide/file-editing/#validationerror-path-is-blocked","title":"ValidationError: Path is blocked","text":"<p>Problem: Path in blocked list</p> <p>Solution: Remove from blocklist if safe </p><pre><code>file_edit:\n  blocked_paths:\n    # - \"/var/www\"  # Remove if you need to edit here\n</code></pre><p></p>"},{"location":"user-guide/file-editing/#hash-mismatch-file-changed-since-read","title":"Hash mismatch: File changed since read","text":"<p>Problem: Optimistic locking detected concurrent edit</p> <p>Solution: Re-read file and retry </p><pre><code># Get new hash\nnew_content = read_file.invoke({\"file_path\": \"test.py\"})\nnew_hash = compute_hash(new_content)\n\n# Retry with new hash\nedit_file_lines.invoke({\n    \"file_path\": \"test.py\",\n    \"line_edits\": {...},\n    \"expected_hash\": new_hash\n})\n</code></pre><p></p>"},{"location":"user-guide/file-editing/#performance-issues","title":"Performance Issues","text":""},{"location":"user-guide/file-editing/#slow-searchreplace-on-large-files","title":"Slow search/replace on large files","text":"<p>Cause: Large files require full content scan</p> <p>Solutions: 1. Use <code>edit_file_lines</code> if you know line numbers 2. Split large files into smaller modules 3. Increase timeout in config</p>"},{"location":"user-guide/file-editing/#large-diff-previews","title":"Large diff previews","text":"<p>Cause: Many changes generate large previews</p> <p>Solutions: 1. Break into multiple smaller edits 2. Use dry_run sparingly 3. Disable preview for batch operations</p>"},{"location":"user-guide/file-editing/#best-practices","title":"Best Practices","text":""},{"location":"user-guide/file-editing/#do","title":"DO:","text":"<p>\u2705 Use <code>dry_run=True</code> to preview before applying \u2705 Start with <code>tolerance=\"strict\"</code> and relax as needed \u2705 Use <code>expected_hash</code> for critical edits \u2705 Read file first to understand context \u2705 Use line-based edits when you know exact line numbers \u2705 Use search/replace for pattern-based changes</p>"},{"location":"user-guide/file-editing/#dont","title":"DON'T:","text":"<p>\u274c Edit binary files (use specialized tools) \u274c Bypass security validation \u274c Ignore hash mismatch errors \u274c Use fuzzy matching for exact replacements \u274c Edit system files without understanding risks \u274c Disable approval workflow in production</p>"},{"location":"user-guide/file-editing/#see-also","title":"See Also","text":"<p>Other Tools: - Code Search - Find code before editing it - Image Analysis - Review changes visually</p> <p>SDK &amp; API: - SDK Tools Overview - Using file editing tools programmatically - Tool Configuration - Configuring file editing in your code</p> <p>Configuration &amp; Security: - Configuration Guide - Enable/disable file editing - Security Policy - Safety controls and best practices</p>"},{"location":"user-guide/getting-started/","title":"Getting Started","text":""},{"location":"user-guide/getting-started/#getting-started","title":"Getting Started","text":"<p>Welcome to Consoul! This guide will help you get the most out of your AI-powered terminal assistant.</p>"},{"location":"user-guide/getting-started/#overview","title":"Overview","text":"<p>Consoul is designed to bring AI assistance directly into your terminal workflow. Whether you're debugging code, learning new concepts, or getting help with commands, Consoul provides a seamless, terminal-native experience.</p>"},{"location":"user-guide/getting-started/#core-concepts","title":"Core Concepts","text":""},{"location":"user-guide/getting-started/#providers","title":"Providers","text":"<p>Consoul supports multiple AI providers through LangChain:</p> <ul> <li>Anthropic (Claude) \u2013 Excellent at code and reasoning</li> <li>OpenAI (GPT) \u2013 Versatile general-purpose AI</li> <li>Google (Gemini) \u2013 Fast and efficient</li> <li>Local Models (Ollama) \u2013 Privacy-focused, offline-capable</li> </ul>"},{"location":"user-guide/getting-started/#conversations","title":"Conversations","text":"<p>Each interaction with Consoul is part of a conversation that maintains context across multiple messages. This allows for:</p> <ul> <li>Follow-up questions</li> <li>Iterative refinement</li> <li>Context-aware responses</li> </ul>"},{"location":"user-guide/getting-started/#context","title":"Context","text":"<p>You can provide context to Consoul in several ways:</p> <ul> <li>Files \u2013 Include source code, configs, logs</li> <li>Stdin \u2013 Pipe command output directly</li> <li>Globs \u2013 Include multiple files matching a pattern</li> <li>System Prompts \u2013 Set the AI's role and behavior</li> </ul>"},{"location":"user-guide/getting-started/#usage-modes","title":"Usage Modes","text":""},{"location":"user-guide/getting-started/#1-interactive-tui-mode","title":"1. Interactive TUI Mode","text":"<p>The Terminal UI provides a rich, interactive experience:</p> <pre><code>consoul tui\n</code></pre> <p>Features: - Live streaming responses - Syntax highlighting - Conversation history - Settings panel - Multi-line input</p>"},{"location":"user-guide/getting-started/#2-cli-mode","title":"2. CLI Mode","text":"<p>Quick one-off queries:</p> <pre><code>consoul chat \"Your question here\"\n</code></pre> <p>Use cases: - Quick questions - Scripting and automation - Pipeline integration</p>"},{"location":"user-guide/getting-started/#3-pipeline-mode","title":"3. Pipeline Mode","text":"<p>Integrate with Unix pipelines:</p> <pre><code>command | consoul chat --stdin \"Analyze this output\"\n</code></pre>"},{"location":"user-guide/getting-started/#working-with-files","title":"Working with Files","text":""},{"location":"user-guide/getting-started/#single-file","title":"Single File","text":"<pre><code>consoul chat --file main.py \"Review this code\"\n</code></pre>"},{"location":"user-guide/getting-started/#multiple-files","title":"Multiple Files","text":"<pre><code>consoul chat \\\n  --file app.py \\\n  --file utils.py \\\n  --file config.yaml \\\n  \"How do these files work together?\"\n</code></pre>"},{"location":"user-guide/getting-started/#pattern-matching","title":"Pattern Matching","text":"<pre><code># All Python files\nconsoul chat --glob \"*.py\" \"What does this project do?\"\n\n# Recursive\nconsoul chat --glob \"**/*.py\" \"Analyze the codebase structure\"\n</code></pre>"},{"location":"user-guide/getting-started/#configuration","title":"Configuration","text":""},{"location":"user-guide/getting-started/#location","title":"Location","text":"<p>Consoul configuration is stored at:</p> <pre><code>~/.config/consoul/config.yaml\n</code></pre>"},{"location":"user-guide/getting-started/#basic-settings","title":"Basic Settings","text":"<pre><code># Default AI provider\nprovider: anthropic\n\n# Model to use\nmodel: claude-3-5-sonnet-20241022\n\n# UI theme\ntheme: dark\n\n# Save conversations\nsave_conversations: true\n\n# Maximum conversation history\nmax_history: 50\n</code></pre>"},{"location":"user-guide/getting-started/#provider-specific-settings","title":"Provider-Specific Settings","text":"<pre><code>providers:\n  anthropic:\n    api_key: ${ANTHROPIC_API_KEY}\n    default_model: claude-3-5-sonnet-20241022\n    max_tokens: 4096\n\n  openai:\n    api_key: ${OPENAI_API_KEY}\n    default_model: gpt-4\n    temperature: 0.7\n\n  google:\n    api_key: ${GOOGLE_API_KEY}\n    default_model: gemini-pro\n</code></pre>"},{"location":"user-guide/getting-started/#best-practices","title":"Best Practices","text":""},{"location":"user-guide/getting-started/#1-provide-context","title":"1. Provide Context","text":"<p>More context = better responses:</p> <pre><code># Good\nconsoul chat --file app.py \"How can I optimize this function?\"\n\n# Better\nconsoul chat \\\n  --file app.py \\\n  --file requirements.txt \\\n  --system \"You are a Python performance expert\" \\\n  \"How can I optimize this function?\"\n</code></pre>"},{"location":"user-guide/getting-started/#2-be-specific","title":"2. Be Specific","text":"<pre><code># Vague\nconsoul chat \"Fix my code\"\n\n# Specific\nconsoul chat --file broken.py \"This function raises a KeyError on line 42. How do I fix it?\"\n</code></pre>"},{"location":"user-guide/getting-started/#3-use-system-prompts","title":"3. Use System Prompts","text":"<p>Tailor the AI's expertise:</p> <pre><code># For code review\nconsoul chat --system \"You are a senior software engineer reviewing code\" \\\n  --file pr.diff \"Review this pull request\"\n\n# For learning\nconsoul chat --system \"You are a patient teacher explaining to a beginner\" \\\n  \"Explain Python decorators\"\n</code></pre>"},{"location":"user-guide/getting-started/#4-iterate","title":"4. Iterate","text":"<p>Don't expect perfection on the first try:</p> <pre><code>consoul chat \"Write a merge sort function\"\n# Review the output, then:\nconsoul chat \"Add type hints and docstrings\"\nconsoul chat \"Add error handling for edge cases\"\n</code></pre>"},{"location":"user-guide/getting-started/#common-workflows","title":"Common Workflows","text":""},{"location":"user-guide/getting-started/#code-review","title":"Code Review","text":"<pre><code># Review staged changes\ngit diff --staged | consoul chat --stdin \"Review these changes\"\n\n# Review specific file\nconsoul chat --file src/main.py \"Code review with focus on performance\"\n</code></pre>"},{"location":"user-guide/getting-started/#debugging","title":"Debugging","text":"<pre><code># Debug test failures\npytest 2&gt;&amp;1 | consoul chat --stdin \"Why are these tests failing?\"\n\n# Explain errors\npython app.py 2&gt;&amp;1 | consoul chat --stdin \"What's causing this error?\"\n</code></pre>"},{"location":"user-guide/getting-started/#documentation","title":"Documentation","text":"<pre><code># Generate docstrings\nconsoul chat --file api.py \"Add Google-style docstrings\"\n\n# Write README\nconsoul chat --glob \"*.py\" \"Write a README.md for this project\"\n</code></pre>"},{"location":"user-guide/getting-started/#learning","title":"Learning","text":"<pre><code># Understand code\nconsoul chat --file complex.py \"Explain this code step by step\"\n\n# Learn concepts\nconsoul chat \"Explain async/await in Python with examples\"\n</code></pre>"},{"location":"user-guide/getting-started/#refactoring","title":"Refactoring","text":"<pre><code># Improve code\nconsoul chat --file legacy.py \"Refactor this code for better readability\"\n\n# Extract functions\nconsoul chat --file monolith.py \"Identify functions that should be extracted\"\n</code></pre>"},{"location":"user-guide/getting-started/#advanced-features","title":"Advanced Features","text":""},{"location":"user-guide/getting-started/#custom-temperature","title":"Custom Temperature","text":"<p>Control creativity vs. determinism:</p> <pre><code># Deterministic (code generation)\nconsoul chat --temperature 0.2 \"Write a binary search function\"\n\n# Creative (brainstorming)\nconsoul chat --temperature 0.9 \"Suggest project names for an AI terminal assistant\"\n</code></pre>"},{"location":"user-guide/getting-started/#token-limits","title":"Token Limits","text":"<p>Control response length:</p> <pre><code># Brief response\nconsoul chat --max-tokens 200 \"Summarize Python decorators\"\n\n# Detailed response\nconsoul chat --max-tokens 2000 \"Explain Python decorators with examples\"\n</code></pre>"},{"location":"user-guide/getting-started/#conversation-history","title":"Conversation History","text":"<pre><code># List conversations\nconsoul history list\n\n# Resume conversation\nconsoul history resume &lt;id&gt;\n\n# Export to markdown\nconsoul history export &lt;id&gt; --format markdown &gt; conversation.md\n</code></pre>"},{"location":"user-guide/getting-started/#troubleshooting","title":"Troubleshooting","text":""},{"location":"user-guide/getting-started/#api-key-issues","title":"API Key Issues","text":"<pre><code># Verify API key is set\necho $ANTHROPIC_API_KEY\n\n# Set temporarily\nANTHROPIC_API_KEY=your-key consoul chat \"test\"\n\n# Set permanently\necho 'export ANTHROPIC_API_KEY=\"your-key\"' &gt;&gt; ~/.zshrc\n</code></pre>"},{"location":"user-guide/getting-started/#rate-limits","title":"Rate Limits","text":"<p>If you hit rate limits:</p> <ul> <li>Switch to a different provider</li> <li>Wait and retry</li> <li>Use a lower temperature for faster responses</li> <li>Reduce max_tokens</li> </ul>"},{"location":"user-guide/getting-started/#context-too-large","title":"Context Too Large","text":"<p>If your context exceeds limits:</p> <ul> <li>Be more selective with files</li> <li>Use specific line ranges</li> <li>Summarize large outputs before piping</li> </ul>"},{"location":"user-guide/getting-started/#next-steps","title":"Next Steps","text":"<ul> <li>Configuration Guide \u2013 Detailed configuration options</li> <li>Usage Examples \u2013 More examples and patterns</li> <li>API Reference \u2013 Package documentation</li> </ul>"},{"location":"user-guide/image-analysis/","title":"Image Analysis","text":""},{"location":"user-guide/image-analysis/#image-analysis-vision","title":"Image Analysis (Vision)","text":"<p>Show the AI what you see\u2014analyze screenshots, debug errors visually, review designs, and extract information from images.</p>"},{"location":"user-guide/image-analysis/#introduction","title":"Introduction","text":"<p>Ever wanted to just show the AI what's on your screen instead of describing it? With Consoul's image analysis, you can attach screenshots, mockups, diagrams, or any image and ask questions about them.</p> <p>Quick example: </p><pre><code>$ consoul chat \"What's wrong with this error?\" --attach error-screenshot.png\n</code></pre><p></p> <p>The AI sees the screenshot, reads the error message, examines the stack trace, and helps you debug\u2014all from the visual context.</p> <p>Related Tools: - Code Search - Find code referenced in screenshots - File Editing - Fix issues found in images</p>"},{"location":"user-guide/image-analysis/#overview","title":"Overview","text":"<p>The image analysis feature allows you to:</p> <ul> <li>\ud83d\udcf8 Analyze screenshots - Debug errors, understand UI states</li> <li>\ud83c\udfa8 Review designs - Get feedback on mockups and interfaces</li> <li>\ud83d\udcca Interpret diagrams - Understand flowcharts, architecture diagrams</li> <li>\ud83d\udd0d Compare visuals - Side-by-side analysis of multiple images</li> <li>\ud83d\udcbb Code from screenshots - Extract code from terminal or IDE screenshots</li> </ul>"},{"location":"user-guide/image-analysis/#quick-start","title":"Quick Start","text":""},{"location":"user-guide/image-analysis/#1-enable-image-analysis","title":"1. Enable Image Analysis","text":"<p>Image analysis is enabled by default. You can customize settings in <code>~/.config/consoul/config.yaml</code>:</p> <pre><code>tools:\n  image_analysis:\n    enabled: true\n    auto_detect_in_messages: true  # Detect image paths in messages\n    max_images_per_query: 5\n    max_image_size_mb: 5.0\n    allowed_extensions: [\".png\", \".jpg\", \".jpeg\", \".gif\", \".webp\"]\n</code></pre>"},{"location":"user-guide/image-analysis/#2-use-a-vision-capable-model","title":"2. Use a Vision-Capable Model","text":"<p>Configure a model that supports vision in your profile:</p> <pre><code>active_profile: vision\n\nprofiles:\n  vision:\n    provider: anthropic\n    model: claude-3-5-sonnet-20241022\n</code></pre> <p>Vision-Capable Models:</p> Provider Recommended Models Anthropic <code>claude-3-5-sonnet-20241022</code>, <code>claude-3-opus-20240229</code>, <code>claude-3-haiku-20240307</code> OpenAI <code>gpt-4o</code>, <code>gpt-4o-mini</code> Google <code>gemini-2.0-flash</code>, <code>gemini-1.5-pro</code> Ollama <code>llava:latest</code>, <code>bakllava:latest</code>"},{"location":"user-guide/image-analysis/#3-analyze-images-in-the-tui","title":"3. Analyze Images in the TUI","text":"<p>There are two ways to include images in your messages:</p> <p>Method 1: Attach files using the \ud83d\udcce button</p> <ol> <li>Click the \ud83d\udcce attachment button in the input area</li> <li>Select one or more image files</li> <li>Type your question</li> <li>Press Enter</li> </ol> <p>Method 2: Reference image paths in your message</p> <p>Simply type the image path in your message:</p> <pre><code>Explain the error in screenshot.png\n</code></pre> <p>Consoul will automatically detect the image path and include it in your message.</p>"},{"location":"user-guide/image-analysis/#usage-examples","title":"Usage Examples","text":""},{"location":"user-guide/image-analysis/#debugging-terminal-errors","title":"Debugging Terminal Errors","text":"<pre><code>&gt; What's wrong in this error? terminal_error.png\n\n[The AI will analyze the screenshot and explain the error]\n</code></pre>"},{"location":"user-guide/image-analysis/#uiux-review","title":"UI/UX Review","text":"<pre><code>&gt; Is this interface accessible? Review ui_mockup.png and suggest improvements.\n\n[The AI analyzes the design for accessibility issues]\n</code></pre>"},{"location":"user-guide/image-analysis/#comparing-designs","title":"Comparing Designs","text":"<pre><code>&gt; Compare design_v1.png and design_v2.png. Which is better for mobile users?\n\n[The AI compares both designs and provides recommendations]\n</code></pre>"},{"location":"user-guide/image-analysis/#code-review-from-screenshot","title":"Code Review from Screenshot","text":"<pre><code>&gt; What does this function do? code_screenshot.png\n\n[The AI reads the code from the screenshot and explains it]\n</code></pre>"},{"location":"user-guide/image-analysis/#diagram-analysis","title":"Diagram Analysis","text":"<pre><code>&gt; Explain this architecture diagram: system_architecture.png\n\n[The AI interprets the diagram and explains the system design]\n</code></pre>"},{"location":"user-guide/image-analysis/#supported-image-formats","title":"Supported Image Formats","text":"Format Extension Notes PNG <code>.png</code> Best for screenshots, diagrams JPEG <code>.jpg</code>, <code>.jpeg</code> Good for photos, compressed images GIF <code>.gif</code> Supported (static only) WebP <code>.webp</code> Modern format, smaller file sizes <p>File Size Limits: - Default maximum: 5 MB per image - Configurable via <code>max_image_size_mb</code> - Total limit: 5 images per query (configurable via <code>max_images_per_query</code>)</p>"},{"location":"user-guide/image-analysis/#security-privacy","title":"Security &amp; Privacy","text":""},{"location":"user-guide/image-analysis/#what-data-is-sent","title":"What Data is Sent?","text":"<p>When you analyze an image: 1. The image file is read from your local filesystem 2. Encoded as base64 3. Sent to your configured AI provider's API 4. Processed by the vision model 5. Response returned to you</p> <p>Important: Images are sent to external AI provider APIs (Anthropic, OpenAI, Google, etc.).</p>"},{"location":"user-guide/image-analysis/#security-features","title":"Security Features","text":"<p>Path Blocking: Sensitive directories are blocked by default:</p> <pre><code>tools:\n  image_analysis:\n    blocked_paths:\n      - \"~/.ssh\"\n      - \"/etc\"\n      - \"~/.aws\"\n      - \"~/.config/consoul\"  # Prevent leaking API keys\n</code></pre> <p>File Validation: - Extension checking (prevent non-images) - Magic byte validation (prevent extension spoofing) - Size limits (prevent large uploads) - Path traversal prevention (block <code>../</code> attacks)</p>"},{"location":"user-guide/image-analysis/#privacy-best-practices","title":"Privacy Best Practices","text":"<ol> <li>Review before sending - Check which files you're attaching</li> <li>Redact sensitive info - Edit screenshots to remove passwords, tokens</li> <li>Use local models - Consider Ollama with <code>llava</code> for fully local processing</li> <li>Check provider policies - Review data retention policies for Claude, OpenAI, etc.</li> </ol>"},{"location":"user-guide/image-analysis/#configuration-reference","title":"Configuration Reference","text":""},{"location":"user-guide/image-analysis/#imageanalysistoolconfig","title":"ImageAnalysisToolConfig","text":"<p>Full configuration options:</p> <pre><code>tools:\n  image_analysis:\n    # Enable/disable the feature\n    enabled: true\n\n    # Automatically detect image paths in messages (e.g., \"analyze screenshot.png\")\n    auto_detect_in_messages: true\n\n    # Maximum file size per image (MB)\n    max_image_size_mb: 5.0\n\n    # Maximum number of images per query\n    max_images_per_query: 5\n\n    # Allowed file extensions\n    allowed_extensions:\n      - \".png\"\n      - \".jpg\"\n      - \".jpeg\"\n      - \".gif\"\n      - \".webp\"\n\n    # Blocked paths (security)\n    blocked_paths:\n      - \"~/.ssh\"\n      - \"/etc\"\n      - \"~/.aws\"\n      - \"~/.config/consoul\"\n      - \"/System\"  # macOS system files\n      - \"/Windows\"  # Windows system files\n</code></pre>"},{"location":"user-guide/image-analysis/#provider-specific-considerations","title":"Provider-Specific Considerations","text":"<p>Anthropic (Claude): - Best for detailed analysis and reasoning - Supports up to 5 images per request - Max image size: 5 MB (base64 encoded)</p> <p>OpenAI (GPT-4o): - Fast processing - Good for general image understanding - Supports multiple images</p> <p>Google (Gemini): - Strong for technical diagrams - Supports large context windows - Native image understanding</p> <p>Ollama (LLaVA): - Fully local, no data sent to cloud - Requires more VRAM (8GB+) - Slower than cloud models</p>"},{"location":"user-guide/image-analysis/#troubleshooting","title":"Troubleshooting","text":""},{"location":"user-guide/image-analysis/#model-doesnt-support-vision","title":"\"Model doesn't support vision\"","text":"<p>Problem: Your current model doesn't have vision capabilities.</p> <p>Solution: Switch to a vision-capable model:</p> <pre><code># Using CLI\nconsoul --profile vision\n\n# Or update config.yaml\nactive_profile: vision\n</code></pre> <p>Supported models: - Claude: <code>claude-3-5-sonnet-20241022</code>, <code>claude-3-opus-20240229</code> - OpenAI: <code>gpt-4o</code>, <code>gpt-4o-mini</code> - Google: <code>gemini-2.0-flash</code>, <code>gemini-1.5-pro</code> - Ollama: <code>llava:latest</code></p>"},{"location":"user-guide/image-analysis/#file-too-large","title":"\"File too large\"","text":"<p>Problem: Image exceeds <code>max_image_size_mb</code> limit.</p> <p>Solutions: 1. Compress the image using tools like ImageOptim, TinyPNG 2. Resize to a smaller resolution 3. Increase the limit in config (max 20 MB):</p> <pre><code>tools:\n  image_analysis:\n    max_image_size_mb: 10.0\n</code></pre>"},{"location":"user-guide/image-analysis/#invalid-file-extension","title":"\"Invalid file extension\"","text":"<p>Problem: File type not in <code>allowed_extensions</code>.</p> <p>Solution: Ensure the file has a valid image extension: - <code>.png</code>, <code>.jpg</code>, <code>.jpeg</code>, <code>.gif</code>, <code>.webp</code></p> <p>If you have an unusual format, convert it:</p> <pre><code># Convert WebP to PNG\nffmpeg -i image.webp image.png\n\n# Convert HEIC to JPG (macOS)\nsips -s format jpeg image.heic --out image.jpg\n</code></pre>"},{"location":"user-guide/image-analysis/#blocked-path","title":"\"Blocked path\"","text":"<p>Problem: Image is in a security-blocked directory.</p> <p>Solution: 1. Copy the image to a safe location 2. Or remove the path from <code>blocked_paths</code> (not recommended for sensitive dirs)</p>"},{"location":"user-guide/image-analysis/#images-not-detected-automatically","title":"Images not detected automatically","text":"<p>Problem: Typing <code>screenshot.png</code> doesn't attach the image.</p> <p>Solutions: 1. Enable auto-detection:    </p><pre><code>tools:\n  image_analysis:\n    auto_detect_in_messages: true\n</code></pre><p></p> <ol> <li> <p>Use absolute or relative paths:    </p><pre><code>./screenshot.png\n~/Desktop/screenshot.png\n/Users/you/Documents/screenshot.png\n</code></pre><p></p> </li> <li> <p>Use the \ud83d\udcce attachment button instead</p> </li> </ol>"},{"location":"user-guide/image-analysis/#image-analysis-failed","title":"\"Image analysis failed\"","text":"<p>Problem: Generic error during analysis.</p> <p>Debugging steps: 1. Check the file exists: <code>ls -la screenshot.png</code> 2. Verify it's a valid image: <code>file screenshot.png</code> 3. Check file size: <code>du -h screenshot.png</code> 4. Check permissions: Ensure the file is readable 5. Try a different image format 6. Check logs for detailed error:    </p><pre><code>tail -f ~/.local/state/consoul/logs/consoul.log\n</code></pre><p></p>"},{"location":"user-guide/image-analysis/#advanced-usage","title":"Advanced Usage","text":""},{"location":"user-guide/image-analysis/#batch-image-analysis","title":"Batch Image Analysis","text":"<p>Analyze multiple images in one query:</p> <pre><code>Compare these UI states: login_before.png login_after.png homepage.png\n</code></pre> <p>Or using the attachment button: 1. Click \ud83d\udcce 2. Select multiple files (Cmd/Ctrl + Click) 3. Ask your question</p>"},{"location":"user-guide/image-analysis/#mixing-images-and-code","title":"Mixing Images and Code","text":"<p>Attach images alongside code files:</p> <pre><code>Review the implementation in main.py compared to the mockup in design.png\n</code></pre>"},{"location":"user-guide/image-analysis/#custom-file-size-limits","title":"Custom File Size Limits","text":"<p>For high-resolution diagrams:</p> <pre><code>tools:\n  image_analysis:\n    max_image_size_mb: 20.0  # Increase for large technical diagrams\n    max_images_per_query: 3  # Reduce count to stay under API limits\n</code></pre>"},{"location":"user-guide/image-analysis/#programmatic-usage","title":"Programmatic Usage","text":"<p>Use image analysis in Python scripts:</p> <pre><code>from consoul.sdk import Consoul\n\n# Initialize with vision-capable model\nconsoul = Consoul(model=\"claude-3-5-sonnet-20241022\")\n\n# Analyze an image\nresponse = consoul.chat(\n    \"What error is shown in this screenshot?\",\n    image_paths=[\"terminal_error.png\"]\n)\n\nprint(response)\n</code></pre> <p>See docs/examples/image-analysis-example.py for more examples.</p>"},{"location":"user-guide/image-analysis/#best-practices","title":"Best Practices","text":""},{"location":"user-guide/image-analysis/#1-use-descriptive-queries","title":"1. Use Descriptive Queries","text":"<p>\u274c Bad: \"What's this?\" \u2705 Good: \"Analyze this error screenshot and suggest a fix\"</p>"},{"location":"user-guide/image-analysis/#2-provide-context","title":"2. Provide Context","text":"<p>\u274c Bad: \"Is this good?\" \u2705 Good: \"Review this dashboard mockup for a healthcare app. Is it accessible?\"</p>"},{"location":"user-guide/image-analysis/#3-use-high-quality-images","title":"3. Use High-Quality Images","text":"<ul> <li>Clear screenshots (avoid blurry photos of screens)</li> <li>Sufficient resolution (at least 800x600)</li> <li>Good contrast (readable text)</li> </ul>"},{"location":"user-guide/image-analysis/#4-organize-by-use-case","title":"4. Organize by Use Case","text":"<p>Create dedicated directories:</p> <pre><code>~/screenshots/\n  \u251c\u2500\u2500 errors/\n  \u251c\u2500\u2500 designs/\n  \u2514\u2500\u2500 diagrams/\n</code></pre>"},{"location":"user-guide/image-analysis/#5-combine-with-other-tools","title":"5. Combine with Other Tools","text":"<p>Image analysis works great with file editing:</p> <pre><code>1. Analyze design.png\n2. Extract design requirements\n3. Use file editing to implement the UI\n</code></pre>"},{"location":"user-guide/image-analysis/#examples-by-use-case","title":"Examples by Use Case","text":""},{"location":"user-guide/image-analysis/#software-development","title":"Software Development","text":"<p>Debug Terminal Output: </p><pre><code>Analyze this pytest error: test_failure.png\n</code></pre><p></p> <p>Code Review: </p><pre><code>Review the code quality in this screenshot: code_review.png\n</code></pre><p></p> <p>Architecture Understanding: </p><pre><code>Explain this system diagram: architecture.png\n</code></pre><p></p>"},{"location":"user-guide/image-analysis/#design-ux","title":"Design &amp; UX","text":"<p>Accessibility Audit: </p><pre><code>Check this interface for WCAG 2.1 compliance: login_screen.png\n</code></pre><p></p> <p>Design Comparison: </p><pre><code>Compare these two button styles and recommend the best one: button_a.png button_b.png\n</code></pre><p></p> <p>Responsive Design: </p><pre><code>Does this layout work well for mobile? mobile_view.png\n</code></pre><p></p>"},{"location":"user-guide/image-analysis/#documentation","title":"Documentation","text":"<p>Diagram Documentation: </p><pre><code>Generate markdown documentation for this flowchart: user_flow.png\n</code></pre><p></p> <p>Screenshot Annotation: </p><pre><code>Describe each numbered element in this annotated screenshot: ui_guide.png\n</code></pre><p></p>"},{"location":"user-guide/image-analysis/#related-documentation","title":"Related Documentation","text":"<ul> <li>Getting Started - Initial setup and configuration</li> <li>Configuration Guide - Detailed config options</li> <li>File Editing - Combine vision with file operations</li> <li>Tools Overview - All available tools</li> <li>SDK Tool Calling - Programmatic usage</li> </ul>"},{"location":"user-guide/image-analysis/#faqs","title":"FAQs","text":"<p>Q: Does image analysis work offline? A: Only with local models like Ollama's LLaVA. Cloud providers (Claude, GPT-4o, Gemini) require internet.</p> <p>Q: Can I analyze videos? A: Not directly. Extract frames as images first using ffmpeg.</p> <p>Q: Are images cached or stored? A: No. Images are read, encoded, sent to the API, then discarded. Consoul doesn't cache images.</p> <p>Q: What about image generation (DALL-E, Midjourney)? A: Not currently supported. This feature is for analyzing existing images only.</p> <p>Q: Can I use custom vision models? A: Yes, if they're compatible with LangChain's multimodal message format. See the SDK documentation.</p> <p>Q: Is there a cost for image analysis? A: Cloud providers may charge more for vision API calls. Check pricing: - Anthropic Pricing - OpenAI Pricing - Google AI Pricing</p> <p>Q: Can I disable image analysis? A: Yes, set <code>tools.image_analysis.enabled: false</code> in your config.</p>"},{"location":"user-guide/image-analysis/#see-also","title":"See Also","text":"<p>Other Tools: - Code Search - Find code referenced in images - File Editing - Fix issues discovered visually</p> <p>SDK &amp; API: - SDK Tools Overview - Using image analysis programmatically - Tool Configuration - Configuring vision tools in your code</p> <p>Configuration: - Configuration Guide - Enable/disable image analysis - Vision-Capable Models - Supported AI models</p>"},{"location":"user-guide/image-analysis/#feedback-support","title":"Feedback &amp; Support","text":"<p>Having issues? Found a bug?</p> <ul> <li>\ud83d\udcd6 Documentation</li> <li>\ud83d\udc1b Report Issues</li> <li>\ud83d\udcac Discussions</li> </ul>"},{"location":"user-guide/tui/","title":"Overview","text":""},{"location":"user-guide/tui/#terminal-user-interface-tui","title":"Terminal User Interface (TUI)","text":"<p>Consoul's Terminal User Interface provides a rich, interactive chat experience directly in your terminal. Built with Textual, it offers a modern, responsive interface similar to ChatGPT or Claude, but with the convenience and power of staying in your command-line workflow.</p> <p></p>"},{"location":"user-guide/tui/#why-use-the-tui","title":"Why Use the TUI?","text":"<p>The TUI mode is ideal when you want:</p> <ul> <li>Rich Interactive Experience: Full-featured chat interface with real-time streaming, syntax highlighting, and visual tool execution</li> <li>Conversation Management: Easy access to conversation history, search, and resume functionality</li> <li>Multi-turn Conversations: Natural back-and-forth dialogue with persistent context</li> <li>Visual Feedback: See tool calls, system messages, and AI reasoning in real-time</li> <li>File Attachments: Drag and attach files visually for context</li> <li>Settings Access: Quick access to model selection, themes, and tool permissions</li> </ul>"},{"location":"user-guide/tui/#launching-the-tui","title":"Launching the TUI","text":"<pre><code># Basic launch\nconsoul tui\n\n# Launch with specific model\nconsoul tui --model claude-3-5-sonnet-20241022\n\n# Launch with specific profile\nconsoul tui --profile creative\n\n# Launch with custom config\nconsoul tui --config ~/my-consoul-config.yaml\n</code></pre>"},{"location":"user-guide/tui/#quick-tour","title":"Quick Tour","text":""},{"location":"user-guide/tui/#main-interface-components","title":"Main Interface Components","text":"<p>The TUI consists of several key areas:</p> <ol> <li>Header Bar - Shows app name, conversation count, search, current model, and profile</li> <li>Conversation Sidebar (toggleable) - Card-based list of all conversations with search</li> <li>Chat Area - Main conversation view with message bubbles and tool execution displays</li> <li>Input Area - Multi-line text input with file attachment support</li> <li>Footer - Keyboard shortcuts and quick actions</li> </ol> <p> Empty state with sidebar showing \"No conversations yet\"</p>"},{"location":"user-guide/tui/#message-types","title":"Message Types","text":"<p>Consoul displays different message types with distinct visual styles:</p> <ul> <li>User Messages - Your prompts and questions (blue border, right-aligned title)</li> <li>Assistant Messages - AI responses (purple border, left-aligned title)</li> <li>System Messages - Tool executions and system events (muted colors)</li> <li>Tool Call Widgets - Interactive display of tool execution with status indicators</li> </ul> <p> Tool calls shown as expandable widgets with execution status</p>"},{"location":"user-guide/tui/#key-features","title":"Key Features","text":""},{"location":"user-guide/tui/#conversation-management","title":"\ud83d\udde8\ufe0f Conversation Management","text":"<ul> <li>Create unlimited conversations</li> <li>Search through conversation titles</li> <li>Resume previous conversations with full context</li> <li>Rename conversations</li> <li>Delete conversations</li> <li>Auto-generated conversation titles</li> </ul>"},{"location":"user-guide/tui/#real-time-streaming","title":"\u26a1 Real-Time Streaming","text":"<ul> <li>Streaming token display as the AI generates responses</li> <li>Live tool execution feedback</li> <li>Thinking indicators for extended reasoning</li> <li>Token count and performance metrics</li> </ul>"},{"location":"user-guide/tui/#file-attachments","title":"\ud83d\udcce File Attachments","text":"<ul> <li>Attach files to provide context</li> <li>Visual file browser with tree navigation</li> <li>Multi-file selection</li> <li>File chips showing attached files</li> <li>Easy removal of attachments</li> </ul>"},{"location":"user-guide/tui/#tool-execution","title":"\ud83d\udee0\ufe0f Tool Execution","text":"<ul> <li>Visual tool call widgets</li> <li>Execution status (pending, executing, success, error, denied)</li> <li>Expandable tool output</li> <li>Approval/denial workflow for dangerous operations</li> <li>Tool manager for enabling/disabling tools</li> </ul>"},{"location":"user-guide/tui/#themes","title":"\ud83c\udfa8 Themes","text":"<p>Consoul provides two official brand themes, plus access to Textual's built-in themes:</p> <p>Official Consoul Themes: - Consoul Dark - Brand dark theme (default) - Consoul Light - Brand light theme</p> <p>Available Textual Themes: - Nord, Gruvbox, Tokyo Night, Dracula, Monokai, Catppuccin, Solarized, Flexoki, and more</p> <p></p> <p>See all themes \u2192</p>"},{"location":"user-guide/tui/#settings","title":"\u2699\ufe0f Settings","text":"<p>Quick access to configuration:</p> <ul> <li>Theme selection</li> <li>Display options (sidebar, timestamps, token counts)</li> <li>Syntax highlighting toggle</li> <li>Multiple tabs: Appearance, Performance, Behavior, Advanced</li> </ul> <p></p>"},{"location":"user-guide/tui/#getting-started","title":"Getting Started","text":""},{"location":"user-guide/tui/#1-launch-consoul","title":"1. Launch Consoul","text":"<pre><code>consoul tui\n</code></pre>"},{"location":"user-guide/tui/#2-start-a-conversation","title":"2. Start a Conversation","text":"<ul> <li>Type your message in the input area</li> <li>Press <code>Enter</code> to send (or <code>Shift+Enter</code> for new line)</li> <li>Watch the response stream in real-time</li> </ul>"},{"location":"user-guide/tui/#3-attach-files-optional","title":"3. Attach Files (Optional)","text":"<ul> <li>Click the <code>+ Attach</code> button</li> <li>Navigate the file tree</li> <li>Select files with <code>Space</code></li> <li>Confirm with <code>Enter</code></li> </ul>"},{"location":"user-guide/tui/#4-manage-conversations","title":"4. Manage Conversations","text":"<ul> <li>Click conversation count in header to toggle sidebar</li> <li>Search conversations with the search bar</li> <li>Click any conversation card to load it</li> <li>Use <code>^n</code> to create a new conversation</li> </ul>"},{"location":"user-guide/tui/#5-customize","title":"5. Customize","text":"<ul> <li>Press <code>^comma</code> (Ctrl+,) to open settings</li> <li>Choose your preferred theme</li> <li>Toggle display options</li> <li>Press <code>^t</code> to access the tool manager</li> </ul>"},{"location":"user-guide/tui/#keyboard-shortcuts","title":"Keyboard Shortcuts","text":"Shortcut Action <code>q</code> Quit application <code>^n</code> New conversation <code>^l</code> Clear current conversation <code>^b</code> Toggle sidebar <code>^comma</code> Settings (Ctrl+,) <code>^m</code> Model picker <code>^p</code> Profile selector <code>^e</code> Export conversation <code>^i</code> Import conversation <code>^t</code> Tools manager <code>^s</code> Search history <code>shift+^p</code> Permissions (alias for ^t) <code>f1</code> Help <code>Enter</code> Send message <code>Shift+Enter</code> New line in input <p>Full keyboard shortcuts reference \u2192</p>"},{"location":"user-guide/tui/#learn-more","title":"Learn More","text":"<ul> <li>TUI Interface Guide - Detailed UI component reference</li> <li>TUI Features - In-depth feature documentation</li> <li>Keyboard Shortcuts - Complete shortcut reference</li> <li>Modals &amp; Dialogs - Settings, tools, and model selection</li> <li>Themes - Theme gallery and customization</li> <li>Configuration - TUI-specific configuration options</li> </ul>"},{"location":"user-guide/tui/#tips-tricks","title":"Tips &amp; Tricks","text":""},{"location":"user-guide/tui/#productivity","title":"Productivity","text":"<ul> <li>Use <code>^n</code> frequently to keep conversations organized by topic</li> <li>Search conversations with <code>^b</code> to quickly find past discussions</li> <li>Attach files before asking questions for better context</li> <li>Use the tool manager to enable only the tools you need</li> </ul>"},{"location":"user-guide/tui/#performance","title":"Performance","text":"<ul> <li>Toggle timestamps and token counts off for cleaner UI</li> <li>Collapse the sidebar when focusing on a single conversation</li> <li>Use lighter themes on slower terminals for better performance</li> </ul>"},{"location":"user-guide/tui/#workflows","title":"Workflows","text":"<ol> <li>Code Review: Attach files \u2192 Ask for review \u2192 Use tool execution for fixes</li> <li>Debugging: Copy error \u2192 Paste in Consoul \u2192 Attach relevant files \u2192 Get diagnosis</li> <li>Learning: Ask questions \u2192 Save conversation \u2192 Resume later for follow-ups</li> <li>Research: Multi-turn conversation \u2192 Export to markdown for documentation</li> </ol>"},{"location":"user-guide/tui/#troubleshooting","title":"Troubleshooting","text":""},{"location":"user-guide/tui/#tui-wont-launch","title":"TUI Won't Launch","text":"<pre><code># Check if consoul is installed\nwhich consoul\n\n# Verify Python version (3.12+ required)\npython --version\n\n# Try with explicit python\npython -m consoul.tui\n</code></pre>"},{"location":"user-guide/tui/#display-issues","title":"Display Issues","text":"<ul> <li>Ensure your terminal supports 24-bit color</li> <li>Try different themes in settings</li> <li>Increase terminal window size</li> <li>Check terminal font supports Unicode</li> </ul>"},{"location":"user-guide/tui/#performance-issues","title":"Performance Issues","text":"<ul> <li>Reduce max tokens in settings</li> <li>Disable syntax highlighting</li> <li>Use a lighter theme</li> <li>Close other terminal applications</li> </ul>"},{"location":"user-guide/tui/#next-steps","title":"Next Steps","text":"<p>Ready to dive deeper? Check out:</p> <ul> <li>Interface Guide - Learn every component of the UI</li> <li>Keyboard Shortcuts - Become a power user</li> <li>Configuration - Customize your experience</li> </ul>"},{"location":"user-guide/usage/","title":"Commands","text":""},{"location":"user-guide/usage/#usage","title":"Usage","text":"<p>Common usage patterns and examples for Consoul.</p>"},{"location":"user-guide/usage/#basic-usage","title":"Basic Usage","text":""},{"location":"user-guide/usage/#simple-query","title":"Simple Query","text":"<pre><code>consoul chat \"How do I reverse a string in Python?\"\n</code></pre>"},{"location":"user-guide/usage/#interactive-mode","title":"Interactive Mode","text":"<pre><code>consoul tui\n</code></pre>"},{"location":"user-guide/usage/#file-context","title":"File Context","text":""},{"location":"user-guide/usage/#single-file","title":"Single File","text":"<pre><code>consoul chat --file main.py \"Explain this code\"\n</code></pre>"},{"location":"user-guide/usage/#multiple-files","title":"Multiple Files","text":"<pre><code>consoul chat \\\n  --file app.py \\\n  --file config.yaml \\\n  --file README.md \\\n  \"How is this project structured?\"\n</code></pre>"},{"location":"user-guide/usage/#pattern-matching","title":"Pattern Matching","text":"<pre><code># All Python files in current directory\nconsoul chat --glob \"*.py\" \"Summarize this codebase\"\n\n# Recursive search\nconsoul chat --glob \"**/*.py\" \"What does this project do?\"\n\n# Multiple patterns\nconsoul chat --glob \"src/**/*.py\" --glob \"tests/**/*.py\" \"Analyze test coverage\"\n</code></pre>"},{"location":"user-guide/usage/#pipeline-integration","title":"Pipeline Integration","text":""},{"location":"user-guide/usage/#command-output","title":"Command Output","text":"<pre><code># Git status\ngit status | consoul chat --stdin \"What should I commit?\"\n\n# Directory listing\nls -la | consoul chat --stdin \"What are these files?\"\n\n# Log analysis\ntail -n 100 app.log | consoul chat --stdin \"Any errors in these logs?\"\n</code></pre>"},{"location":"user-guide/usage/#error-debugging","title":"Error Debugging","text":"<pre><code># Python errors\npython script.py 2&gt;&amp;1 | consoul chat --stdin \"What's wrong?\"\n\n# Test failures\npytest 2&gt;&amp;1 | consoul chat --stdin \"Why are these tests failing?\"\n\n# Build errors\nmake 2&gt;&amp;1 | consoul chat --stdin \"How do I fix these build errors?\"\n</code></pre>"},{"location":"user-guide/usage/#development-workflows","title":"Development Workflows","text":""},{"location":"user-guide/usage/#code-review","title":"Code Review","text":"<pre><code># Review staged changes\ngit diff --staged | consoul chat --stdin \\\n  --system \"You are a senior code reviewer\" \\\n  \"Review these changes\"\n\n# Review specific commit\ngit show HEAD | consoul chat --stdin \"Review this commit\"\n\n# Review pull request diff\ngh pr diff 123 | consoul chat --stdin \"Review this PR\"\n</code></pre>"},{"location":"user-guide/usage/#commit-messages","title":"Commit Messages","text":"<pre><code># Generate conventional commit message\ngit diff --staged | consoul chat --stdin \\\n  --temperature 0.3 \\\n  \"Generate a conventional commit message for these changes\"\n\n# Or use it directly\ngit diff --staged | consoul chat --stdin \"Generate commit message\" \\\n  | git commit -F -\n</code></pre>"},{"location":"user-guide/usage/#documentation","title":"Documentation","text":"<pre><code># Generate docstrings\nconsoul chat --file module.py \\\n  --system \"Add Google-style docstrings\" \\\n  \"Add comprehensive docstrings to all functions\"\n\n# Generate README\nconsoul chat --glob \"*.py\" --file setup.py \\\n  \"Write a comprehensive README.md for this project\"\n\n# API documentation\nconsoul chat --glob \"api/**/*.py\" \\\n  \"Generate API documentation in markdown format\"\n</code></pre>"},{"location":"user-guide/usage/#testing","title":"Testing","text":"<pre><code># Generate tests\nconsoul chat --file app.py \\\n  \"Write pytest tests for this module with fixtures\"\n\n# Explain test failures\npytest -v 2&gt;&amp;1 | consoul chat --stdin \\\n  \"Explain why these tests are failing and how to fix them\"\n\n# Test coverage analysis\ncoverage report | consoul chat --stdin \\\n  \"What areas need more test coverage?\"\n</code></pre>"},{"location":"user-guide/usage/#refactoring","title":"Refactoring","text":"<pre><code># General refactoring\nconsoul chat --file legacy.py \\\n  --system \"You are a refactoring expert\" \\\n  \"Refactor this code for better readability and maintainability\"\n\n# Extract functions\nconsoul chat --file large_file.py \\\n  \"Identify functions that should be extracted and suggest a module structure\"\n\n# Type hints\nconsoul chat --file untyped.py \\\n  \"Add comprehensive type hints to this module\"\n</code></pre>"},{"location":"user-guide/usage/#learning-and-exploration","title":"Learning and Exploration","text":""},{"location":"user-guide/usage/#understanding-code","title":"Understanding Code","text":"<pre><code># Explain complex code\nconsoul chat --file complex.py \\\n  --system \"You are a patient teacher\" \\\n  \"Explain this code step by step\"\n\n# Understand project structure\nconsoul chat --glob \"**/*.py\" --file setup.py \\\n  \"Explain the architecture of this project\"\n\n# Learn from examples\nconsoul chat --file example.py \\\n  \"Explain how this works and suggest improvements\"\n</code></pre>"},{"location":"user-guide/usage/#learning-concepts","title":"Learning Concepts","text":"<pre><code># With examples\nconsoul chat \"Explain Python decorators with 3 practical examples\"\n\n# Step by step\nconsoul chat \"Explain async/await in Python step by step with examples\"\n\n# Comparisons\nconsoul chat \"Compare and contrast lists vs tuples in Python\"\n</code></pre>"},{"location":"user-guide/usage/#command-line-help","title":"Command Line Help","text":""},{"location":"user-guide/usage/#understanding-commands","title":"Understanding Commands","text":"<pre><code># Explain complex commands\nconsoul chat \"Explain: find . -type f -name '*.py' -exec grep -l 'TODO' {} \\;\"\n\n# Get command suggestions\nconsoul chat \"How do I find all files larger than 100MB modified in the last week?\"\n\n# Understand output\nps aux | consoul chat --stdin \"Explain this process list\"\n</code></pre>"},{"location":"user-guide/usage/#writing-scripts","title":"Writing Scripts","text":"<pre><code># Generate bash script\nconsoul chat \"Write a bash script to backup a directory with timestamp\"\n\n# Generate Python script\nconsoul chat \"Write a Python script to rename files in bulk\"\n\n# Shell one-liners\nconsoul chat \"Give me a one-liner to count lines of code in all Python files\"\n</code></pre>"},{"location":"user-guide/usage/#advanced-patterns","title":"Advanced Patterns","text":""},{"location":"user-guide/usage/#custom-system-prompts","title":"Custom System Prompts","text":"<pre><code># Code review persona\nconsoul chat --system \"You are a senior software engineer specializing in Python. \\\nFocus on security, performance, and maintainability.\" \\\n--file app.py \"Review this code\"\n\n# Teaching persona\nconsoul chat --system \"You are a patient teacher explaining concepts to beginners. \\\nUse simple language and provide examples.\" \\\n\"Explain Python decorators\"\n\n# Pair programming persona\nconsoul chat --system \"You are an experienced pair programming partner. \\\nAsk clarifying questions and suggest alternatives.\" \\\n--file solution.py \"Help me improve this implementation\"\n</code></pre>"},{"location":"user-guide/usage/#temperature-control","title":"Temperature Control","text":"<pre><code># Deterministic (code generation, factual answers)\nconsoul chat --temperature 0.2 \\\n  \"Write a function to validate email addresses\"\n\n# Balanced (default for most tasks)\nconsoul chat --temperature 0.7 \\\n  \"How should I structure this project?\"\n\n# Creative (brainstorming, naming)\nconsoul chat --temperature 0.9 \\\n  \"Suggest creative names for an AI terminal assistant\"\n</code></pre>"},{"location":"user-guide/usage/#response-length-control","title":"Response Length Control","text":"<pre><code># Brief summary\nconsoul chat --max-tokens 200 \\\n  \"Summarize Python decorators in one paragraph\"\n\n# Detailed explanation\nconsoul chat --max-tokens 2000 \\\n  \"Provide a comprehensive guide to Python decorators with examples\"\n</code></pre>"},{"location":"user-guide/usage/#project-specific-workflows","title":"Project-Specific Workflows","text":""},{"location":"user-guide/usage/#python-projects","title":"Python Projects","text":"<pre><code># Setup new project\nconsoul chat \"Create a Python project structure for a CLI tool with poetry\"\n\n# Dependency analysis\npoetry show --tree | consoul chat --stdin \"Analyze these dependencies\"\n\n# Virtual environment help\nconsoul chat \"How do I manage virtual environments with pyenv?\"\n</code></pre>"},{"location":"user-guide/usage/#javascripttypescript","title":"JavaScript/TypeScript","text":"<pre><code># Package.json analysis\nconsoul chat --file package.json \"Explain these dependencies and scripts\"\n\n# TypeScript errors\ntsc 2&gt;&amp;1 | consoul chat --stdin \"Help me fix these TypeScript errors\"\n\n# React component\nconsoul chat --file Component.tsx \"Review this React component\"\n</code></pre>"},{"location":"user-guide/usage/#infrastructure","title":"Infrastructure","text":"<pre><code># Dockerfile review\nconsoul chat --file Dockerfile \"Review and optimize this Dockerfile\"\n\n# Kubernetes config\nconsoul chat --file deployment.yaml \"Review this Kubernetes deployment\"\n\n# CI/CD\nconsoul chat --file .github/workflows/ci.yml \"Review this GitHub Actions workflow\"\n</code></pre>"},{"location":"user-guide/usage/#conversation-management","title":"Conversation Management","text":""},{"location":"user-guide/usage/#list-conversations","title":"List Conversations","text":"<pre><code>consoul history list\n</code></pre>"},{"location":"user-guide/usage/#resume-conversation","title":"Resume Conversation","text":"<pre><code>consoul history resume &lt;conversation-id&gt;\n</code></pre>"},{"location":"user-guide/usage/#export-conversation","title":"Export Conversation","text":"<pre><code># Export to markdown\nconsoul history export &lt;conversation-id&gt; --format markdown &gt; conversation.md\n\n# Export to JSON\nconsoul history export &lt;conversation-id&gt; --format json &gt; conversation.json\n</code></pre>"},{"location":"user-guide/usage/#delete-conversation","title":"Delete Conversation","text":"<pre><code>consoul history delete &lt;conversation-id&gt;\n</code></pre>"},{"location":"user-guide/usage/#shell-integration","title":"Shell Integration","text":""},{"location":"user-guide/usage/#aliases","title":"Aliases","text":"<p>Add to <code>~/.zshrc</code> or <code>~/.bashrc</code>:</p> <pre><code># Quick access\nalias ask=\"consoul chat\"\nalias explain=\"consoul chat --stdin\"\nalias review=\"consoul chat --file\"\n\n# Specialized\nalias commit-msg=\"git diff --staged | consoul chat --stdin --temperature 0.3 'Generate conventional commit message'\"\nalias test-help=\"pytest 2&gt;&amp;1 | consoul chat --stdin 'Explain test failures'\"\nalias code-review=\"git diff --staged | consoul chat --stdin --system 'You are a senior code reviewer' 'Review these changes'\"\n</code></pre> <p>Usage:</p> <pre><code>ask \"How do I use sed to replace text?\"\ncat error.log | explain \"What's causing these errors?\"\nreview main.py \"Any improvements?\"\n</code></pre>"},{"location":"user-guide/usage/#functions","title":"Functions","text":"<p>Add to shell config:</p> <pre><code># Review git diff\ngdiff-review() {\n  git diff \"$@\" | consoul chat --stdin \\\n    --system \"You are a senior code reviewer\" \\\n    \"Review these changes\"\n}\n\n# Explain command\nexplain-cmd() {\n  consoul chat \"Explain this command: $*\"\n}\n\n# Generate tests\ngen-tests() {\n  consoul chat --file \"$1\" \\\n    \"Generate comprehensive pytest tests for this module\"\n}\n</code></pre>"},{"location":"user-guide/usage/#tips-and-best-practices","title":"Tips and Best Practices","text":""},{"location":"user-guide/usage/#provide-context","title":"Provide Context","text":"<pre><code># \u2717 Not enough context\nconsoul chat \"Fix this\"\n\n# \u2713 Good context\nconsoul chat --file broken.py --file tests/test_broken.py \\\n  \"This function raises KeyError on line 42 when processing empty input. How do I fix it?\"\n</code></pre>"},{"location":"user-guide/usage/#be-specific","title":"Be Specific","text":"<pre><code># \u2717 Too vague\nconsoul chat \"Make this better\"\n\n# \u2713 Specific request\nconsoul chat --file app.py \\\n  \"Refactor this function to: 1) Add type hints, 2) Extract helper functions, 3) Add error handling\"\n</code></pre>"},{"location":"user-guide/usage/#iterate","title":"Iterate","text":"<pre><code># Start simple\nconsoul chat \"Write a function to merge sorted lists\"\n\n# Then refine (in same conversation or new query)\nconsoul chat \"Add type hints and docstrings\"\nconsoul chat \"Add error handling for invalid inputs\"\nconsoul chat \"Optimize for large lists\"\n</code></pre>"},{"location":"user-guide/usage/#use-appropriate-temperature","title":"Use Appropriate Temperature","text":"<pre><code># Low temperature for factual/deterministic tasks\nconsoul chat --temperature 0.2 \"Write a binary search implementation\"\n\n# High temperature for creative tasks\nconsoul chat --temperature 0.9 \"Brainstorm project name ideas\"\n</code></pre>"},{"location":"user-guide/usage/#troubleshooting","title":"Troubleshooting","text":""},{"location":"user-guide/usage/#rate-limits","title":"Rate Limits","text":"<pre><code># Switch provider\nconsoul chat --provider google \"Your question\"\n\n# Reduce token usage\nconsoul chat --max-tokens 500 \"Brief summary please\"\n</code></pre>"},{"location":"user-guide/usage/#context-too-large","title":"Context Too Large","text":"<pre><code># Be selective with files\nconsoul chat --file main.py \"Explain this\" # Instead of --glob \"**/*.py\"\n\n# Pipe summary instead of full output\ngit log --oneline -20 | consoul chat --stdin \"Summarize recent work\"\n</code></pre>"},{"location":"user-guide/usage/#api-errors","title":"API Errors","text":"<pre><code># Enable debug logging\nconsoul config set logging.level DEBUG\nconsoul chat \"test\"\n\n# Check logs\ntail -f ~/.config/consoul/consoul.log\n</code></pre>"},{"location":"user-guide/usage/#next-steps","title":"Next Steps","text":"<ul> <li>Configuration \u2013 Customize Consoul settings</li> <li>Getting Started \u2013 Basic concepts</li> <li>API Reference \u2013 Package documentation</li> </ul>"},{"location":"user-guide/tui/configuration/","title":"Configuration","text":""},{"location":"user-guide/tui/configuration/#tui-configuration","title":"TUI Configuration","text":"<p>This guide covers TUI-specific configuration options for customizing the Consoul Terminal User Interface.</p>"},{"location":"user-guide/tui/configuration/#configuration-file","title":"Configuration File","text":"<p>Consoul stores configuration in YAML format:</p> <pre><code>~/.config/consoul/config.yaml\n</code></pre>"},{"location":"user-guide/tui/configuration/#basic-structure","title":"Basic Structure","text":"<pre><code># TUI Configuration\ntui:\n  # Appearance\n  theme: consoul-dark\n  show_sidebar: true\n  sidebar_width: \"20%\"\n  show_timestamps: true\n  show_token_count: true\n\n  # Input\n  enable_multiline_input: true\n  input_syntax_highlighting: true\n\n  # Performance\n  gc_mode: streaming-aware\n  gc_interval_seconds: 30.0\n  gc_generation: 0\n  stream_buffer_size: 200\n  stream_debounce_ms: 150\n  stream_renderer: markdown\n\n  # Conversation List\n  initial_conversation_load: 50\n  enable_virtualization: true\n\n  # Behavior\n  enable_mouse: true\n  vim_mode: false\n  auto_generate_titles: true\n\n  # Debug\n  debug: false\n  log_file: null\n</code></pre>"},{"location":"user-guide/tui/configuration/#appearance-settings","title":"Appearance Settings","text":""},{"location":"user-guide/tui/configuration/#theme","title":"Theme","text":"<p>Choose visual theme:</p> <pre><code>tui:\n  theme: consoul-dark\n</code></pre> <p>Options: - <code>consoul-dark</code> (default) - Official Consoul dark theme - <code>consoul-light</code> - Official Consoul light theme - <code>monokai</code>, <code>dracula</code>, <code>nord</code>, <code>gruvbox</code>, <code>tokyo-night</code>, etc. - Textual built-in themes</p> <p>See all available themes \u2192</p> <p>Change via Settings: Press <code>^comma</code> \u2192 Appearance tab \u2192 Theme dropdown</p>"},{"location":"user-guide/tui/configuration/#sidebar-visibility","title":"Sidebar Visibility","text":"<p>Toggle conversation list sidebar:</p> <pre><code>tui:\n  show_sidebar: true\n</code></pre> <p>Values: - <code>true</code>: Show sidebar on startup (default) - <code>false</code>: Hide sidebar on startup</p> <p>Runtime Toggle: Press <code>^b</code> or click conversation count in header</p>"},{"location":"user-guide/tui/configuration/#sidebar-width","title":"Sidebar Width","text":"<p>Control sidebar width:</p> <pre><code>tui:\n  sidebar_width: \"20%\"\n</code></pre> <p>Values: - Percentage: <code>\"20%\"</code>, <code>\"30%\"</code>, etc. - Fixed units: <code>\"40\"</code> (characters) - Min/Max enforced: 20-40 characters</p>"},{"location":"user-guide/tui/configuration/#timestamps","title":"Timestamps","text":"<p>Show/hide message timestamps:</p> <pre><code>tui:\n  show_timestamps: true\n</code></pre> <p>Values: - <code>true</code>: Show timestamp on every message (default) - <code>false</code>: Hide timestamps for cleaner UI</p> <p>Display Format: </p><pre><code>\u23f1 16:13:59\n</code></pre><p></p> <p>Change via Settings: Press <code>^comma</code> \u2192 Appearance tab \u2192 Show Timestamps</p>"},{"location":"user-guide/tui/configuration/#token-count","title":"Token Count","text":"<p>Show/hide token usage metrics:</p> <pre><code>tui:\n  show_token_count: true\n</code></pre> <p>Values: - <code>true</code>: Show token metrics (default) - <code>false</code>: Hide token information</p> <p>Display Format: </p><pre><code>34.16 tok/sec | 187 tokens | 1.27s to first token\n</code></pre><p></p> <p>Change via Settings: Press <code>^comma</code> \u2192 Appearance tab \u2192 Show Token Count</p>"},{"location":"user-guide/tui/configuration/#input-settings","title":"Input Settings","text":""},{"location":"user-guide/tui/configuration/#multiline-input","title":"Multiline Input","text":"<p>Allow multi-line input with Shift+Enter:</p> <pre><code>tui:\n  enable_multiline_input: true\n</code></pre> <p>Values: - <code>true</code>: Shift+Enter creates new line, Enter sends (default) - <code>false</code>: Enter always sends (legacy behavior)</p>"},{"location":"user-guide/tui/configuration/#input-syntax-highlighting","title":"Input Syntax Highlighting","text":"<p>Enable code highlighting in input area:</p> <pre><code>tui:\n  input_syntax_highlighting: true\n</code></pre> <p>Values: - <code>true</code>: Highlight code in input (default) - <code>false</code>: Plain text (faster on slow terminals)</p> <p>Features: - Auto-detection of code - Python, JavaScript, Shell, and more - Theme-aware colors</p>"},{"location":"user-guide/tui/configuration/#performance-settings","title":"Performance Settings","text":""},{"location":"user-guide/tui/configuration/#garbage-collection-mode","title":"Garbage Collection Mode","text":"<p>Control Python garbage collection strategy:</p> <pre><code>tui:\n  gc_mode: streaming-aware\n</code></pre> <p>Options: - <code>streaming-aware</code>: Pause GC during streaming, collect after (default) - <code>auto</code>: Python's default GC behavior - <code>manual</code>: Periodic GC at intervals</p> <p>Recommendation: Use <code>streaming-aware</code> for smoothest streaming</p>"},{"location":"user-guide/tui/configuration/#gc-interval","title":"GC Interval","text":"<p>Seconds between garbage collections (manual/streaming-aware modes):</p> <pre><code>tui:\n  gc_interval_seconds: 30.0\n</code></pre> <p>Values: - Range: 5.0 - 300.0 seconds - Default: 30.0</p> <p>Impact: - Lower: More frequent GC, less memory, slight performance hit - Higher: Less frequent GC, more memory, smoother performance</p>"},{"location":"user-guide/tui/configuration/#gc-generation","title":"GC Generation","text":"<p>Which garbage collection generation to collect:</p> <pre><code>tui:\n  gc_generation: 0\n</code></pre> <p>Values: - <code>0</code>: Young objects only (fastest, default) - <code>1</code>: Young + middle-aged objects - <code>2</code>: Full collection (slowest, most thorough)</p>"},{"location":"user-guide/tui/configuration/#stream-buffer-size","title":"Stream Buffer Size","text":"<p>Characters to buffer before rendering:</p> <pre><code>tui:\n  stream_buffer_size: 200\n</code></pre> <p>Values: - Range: 50 - 1000 characters - Default: 200</p> <p>Impact: - Lower: More frequent updates, more CPU - Higher: Fewer updates, smoother, slight delay</p>"},{"location":"user-guide/tui/configuration/#stream-debounce","title":"Stream Debounce","text":"<p>Milliseconds to debounce markdown renders:</p> <pre><code>tui:\n  stream_debounce_ms: 150\n</code></pre> <p>Values: - Range: 50 - 500 milliseconds - Default: 150</p> <p>Impact: - Lower: More frequent renders, more CPU - Higher: Fewer renders, smoother, slight delay</p>"},{"location":"user-guide/tui/configuration/#stream-renderer","title":"Stream Renderer","text":"<p>Widget type for streaming responses:</p> <pre><code>tui:\n  stream_renderer: markdown\n</code></pre> <p>Options: - <code>markdown</code>: Rich markdown rendering (default) - <code>richlog</code>: Simple log-style rendering - <code>hybrid</code>: Mix of both</p> <p>Recommendation: Use <code>markdown</code> for best experience</p>"},{"location":"user-guide/tui/configuration/#conversation-list-settings","title":"Conversation List Settings","text":""},{"location":"user-guide/tui/configuration/#initial-load","title":"Initial Load","text":"<p>Number of conversations to load initially:</p> <pre><code>tui:\n  initial_conversation_load: 50\n</code></pre> <p>Values: - Range: 10 - 200 conversations - Default: 50</p> <p>Impact: - Lower: Faster startup, fewer visible conversations - Higher: Slower startup, more conversations immediately visible</p>"},{"location":"user-guide/tui/configuration/#virtualization","title":"Virtualization","text":"<p>Use virtual scrolling for large lists:</p> <pre><code>tui:\n  enable_virtualization: true\n</code></pre> <p>Values: - <code>true</code>: Virtual scrolling (default) - better performance with many conversations - <code>false</code>: Render all conversations - simpler but slower with 100+ conversations</p>"},{"location":"user-guide/tui/configuration/#behavior-settings","title":"Behavior Settings","text":""},{"location":"user-guide/tui/configuration/#mouse-support","title":"Mouse Support","text":"<p>Enable mouse interactions:</p> <pre><code>tui:\n  enable_mouse: true\n</code></pre> <p>Values: - <code>true</code>: Mouse clicks and scrolling enabled (default) - <code>false</code>: Keyboard-only mode</p>"},{"location":"user-guide/tui/configuration/#vim-mode","title":"Vim Mode","text":"<p>Enable vim-style navigation:</p> <pre><code>tui:\n  vim_mode: false\n</code></pre> <p>Values: - <code>true</code>: Vim keybindings (h/j/k/l navigation) - <code>false</code>: Standard keybindings (default)</p> <p>Note: Vim mode is experimental</p>"},{"location":"user-guide/tui/configuration/#auto-generate-titles","title":"Auto-Generate Titles","text":"<p>Automatically generate conversation titles:</p> <pre><code>tui:\n  auto_generate_titles: true\n</code></pre> <p>Values: - <code>true</code>: Auto-generate titles after first exchange (default) - <code>false</code>: Use generic titles</p> <p>Configuration Options:</p> <pre><code>tui:\n  auto_generate_titles: true\n  auto_title_provider: null      # null = auto-detect from current model\n  auto_title_model: null          # null = use provider default\n  auto_title_api_key: null        # null = use from env/config\n  auto_title_max_tokens: 20\n  auto_title_temperature: 0.7\n  auto_title_prompt: \"Generate a concise 2-8 word title...\"\n</code></pre> <p>Provider/Model Options: - <code>auto_title_provider</code>: <code>openai</code>, <code>anthropic</code>, <code>google</code>, <code>ollama</code>, or <code>null</code> - <code>auto_title_model</code>: Specific model name or <code>null</code> for default</p>"},{"location":"user-guide/tui/configuration/#debug-settings","title":"Debug Settings","text":""},{"location":"user-guide/tui/configuration/#debug-mode","title":"Debug Mode","text":"<p>Enable verbose logging:</p> <pre><code>tui:\n  debug: false\n</code></pre> <p>Values: - <code>true</code>: Enable debug logging - <code>false</code>: Normal logging (default)</p> <p>Impact: - True: Detailed logs, helpful for troubleshooting, slower - False: Essential logs only</p>"},{"location":"user-guide/tui/configuration/#log-file","title":"Log File","text":"<p>Custom log file path:</p> <pre><code>tui:\n  log_file: null\n</code></pre> <p>Values: - <code>null</code>: Use default (<code>textual.log</code> in current directory) - <code>\"/path/to/file.log\"</code>: Custom log file path</p>"},{"location":"user-guide/tui/configuration/#complete-example","title":"Complete Example","text":"<pre><code># ~/.config/consoul/config.yaml\n\ntui:\n  # Appearance\n  theme: consoul-dark\n  show_sidebar: true\n  sidebar_width: \"25%\"\n  show_timestamps: true\n  show_token_count: true\n\n  # Input\n  enable_multiline_input: true\n  input_syntax_highlighting: true\n\n  # Performance\n  gc_mode: streaming-aware\n  gc_interval_seconds: 30.0\n  gc_generation: 0\n  stream_buffer_size: 200\n  stream_debounce_ms: 150\n  stream_renderer: markdown\n\n  # Conversation List\n  initial_conversation_load: 50\n  enable_virtualization: true\n\n  # Behavior\n  enable_mouse: true\n  vim_mode: false\n  auto_generate_titles: true\n  auto_title_max_tokens: 20\n  auto_title_temperature: 0.7\n\n  # Debug\n  debug: false\n  log_file: null\n</code></pre>"},{"location":"user-guide/tui/configuration/#environment-variables","title":"Environment Variables","text":"<p>Override config with environment variables:</p> <pre><code># Theme\nexport CONSOUL_THEME=nord\n\n# Debug mode\nexport CONSOUL_DEBUG=1\n\n# Launch Consoul TUI\nconsoul tui\n</code></pre> <p>Note: Environment variables override config file values</p>"},{"location":"user-guide/tui/configuration/#configuration-management","title":"Configuration Management","text":""},{"location":"user-guide/tui/configuration/#view-current-config","title":"View Current Config","text":"<pre><code># Display current configuration\nconsoul config show\n\n# Display specific section\nconsoul config show tui\n</code></pre>"},{"location":"user-guide/tui/configuration/#edit-config","title":"Edit Config","text":"<pre><code># Open config in default editor\nconsoul config edit\n\n# Open in specific editor\nEDITOR=vim consoul config edit\n</code></pre>"},{"location":"user-guide/tui/configuration/#validate-config","title":"Validate Config","text":"<pre><code># Check config syntax\nconsoul config validate\n\n# Check specific file\nconsoul config validate ~/.config/consoul/config.yaml\n</code></pre> <p>Note: These CLI commands may be future features - verify availability</p>"},{"location":"user-guide/tui/configuration/#performance-tuning","title":"Performance Tuning","text":""},{"location":"user-guide/tui/configuration/#for-slow-terminals","title":"For Slow Terminals","text":"<pre><code>tui:\n  input_syntax_highlighting: false\n  stream_buffer_size: 500\n  stream_debounce_ms: 300\n  gc_interval_seconds: 60.0\n</code></pre>"},{"location":"user-guide/tui/configuration/#for-fast-terminals-high-performance","title":"For Fast Terminals / High Performance","text":"<pre><code>tui:\n  input_syntax_highlighting: true\n  stream_buffer_size: 100\n  stream_debounce_ms: 50\n  gc_interval_seconds: 15.0\n</code></pre>"},{"location":"user-guide/tui/configuration/#for-low-memory","title":"For Low Memory","text":"<pre><code>tui:\n  gc_mode: manual\n  gc_interval_seconds: 20.0\n  gc_generation: 2  # Full collection\n  initial_conversation_load: 25\n  enable_virtualization: true\n</code></pre>"},{"location":"user-guide/tui/configuration/#for-maximum-smoothness","title":"For Maximum Smoothness","text":"<pre><code>tui:\n  gc_mode: streaming-aware\n  stream_buffer_size: 300\n  stream_debounce_ms: 200\n  stream_renderer: markdown\n</code></pre>"},{"location":"user-guide/tui/configuration/#troubleshooting","title":"Troubleshooting","text":""},{"location":"user-guide/tui/configuration/#config-not-loading","title":"Config Not Loading","text":"<p>Problem: Changes to config file not applied</p> <p>Solutions:</p> <ol> <li>Restart Consoul</li> <li>Check YAML syntax:    <pre><code>consoul config validate\n</code></pre></li> <li>Check file location:    <pre><code>ls -la ~/.config/consoul/config.yaml\n</code></pre></li> <li>Check file permissions:    <pre><code>chmod 644 ~/.config/consoul/config.yaml\n</code></pre></li> </ol>"},{"location":"user-guide/tui/configuration/#invalid-yaml","title":"Invalid YAML","text":"<p>Problem: Config file has syntax errors</p> <p>Common Issues:</p> <pre><code># \u274c Wrong: mixed spaces and tabs\ntui:\n    theme: consoul-dark  # Tab here\n  debug: false           # Spaces here\n\n# \u2705 Correct: consistent spaces\ntui:\n  theme: consoul-dark\n  debug: false\n\n# \u274c Wrong: missing quotes on special values\ntui:\n  sidebar_width: 20%\n\n# \u2705 Correct: quoted string values\ntui:\n  sidebar_width: \"20%\"\n</code></pre>"},{"location":"user-guide/tui/configuration/#performance-issues","title":"Performance Issues","text":"<p>Problem: TUI is slow or laggy</p> <p>Solutions:</p> <ol> <li>Disable syntax highlighting</li> <li>Increase buffer and debounce values</li> <li>Reduce conversation load</li> <li>Use simpler theme (Consoul Dark)</li> <li>Enable virtualization</li> </ol> <p>Optimized Config: </p><pre><code>tui:\n  theme: consoul-dark\n  input_syntax_highlighting: false\n  stream_buffer_size: 400\n  stream_debounce_ms: 250\n  initial_conversation_load: 30\n  enable_virtualization: true\n</code></pre><p></p>"},{"location":"user-guide/tui/configuration/#memory-issues","title":"Memory Issues","text":"<p>Problem: High memory usage</p> <p>Solutions:</p> <ol> <li>Enable manual GC with short intervals</li> <li>Use full GC generation</li> <li>Reduce conversation load</li> </ol> <p>Memory-Optimized Config: </p><pre><code>tui:\n  gc_mode: manual\n  gc_interval_seconds: 15.0\n  gc_generation: 2\n  initial_conversation_load: 25\n  enable_virtualization: true\n</code></pre><p></p>"},{"location":"user-guide/tui/configuration/#best-practices","title":"Best Practices","text":""},{"location":"user-guide/tui/configuration/#organization","title":"Organization","text":"<p>Use comments to document your choices:</p> <pre><code>tui:\n  # Dark theme for night coding\n  theme: consoul-dark\n\n  # Always show sidebar for quick access\n  show_sidebar: true\n\n  # Optimized for smooth streaming on M1 Mac\n  stream_buffer_size: 200\n  stream_debounce_ms: 150\n</code></pre>"},{"location":"user-guide/tui/configuration/#version-control","title":"Version Control","text":"<p>Track your config in git:</p> <pre><code>cd ~/.config/consoul\ngit init\ngit add config.yaml\ngit commit -m \"Initial Consoul config\"\n\n# .gitignore\necho \"*.log\" &gt;&gt; .gitignore\necho \"conversations/\" &gt;&gt; .gitignore\n</code></pre>"},{"location":"user-guide/tui/configuration/#backup","title":"Backup","text":"<p>Regular backups:</p> <pre><code># Manual backup\ncp ~/.config/consoul/config.yaml ~/backups/consoul-config-$(date +%Y%m%d).yaml\n\n# Automated (add to cron)\n0 0 * * 0 cp ~/.config/consoul/config.yaml ~/backups/consoul-config-$(date +\\%Y\\%m\\%d).yaml\n</code></pre>"},{"location":"user-guide/tui/configuration/#configuration-schema-reference","title":"Configuration Schema Reference","text":"<p>Complete list of all TUI configuration options:</p> <pre><code>tui:\n  # Appearance\n  theme: string                    # Theme name\n  show_sidebar: boolean            # Sidebar visibility\n  sidebar_width: string            # CSS width (e.g., \"20%\", \"30\")\n  show_timestamps: boolean         # Message timestamps\n  show_token_count: boolean        # Token metrics\n\n  # Input\n  enable_multiline_input: boolean  # Shift+Enter for newline\n  input_syntax_highlighting: bool  # Code highlighting in input\n\n  # Performance\n  gc_mode: string                  # \"auto\" | \"manual\" | \"streaming-aware\"\n  gc_interval_seconds: float       # 5.0 - 300.0\n  gc_generation: integer           # 0 | 1 | 2\n  stream_buffer_size: integer      # 50 - 1000\n  stream_debounce_ms: integer      # 50 - 500\n  stream_renderer: string          # \"markdown\" | \"richlog\" | \"hybrid\"\n\n  # Conversation List\n  initial_conversation_load: int   # 10 - 200\n  enable_virtualization: boolean   # Virtual scrolling\n\n  # Behavior\n  enable_mouse: boolean            # Mouse support\n  vim_mode: boolean                # Vim keybindings\n  auto_generate_titles: boolean    # Auto title generation\n  auto_title_provider: string?     # Provider for titles\n  auto_title_model: string?        # Model for titles\n  auto_title_api_key: string?      # API key for titles\n  auto_title_prompt: string        # Title generation prompt\n  auto_title_max_tokens: integer   # 5 - 100\n  auto_title_temperature: float    # 0.0 - 2.0\n\n  # Debug\n  debug: boolean                   # Debug logging\n  log_file: string?                # Custom log file path\n</code></pre>"},{"location":"user-guide/tui/configuration/#next-steps","title":"Next Steps","text":"<ul> <li>Themes - Choose your theme</li> <li>Interface Guide - Understand the UI</li> <li>Keyboard Shortcuts - Master navigation</li> <li>Features - Explore capabilities</li> </ul>"},{"location":"user-guide/tui/features/","title":"Features","text":""},{"location":"user-guide/tui/features/#tui-features","title":"TUI Features","text":"<p>This guide explores the powerful features available in the Consoul Terminal User Interface.</p>"},{"location":"user-guide/tui/features/#conversation-management","title":"Conversation Management","text":""},{"location":"user-guide/tui/features/#creating-conversations","title":"Creating Conversations","text":"<p>Every time you start Consoul or press <code>^n</code>, a new conversation begins.</p> <pre><code># Launch with new conversation\nconsoul tui\n</code></pre> <p>Features: - Unlimited conversations - Automatic persistence - Context maintained across messages - Auto-generated titles after first exchange</p>"},{"location":"user-guide/tui/features/#conversation-titles","title":"Conversation Titles","text":"<p>Conversations are automatically titled based on content:</p> <pre><code>Initial: \"Conversation (2 messages)\"\nAfter AI analysis: \"Debugging Python Import Error\"\n</code></pre> <p>Title Generation: - Triggered after first AI response - Based on conversation content and intent - Updates conversation card in sidebar - Can be manually renamed (future feature)</p>"},{"location":"user-guide/tui/features/#switching-conversations","title":"Switching Conversations","text":"<p>Via Sidebar: 1. Toggle sidebar with <code>^b</code> or click conversation count 2. Click any conversation card 3. Previous conversation is saved automatically</p> <p>Via Keyboard: - <code>^n</code>: New conversation - Navigate sidebar with arrow keys (when focused)</p>"},{"location":"user-guide/tui/features/#searching-conversations","title":"Searching Conversations","text":"<p>Find conversations quickly:</p> <ol> <li>Click or focus the search bar (\ud83d\udd0d)</li> <li>Type search query</li> <li>Sidebar auto-shows with filtered results</li> <li>Clear search with <code>Esc</code></li> </ol> <p>Search Features: - Real-time filtering - Case-insensitive - Searches conversation titles - Updates as you type</p>"},{"location":"user-guide/tui/features/#deleting-conversations","title":"Deleting Conversations","text":"<p>Currently via config file (UI coming soon):</p> <pre><code># Remove conversation from config\nconversations:\n  - id: \"uuid-to-delete\"  # Delete this entry\n</code></pre>"},{"location":"user-guide/tui/features/#message-features","title":"Message Features","text":""},{"location":"user-guide/tui/features/#streaming-responses","title":"Streaming Responses","text":"<p>AI responses stream in real-time:</p> <pre><code>Assistant is typing...\n\nIn terminal's grace, a cha\u2588\n</code></pre> <p>Indicators: - Blinking cursor during streaming - Character-by-character display - Syntax highlighting updates live - Token rate displayed after completion</p>"},{"location":"user-guide/tui/features/#message-metadata","title":"Message Metadata","text":"<p>Each message includes rich metadata:</p> <pre><code>\u23f1 16:13:59 | 34.16 tok/sec | 187 tokens | 1.27s to first token\n</code></pre> <p>Metadata Components: - Timestamp (toggleable) - Tokens per second - Total token count (toggleable) - Time to first token - Cost (if available)</p>"},{"location":"user-guide/tui/features/#copying-messages","title":"Copying Messages","text":"<p>Copy message content to clipboard:</p> <ol> <li>Click the copy button (\ud83d\udccb) on any message</li> <li>Or use keyboard shortcut when message focused</li> <li>Confirmation feedback shown</li> <li>Includes formatted text (markdown preserved)</li> </ol>"},{"location":"user-guide/tui/features/#branching-conversations","title":"Branching Conversations","text":"<p>Future Feature: Create alternate conversation paths from any point in a conversation. This feature is planned but not yet implemented.</p>"},{"location":"user-guide/tui/features/#tool-execution","title":"Tool Execution","text":""},{"location":"user-guide/tui/features/#visual-tool-calls","title":"Visual Tool Calls","text":"<p>Tool executions are displayed as interactive widgets:</p> <p></p> <pre><code>\u250c\u2500 System \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 \ud83d\udd27 Executing: read_file       \u2502\n\u2502                                \u2502\n\u2502 Arguments:                     \u2502\n\u2502 {                              \u2502\n\u2502   \"file_path\": \"README.md\"     \u2502\n\u2502 }                              \u2502\n\u2502                                \u2502\n\u2502 Status: \u2705 Success             \u2502\n\u2502                                \u2502\n\u2502 Output:                        \u2502\n\u2502 # Consoul                      \u2502\n\u2502 ...                            \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"user-guide/tui/features/#tool-status-lifecycle","title":"Tool Status Lifecycle","text":"<p>Tools progress through states:</p> <ol> <li>Pending (\u23f3 Yellow) - Tool call received, awaiting approval</li> <li>Executing (\u2699\ufe0f Blue) - Tool is running</li> <li>Success (\u2705 Green) - Completed successfully</li> <li>Error (\u274c Red) - Failed with error</li> <li>Denied (\ud83d\udeab Gray) - User denied execution</li> </ol>"},{"location":"user-guide/tui/features/#tool-approval-workflow","title":"Tool Approval Workflow","text":"<p>For CAUTION and DANGEROUS tools:</p> <pre><code>\u250c\u2500 Tool Approval Required \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                                        \u2502\n\u2502 \ud83d\udd27 bash_execute                        \u2502\n\u2502                                        \u2502\n\u2502 Command: rm -rf /tmp/cache             \u2502\n\u2502                                        \u2502\n\u2502 \u26a0\ufe0f Risk Level: CAUTION                 \u2502\n\u2502                                        \u2502\n\u2502 Allow this tool to execute?            \u2502\n\u2502                                        \u2502\n\u2502 [Approve]  [Deny]  [View Details]     \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>Approval Options: - Approve: Execute this time only - Deny: Reject execution - View Details: See tool description and arguments - Always Allow: Add to whitelist (future)</p>"},{"location":"user-guide/tui/features/#tool-output","title":"Tool Output","text":"<p>Tool results are shown directly in the widget:</p> <pre><code>Output:\nRemoved 247 files\nFreed 1.2 GB\n</code></pre> <p>Features: - Syntax highlighting for code output - Scrollable for long output - Expandable/collapsible - Copy button for output</p>"},{"location":"user-guide/tui/features/#file-attachments","title":"File Attachments","text":""},{"location":"user-guide/tui/features/#attaching-files","title":"Attaching Files","text":"<p>Add context files to your messages:</p> <p></p> <p>Methods: 1. Click <code>+ Attach</code> button in input area 2. Select files in browser modal</p>"},{"location":"user-guide/tui/features/#file-browser","title":"File Browser","text":"<p>Navigate filesystem to select files:</p> <pre><code>\u250c\u2500 Select Files to Attach \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                                        \u2502\n\u2502 Navigate: \u2191\u2193  Select: Space           \u2502\n\u2502 Open/Close/Confirm: Enter             \u2502\n\u2502                                        \u2502\n\u2502 \u2731 Root  \ud83c\udfe0 Home  \ud83d\udcc1 CWD  \u2191 Up        \u2502\n\u2502                                        \u2502\n\u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502 \u2502 \ud83d\udcc1 consoul                        \u2502 \u2502\n\u2502 \u2502   \ud83d\udcc1 .art                         \u2502 \u2502\n\u2502 \u2502   \ud83d\udcc1 .git                         \u2502 \u2502\n\u2502 \u2502   \ud83d\udcc1 src                          \u2502 \u2502\n\u2502 \u2502   \u2713 \ud83d\udcc4 README.md                 \u2502 \u2502\n\u2502 \u2502   \u2713 \ud83d\udcc4 pyproject.toml            \u2502 \u2502\n\u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2502                                        \u2502\n\u2502 Selected Files: 2                      \u2502\n\u2502 \u2022 README.md                            \u2502\n\u2502 \u2022 pyproject.toml                       \u2502\n\u2502                                        \u2502\n\u2502 [Cancel]  [Attach 2 File(s)]          \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>Navigation: - \u2191\u2193: Move up/down - \u2192: Expand directory - \u2190: Collapse directory - Space: Toggle file selection - Enter: Open directory or confirm - Esc: Cancel</p> <p>Quick Jump: - \u2731 Root: Navigate to <code>/</code> - \ud83c\udfe0 Home: Navigate to <code>~</code> - \ud83d\udcc1 CWD: Navigate to current working directory - \u2191 Up: Go to parent directory</p>"},{"location":"user-guide/tui/features/#file-chips","title":"File Chips","text":"<p>Selected files shown as chips in input area:</p> <pre><code>[\ud83d\udcc4 main.py \u00d7] [\ud83d\udcc4 config.yaml \u00d7] [\ud83d\udcc4 utils.py \u00d7]\n</code></pre> <p>Chip Actions: - Click <code>\u00d7</code> to remove file - Hover for highlight - Auto-wrap to multiple lines if needed</p>"},{"location":"user-guide/tui/features/#file-context","title":"File Context","text":"<p>Attached files are sent with your message:</p> <pre><code>User: Review this code\nAttachments:\n  - main.py (1.2 KB)\n  - test_main.py (800 B)\n</code></pre> <p>Processing: - File contents read automatically - Syntax detection - Included in AI context - Token count includes file content</p>"},{"location":"user-guide/tui/features/#display-settings","title":"Display Settings","text":""},{"location":"user-guide/tui/features/#timestamps","title":"Timestamps","text":"<p>Toggle message timestamps:</p> <pre><code>\u23f1 16:13:59\n</code></pre> <p>Settings \u2192 Appearance \u2192 Show Timestamps - On: Show timestamp on every message - Off: Hide timestamps (cleaner UI)</p>"},{"location":"user-guide/tui/features/#token-counts","title":"Token Counts","text":"<p>Toggle token usage display:</p> <pre><code>34.16 tok/sec | 187 tokens\n</code></pre> <p>Settings \u2192 Appearance \u2192 Show Token Count - On: Show tokens, rate, and metrics - Off: Hide token information</p>"},{"location":"user-guide/tui/features/#sidebar-visibility","title":"Sidebar Visibility","text":"<p>Toggle conversation list sidebar:</p> <p>Methods: - Click conversation count in header - Press <code>^b</code> - Click search bar (auto-shows) - Settings \u2192 Appearance \u2192 Show Sidebar</p> <p>Behavior: - Persisted across sessions - Auto-hides when empty - Auto-shows on search - Smooth animation</p>"},{"location":"user-guide/tui/features/#syntax-highlighting","title":"Syntax Highlighting","text":"<p>Toggle code syntax highlighting:</p> <p>Settings \u2192 Appearance \u2192 Input Syntax Highlighting - On: Highlight code in input area - Off: Plain text (faster on slow terminals)</p> <p>Features: - Python, JavaScript, Shell, and more - Auto-detection - Theme-aware colors</p>"},{"location":"user-guide/tui/features/#performance-features","title":"Performance Features","text":""},{"location":"user-guide/tui/features/#efficient-rendering","title":"Efficient Rendering","text":"<p>The TUI only renders visible elements:</p> <ul> <li>Virtual scrolling for long conversations</li> <li>Lazy loading of conversation list</li> <li>Incremental updates during streaming</li> <li>Optimized redraws</li> </ul>"},{"location":"user-guide/tui/features/#token-streaming","title":"Token Streaming","text":"<p>Responses stream efficiently:</p> <ul> <li>Real-time display</li> <li>Minimal latency</li> <li>Smooth scrolling</li> <li>Auto-scroll to latest</li> </ul>"},{"location":"user-guide/tui/features/#caching","title":"Caching","text":"<p>Conversations cached in memory:</p> <ul> <li>Fast switching</li> <li>Instant load of recent conversations</li> <li>Periodic persistence to disk</li> <li>Automatic cleanup of old conversations</li> </ul>"},{"location":"user-guide/tui/features/#export-features","title":"Export Features","text":"<p>Export conversations to various formats:</p> <p></p>"},{"location":"user-guide/tui/features/#export-formats","title":"Export Formats","text":"<p>Markdown (<code>.md</code>) </p><pre><code># Conversation: Debugging Python Import Error\n\n## User (16:13:59)\nI'm getting an import error...\n\n## Assistant (16:14:02)\nLet me help you debug...\n</code></pre><p></p> <p>JSON (<code>.json</code>) </p><pre><code>{\n  \"conversation_id\": \"uuid\",\n  \"title\": \"Debugging Python Import Error\",\n  \"messages\": [\n    {\n      \"role\": \"user\",\n      \"content\": \"I'm getting...\",\n      \"timestamp\": \"2025-11-26T16:13:59Z\"\n    }\n  ]\n}\n</code></pre><p></p> <p>Text (<code>.txt</code>) </p><pre><code>Conversation: Debugging Python Import Error\nDate: 2025-11-26\n\n[User - 16:13:59]\nI'm getting an import error...\n\n[Assistant - 16:14:02]\nLet me help you debug...\n</code></pre><p></p>"},{"location":"user-guide/tui/features/#export-options","title":"Export Options","text":"<ul> <li>Include/exclude metadata</li> <li>Include/exclude timestamps</li> <li>Include/exclude tool calls</li> <li>Include/exclude system messages</li> <li>Custom filename</li> </ul>"},{"location":"user-guide/tui/features/#advanced-features","title":"Advanced Features","text":""},{"location":"user-guide/tui/features/#thinking-display","title":"Thinking Display","text":"<p>Extended reasoning shown during generation:</p> <pre><code>\u250c\u2500 Thinking... \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Let me analyze the error...    \u2502\n\u2502                                \u2502\n\u2502 The traceback shows...         \u2502\n\u2502                                \u2502\n\u2502 \u2699\ufe0f \u2699\ufe0f \u2699\ufe0f                      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>Features: - Real-time streaming of thoughts - Collapsible after completion - Dashed border for distinction - Italic muted text</p>"},{"location":"user-guide/tui/features/#multi-turn-context","title":"Multi-turn Context","text":"<p>Context maintained across messages:</p> <pre><code>User: What files are in /tmp?\nAssistant: [Lists files]\n\nUser: Delete the cache files\nAssistant: [Remembers previous /tmp context]\n</code></pre> <p>Features: - Automatic context window management - Conversation history included - Tool results preserved - File attachments remembered</p>"},{"location":"user-guide/tui/features/#error-handling","title":"Error Handling","text":"<p>Graceful error display:</p> <pre><code>\u250c\u2500 Error \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 \u274c API Request Failed          \u2502\n\u2502                                \u2502\n\u2502 Rate limit exceeded            \u2502\n\u2502 Retry after 60 seconds         \u2502\n\u2502                                \u2502\n\u2502 [Retry]  [Cancel]              \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>Error Types: - API errors (rate limit, auth, network) - Tool execution errors - File I/O errors - Validation errors</p>"},{"location":"user-guide/tui/features/#auto-save","title":"Auto-save","text":"<p>Conversations automatically saved:</p> <ul> <li>After each message</li> <li>On conversation switch</li> <li>On application quit</li> <li>On error/crash (recovery)</li> </ul> <p>Location: </p><pre><code>~/.config/consoul/conversations/\n</code></pre><p></p>"},{"location":"user-guide/tui/features/#keyboard-driven-workflow","title":"Keyboard-Driven Workflow","text":"<p>Power users can work entirely via keyboard:</p> <pre><code>^n               \u2192 New conversation\nType message     \u2192 Compose\nEnter            \u2192 Send\n^f               \u2192 Attach files\nSpace            \u2192 Select files\nEnter            \u2192 Confirm\nTab              \u2192 Cycle through UI\n^s               \u2192 Settings\n^b               \u2192 Toggle sidebar\nq                \u2192 Quit\n</code></pre> <p>Complete keyboard reference \u2192</p>"},{"location":"user-guide/tui/features/#next-steps","title":"Next Steps","text":"<ul> <li>Keyboard Shortcuts - Master keyboard navigation</li> <li>Modals &amp; Dialogs - Settings, tools, model selection</li> <li>Themes - Customize appearance</li> <li>Configuration - Configure behavior</li> </ul>"},{"location":"user-guide/tui/interface/","title":"Interface Guide","text":""},{"location":"user-guide/tui/interface/#tui-interface-guide","title":"TUI Interface Guide","text":"<p>This guide provides a detailed walkthrough of every component in the Consoul Terminal User Interface.</p>"},{"location":"user-guide/tui/interface/#interface-overview","title":"Interface Overview","text":"<p>The Consoul TUI is organized into five main areas:</p> <ol> <li>Header Bar (top)</li> <li>Conversation Sidebar (left, toggleable)</li> <li>Chat Area (center)</li> <li>Input Area (bottom)</li> <li>Footer (very bottom)</li> </ol>"},{"location":"user-guide/tui/interface/#1-header-bar","title":"1. Header Bar","text":"<p>The header bar spans the full width of the terminal and provides navigation and context information.</p>"},{"location":"user-guide/tui/interface/#components","title":"Components","text":""},{"location":"user-guide/tui/interface/#app-icon-name","title":"App Icon &amp; Name","text":"<pre><code>\ud83e\udd16 Consoul\n</code></pre> - Click to toggle sidebar (same as clicking conversation count) - Brand identity and visual anchor"},{"location":"user-guide/tui/interface/#conversation-count","title":"Conversation Count","text":"<pre><code>7 conversations\n</code></pre> - Shows total number of saved conversations - Click to toggle sidebar visibility - Updates in real-time as conversations are created/deleted"},{"location":"user-guide/tui/interface/#search-bar","title":"Search Bar","text":"<pre><code>\ud83d\udd0d Search conversations...\n</code></pre> - Filter conversations by title - Auto-shows sidebar when search query is entered - Real-time filtering as you type - Clear with <code>Esc</code> or clear button"},{"location":"user-guide/tui/interface/#model-indicator","title":"Model Indicator","text":"<pre><code>\ud83e\udd16 Ollama: qpt-oss:20b\n</code></pre> - Shows currently selected provider and model - Click to open model selector modal - Format: <code>Provider: model-name</code>"},{"location":"user-guide/tui/interface/#profile-indicator","title":"Profile Indicator","text":"<pre><code>Profile: default\n</code></pre> - Shows active profile - Click to open profile selector - Profiles control behavior, tools, and settings"},{"location":"user-guide/tui/interface/#quick-actions","title":"Quick Actions","text":"<pre><code>\ud83d\udd34 \u2699\ufe0f  ?\n</code></pre> - \ud83d\udd34 Red Dot: Record/stop (future feature) - \u2699\ufe0f Settings: Open settings modal (<code>^comma</code>) - ? Help: Show help/keyboard shortcuts"},{"location":"user-guide/tui/interface/#2-conversation-sidebar","title":"2. Conversation Sidebar","text":"<p>Toggleable sidebar showing all conversations as beautiful cards.</p> <p></p>"},{"location":"user-guide/tui/interface/#empty-state","title":"Empty State","text":"<p>When no conversations exist: </p><pre><code>\u2571\u2571\u2571\u2571\u2571\u2571\u2571\u2571\u2571\u2571\n\u2571         \u2571\n\u2571 No conv \u2571\n\u2571 -ersati\u2571\n\u2571 ons yet\u2571\n\u2571\u2571\u2571\u2571\u2571\u2571\u2571\u2571\u2571\n</code></pre> - Diagonal hatch pattern - Centered italic text - Automatically hidden when empty<p></p>"},{"location":"user-guide/tui/interface/#conversation-cards","title":"Conversation Cards","text":"<p>Each conversation is displayed as a card:</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Poem from Project README   \u2502\n\u2502                            \u2502\n\u2502 Nov 26, 2025              \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"user-guide/tui/interface/#card-states","title":"Card States","text":"<p>Default - Gray background - Blue left border - Two-line title support (wraps automatically) - Date in muted gray</p> <p>Hover - Lighter background - Cyan accent border - Enhanced visual feedback</p> <p>Selected/Active - Blue background - Purple left border - Bold text style - Indicates current conversation</p>"},{"location":"user-guide/tui/interface/#sidebar-actions","title":"Sidebar Actions","text":"<ul> <li>Click Card: Load that conversation</li> <li>Click Count: Toggle sidebar</li> <li>Search: Filter cards by title</li> <li>Scroll: Navigate through many conversations</li> </ul>"},{"location":"user-guide/tui/interface/#sidebar-behavior","title":"Sidebar Behavior","text":"<ul> <li>Minimum width: 20 characters</li> <li>Maximum width: 40 characters</li> <li>Default width: 20% of terminal</li> <li>Auto-shows when searching</li> <li>Persists state (visible/hidden) in config</li> </ul>"},{"location":"user-guide/tui/interface/#3-chat-area","title":"3. Chat Area","text":"<p>The main conversation display area showing message history.</p> <p></p>"},{"location":"user-guide/tui/interface/#layout","title":"Layout","text":"<pre><code>\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\n\u2551 Conversation (2 messages)                \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551                                          \u2551\n\u2551  \u250c\u2500 You \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2551\n\u2551  \u2502 Write a poem...                   \u2502  \u2551\n\u2551  \u2502 \u23f1 16:13:59                  \ud83d\udccb \u2398  \u2502  \u2551\n\u2551  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2551\n\u2551                                          \u2551\n\u2551  \u250c\u2500 Assistant \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2551\n\u2551  \u2502 In terminal's grace, a chat...   \u2502  \u2551\n\u2551  \u2502                                   \u2502  \u2551\n\u2551  \u2502 \u23f1 17:00:11 | 34.16 tok/sec       \u2502  \u2551\n\u2551  \u2502             187 tokens            \u2502  \u2551\n\u2551  \u2502 \ud83d\udd27 \ud83d\udccb \u2398                          \u2502  \u2551\n\u2551  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2551\n\u2551                                          \u2551\n\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\n</code></pre>"},{"location":"user-guide/tui/interface/#message-bubbles","title":"Message Bubbles","text":"<p>All messages are displayed as bordered containers with metadata.</p>"},{"location":"user-guide/tui/interface/#user-messages","title":"User Messages","text":"<pre><code>\u250c\u2500 You \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 What files are in the current directory?\u2502\n\u2502                                          \u2502\n\u2502 \u23f1 14:23:45                         \ud83d\udccb  \u2398\u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>Characteristics: - Blue border (primary color) - Title aligned right: \"You\" - Timestamp in bottom left - Copy button (\ud83d\udccb) in bottom right - Branch button (\u2398) for conversation branching</p>"},{"location":"user-guide/tui/interface/#assistant-messages","title":"Assistant Messages","text":"<pre><code>\u250c\u2500 Assistant \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Here are the files:                    \u2502\n\u2502                                        \u2502\n\u2502 - main.py                              \u2502\n\u2502 - config.yaml                          \u2502\n\u2502 - README.md                            \u2502\n\u2502                                        \u2502\n\u2502 \u23f1 14:23:48 | 45.2 tok/sec | 28 tokens\u2502\n\u2502 \ud83d\udd27 \ud83d\udccb \u2398                               \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>Characteristics: - Purple border (secondary color #44385E) - Title aligned left: \"Assistant\" - Markdown rendering - Syntax highlighting for code blocks - Token metrics (if enabled) - Tools button (\ud83d\udd27) to show tool calls - Copy and branch buttons</p>"},{"location":"user-guide/tui/interface/#system-messages","title":"System Messages","text":"<pre><code>\u250c\u2500 System \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 \u2699\ufe0f Executing: read_file                \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>Characteristics: - Muted border and colors - Lighter background - Icon-based status indicators - Compact display</p>"},{"location":"user-guide/tui/interface/#error-messages","title":"Error Messages","text":"<pre><code>\u250c\u2500 Error \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 \u274c Failed to execute command           \u2502\n\u2502                                        \u2502\n\u2502 Permission denied: /etc/shadow         \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>Characteristics: - Red background - Thick yellow border - Error icon - Error details</p>"},{"location":"user-guide/tui/interface/#tool-call-widgets","title":"Tool Call Widgets","text":"<p>Tool executions are shown as special expandable widgets:</p> <p></p> <pre><code>\u250c\u2500 System \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 \ud83d\udd27 Executing: read_file       \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\n\u250c\u2500 System \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 \ud83d\udd27 Executing: create_file     \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"user-guide/tui/interface/#tool-status-colors","title":"Tool Status Colors","text":"Status Border Color Indicator Pending Yellow/Amber \u23f3 Executing Blue/Primary \u2699\ufe0f Success Green \u2705 Error Red (thick) \u274c Denied Gray/Muted \ud83d\udeab"},{"location":"user-guide/tui/interface/#tool-widget-structure","title":"Tool Widget Structure","text":"<pre><code>\u250c\u2500 Tool: bash_execute \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 \ud83d\udd27 bash_execute                        \u2502\n\u2502                                        \u2502\n\u2502 Arguments:                             \u2502\n\u2502 {                                      \u2502\n\u2502   \"command\": \"ls -la\"                  \u2502\n\u2502 }                                      \u2502\n\u2502                                        \u2502\n\u2502 Status: \u2705 Success                     \u2502\n\u2502                                        \u2502\n\u2502 Output:                                \u2502\n\u2502 total 48                               \u2502\n\u2502 drwxr-xr-x  12 user  staff  384 Nov 25\u2502\n\u2502 -rw-r--r--   1 user  staff  1.2K README\u2502\n\u2502 ...                                    \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"user-guide/tui/interface/#thinking-indicators","title":"Thinking Indicators","text":"<p>When the AI is processing (extended thinking):</p> <pre><code>\u250c\u2500 Thinking... \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Analyzing the code...          \u2502\n\u2502                                \u2502\n\u2502 \u2699\ufe0f \u2699\ufe0f \u2699\ufe0f                      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>Features: - Dashed blue border - Animated dots - Real-time streaming of thinking content - Collapsible after completion</p>"},{"location":"user-guide/tui/interface/#markdown-rendering","title":"Markdown Rendering","text":"<p>Assistant messages support rich markdown:</p> <ul> <li>Headers (H1-H6)</li> <li>Lists (ordered, unordered, nested)</li> <li>Code Blocks (with syntax highlighting)</li> <li>Inline Code (<code>code</code>)</li> <li>Tables</li> <li>Links</li> <li>Emphasis (italic, bold)</li> <li>Blockquotes</li> </ul>"},{"location":"user-guide/tui/interface/#code-blocks","title":"Code Blocks","text":"<pre><code>\u250c\u2500 Python \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 def fibonacci(n):              \u2502\n\u2502     if n &lt;= 1:                 \u2502\n\u2502         return n               \u2502\n\u2502     return fib(n-1) + fib(n-2) \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>Features: - Language detection - Syntax highlighting (Pygments) - Line numbers (optional) - Copy button - Scrollable for long code</p>"},{"location":"user-guide/tui/interface/#4-input-area","title":"4. Input Area","text":"<p>Multi-line text input with file attachment support.</p>"},{"location":"user-guide/tui/interface/#components_1","title":"Components","text":"<pre><code>\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\n\u2551 Message (Enter to send, Shift+Enter for  \u2551\n\u2551 newline)                                  \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2551\n\u2551 \u2502 Your message here...                \u2502  \u2551\n\u2551 \u2502                                      \u2502  \u2551\n\u2551 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2551\n\u2551                                          \u2551\n\u2551 [main.py \u00d7] [config.yaml \u00d7]     [+ Attach]\u2551\n\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\n</code></pre>"},{"location":"user-guide/tui/interface/#text-area","title":"Text Area","text":"<ul> <li>Multi-line support (up to 10 lines)</li> <li>Auto-scroll on overflow</li> <li>Syntax highlighting for code (if enabled)</li> <li>Blue border (primary color)</li> <li>Focus indicator (30% opacity border)</li> </ul>"},{"location":"user-guide/tui/interface/#file-chips","title":"File Chips","text":"<p>Attached files shown as removable chips:</p> <pre><code>[\ud83d\udcc4 main.py \u00d7] [\ud83d\udcc4 config.yaml \u00d7] [\ud83d\udcc4 utils.py \u00d7]\n</code></pre> <p>Features: - File icon - Filename - Remove button (\u00d7) - Hover effects - Auto-wrap to multiple lines</p>"},{"location":"user-guide/tui/interface/#attach-button","title":"Attach Button","text":"<pre><code>[ + Attach ]\n</code></pre> <ul> <li>Opens file browser modal</li> <li>Click to open file browser</li> <li>Hover effect (lighter background)</li> </ul>"},{"location":"user-guide/tui/interface/#input-behavior","title":"Input Behavior","text":"<ul> <li><code>Enter</code>: Send message</li> <li><code>Shift+Enter</code>: New line</li> <li>Click <code>+ Attach</code>: Open file browser modal</li> <li>Auto-focus after sending</li> <li>History preserved per conversation</li> </ul>"},{"location":"user-guide/tui/interface/#5-footer","title":"5. Footer","text":"<p>Quick keyboard shortcuts and status bar.</p> <pre><code>q Quit   ^n New Chat   ^l Clear   ^e Export   ^b Sidebar   shift+^p Permissions   ^t Tools   ^comma Settings\n</code></pre>"},{"location":"user-guide/tui/interface/#footer-elements","title":"Footer Elements","text":"<p>Each shows a keyboard shortcut and action:</p> Shortcut Label Action <code>q</code> Quit Exit Consoul <code>^n</code> New Chat Create new conversation <code>^l</code> Clear Clear current conversation <code>^e</code> Export Export conversation <code>^b</code> Sidebar Toggle sidebar <code>shift+^p</code> Permissions Open permissions/tool manager <code>^t</code> Tools Open tool manager <code>^comma</code> Settings Open settings (Ctrl+,)"},{"location":"user-guide/tui/interface/#footer-styling","title":"Footer Styling","text":"<ul> <li>Background: Primary color (Sky Blue #0085CC)</li> <li>Text: White</li> <li>Shortcut keys: Bold, same color as text</li> <li>Auto-wraps on narrow terminals</li> </ul>"},{"location":"user-guide/tui/interface/#responsive-layout","title":"Responsive Layout","text":"<p>The TUI adapts to different terminal sizes:</p>"},{"location":"user-guide/tui/interface/#minimum-size","title":"Minimum Size","text":"<ul> <li>Width: 80 characters</li> <li>Height: 24 lines</li> <li>Sidebar auto-hides below 100 chars width</li> </ul>"},{"location":"user-guide/tui/interface/#recommended-size","title":"Recommended Size","text":"<ul> <li>Width: 120+ characters</li> <li>Height: 40+ lines</li> <li>Full feature visibility</li> </ul>"},{"location":"user-guide/tui/interface/#maximum-utilization","title":"Maximum Utilization","text":"<ul> <li>Sidebar: Max 40 chars width</li> <li>Chat area: Remaining space</li> <li>Input: Max 10 lines height</li> <li>All components scale proportionally</li> </ul>"},{"location":"user-guide/tui/interface/#color-scheme","title":"Color Scheme","text":"<p>The interface uses theme-based colors:</p>"},{"location":"user-guide/tui/interface/#consoul-dark-default","title":"Consoul Dark (Default)","text":"<ul> <li>Background: #2A2A2A (dark gray)</li> <li>Surface: #3D3D3D (Binary Slate)</li> <li>Primary: #0085CC (Sky Blue)</li> <li>Secondary: #44385E (Deep Purple)</li> <li>Text: #FFFFFF (Pure White)</li> <li>Muted: #9BA3AB (Light Gray)</li> </ul>"},{"location":"user-guide/tui/interface/#consoul-light","title":"Consoul Light","text":"<ul> <li>Background: #FFFFFF (Pure White)</li> <li>Surface: #F8F9FA (Very Light Gray)</li> <li>Primary: #0085CC (Sky Blue)</li> <li>Secondary: #3D3D3D (Binary Slate)</li> <li>Text: #3D3D3D (Binary Slate)</li> <li>Muted: #6C757D (Gray)</li> </ul> <p>See all themes \u2192</p>"},{"location":"user-guide/tui/interface/#accessibility","title":"Accessibility","text":""},{"location":"user-guide/tui/interface/#keyboard-navigation","title":"Keyboard Navigation","text":"<ul> <li>All actions accessible via keyboard</li> <li>Visible focus indicators</li> <li>No mouse required</li> </ul>"},{"location":"user-guide/tui/interface/#visual-indicators","title":"Visual Indicators","text":"<ul> <li>Color is never the only indicator</li> <li>Icons supplement color-coded statuses</li> <li>Borders and styling for clarity</li> </ul>"},{"location":"user-guide/tui/interface/#performance","title":"Performance","text":"<ul> <li>Efficient rendering (only visible elements)</li> <li>Smooth scrolling</li> <li>Responsive even with long conversations</li> </ul>"},{"location":"user-guide/tui/interface/#next-steps","title":"Next Steps","text":"<ul> <li>TUI Features - Deep dive into functionality</li> <li>Keyboard Shortcuts - Complete shortcut reference</li> <li>Themes - Customize appearance</li> <li>Configuration - Configure TUI settings</li> </ul>"},{"location":"user-guide/tui/keyboard-shortcuts/","title":"Keyboard Shortcuts","text":""},{"location":"user-guide/tui/keyboard-shortcuts/#keyboard-shortcuts","title":"Keyboard Shortcuts","text":"<p>Complete reference of all keyboard shortcuts in the Consoul TUI.</p>"},{"location":"user-guide/tui/keyboard-shortcuts/#global-shortcuts","title":"Global Shortcuts","text":"<p>These shortcuts work from anywhere in the TUI.</p> Shortcut Action Description <code>q</code> Quit Exit Consoul <code>^c</code> Quit Alternative quit (Ctrl+C) <code>^n</code> New Chat Create new conversation <code>^l</code> Clear Clear current conversation messages <code>^b</code> Toggle Sidebar Show/hide conversation list sidebar <code>^e</code> Export Export current conversation <code>^i</code> Import Import conversation from file <code>^t</code> Tools Open tool manager modal <code>^comma</code> Settings Open settings modal (Ctrl+,) <code>^m</code> Model Open model picker modal <code>^p</code> Profile Open profile selector <code>^o</code> Ollama Library Browse Ollama model library <code>^s</code> Search History Search conversation history <code>^shift+p</code> Permissions Open permissions/tool manager (alias) <code>^shift+s</code> System Prompt View/edit system prompt <code>f1</code> Help Show help modal <code>/</code> Focus Input Move focus to input area <code>Esc</code> Cancel Cancel streaming response or close modal <code>Tab</code> Focus Next Move focus to next UI element <code>Shift+Tab</code> Focus Previous Move focus to previous UI element"},{"location":"user-guide/tui/keyboard-shortcuts/#input-area","title":"Input Area","text":"<p>Shortcuts for composing and sending messages.</p> Shortcut Action Description <code>Enter</code> Send Message Send the current message <code>Shift+Enter</code> New Line Insert newline without sending <code>^a</code> Select All Select all text in input <code>^c</code> Copy Copy selected text <code>^v</code> Paste Paste from clipboard <code>^x</code> Cut Cut selected text <code>^z</code> Undo Undo last edit <code>^y</code> Redo Redo last undo <code>Home</code> Start of Line Move cursor to start of line <code>End</code> End of Line Move cursor to end of line <code>^Home</code> Start of Input Move cursor to start of text <code>^End</code> End of Input Move cursor to end of text"},{"location":"user-guide/tui/keyboard-shortcuts/#conversation-sidebar","title":"Conversation Sidebar","text":"<p>Shortcuts for navigating and managing conversations.</p> Shortcut Action Description <code>^b</code> Toggle Sidebar Show/hide sidebar <code>^s</code> Search Search conversation history <code>\u2191</code> Previous Move selection up (when focused) <code>\u2193</code> Next Move selection down (when focused) <code>Enter</code> Load Load selected conversation <code>Esc</code> Clear Search Clear search query and unfocus"},{"location":"user-guide/tui/keyboard-shortcuts/#chat-area","title":"Chat Area","text":"<p>Shortcuts for interacting with messages.</p> Shortcut Action Description <code>\u2191</code> Scroll Up Scroll chat area up <code>\u2193</code> Scroll Down Scroll chat area down <code>PageUp</code> Page Up Scroll up one page <code>PageDown</code> Page Down Scroll down one page <code>Home</code> Top Scroll to top of conversation <code>End</code> Bottom Scroll to bottom of conversation <code>Esc</code> Cancel Stream Stop streaming response"},{"location":"user-guide/tui/keyboard-shortcuts/#file-attachment-browser","title":"File Attachment Browser","text":"<p>Shortcuts in the file selection modal (if available via button).</p> Shortcut Action Description <code>\u2191</code> Previous Item Move selection up <code>\u2193</code> Next Item Move selection down <code>\u2192</code> Expand Open/expand selected directory <code>\u2190</code> Collapse Close/collapse selected directory <code>Space</code> Toggle Select/deselect file <code>Enter</code> Confirm Open directory or confirm selection <code>Esc</code> Cancel Close modal without attaching <code>Backspace</code> Parent Navigate to parent directory"},{"location":"user-guide/tui/keyboard-shortcuts/#settings-modal","title":"Settings Modal","text":"<p>Shortcuts in the settings dialog.</p> Shortcut Action Description <code>^comma</code> Open Open settings modal <code>Tab</code> Next Field Move to next setting <code>Shift+Tab</code> Previous Field Move to previous setting <code>Space</code> Toggle Toggle boolean settings <code>Enter</code> Apply Save and apply settings <code>Esc</code> Cancel Close without saving <code>\u2192</code> Next Tab Switch to next settings tab <code>\u2190</code> Previous Tab Switch to previous settings tab <p>Settings Tabs: - Appearance - Performance - Behavior - Advanced</p>"},{"location":"user-guide/tui/keyboard-shortcuts/#model-selector-modal","title":"Model Selector Modal","text":"<p>Shortcuts for selecting AI models and providers.</p> Shortcut Action Description <code>^m</code> Open Open model selector <code>Tab</code> Next Provider Switch to next provider tab <code>Shift+Tab</code> Previous Provider Switch to previous provider tab <code>\u2191</code> Previous Model Move selection up <code>\u2193</code> Next Model Move selection down <code>Enter</code> Select Choose selected model and close <code>Esc</code> Cancel Close without changing model <p>Provider Tabs: - Openai - Anthropic - Google - HuggingFace - Local (Ollama)</p>"},{"location":"user-guide/tui/keyboard-shortcuts/#tool-manager-modal","title":"Tool Manager Modal","text":"<p>Shortcuts for managing AI tools.</p> Shortcut Action Description <code>^t</code> Open Open tool manager <code>\u2191</code> Previous Tool Move selection up <code>\u2193</code> Next Tool Move selection down <code>Space</code> Toggle Enable/disable selected tool <code>Enter</code> Apply Save tool configuration <code>Esc</code> Cancel Close without saving"},{"location":"user-guide/tui/keyboard-shortcuts/#profile-selector-modal","title":"Profile Selector Modal","text":"<p>Shortcuts for selecting profiles.</p> Shortcut Action Description <code>^p</code> Open Open profile selector <code>\u2191</code> Previous Move selection up <code>\u2193</code> Next Move selection down <code>Enter</code> Select Load selected profile <code>Esc</code> Cancel Close without changing profile"},{"location":"user-guide/tui/keyboard-shortcuts/#export-dialog","title":"Export Dialog","text":"<p>Shortcuts for exporting conversations.</p> Shortcut Action Description <code>^e</code> Open Open export dialog <code>Tab</code> Next Option Move to next export option <code>Shift+Tab</code> Previous Move to previous option <code>Space</code> Toggle Toggle checkboxes <code>Enter</code> Export Export with selected options <code>Esc</code> Cancel Close without exporting"},{"location":"user-guide/tui/keyboard-shortcuts/#help-modal","title":"Help Modal","text":"<p>View keyboard shortcuts and help.</p> Shortcut Action Description <code>f1</code> Open Show help modal <code>Esc</code> Close Close help modal"},{"location":"user-guide/tui/keyboard-shortcuts/#import-dialog","title":"Import Dialog","text":"<p>Import conversations from file.</p> Shortcut Action Description <code>^i</code> Open Open import dialog <code>Enter</code> Confirm Import selected file <code>Esc</code> Cancel Close without importing"},{"location":"user-guide/tui/keyboard-shortcuts/#platform-specific-modifiers","title":"Platform-Specific Modifiers","text":"<p>The <code>^</code> symbol represents the Control key:</p>"},{"location":"user-guide/tui/keyboard-shortcuts/#macos","title":"macOS","text":"<ul> <li><code>^</code> = <code>Control</code> (not <code>Command</code>)</li> <li><code>\u2318</code> (Command) is not used in Consoul shortcuts</li> <li><code>\u2325</code> (Option) = <code>Alt</code></li> </ul>"},{"location":"user-guide/tui/keyboard-shortcuts/#linuxwindows","title":"Linux/Windows","text":"<ul> <li><code>^</code> = <code>Control</code> (Ctrl)</li> <li><code>Alt</code> available but not currently used</li> </ul>"},{"location":"user-guide/tui/keyboard-shortcuts/#quick-reference-card","title":"Quick Reference Card","text":"<p>Essential shortcuts for daily use:</p> <pre><code>\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\n\u2551      CONSOUL KEYBOARD SHORTCUTS          \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 GLOBAL                                   \u2551\n\u2551 q         Quit                           \u2551\n\u2551 ^n        New conversation               \u2551\n\u2551 ^l        Clear conversation             \u2551\n\u2551 ^b        Toggle sidebar                 \u2551\n\u2551 ^comma    Settings (Ctrl+,)              \u2551\n\u2551 ^m        Model picker                   \u2551\n\u2551 ^p        Profile selector               \u2551\n\u2551 ^e        Export                         \u2551\n\u2551 ^t        Tools                          \u2551\n\u2551 ^shift+p  Permissions                    \u2551\n\u2551 ^s        Search history                 \u2551\n\u2551 f1        Help                           \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 INPUT                                    \u2551\n\u2551 Enter     Send message                   \u2551\n\u2551 Shift+\u21b5   New line                       \u2551\n\u2551 /         Focus input                    \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 NAVIGATION                               \u2551\n\u2551 \u2191\u2193        Scroll/Navigate                \u2551\n\u2551 PgUp/PgDn Page up/down                   \u2551\n\u2551 Home/End  Top/Bottom                     \u2551\n\u2551 Tab       Next focus                     \u2551\n\u2551 Esc       Cancel/Close                   \u2551\n\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\n</code></pre>"},{"location":"user-guide/tui/keyboard-shortcuts/#tips-for-power-users","title":"Tips for Power Users","text":""},{"location":"user-guide/tui/keyboard-shortcuts/#essential-workflow","title":"Essential Workflow","text":"<p>Quick conversation management: </p><pre><code>^n          \u2192 New conversation\n^s          \u2192 Search conversations\n^e          \u2192 Export current\n^i          \u2192 Import conversation\n</code></pre><p></p> <p>Quick settings: </p><pre><code>^comma      \u2192 Open settings\n^m          \u2192 Switch model\n^p          \u2192 Switch profile\n^t          \u2192 Manage tools\n</code></pre><p></p> <p>Navigation: </p><pre><code>^b          \u2192 Toggle sidebar\n/           \u2192 Focus input\nEsc         \u2192 Cancel/close\nTab         \u2192 Cycle through UI\n</code></pre><p></p>"},{"location":"user-guide/tui/keyboard-shortcuts/#efficiency-tips","title":"Efficiency Tips","text":"<ol> <li>Keep Hands on Keyboard: Master global shortcuts to avoid mouse</li> <li>Use Search: <code>^s</code> to quickly find past conversations</li> <li>Quick Navigation: <code>Home</code>/<code>End</code> in chat to jump to start/end</li> <li>Model Switching: <code>^m</code> for rapid model changes</li> <li>Tool Management: <code>^t</code> for quick tool enable/disable</li> </ol>"},{"location":"user-guide/tui/keyboard-shortcuts/#troubleshooting","title":"Troubleshooting","text":""},{"location":"user-guide/tui/keyboard-shortcuts/#shortcut-not-working","title":"Shortcut Not Working","text":"<p>Common Issues:</p> <ol> <li>Terminal Compatibility: Some terminals intercept certain key combinations</li> <li>Try different terminal emulator</li> <li> <p>Check terminal preferences for key mappings</p> </li> <li> <p>Focus Context: Some shortcuts only work in specific contexts</p> </li> <li>Ensure correct widget is focused</li> <li> <p>Try clicking on the target area first</p> </li> <li> <p>Platform Differences: macOS vs Linux/Windows</p> </li> <li><code>^</code> = Control on all platforms</li> <li>Command key is not used</li> </ol>"},{"location":"user-guide/tui/keyboard-shortcuts/#terminal-specific-issues","title":"Terminal-Specific Issues","text":"<p>tmux/screen: </p><pre><code># May need to configure pass-through in config\n# Check .tmux.conf or .screenrc\n</code></pre><p></p> <p>iTerm2/Terminal.app (macOS): </p><pre><code>Preferences \u2192 Profiles \u2192 Keys\nCheck \"Use Option as Meta key\" setting\n</code></pre><p></p> <p>Windows Terminal: </p><pre><code>// settings.json\n// Check for conflicting keybindings\n</code></pre><p></p>"},{"location":"user-guide/tui/keyboard-shortcuts/#next-steps","title":"Next Steps","text":"<ul> <li>TUI Features - Explore all features</li> <li>Modals &amp; Dialogs - Detailed modal documentation</li> <li>Interface Guide - UI component reference</li> <li>Configuration - Configure keybindings (future)</li> </ul>"},{"location":"user-guide/tui/modals/","title":"Modals & Dialogs","text":""},{"location":"user-guide/tui/modals/#modals-dialogs","title":"Modals &amp; Dialogs","text":"<p>Consoul TUI features several modal dialogs for configuration and interaction. This guide covers each modal in detail.</p>"},{"location":"user-guide/tui/modals/#model-selector","title":"Model Selector","text":"<p>Select AI model and provider.</p> <p></p>"},{"location":"user-guide/tui/modals/#opening-the-modal","title":"Opening the Modal","text":"<p>Methods: - Click the model indicator in header - Press <code>^m</code></p>"},{"location":"user-guide/tui/modals/#layout","title":"Layout","text":"<pre><code>\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\n\u2551         Select AI Model &amp; Provider                \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 [Openai] [Anthropic] [Google] [HuggingFace] [Local] \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 \ud83d\udd0d Search models by name...                      \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 Model                    Context    Description   \u2551\n\u2551 \u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501 \u2551\n\u2551 claude-3-5-haiku...      200K      Legacy model  \u2551\n\u2551 claude-3-7-sonnet...     200K      Legacy model  \u2551\n\u2551 claude-haiku-4-5...      200K      Fastest near..\u2551\n\u2551 claude-opus-4-1...       200K      Exceptional.. \u2551\n\u2551 claude-sonnet-4...       200K      Legacy model  \u2551\n\u2551 claude-sonnet-4-5...     200K      Smartest for..\u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 Enter: select \u00b7 Escape: cancel                    \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551              [Select]    [Cancel]                 \u2551\n\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\n</code></pre>"},{"location":"user-guide/tui/modals/#provider-tabs","title":"Provider Tabs","text":"<p>Switch between AI providers:</p> <p>Anthropic (Claude) </p> <ul> <li>claude-3-5-haiku-20241022 (Legacy, use Haiku 4.5)</li> <li>claude-3-7-sonnet-20250219 (Legacy, use Sonnet 4.5)</li> <li>claude-3-haiku-20240307 (Legacy, use Haiku 4.5)</li> <li>claude-3-opus-20240229 (Legacy, use Opus 4.5)</li> <li>claude-haiku-4-5-20251001 (Fastest near-frontier intelligence)</li> <li>claude-opus-4-1-20250805 (Exceptional specialized reasoning)</li> <li>claude-opus-4-20250514 (Legacy, use Opus 4.5)</li> <li>claude-opus-4-5-20251101 (Premium intelligence + performance)</li> <li>claude-sonnet-4-20250514 (Legacy, use Sonnet 4.5)</li> <li>claude-sonnet-4-5-20250929 (Smartest for complex agents + coding)</li> </ul> <p>OpenAI (GPT) </p> <ul> <li>gpt-4o</li> <li>gpt-4o-mini</li> <li>gpt-4-turbo</li> <li>gpt-4</li> <li>gpt-3.5-turbo</li> <li>o1-preview</li> <li>o1-mini</li> </ul> <p>Google (Gemini)</p> <ul> <li>gemini-2.0-flash-exp</li> <li>gemini-1.5-pro</li> <li>gemini-1.5-flash</li> <li>gemini-1.0-pro</li> </ul> <p>Local (Ollama) </p> <ul> <li>Lists locally installed Ollama models</li> <li>Shows model size and quantization</li> <li>Auto-detects available models</li> </ul>"},{"location":"user-guide/tui/modals/#model-information","title":"Model Information","text":"<p>Each model shows:</p> Column Description Model Full model identifier Context Context window size (e.g., 200K tokens) Description Model capabilities and use cases"},{"location":"user-guide/tui/modals/#search","title":"Search","text":"<p>Filter models by name:</p> <ol> <li>Focus search bar (<code>/</code> or click)</li> <li>Type model name or keyword</li> <li>Results filter in real-time</li> <li>Clear with <code>Esc</code></li> </ol> <p>Search Examples: - \"sonnet\" \u2192 Claude Sonnet models - \"4o\" \u2192 GPT-4o variants - \"flash\" \u2192 Gemini Flash models - \"7b\" \u2192 7 billion parameter local models</p>"},{"location":"user-guide/tui/modals/#selection","title":"Selection","text":"<p>Keyboard: 1. Navigate with <code>\u2191</code> <code>\u2193</code> 2. Switch tabs with <code>Tab</code> or <code>1</code>-<code>5</code> 3. Press <code>Enter</code> to select 4. Press <code>Esc</code> to cancel</p> <p>Mouse: 1. Click provider tab 2. Click model row 3. Click <code>Select</code> button</p>"},{"location":"user-guide/tui/modals/#configuration","title":"Configuration","text":"<p>Selected model is saved:</p> <pre><code># config.yaml\ndefault_model: claude-sonnet-4-5-20250929\n</code></pre>"},{"location":"user-guide/tui/modals/#settings-modal","title":"Settings Modal","text":"<p>Configure TUI appearance and behavior.</p> <p></p>"},{"location":"user-guide/tui/modals/#opening-the-modal_1","title":"Opening the Modal","text":"<p>Methods: - Press <code>^comma</code> (Ctrl+,) - Click settings icon (\u2699\ufe0f) in header</p>"},{"location":"user-guide/tui/modals/#settings-tabs","title":"Settings Tabs","text":""},{"location":"user-guide/tui/modals/#1-appearance","title":"1. Appearance","text":"<pre><code>\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\n\u2551               Settings                    \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 [Appearance] Performance  Behavior  Adv.. \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551                                           \u2551\n\u2551 Theme:                                    \u2551\n\u2551     \u25bc Consoul Dark \u25bc                     \u2551\n\u2551                                           \u2551\n\u2551 Show Sidebar:                             \u2551\n\u2551     \u2611 Enabled                            \u2551\n\u2551                                           \u2551\n\u2551 Show Timestamps:                          \u2551\n\u2551     \u2611 Enabled                            \u2551\n\u2551                                           \u2551\n\u2551 Show Token Count:                         \u2551\n\u2551     \u2611 Enabled                            \u2551\n\u2551                                           \u2551\n\u2551 Input Syntax Highlighting:                \u2551\n\u2551     \u2611 Enabled                            \u2551\n\u2551                                           \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 Saving to global config: config.yaml     \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551        [Apply]  [Reset]  [Cancel]        \u2551\n\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\n</code></pre> <p>Options: - Theme: Choose from available themes (dropdown) - Show Sidebar: Toggle conversation list visibility - Show Timestamps: Display message timestamps - Show Token Count: Display token usage metrics - Input Syntax Highlighting: Highlight code in input</p>"},{"location":"user-guide/tui/modals/#2-performance","title":"2. Performance","text":"<pre><code>Performance Settings:\n\n\u2022 Stream Tokens:          \u2611 Enabled\n\u2022 Async Rendering:        \u2611 Enabled\n\u2022 Virtual Scrolling:      \u2611 Enabled\n\u2022 Cache Conversations:    \u2611 Enabled\n\u2022 Max Cached:             [50]\n\u2022 Lazy Load Threshold:    [100] messages\n</code></pre> <p>Options: - Stream Tokens: Real-time streaming vs batch display - Async Rendering: Non-blocking UI updates - Virtual Scrolling: Render only visible messages - Cache Conversations: Keep recent conversations in memory - Max Cached: Number of conversations to cache - Lazy Load Threshold: Messages before lazy loading kicks in</p>"},{"location":"user-guide/tui/modals/#3-behavior","title":"3. Behavior","text":"<pre><code>Behavior Settings:\n\n\u2022 Auto-save Conversations:     \u2611 Enabled\n\u2022 Confirm on Quit:             \u2611 Enabled\n\u2022 Confirm on Clear:            \u2611 Enabled\n\u2022 Auto-scroll to New:          \u2611 Enabled\n\u2022 Tool Execution Sound:        \u2610 Disabled\n\u2022 Error Notifications:         \u2611 Enabled\n\u2022 Auto-generate Titles:        \u2611 Enabled\n</code></pre> <p>Options: - Auto-save Conversations: Save after each message - Confirm on Quit: Prompt before quitting - Confirm on Clear: Prompt before clearing conversation - Auto-scroll to New: Auto-scroll on new messages - Tool Execution Sound: Beep on tool execution (future) - Error Notifications: Show error toasts - Auto-generate Titles: Generate conversation titles</p>"},{"location":"user-guide/tui/modals/#4-advanced","title":"4. Advanced","text":"<pre><code>Advanced Settings:\n\n\u2022 Debug Mode:                  \u2610 Disabled\n\u2022 Log Level:                   \u25bc INFO \u25bc\n\u2022 API Timeout:                 [30] seconds\n\u2022 Max Retries:                 [3]\n\u2022 Conversation History Limit:  [100] messages\n\u2022 Tool Approval Timeout:       [60] seconds\n</code></pre> <p>Options: - Debug Mode: Enable verbose logging - Log Level: DEBUG, INFO, WARNING, ERROR - API Timeout: Seconds before timeout - Max Retries: API retry attempts - Conversation History Limit: Max messages in context - Tool Approval Timeout: Seconds to approve/deny tools</p>"},{"location":"user-guide/tui/modals/#saving-settings","title":"Saving Settings","text":"<p>Scope: </p><pre><code>Saving to global config: config.yaml\n</code></pre><p></p> <p>Settings saved to: </p><pre><code>~/.config/consoul/config.yaml\n</code></pre><p></p> <p>Actions: - Apply: Save and apply changes - Reset: Reset to defaults - Cancel: Discard changes and close</p>"},{"location":"user-guide/tui/modals/#tool-manager","title":"Tool Manager","text":"<p>Manage AI tool permissions and configuration.</p> <p></p>"},{"location":"user-guide/tui/modals/#opening-the-modal_2","title":"Opening the Modal","text":"<p>Methods: - Press <code>^t</code> - Press <code>shift+^p</code> (Permissions) - Footer shortcut</p>"},{"location":"user-guide/tui/modals/#layout_1","title":"Layout","text":"<pre><code>\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\n\u2551                        Tool Manager                               \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 13 tools (13 enabled)                                            \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 Space/T: toggle \u00b7 \u2191\u2193: navigate \u00b7 A: all \u00b7 N: none \u00b7 S: safe \u00b7   \u2551\n\u2551 Ctrl+S: save to config \u00b7 Enter: apply \u00b7 Esc: cancel              \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551           [All (A)]  [None (N)]  [Safe (S)]                      \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 Tool             Risk        Description                          \u2551\n\u2551 \u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501 \u2551\n\u2551 \u2611 bash_execute   CAUTION     Execute a bash command with...      \u2551\n\u2551 \u2611 grep_search    SAFE        Search for text patterns in...      \u2551\n\u2551 \u2611 code_search    SAFE        Search for code symbols (func...    \u2551\n\u2551 \u2611 find_ref...    SAFE        Find all references/usages of...    \u2551\n\u2551 \u2611 read_file      SAFE        Read file contents with line...     \u2551\n\u2551 \u2611 create_file    CAUTION     Create new file with content.      \u2551\n\u2551 \u2611 edit_file...   CAUTION     Edit file using line-range...       \u2551\n\u2551 \u2611 edit_file...   CAUTION     Edit file using search/replace...   \u2551\n\u2551 \u2611 append_to...   CAUTION     Append content to end of file.     \u2551\n\u2551 \u2611 delete_file    DANGEROUS   Delete file (DANGEROUS - alwa...    \u2551\n\u2551 \u2611 read_url       SAFE        Read and convert a web page to...   \u2551\n\u2551 \u2611 web_search     SAFE        Search the web using Jina AI...    \u2551\n\u2551 \u2611 wikipedia...   SAFE        Search Wikipedia for factual...     \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551                  [Cancel (Esc)]  [Apply (Enter)]                 \u2551\n\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\n</code></pre>"},{"location":"user-guide/tui/modals/#tool-list","title":"Tool List","text":"<p>Each tool shows:</p> Column Description Checkbox \u2611 Enabled / \u2610 Disabled Tool Name Function identifier Risk Level SAFE / CAUTION / DANGEROUS / BLOCKED Description What the tool does"},{"location":"user-guide/tui/modals/#risk-levels","title":"Risk Levels","text":"Level Color Approval Required Description SAFE Green No Read-only, no system changes CAUTION Yellow Yes Modifies files, needs review DANGEROUS Red Always Destructive operations BLOCKED Gray N/A Never allowed to execute"},{"location":"user-guide/tui/modals/#tool-categories","title":"Tool Categories","text":"<p>File Operations: - read_file (SAFE) - create_file (CAUTION) - edit_file_lines (CAUTION) - edit_file_search_replace (CAUTION) - append_to_file (CAUTION) - delete_file (DANGEROUS)</p> <p>Search &amp; Discovery: - grep_search (SAFE) - code_search (SAFE) - find_references (SAFE)</p> <p>Execution: - bash_execute (CAUTION)</p> <p>Web &amp; Information: - read_url (SAFE) - web_search (SAFE) - wikipedia_search (SAFE)</p>"},{"location":"user-guide/tui/modals/#quick-actions","title":"Quick Actions","text":"<p>Preset Configurations:</p> <pre><code>[All (A)]   \u2192 Enable all tools (13/13)\n[None (N)]  \u2192 Disable all tools (0/13)\n[Safe (S)]  \u2192 Enable only SAFE tools (6/13)\n</code></pre> <p>Keyboard Shortcuts: - <code>Space</code> or <code>T</code>: Toggle selected tool - <code>A</code>: Enable all tools - <code>N</code>: Disable all tools - <code>S</code>: Enable only SAFE tools - <code>^s</code>: Save to config file</p>"},{"location":"user-guide/tui/modals/#tool-details","title":"Tool Details","text":"<p>Click or press <code>Space</code> on a tool to see details (future):</p> <pre><code>\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\n\u2551        Tool Details: bash_execute         \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551                                           \u2551\n\u2551 Risk Level: CAUTION                       \u2551\n\u2551                                           \u2551\n\u2551 Description:                              \u2551\n\u2551 Execute a bash command with security      \u2551\n\u2551 controls. Requires user approval for      \u2551\n\u2551 potentially dangerous operations.         \u2551\n\u2551                                           \u2551\n\u2551 Parameters:                               \u2551\n\u2551 \u2022 command (str): Shell command to run     \u2551\n\u2551                                           \u2551\n\u2551 Approval Required: Yes                    \u2551\n\u2551                                           \u2551\n\u2551 Examples:                                 \u2551\n\u2551 \u2022 ls -la                                  \u2551\n\u2551 \u2022 git status                              \u2551\n\u2551 \u2022 python script.py                        \u2551\n\u2551                                           \u2551\n\u2551                  [Close]                  \u2551\n\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\n</code></pre>"},{"location":"user-guide/tui/modals/#saving-configuration","title":"Saving Configuration","text":"<p>Temporary (Session Only): - Click <code>Apply</code> or press <code>Enter</code> - Tools enabled/disabled for this session - Reset on restart</p> <p>Permanent (Config File): - Press <code>^s</code> or click <code>Save to Config</code> - Writes to <code>config.yaml</code>:</p> <pre><code>tools:\n  enabled:\n    - bash_execute\n    - grep_search\n    - code_search\n    - read_file\n    # ... only enabled tools listed\n</code></pre>"},{"location":"user-guide/tui/modals/#file-attachment-browser","title":"File Attachment Browser","text":"<p>Select files to attach to messages.</p> <p></p>"},{"location":"user-guide/tui/modals/#opening-the-modal_3","title":"Opening the Modal","text":"<p>Methods: - Click <code>+ Attach</code> button in input area</p>"},{"location":"user-guide/tui/modals/#layout_2","title":"Layout","text":"<pre><code>\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\n\u2551              Select Files to Attach                       \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 Navigate: \u2191\u2193 Select: Space Open/Close/Confirm: Enter     \u2551\n\u2551 Cancel: Esc                                               \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551  [\u2731 Root] [\ud83c\udfe0 Home] [\ud83d\udcc1 CWD] [\u2191 Up]                      \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2551\n\u2551 \u2502 \ud83d\udcc1 consoul                                            \u2502 \u2551\n\u2551 \u2502   \u251c\u2500 \ud83d\udcc1 .art                                          \u2502 \u2551\n\u2551 \u2502   \u2502   \u251c\u2500 \ud83d\udcc1 banner                                    \u2502 \u2551\n\u2551 \u2502   \u2502   \u2502   \u2713 \ud83d\udcc4 consoul-banner-100.jpg                \u2502 \u2551\n\u2551 \u2502   \u2502   \u2514\u2500 \ud83d\udcc1 logo                                      \u2502 \u2551\n\u2551 \u2502   \u251c\u2500 \ud83d\udcc1 .claude                                       \u2502 \u2551\n\u2551 \u2502   \u251c\u2500 \ud83d\udcc1 .gira                                         \u2502 \u2551\n\u2551 \u2502   \u251c\u2500 \ud83d\udcc1 .git                                          \u2502 \u2551\n\u2551 \u2502   \u251c\u2500 \ud83d\udcc1 .idea                                         \u2502 \u2551\n\u2551 \u2502   \u251c\u2500 \ud83d\udcc1 .local                                        \u2502 \u2551\n\u2551 \u2502   \u251c\u2500 \ud83d\udcc1 .mypy_cache                                   \u2502 \u2551\n\u2551 \u2502   \u251c\u2500 \ud83d\udcc1 .pytest_cache                                 \u2502 \u2551\n\u2551 \u2502   \u251c\u2500 \ud83d\udcc1 .ruff_cache                                   \u2502 \u2551\n\u2551 \u2502   \u251c\u2500 \ud83d\udcc1 .venv                                         \u2502 \u2551\n\u2551 \u2502   \u251c\u2500 \ud83d\udcc1 .vscode                                       \u2502 \u2551\n\u2551 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551 Selected Files: 4                                         \u2551\n\u2551 \u2022 consoul-banner-100.jpg                                  \u2551\n\u2551 \u2022 IMG_1960.jpg                                            \u2551\n\u2551 \u2022 check_hf_models.py                                      \u2551\n\u2551 \u2022 sdk.py                                                  \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551           [Cancel]  [Attach 4 File(s)]                    \u2551\n\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\n</code></pre>"},{"location":"user-guide/tui/modals/#navigation","title":"Navigation","text":"<p>Tree View: - <code>\u2191</code> <code>\u2193</code>: Move selection - <code>\u2192</code> or <code>Enter</code> on directory: Expand - <code>\u2190</code> or <code>Enter</code> on expanded: Collapse - <code>Space</code>: Toggle file selection - <code>Enter</code> on file: Toggle selection</p> <p>Quick Jump: - \u2731 Root: Jump to filesystem root (<code>/</code>) - \ud83c\udfe0 Home: Jump to home directory (<code>~</code>) - \ud83d\udcc1 CWD: Jump to current working directory - \u2191 Up: Navigate to parent directory</p>"},{"location":"user-guide/tui/modals/#file-selection","title":"File Selection","text":"<p>Multi-Select: 1. Navigate with <code>\u2191</code> <code>\u2193</code> 2. Press <code>Space</code> on each file 3. Selected files show \u2713 checkmark 4. Selection count updates at bottom</p> <p>Batch Selection: - <code>^a</code>: Select all visible files (future) - <code>^d</code>: Deselect all (future)</p>"},{"location":"user-guide/tui/modals/#file-display","title":"File Display","text":"<p>Icons: - \ud83d\udcc1 Directory - \ud83d\udcc4 File - \u2713 Selected</p> <p>Information: - Nested tree structure - Expandable/collapsible folders - Selected count and file list at bottom</p>"},{"location":"user-guide/tui/modals/#confirmation","title":"Confirmation","text":"<p>Attach Files: - Click <code>Attach N File(s)</code> button - Or press <code>Enter</code> (confirms selection) - Files added as chips in input area</p> <p>Cancel: - Click <code>Cancel</code> - Or press <code>Esc</code> - No files attached</p>"},{"location":"user-guide/tui/modals/#export-dialog","title":"Export Dialog","text":"<p>Export conversation to file.</p> <p></p>"},{"location":"user-guide/tui/modals/#opening-the-modal_4","title":"Opening the Modal","text":"<p>Methods: - Press <code>^e</code> - Footer shortcut - Menu \u2192 Export (future)</p>"},{"location":"user-guide/tui/modals/#export-formats","title":"Export Formats","text":"<p>Markdown (.md) </p><pre><code># Conversation Title\n\n## User (16:13:59)\nMessage content...\n\n## Assistant (16:14:02)\nResponse content...\n</code></pre><p></p> <p>JSON (.json) </p><pre><code>{\n  \"id\": \"uuid\",\n  \"title\": \"Conversation Title\",\n  \"created\": \"2025-11-26T16:13:59Z\",\n  \"messages\": [...]\n}\n</code></pre><p></p> <p>Plain Text (.txt) </p><pre><code>Conversation: Title\nDate: 2025-11-26\n\n[User - 16:13:59]\nMessage...\n\n[Assistant - 16:14:02]\nResponse...\n</code></pre><p></p>"},{"location":"user-guide/tui/modals/#export-options","title":"Export Options","text":"<pre><code>\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\n\u2551          Export Conversation              \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551                                           \u2551\n\u2551 Format:                                   \u2551\n\u2551   \u25c9 Markdown (.md)                       \u2551\n\u2551   \u25cb JSON (.json)                         \u2551\n\u2551   \u25cb Plain Text (.txt)                    \u2551\n\u2551                                           \u2551\n\u2551 Options:                                  \u2551\n\u2551   \u2611 Include timestamps                   \u2551\n\u2551   \u2611 Include token counts                 \u2551\n\u2551   \u2611 Include tool calls                   \u2551\n\u2551   \u2610 Include system messages              \u2551\n\u2551                                           \u2551\n\u2551 Filename:                                 \u2551\n\u2551   [conversation-2025-11-26.md]           \u2551\n\u2551                                           \u2551\n\u2551 Location:                                 \u2551\n\u2551   [~/Documents/]  [Browse...]            \u2551\n\u2551                                           \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551        [Export]    [Cancel]               \u2551\n\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\n</code></pre> <p>Options: - Include Timestamps: Add message times - Include Token Counts: Add token metrics - Include Tool Calls: Export tool executions - Include System Messages: Export system events - Filename: Custom output filename - Location: Output directory</p>"},{"location":"user-guide/tui/modals/#keyboard-navigation","title":"Keyboard Navigation","text":"<ul> <li><code>Tab</code>: Move between options</li> <li><code>Space</code>: Toggle checkboxes</li> <li><code>m</code>: Select Markdown</li> <li><code>j</code>: Select JSON</li> <li><code>t</code>: Select Text</li> <li><code>Enter</code>: Export</li> <li><code>Esc</code>: Cancel</li> </ul>"},{"location":"user-guide/tui/modals/#profile-selector","title":"Profile Selector","text":"<p>Choose configuration profile (future feature).</p>"},{"location":"user-guide/tui/modals/#layout_3","title":"Layout","text":"<pre><code>\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\n\u2551          Select Profile                   \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551                                           \u2551\n\u2551 Profile          Description              \u2551\n\u2551 \u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501 \u2551\n\u2551 \u25b6 default        Standard settings        \u2551\n\u2551   creative       High temperature, tools  \u2551\n\u2551   coding         Code-focused, tools      \u2551\n\u2551   research       Web search enabled       \u2551\n\u2551   safe           Read-only tools only     \u2551\n\u2551                                           \u2551\n\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n\u2551        [Select]    [Cancel]               \u2551\n\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\n</code></pre> <p>Selection: - <code>\u2191</code> <code>\u2193</code>: Navigate - <code>Enter</code>: Select profile - <code>Esc</code>: Cancel</p> <p>Profiles: - default: Balanced settings - creative: High temperature for brainstorming - coding: Optimized for code generation - research: Web tools enabled - safe: Read-only tools only</p>"},{"location":"user-guide/tui/modals/#next-steps","title":"Next Steps","text":"<ul> <li>Keyboard Shortcuts - Master modal navigation</li> <li>Themes - Customize appearance</li> <li>Configuration - Configure settings</li> <li>Features - Explore TUI features</li> </ul>"},{"location":"user-guide/tui/themes/","title":"Themes","text":""},{"location":"user-guide/tui/themes/#themes","title":"Themes","text":"<p>Consoul TUI supports themes to customize the visual appearance of the interface.</p>"},{"location":"user-guide/tui/themes/#consoul-official-themes","title":"Consoul Official Themes","text":"<p>Consoul provides two official themes based on the brand color palette featuring Sky Blue (#0085CC), Binary Slate (#3D3D3D), and Pure White (#FFFFFF).</p>"},{"location":"user-guide/tui/themes/#consoul-dark-default","title":"Consoul Dark (Default)","text":"<p>Official Consoul dark theme for comfortable coding sessions.</p> <p></p> <p>Color Palette: - Primary: Sky Blue (#0085CC) - Innovation and trust - Secondary: Deep Purple (#44385E) - Assistant messages - Surface: Binary Slate (#3D3D3D) - Panels and cards - Background: Dark Gray (#2A2A2A) - Base background - Text: Pure White (#FFFFFF) - Main text - Muted: Light Gray (#9BA3AB) - Secondary text</p> <p>Best For: - Low-light environments - Reduced eye strain - Professional coding sessions - Extended use - Night work</p> <p>Features: - Carefully calibrated contrast ratios - Easy on the eyes for long sessions - Professional appearance - Brand-consistent design</p>"},{"location":"user-guide/tui/themes/#consoul-light","title":"Consoul Light","text":"<p>Official Consoul light theme for bright environments.</p> <p></p> <p>Color Palette: - Primary: Sky Blue (#0085CC) - Innovation and trust - Secondary: Binary Slate (#3D3D3D) - Professional foundation - Surface: Very Light Gray (#F8F9FA) - Panels and cards - Background: Pure White (#FFFFFF) - Base background - Text: Binary Slate (#3D3D3D) - Main text - Muted: Gray (#6C757D) - Secondary text</p> <p>Best For: - Bright environments - Daytime use - High-contrast displays - Print-friendly screenshots - Well-lit offices</p> <p>Features: - Maximum readability in bright light - Clean, professional appearance - WCAG AA compliant contrast - Brand-consistent design</p>"},{"location":"user-guide/tui/themes/#textual-built-in-themes","title":"Textual Built-in Themes","text":"<p>In addition to the two Consoul custom themes, the TUI also provides access to Textual's built-in themes through the Settings modal.</p> <p>Available Built-in Themes: - monokai - Popular dark theme with vibrant colors - dracula - Dark theme with purple and pink accents - nord - Arctic, north-bluish color palette - gruvbox - Retro groove color scheme with warm tones - tokyo-night - Clean, elegant dark theme - catppuccin-mocha - Soothing pastel dark theme - catppuccin-latte - Soothing pastel light theme - solarized-light - Precision colors for readability - flexoki - Organic, inky color scheme - textual-dark - Textual's default dark theme - textual-light - Textual's default light theme - textual-ansi - ANSI color theme</p> <p>These themes are provided by the Textual framework and may not follow Consoul's brand guidelines, but they offer variety for personal preference.</p>"},{"location":"user-guide/tui/themes/#switching-themes","title":"Switching Themes","text":""},{"location":"user-guide/tui/themes/#via-settings-modal","title":"Via Settings Modal","text":"<ol> <li>Press <code>^comma</code> (Ctrl+,) to open settings</li> <li>Navigate to Appearance tab</li> <li>Click Theme dropdown</li> <li>Select desired theme</li> <li>Click Apply</li> </ol>"},{"location":"user-guide/tui/themes/#via-configuration-file","title":"Via Configuration File","text":"<p>Edit <code>~/.config/consoul/config.yaml</code>:</p> <pre><code>tui:\n  theme: consoul-dark  # or consoul-light, nord, gruvbox, etc.\n</code></pre> <p>Restart Consoul to apply changes.</p>"},{"location":"user-guide/tui/themes/#via-command-line","title":"Via Command Line","text":"<pre><code># Launch with specific theme (future feature)\nconsoul tui --theme consoul-light\n</code></pre>"},{"location":"user-guide/tui/themes/#theme-comparison","title":"Theme Comparison","text":"Theme Type Background Creator Best Use Case Consoul Dark Dark Dark Gray Consoul Default, professional work Consoul Light Light White Consoul Bright environments Monokai Dark Dark Brown Textual Vibrant coding Dracula Dark Dark Purple Textual Modern aesthetic Nord Dark Blue-Gray Textual Calm, focused work Gruvbox Dark Brown Textual Warm, retro feel Tokyo Night Dark Deep Blue Textual Modern, sleek Catppuccin Mocha Dark Warm Dark Textual Pastel lovers Catppuccin Latte Light Warm Light Textual Soft, gentle Solarized Light Light Beige Textual High precision Flexoki Dark Dark Brown Textual Organic feel"},{"location":"user-guide/tui/themes/#color-accessibility","title":"Color Accessibility","text":"<p>Both Consoul official themes follow accessibility guidelines:</p>"},{"location":"user-guide/tui/themes/#contrast-ratios","title":"Contrast Ratios","text":"<p>All themes meet WCAG AA standards: - Normal text: 4.5:1 minimum \u2705 - Large text: 3:1 minimum \u2705 - UI components: 3:1 minimum \u2705</p>"},{"location":"user-guide/tui/themes/#color-blindness-support","title":"Color Blindness Support","text":"<p>Themes are tested for color blindness: - Deuteranopia (red-green) \u2705 - Protanopia (red-green) \u2705 - Tritanopia (blue-yellow) \u2705</p> <p>Colors are never the only indicator: - Icons supplement colors - Text labels on all states - Border styles vary by state</p>"},{"location":"user-guide/tui/themes/#performance","title":"Performance","text":""},{"location":"user-guide/tui/themes/#rendering-performance","title":"Rendering Performance","text":"<p>Theme rendering performance considerations:</p> <ul> <li>Dark themes: Generally faster on OLED displays</li> <li>Light themes: Better on LCD displays in bright environments</li> <li>Simple themes (Consoul Dark/Light): Best performance</li> <li>Complex themes: May have slight rendering overhead</li> </ul>"},{"location":"user-guide/tui/themes/#terminal-compatibility","title":"Terminal Compatibility","text":"<p>All themes require: - \u2705 24-bit color support (true color) - \u2705 Unicode support - \u2705 Modern terminal emulator</p> <p>Check Support: </p><pre><code># Test 24-bit color support\necho $COLORTERM\n# Should output: truecolor or 24bit\n\n# Visual test\nprintf \"\\x1b[38;2;255;100;0mTRUECOLOR\\x1b[0m\\n\"\n</code></pre><p></p> <p>Recommended Terminals: - iTerm2 (macOS) - Alacritty - Windows Terminal - Kitty - WezTerm - Hyper</p>"},{"location":"user-guide/tui/themes/#fallback","title":"Fallback","text":"<p>On terminals without 24-bit color: - Consoul falls back to 256-color mode - Colors approximate theme colors - Some gradients may be less smooth</p>"},{"location":"user-guide/tui/themes/#theme-selection-guide","title":"Theme Selection Guide","text":""},{"location":"user-guide/tui/themes/#by-environment","title":"By Environment","text":"<p>Bright Office / Daytime: - \u2705 Consoul Light - \u2705 Catppuccin Latte - \u2705 Solarized Light</p> <p>Dim/Dark Room / Night: - \u2705 Consoul Dark (recommended) - \u2705 Nord - \u2705 Gruvbox - \u2705 Tokyo Night</p> <p>Variable Lighting: - \u2705 Consoul Dark (adjustable via screen brightness) - \u2705 Nord (works in most conditions)</p>"},{"location":"user-guide/tui/themes/#by-task","title":"By Task","text":"<p>Professional Work: - \u2705 Consoul Dark - \u2705 Consoul Light - \u2705 Nord</p> <p>Coding (Long Sessions): - \u2705 Consoul Dark - \u2705 Gruvbox - \u2705 Tokyo Night</p> <p>Writing/Documentation: - \u2705 Consoul Light - \u2705 Solarized Light</p> <p>Personal Preference / Fun: - \u2705 Any theme you like!</p>"},{"location":"user-guide/tui/themes/#tips-tricks","title":"Tips &amp; Tricks","text":""},{"location":"user-guide/tui/themes/#matching-terminal-theme","title":"Matching Terminal Theme","text":"<p>For a consistent experience, match Consoul's theme with your terminal:</p> <p>iTerm2 (macOS): </p><pre><code>Preferences \u2192 Profiles \u2192 Colors \u2192 Color Presets\nSelect matching theme\n</code></pre><p></p> <p>Alacritty: </p><pre><code># ~/.config/alacritty/alacritty.yml\n# Import matching color scheme\n</code></pre><p></p>"},{"location":"user-guide/tui/themes/#quick-theme-testing","title":"Quick Theme Testing","text":"<p>Try different themes to find your favorite:</p> <ol> <li>Open Settings (<code>^comma</code>)</li> <li>Switch theme</li> <li>Click Apply (changes apply immediately)</li> <li>Test it out</li> <li>Switch again if desired</li> </ol> <p>No restart needed - themes apply live!</p>"},{"location":"user-guide/tui/themes/#troubleshooting","title":"Troubleshooting","text":""},{"location":"user-guide/tui/themes/#colors-look-wrong","title":"Colors Look Wrong","text":"<p>Problem: Colors appear different than screenshots</p> <p>Solutions:</p> <ol> <li> <p>Check 24-bit color support:    </p><pre><code>echo $COLORTERM\n# Should show: truecolor or 24bit\n</code></pre><p></p> </li> <li> <p>Update terminal: Use latest version of your terminal emulator</p> </li> <li> <p>Try different terminal: Some terminals have better color support</p> </li> <li> <p>Check terminal color settings: Ensure true color is enabled in preferences</p> </li> </ol>"},{"location":"user-guide/tui/themes/#theme-not-applying","title":"Theme Not Applying","text":"<p>Problem: Theme selection doesn't change colors</p> <p>Solutions:</p> <ol> <li>Click Apply button in settings</li> <li>Check config file for typos:    <pre><code>tui:\n  theme: consoul-dark  # Correct spelling\n</code></pre></li> <li>Ensure theme name is lowercase with hyphens</li> <li>Restart Consoul if changes still don't apply</li> </ol>"},{"location":"user-guide/tui/themes/#performance-issues","title":"Performance Issues","text":"<p>Problem: Theme rendering is slow</p> <p>Solutions:</p> <ol> <li>Try simpler themes (Consoul Dark, Consoul Light)</li> <li>Update terminal to latest version</li> <li>Reduce terminal window size</li> <li>Check terminal performance settings</li> </ol>"},{"location":"user-guide/tui/themes/#future-custom-themes","title":"Future: Custom Themes","text":"<p>Custom theme support is planned for a future release:</p> <pre><code># Future: ~/.config/consoul/themes/custom.yaml\nname: \"My Custom Theme\"\ndark: true\n\ncolors:\n  primary: \"#FF5733\"\n  secondary: \"#33FF57\"\n  background: \"#1E1E1E\"\n  # ... more colors\n</code></pre> <p>Stay tuned for theme customization capabilities!</p>"},{"location":"user-guide/tui/themes/#next-steps","title":"Next Steps","text":"<ul> <li>Interface Guide - See how themes affect UI</li> <li>Settings Modal - Learn to change themes</li> <li>Configuration - Configure theme settings</li> </ul>"}]}